<div class="unit-content">
<body id="data_security_records_learning_objectives"><a name="data_security_records_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you'll be able to: <ul class="ul bulletList">
<li class="li">List the four different ways to control access to records.</li>
<li class="li">Describe a use case for each of the four record-level security controls.</li>
<li class="li">Explain how the different record controls interact with each other.</li>
<li class="li">Set organization-wide sharing defaults to control access to records.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="data_security_records_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="data_security_records_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Overview of Record-Level Security</span></h2>
<div class="body">
<p class="p">By setting object and field-level access permissions in profiles and permission
                        sets, you determine all of the objects and fields that any user of your app
                        can access. The next step is to set permissions for the actual records
                        themselves. To control data with greater precision, you can allow particular
                        users to view an object, but then restrict the individual records they're
                        allowed to see. </p>
<div class="p">Record access determines which individual records users can view and edit in each
                        object they have access to in their profile. Before configuring record
                        access, it’s useful to answer the following questions:<ul class="ul bulletList">
<li class="li">Should your users have open access to every record, or just a
                                        subset?</li>
<li class="li">If it's a subset, what rules should determine whether the user
                                        can access them?</li>
</ul>
</div>
<p class="p">Let’s say you create a new
                        profile called Recruiter to implement the object-level permissions required
                        by recruiters. By restricting the power to delete recruiting-related
                        objects, recruiters will never be able to delete these objects. However, the
                        fact that you're granting recruiters permission to create, read, or edit
                        recruiting objects does not necessarily mean that recruiters will be allowed
                        to read or edit every recruiting object record. This is a consequence of two
                        important concepts in the platform: </p>
<div class="p"><ul class="ul bulletList">
<li class="li">The permissions on a record are always evaluated according to a
                                        combination of object-, field-, and record-level
                                        permissions.</li>
<li class="li">When object- versus record-level permissions conflict, the most
                                        restrictive settings win.</li>
</ul>
What this means is that even if you grant a profile create, read, and
                        edit permissions on the recruiting objects, if the record-level permissions
                        for an individual recruiting record prove to be more restrictive, those will
                        be the rules that will define what a recruiter can access. </div>
<p class="p">The platform provides the following record-level security and sharing tools.</p>
<ul class="ul bulletList">
<li class="li"><strong class="ph b">Organization-wide defaults</strong>—specify the default level of
                                access users have to each others’ records. </li>
<li class="li"><strong class="ph b">Role hierarchies</strong>—allow you to ensure a manager will always
                                have access to the same records as his or her subordinates. Each
                                role in the hierarchy represents a level of data access that a user
                                or group of users needs. </li>
<li class="li"><strong class="ph b">Sharing rules</strong>—enable you to make automatic exceptions to
                                organization-wide defaults for particular groups of users, to give
                                them access to records they don’t own or can’t normally see.</li>
<li class="li"><strong class="ph b">Manual sharing</strong>—allows record owners to give read and edit
                                permissions to users who might not have access to the record any
                                other way. </li>
</ul>
<p class="p">These four methods are listed in order of increasing access, as shown in the
                        diagram below. You use organization-wide sharing settings to lock down your
                        data to the most restrictive level, and then use the other record-level
                        security tools to grant access to selected users, as required. </p>
<span class="image image-block"><img alt="Diagram of the relationship between the Position and Job Application custom objects in a record detail page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-uscac30d566a68bfc4a34f3b9607be2a66.png"/></span>
<div class="p">The visibility and access for any type of data is determined by the interaction
                        of the above security controls, based on these key principles.<ul class="ul bulletList">
<li class="li">A user’s baseline permissions on any object are determined by
                                        the profile.</li>
<li class="li">If the user has any permission sets assigned, these also set the
                                        baseline permissions in conjunction with the profile. </li>
<li class="li">Access to records a user does not own are set first by the
                                        organization-wide defaults.</li>
<li class="li">If the organization-wide defaults are anything less than
                                                <span class="keyword parmname">Public Read/Write</span>, you can open
                                        access back up to certain roles using the role
                                        hierarchy.</li>
<li class="li">You can further expand access, to additional groups of users,
                                        using sharing rules. </li>
<li class="li">Finally, each record owner can manually share individual records
                                        with other users by using the Share button on the
                                        record.</li>
</ul>
</div>
<p class="p">You’ve already seen how to configure object-level and field-level access using
                        profiles and permission sets. In the rest of this module, we’ll cover
                        details of the various record-level security controls. </p>
</div>
</div>
<div class="topic nested0" id="data_security_records_owd" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="data_security_records_owd"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Organization-Wide Defaults</span></h2>
<div class="body">
<p class="p">Organization-wide defaults specify the baseline level of access that the most restricted user
      should have. You can use organization-wide defaults to lock down your data to this most
      restrictive level, and then use our other record-level security and sharing tools (role
      hierarchies, sharing rules, and manual sharing) to open up the data to other users who need to
      access it.</p>
<p class="p">Watch this video to get an overview of the different ways to manage record access via
      organization-wide defaults.</p>
<p class="p"><iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//play.vidyard.com/4I62yWd-0q-wpv2qR3hyKQ" webkitallowfullscreen="1" width="640"></iframe>
</p>
<p class="p">Organization-wide sharing settings specify the default level of access to records and can be
      set separately for each type of standard or custom object. Object permissions determine the
      baseline level of access for all records of an object. Organization-wide defaults modify those
      permissions for records users don't own. Organization-wide defaults can never grant users more
      access than they have through their object permission. </p>
<div class="p">To determine the organization-wide defaults you need for your app, you need to answer the
      following questions for each object. <ol class="ol enumList">
<li class="li">Who is the most restricted user of this object? </li>
<li class="li"> Is there ever going to be an instance of this object that this user shouldn't be
          allowed to see?</li>
<li class="li">Is there ever going to be an instance of this object that this user shouldn't be allowed
          to edit?</li>
</ol>
</div>
<span class="image image-block"><img alt="A diagram for determining the sharing model for objects" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us5c174b9dc0fa480ea60c2b158b6302bf.jpg"/></span>
<p class="p">Based on your answers to these questions, you can set the sharing model for that object to
      one of these settings.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d102332e199">Field</th>
<th class="featureTableHeader " id="d102332e202">Description</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Field" headers="d102332e199"><span class="keyword parmname">Private </span></td>
<td class="entry" data-title="Description" headers="d102332e202">Only the record owner, and users above that role in the hierarchy, can view,
              edit, and report on those records. </td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d102332e199"><span class="keyword parmname">Public Read Only</span></td>
<td class="entry" data-title="Description" headers="d102332e202">
<p class="p">All users can view and report on records but not edit them. Only the owner, and
                users above that role in the hierarchy, can edit those records. </p>
</td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d102332e199"><span class="keyword parmname">Public Read/Write</span></td>
<td class="entry" data-title="Description" headers="d102332e202">All users can view, edit, and report on all records. </td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d102332e199"><span class="keyword parmname">Controlled by Parent </span></td>
<td class="entry" data-title="Description" headers="d102332e202">
<p class="p">A user can perform an action (such as view, edit, or delete) on a contact based on
                whether he or she can perform that same action on the record associated with it.</p>
</td>
</tr>
</tbody>
</table></div>
<p class="p"> In environments where the
      organization-wide sharing setting for an object is <span class="keyword parmname">Private </span> or
        <span class="keyword parmname">Public Read Only</span>, an administrator can grant users additional access to
      records by setting up a role hierarchy or defining sharing rules. However, sharing rules can
      only be used to grant additional access—they cannot be used to restrict access to
      records beyond what was originally specified with the organization-wide sharing defaults.</p>
<div class="p">As an example, let’s go through and answer the above list of questions for the Position
      object in the Recruiting app.<ol class="ol enumList">
<li class="li"><strong class="ph b">Who is the most restricted user of this object? </strong><p class="p">A member of the Standard
            Employee profile. All that they're allowed to do is view a position.</p>
</li>
<li class="li">
<strong class="ph b">Is there ever going to be an instance of this object that this user shouldn't be
            allowed to see?</strong><p class="p">No. Although the values for the minimum and maximum pay are hidden
            from standard employees, they're still allowed to view all position records.</p>
</li>
<li class="li"><strong class="ph b">Is there ever going to be an instance of this object that this user shouldn't be
            allowed to edit? </strong><p class="p">Yes. Standard employees aren’t allowed to edit any position
            record. </p>
</li>
</ol>
</div>
<p class="p">According to the above flowchart, answering “Yes” to question #3 means that the sharing model
      for the Position object should be set to <span class="keyword parmname">Public Read Only</span>. By repeating
      the same exercise with the other recruiting objects, you can easily figure out the appropriate
      organization-wide default settings for them. The Standard Employee profile is the most
      restricted user for each object, and there are going to be candidate, job application, and
      review records that particular employees won't be able to view. Consequently, the sharing
      model for the Candidate, Job Application, and Review objects should all be set to
        <span class="keyword parmname">Private </span>. </p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>You can't set the organization-wide defaults for the Review object. The reason is that
      object is on the detail side of a master-detail relationship, and, a detail record
      automatically inherits the sharing setting of its parent. So in our app, the Review object is
      automatically set to <span class="keyword parmname">Private </span>.</p></div></div></div></div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Setting Organization-Wide Sharing Defaults</h3>
<div class="p">To set organization-wide sharing defaults:<ol class="ol enumList">
<li class="li" id="org_wide_settings_step1"><a name="org_wide_settings_step1"></a>From Setup, enter <kbd class="ph userinput">Sharing Settings</kbd>
            in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Sharing
              Settings</strong>.</li>
<li class="li" id="org_wide_settings_step2"><a name="org_wide_settings_step2"></a>Click <strong class="ph uicontrol">Edit</strong> in the
            Organization-Wide Defaults area.<span class="image image-block"><img alt="The Org-Wide Defaults Edit page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use8a3ad4e0f19ebd8930411e52514237b.jpg"/></span></li>
<li class="li">For each object, select the default access you want to use.</li>
<li class="li">To disable automatic access using your hierarchies, deselect <strong class="ph uicontrol">Grant Access
              Using Hierarchies</strong> for any custom object that does not have a default
            access of Controlled by Parent. </li>
</ol>
</div>
<p class="p">In environments where the organization-wide sharing setting for an object is
          <span class="keyword parmname">Private </span> or <span class="keyword parmname">Public Read Only</span>, an administrator
        can grant users additional access to records by setting up a role hierarchy or defining
        sharing rules. However, sharing rules can only be used to grant additional access—they
        cannot be used to restrict access to records beyond what was originally specified with the
        organization-wide sharing defaults. </p>
<p class="p">By default, Salesforce uses hierarchies, like a role hierarchy, to automatically grant
        access of records to users above the record owner in the hierarchy. Setting an object to
          <span class="keyword parmname">Private </span> makes those records visible only to record owners and those
        above them in the role hierarchy. Use the <strong class="ph uicontrol">Grant Access Using
          Hierarchies</strong> checkbox to disable access to records to users above the record
        owner in the hierarchy for custom objects. If you deselect this checkbox for a custom
        object, only the record owner and users granted access by the organization-wide defaults
        receive access to the records. </p>
<p class="p"><span class="ph" id="GrantAccessUsingHierarchiesNote"><a name="GrantAccessUsingHierarchiesNote"></a>If <strong class="ph uicontrol">Grant Access Using
            Hierarchies</strong> is deselected, users that are higher in the role hierarchy
          don’t receive automatic access. However, some users—such as those with the
          “View All” and “Modify All” object permissions and the
          “View All Data” and “Modify All Data” system
          permissions—can still access records they don’t own.</span></p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Updating the organization-wide defaults automatically runs sharing recalculation to apply any access changes to your records. You’ll receive a notification email when the recalculation completes and you can refresh the Sharing Settings page to see your changes. To view the update status, from Setup, enter <kbd class="ph userinput">View Setup Audit Trail</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">View Setup Audit Trail</strong>.</p></div></div></div></div></div>
</div>
<p class="p">Once you’ve locked down your data with organization-wide defaults, the resulting settings
      might be too restrictive for some users. You can then use the remaining record-level security
      controls: role hierarchies, sharing rules, and manual sharing to open up record access
      selectively to specific employees who'll need it.</p>
</div>
</div>
<div class="topic nested0" id="data_security_records_tell_me_more" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="data_security_records_tell_me_more"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5">Tell Me More...</h2>
<div class="body">
<p class="p">Apex managed sharing allows developers to programmatically share records associated with
      custom objects. When you use Apex managed sharing for any custom object, only users with the
      “Modify All Data” permission can add or change the sharing on that custom object's records,
      and the sharing access is maintained across record owner changes. For more information, see
        <a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=security_apex_sharing_reasons.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Apex Sharing</a>.</p>
</div>
</div>
<div class="topic nested0" id="data_security_records_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="data_security_records_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=security_sharing_considerations.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Sharing Considerations</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=security_sharing_owd_default_settings.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Default Organization-Wide
                    Sharing Settings</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.securityImplGuide.meta/securityImplGuide/" target="_blank" title="HTML (New Window)">Security Implementation
                Guide</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div>