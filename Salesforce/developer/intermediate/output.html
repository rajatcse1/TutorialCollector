<h1>Get to Know the Salesforce APIs</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="api_basics_overview_learning_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_learning_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Describe the benefits of the API-first approach to development.</li>
<li class="li">State use cases for REST API, SOAP API, Bulk API, and Streaming API.</li>
<li class="li">Name the two types of API limits and describe how they’re calculated.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_overview_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>API First at Salesforce</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Ahoy, matey! Are you ready to set sail on the high seas in search of the perfect Salesforce API for the integration
      you’re building? Well, captain, grab your eye patch and find a parrot. You’re about to
      navigate the Force.com waters and
      learn all about our APIs.<p class="p">The Salesforce API landscape is as vast as
        the ocean blue. That’s because Salesforce
        takes an API-first approach to building features on the Salesforce App Cloud. API first means
        building a robust API for a feature before focusing on designing its UI. This approach gives
        you, the Salesforce developer,
        flexibility to manipulate your data however you want. </p>
<p class="p">Salesforce knows that its customers and
        partners are always thinking of new ways to extend Salesforce functionality and exciting
        apps to build for the AppExchange. Providing a comprehensive toolbox for developing on the platform is a top priority. This
        approach also lets Salesforce build UIs on
        top of the APIs, ensuring that the behavior is the same between them.</p>
<p class="p">Think of this
        module as your API first mate. Together we’ll walk through some general API info, perform a
        survey of Salesforce’s API suite,
        and dive into using a few common APIs. All this information will equip you with the
        knowledge you need to choose the right API for your project.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_overview_data_APIs" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_data_APIs"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Salesforce
      Data APIs</span></h2>
<div class="body conbody">
<div class="section"><div class="p">In the sea of Salesforce APIs,
      there’s a key archipelago of commonly used APIs that we’ll focus on in this module. They are
        REST API, SOAP API, Bulk API, and Streaming API. Together they make up the
        Salesforce data APIs. Their purpose
      is to let you manipulate your Salesforce data, whereas other APIs let you do things like customize page layouts or build custom
      development tools. You can use other Salesforce APIs to manipulate subsets of
      your Salesforce data, too. For
      example, Wave REST API focuses on
        Wave Analytics. But these four
      APIs apply broadly across the spectrum of core Salesforce data.<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Salesforce data APIs" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7a58ee5114782a22262850e4bef6acf0.png"/></span></div>
</p>
</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading5">REST API</h3>
<p class="p">REST API is a simple and powerful
        web service based on RESTful principles. It exposes all sorts of Salesforce functionality via REST
        resources and HTTP methods. For example, you can create, read, update, and delete (CRUD)
        records, search or query your data, retrieve object metadata, and access information about
        limits in your org. REST API
        supports both XML and JSON. </p>
<p class="p">Because REST API has a lightweight
        request and response framework and is easy to use, it’s great for writing mobile and web
        apps.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">SOAP API</h3>
<p class="p">SOAP API is a robust and powerful web
        service based on the industry-standard protocol of the same name. It uses a Web Services
        Description Language (WSDL) file to rigorously define the parameters for accessing data
        through the API. SOAP API supports XML
        only. Most of the SOAP API
        functionality is also available through REST API. It just depends on which
        standard better meets your needs. </p>
<p class="p">Because SOAP API uses the WSDL file as
        a formal contract between the API and consumer, it’s great for writing server-to-server
        integrations.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Bulk API</h3>
<p class="p">Bulk API is a specialized RESTful API
        for loading and querying lots of data at once. By lots, we mean 50,000 records or more. Bulk API is asynchronous, meaning that
        you can submit a request and come back later for the results. This approach is the preferred
        one when dealing with large amounts of data. </p>
<p class="p">Bulk API is great for performing
        tasks that involve lots of records, such as loading data into your org for the first
        time.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Streaming API</h3>
<p class="p">Streaming API is a specialized API for
        setting up notifications that trigger when changes are made to your data. It uses a
        publish-subscribe, or pub/sub, model in which users can subscribe to channels that broadcast
        certain types of data changes. </p>
<p class="p">The pub/sub model reduces the number of API requests by eliminating the need for polling.
          Streaming API is great for writing
        apps that would otherwise need to frequently poll for changes.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_overview_access" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_access"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>API Access and Authentication</span></h2>
<div class="body conbody">
<div class="section"><div class="p">You don’t need a treasure map to access Salesforce APIs. All you need is an org
      on one of the following editions: Enterprise Edition, Unlimited Edition, Developer Edition,
      Performance Edition, or Professional Edition (with an add-on). Make sure that you have the
      “API Enabled” permission, and you’re ready to start integrating.<p class="p">All API calls, except for
        the SOAP API
        <samp>login()</samp> call, require authentication. You can either use one of the supported OAuth flows or
        authenticate with a session ID retrieved from the SOAP API
        <samp>login()</samp> call. Check the developer guide for your API of choice to get started.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_overview_limits" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_limits"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>API Limits</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Any captain worth his or her salt knows when to put limits on the crew for the good of
      the ship. If the captain lets the sailors drink grog all day long, nothing gets done.
      Similarly, Salesforce limits the number of
      API calls per org to ensure the health of the instance. These limits exist to prevent rogue
      scripts from smashing our servers into driftwood. They don’t get in the way of your everyday
      work. Nonetheless, it’s a good idea to get familiar with them.<p class="p">There are two types of API
        limits. Concurrent limits cap the number of long-running calls (20 seconds or longer) that
        are running at one time. Total limits cap the number of calls made within a rolling 24-hour
        period. </p>
<p class="p">Concurrent limits vary by org type. For a Developer Edition org, the limit is
        five long-running calls at once. For a sandbox org, it’s 25 long-running calls.</p>
<p class="p">Total
        limits vary by org edition, license type, and expansion packs that you purchase. For
        example, an Enterprise Edition org gets 1,000 calls per Salesforce license and 200 calls per
        Force.com Light App license. With the Unlimited Apps Pack, that same Enterprise Edition org
        gets an extra 4,000 calls. Total limits are also subject to minimums and maximums based on
        the org edition, but we won’t get into that here. If you want to know more, check out the
        API Request Limits link in the Resources section. </p>
<p class="p">You have several ways to check your
        remaining API calls. You can view them in the API Usage box on the System Overview page.
        From Setup, enter <kbd class="ph userinput">System Overview</kbd> in the <span class="keyword parmname">Quick
          Find</span> box, then select <strong class="ph uicontrol">System Overview</strong>. You can also set
        up notifications for when your org exceeds a number of API calls that you designate. To do
        so, from Setup, enter <kbd class="ph userinput">API Usage Notifications</kbd> in the <span class="keyword parmname">Quick
          Find</span> box, then select <strong class="ph uicontrol">API Usage Notifications</strong>.
        </p>
<p class="p">When using REST or SOAP API, the
          LimitInfoHeader response header gives you information on your remaining calls. You can also access the
          REST API
        Limits resource for information about all sorts of limits in your org.</p>
</div></div>
</div>
</div>
<div class="topic nested0" id="integrate_what_is_api" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="integrate_what_is_api"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Which API Do I Use?</span></h2>
<div class="body">
<p class="p" id="api_intro_trailhead"><a name="api_intro_trailhead"></a>Choosing the right API for your
                        integration needs is an important decision. Here’s some information on our
                        most commonly used APIs, including supported protocols, data formats,
                        communication paradigms, and use cases. Treat this section as a reference
                        you can return to when you’re considering which API to use.</p>
<p class="p" id="api_intro_trailhead_data_apis"><a name="api_intro_trailhead_data_apis"></a>Note the four data APIs that
                        we talked about already. We’ll be diving into each of them next.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader vertical-align-top " id="d30903e463">API Name</th>
<th class="featureTableHeader vertical-align-top " id="d30903e466">Protocol</th>
<th class="featureTableHeader vertical-align-top " id="d30903e469">Data Format</th>
<th class="featureTableHeader vertical-align-top " id="d30903e472">Communication</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">REST API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON, XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">SOAP API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">SOAP (WSDL)</td>
<td class="entry" data-title="Data Format" headers="d30903e469">XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Chatter REST API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON, XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous (photos are processed
                                                  asynchronously)</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Wave Analytics REST API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON, XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Bulk API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST</td>
<td class="entry" data-title="Data Format" headers="d30903e469">CSV, JSON, XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Asynchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Metadata API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">SOAP (WSDL)</td>
<td class="entry" data-title="Data Format" headers="d30903e469">XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Asynchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Streaming API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">Bayeux</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON</td>
<td class="entry" data-title="Communication" headers="d30903e472">Asynchronous (stream of data)</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Apex REST API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON, XML, Custom</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Apex
                                                  SOAP API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">SOAP (WSDL)</td>
<td class="entry" data-title="Data Format" headers="d30903e469">XML</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
<tr>
<td class="entry" data-title="API Name" headers="d30903e463">Tooling API</td>
<td class="entry" data-title="Protocol" headers="d30903e466">REST or SOAP (WSDL)</td>
<td class="entry" data-title="Data Format" headers="d30903e469">JSON, XML, Custom</td>
<td class="entry" data-title="Communication" headers="d30903e472">Synchronous</td>
</tr>
</tbody>
</table></div>
<div class="section" id="when_rest_api_section"><a name="when_rest_api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading12"><span class="ph" id="when_rest_api_title"><a name="when_rest_api_title"></a>When to Use REST API</span></h3>
<p class="p" id="when_rest_api"><a name="when_rest_api"></a>REST API
                                provides a powerful, convenient, and simple REST-based web services
                                interface for interacting with Salesforce. Its
                                advantages include ease of integration and development, and
                                it’s an excellent choice of technology for use with mobile
                                applications and web projects. <span class="ph" id="rest_or_bulk"><a name="rest_or_bulk"></a>However, if you
                                        have many records to process, consider using Bulk API,
                                        which is based on REST principles and optimized for large
                                        sets of data.</span></p>
</div>
<div class="section" id="when_api_section"><a name="when_api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading13"><span class="ph" id="when_api_title"><a name="when_api_title"></a>When to Use SOAP API</span></h3>
<p class="p"><span class="ph" id="api_usage"><a name="api_usage"></a>SOAP API
                                        provides a powerful, convenient, and simple SOAP-based web
                                        services interface for interacting with Salesforce.
                                        You can use SOAP API to
                                        create, retrieve, update, or delete records. You can also
                                        use SOAP API to
                                        perform searches and much more. Use SOAP API in
                                        any language that supports web services.</span></p>
<p class="p">For example, you can use SOAP API to
                                integrate Salesforce
                                with your org’s ERP and finance systems. You can also deliver
                                real-time sales and support information to company portals and
                                populate critical business systems with customer information.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading14">When to Use Chatter REST API</h3>
<p class="p">Use Chatter REST API
                        to display Salesforce
                        data, especially in mobile applications. In addition to Chatter
                        feeds, users, groups, and followers, Chatter REST API
                        provides programmatic access to files, recommendations, topics,
                        notifications, Data.com
                        purchasing, and more. Chatter REST API
                        is similar to APIs offered by other companies with feeds, such as Facebook
                        and Twitter, but it also exposes Salesforce
                        features beyond Chatter.</p>
</div>
<div class="section" id="when_wave_api_section"><a name="when_wave_api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading15"><span class="ph" id="when_wave_api_title"><a name="when_wave_api_title"></a>When to Use the Wave Analytics REST API</span></h3>
<p class="p">You can access Wave Analytics assets—such as datasets, lenses, and
                                dashboards—programmatically using the Wave REST API. Send
                                queries directly to the Wave Platform. Access datasets that have
                                been imported into the Wave Platform. Create and retrieve Wave
                                Analytics lenses. Access XMD information. Retrieve a list of dataset
                                versions. Create and retrieve Wave Analytics applications. Create,
                                update, and retrieve Wave Analytics dashboards. Retrieve a list of
                                dependencies for an application. Determine what features are
                                available to the user. Work with snapshots. Manipulate replicated
                                datasets.</p>
</div>
<div class="section" id="when_bulk_Api_section"><a name="when_bulk_Api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading16"><span class="ph" id="when_bulk_api_title"><a name="when_bulk_api_title"></a>When to Use Bulk API</span></h3>
<p class="p" id="when_bulk_para1"><a name="when_bulk_para1"></a><span class="ph" id="bulk_api_intro"><a name="bulk_api_intro"></a>Bulk API
                                        is based on REST principles and is optimized for loading or
                                        deleting large sets of data.</span> You can use it to query,
                                queryAll, insert, update, upsert, or delete many records
                                asynchronously by submitting batches. Salesforce processes
                                batches in the background.</p>
<p class="p" id="when_bulk_para2"><a name="when_bulk_para2"></a><span class="ph" id="versus_soap_api"><a name="versus_soap_api"></a>SOAP API,
                                        in contrast, is optimized for real-time client applications
                                        that update a few records at a time. You can use SOAP API
                                        for processing many records, but when the data sets contain
                                        hundreds of thousands of records, SOAP API is
                                        less practical.</span>
<span class="ph" id="bulk_api_usage"><a name="bulk_api_usage"></a>Bulk API
                                        is designed to make it simple to process data from a few
                                        thousand to millions of records.</span></p>
<p class="p" id="bulk_api_use_data_loader"><a name="bulk_api_use_data_loader"></a>The easiest way to use Bulk API is to
                                enable it for processing records in Data Loader using
                                CSV files. Using Data Loader avoids
                                the need to write your own client application.</p>
</div>
<div class="section" id="when_bulk_api_section"><a name="when_bulk_api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading17"><span class="ph" id="when_metadata_api_title"><a name="when_metadata_api_title"></a>When to Use Metadata API</span></h3>
<p class="p" id="metadata_intro"><a name="metadata_intro"></a>Use Metadata API to
                                retrieve, deploy, create, update, or delete customizations for your
                                org. The most common use is to migrate changes from a sandbox or testing
                                org to your production environment. Metadata API is
                                intended for managing customizations and for building tools that can
                                manage the metadata model, not the data itself. </p>
<div class="p"><span class="ph" id="metadata_tools_intro"><a name="metadata_tools_intro"></a>The easiest way to access the functionality
                                        in Metadata API is
                                        to use the Force.com IDE or Force.com Migration Tool.
                                        Both tools are built on top of Metadata API
                                        and use the standard Eclipse and Ant tools, respectively, to
                                        simplify working with Metadata API. </span>
<a name="eclipse_and_ant"></a><ul class="ul bulletList" id="eclipse_and_ant">
<li class="li">Force.com IDE is built on the Eclipse platform, for programmers
                                                familiar with integrated development environments.
                                                Code, compile, test, and deploy from within the IDE. </li>
<li class="li">The Force.com Migration Tool
                                                  is ideal if you use a script or the command line
                                                  for moving metadata between a local directory and
                                                  a Salesforce
                                                  org.</li>
</ul>
</div>
</div>
<div class="section" id="when_streaming_api_section"><a name="when_streaming_api_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading18">When to Use Streaming API</h3>
<p class="p">Use Streaming API to receive
                                notifications for changes to data that match a SOQL query
                                that you define. </p>
<p class="p">Streaming API is useful when
                                you want notifications to be pushed from the server to the client.
                                Consider Streaming API
                                for applications that poll frequently. Applications that have
                                constant polling against the Salesforce
                                infrastructure consume unnecessary API call and
                                processing time. Streaming API
                                reduces the number of requests that return no data, and is also
                                ideal for applications that require general notification of data
                                changes. </p>
<p class="p">Streaming API enables you to
                                reduce the number of API calls and improve performance.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading19">When to Use Apex
                                REST API</h3>
<p class="p">Use Apex
                                REST API when you
                                want to expose your Apex classes and methods so that external
                                applications can access your code through REST architecture. Apex
                                REST API supports
                                both OAuth 2.0 and Session ID for authorization.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading20">When to Use Apex
                                SOAP API</h3>
<p class="p">Use Apex
                                SOAP API when you want
                                to expose Apex
                                methods as SOAP web service APIs so that external applications can
                                access your code through SOAP. </p>
<p class="p">Apex
                                SOAP API supports both
                                OAuth 2.0 and Session ID for authorization.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading21">When to Use Tooling API</h3>
<p class="p">Use Tooling API to integrate
                                Salesforce metadata with other systems. Metadata types are exposed
                                as sObjects, so you can access one component of a complex type. This
                                field-level access speeds up operations on complex metadata types.
                                You can also build custom development tools for Force.com
                                applications. For example, use <span class="ph">Tooling API</span> to manage and deploy
                                working copies of Apex classes and triggers and Visualforce pages
                                and components. You can also set checkpoints or heap dump markers,
                                execute anonymous Apex, and
                                access logging and code coverage information.</p>
<p class="p">REST and SOAP are both supported.</p>
</div>
</div>
</div>
<div class="topic nested0" id="api_basics_overview_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_overview_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading22"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><a class="xref" href="https://developer.salesforce.com/events/webinars/salesforce_platform-apis" target="_blank">Salesforce API Series: Integrating
                                Applications with Force.com</a></p>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_rest.meta/api_rest/" target="_blank">Force.com REST API Developer
                                        Guide</a></cite></p>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api.meta/api/" target="_blank">SOAP API Developer
                                        Guide</a></cite></p>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_asynch.meta/api_asynch/" target="_blank">Bulk API Developer
                                        Guide</a></cite></p>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/" target="_blank">Force.com Streaming API
                                        Developer Guide</a></cite></p>
<p class="p"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.salesforce_app_limits_cheatsheet.meta/salesforce_app_limits_cheatsheet/salesforce_app_limits_platform_api.htm" target="_blank">API Request Limits</a></p>
</div>
</div>
</body></div><h1>Use REST API</h1><div class="unit-content">
<body id="api_basics_rest_learning_objectives"><a name="api_basics_rest_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Log in to Workbench and navigate to REST Explorer.</li>
<li class="li">Use the describe resource.</li>
<li class="li">Create an account using REST API.</li>
<li class="li">Execute a query using REST API.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_rest_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>REST Resources and Methods</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Land ho! We’ve spotted the Isle of REST ahead of the bow, captain. Before we dock and
      start using the API, let’s talk about REST resources and methods.<p class="p">A REST resource is an abstraction of a piece of
            information or an action, such as a single data record, a collection of records, or a
            query. Each resource in REST API is identified by a
            named Uniform Resource Identifier (URI) and is accessed using standard HTTP methods
            (HEAD, GET, POST, PATCH, DELETE). REST API is based on the
            usage of resources, their URIs, and the links between them.</p>
<div class="p"> You use a resource to interact with your Salesforce org. For example, you can:<ul class="ul bulletList">
<li class="li">Retrieve summary information about the API versions available to you.</li>
<li class="li">Obtain detailed information about a Salesforce object, such
                    as Account, User, or a custom object.</li>
<li class="li"> Perform a query or search.</li>
<li class="li">Update or delete records.</li>
</ul>
</div>
<p class="p">A REST request consists of four components: a resource URI, an HTTP method, request
        headers, and a request body. Request headers specify metadata for the request. The request
        body specifies data for the request, when necessary. If there’s no data to specify, the body
        is omitted from the request.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_rest_describe_account" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_describe_account"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Describe the Account Object</span></h2>
<div class="body conbody">
<div class="section"><div class="p">It’s time to get our feet wet. We’re going to use Workbench to make some API calls.
      Workbench is a suite of tools for interacting with your Salesforce org through the API. Because
      you can make REST requests from any HTTP sender, there are plenty of other tools available for
      you to use (for example, check out cURL or Postman). But because Workbench provides a friendly
      framework specifically for Salesforce
      APIs, it’s the perfect way to dig in before you’re ready to write a full-on integration.<div class="p">The
        first step is to log in to Workbench.<ol class="ol enumList">
<li class="li">Log in to your Trailhead DE org and navigate to <a class="xref" href="https://workbench.developerforce.com" target="_blank">Workbench</a>.</li>
<li class="li">For Environment, select <strong class="ph uicontrol">Production</strong>. </li>
<li class="li">For API Version, select the highest available number.</li>
<li class="li">Make sure that you select <strong class="ph uicontrol">I agree to the terms of service</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Login with Salesforce</strong>.</li>
</ol>
</div>
<p class="p">You’ve arrived at the Workbench home page. For this module, we use only one of
        Workbench’s many tools, the REST Explorer.</p>
<p class="p">In the top menu, select <span class="ph menucascade"><strong class="ph uicontrol">utilities</strong> | <strong class="ph uicontrol">REST Explorer</strong></span>.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Workbench's REST Explorer" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4b0475be4b5d609a4c58c1c552b59726.png"/></span></div>
</p>
<p class="p">You can make REST API calls
        from the REST explorer just like you would from any other HTTP interface. The text in the
        text box represents a resource URI. For convenience, the top-level domain is omitted from
        the displayed URI. For example, the full URI of the resource that’s prepopulated in the URI
        text box is <span class="ph filepath">https://foo.my.salesforce.com/services/data/v36.0</span>.</p>
<p class="p">The radio buttons
        above the URI represent the standard HTTP methods. To make an API call, enter the resource
        URI, select the appropriate method, add headers as needed, and click
          <strong class="ph uicontrol">Execute</strong>. </p>
<p class="p">Let’s try out the SObject Describe resource. This resource, when combined with the GET method, returns metadata about an
        object and its fields. </p>
<p class="p">We’ll try describing the Account object. Replace the existing
        text in the URI text box with <span class="ph filepath">/services/data/v<var class="keyword varname">XX</var>.0/sobjects/account/describe</span>, where
          <var class="keyword varname">XX</var> maps to the API version you’re using.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="URI for describing an account" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us1c6df9343de64adddbb01a05eddd2385.png"/></span></div>
</p>
<div class="p">Let’s take a minute to break down this resource’s URI.<ul class="ul bulletList">
<li class="li"><samp>/services/data</samp>—Specifies that we’re making a REST API request</li>
<li class="li"><samp>/v36.0</samp>—API version number</li>
<li class="li"><samp>/sobjects</samp>—Specifies that we’re accessing a
            resource under the sObject grouping</li>
<li class="li"><samp>/account</samp>—sObject being actioned; in this case,
            account</li>
<li class="li"><samp>/describe</samp>—Action; in this case, a describe
            request</li>
</ul>
</div>
<p class="p">Now make sure that the GET method is selected, and click
          <strong class="ph uicontrol">Execute</strong>.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Response after we describe the account object" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use2997a91bace27a0e536a7cf14c50062.png"/></span></div>
</p>
<p class="p">Good work, captain. The Account metadata appears on the screen. And Workbench has
        nicely formatted the response. To see the raw JSON response, click <strong class="ph uicontrol">Show Raw
          Response</strong>.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="JSON response after we describe the account object" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us77ddd2339606facf157287317ab2a3fe.png"/></span></div>
</p>
<p class="p">The Account metadata is displayed in JSON below some HTTP response
        headers. Because REST API supports
        both JSON and XML, let’s change the request header to specify an XML response. Next to the
        HTTP methods, click <strong class="ph uicontrol">Headers</strong>. For the <samp>Accept</samp> header value, replace <samp>application/json</samp> with <samp>application/xml</samp>. Your
        request headers look like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Request header specifying XML" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us32204268968145c24ffd068a210c4122.png"/></span></div>
</p>
<p class="p">Click <strong class="ph uicontrol">Execute</strong>. The raw XML response is returned.
      Hurrah!</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_rest_create_account" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_create_account"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Create an Account</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Now let’s create an account using the SObject resource and the POST method. In the URI
      text box, replace the existing text with <span class="ph filepath">/services/data/v<var class="keyword varname">XX</var>.0/sobjects/account</span>, where <var class="keyword varname">XX</var> maps to the API version you’re using. Select
        <strong class="ph uicontrol">POST</strong>. Notice that a Request Body text area appears, which is where we
      specify the field values for our new account. First, though, let’s change the <samp>Accept</samp> header back to JSON.<p class="p">Click
          <strong class="ph uicontrol">Headers</strong>. Change <samp>Accept:
          application/xml</samp> back to <samp>Accept:
          application/json</samp>. Your request looks like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="REST request headers" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa7418ce60ab6dd6f1f1ba479929031a6.png"/></span></div>
</p>
<div class="p">In the request body, enter the following
        text.<div class="codeblock"><pre>{
  "Name" : "NewAccount1",
  "ShippingCity" : "San Francisco"
}</pre></div>
</div>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>. You see a response such as the following.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Successful account creation response in REST API" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7abbf8c4795ad155d2586d5e2268ade0.png"/></span></div>
</p>
<p class="p">If <samp>success: true</samp>, the account was created with the
        returned ID. Expand the errors folder to check for errors.</p>
<div class="p">Just for kicks, let’s
        create a second account without specifying an account name. Replace the text in the request
        body with the following
        text.<div class="codeblock"><pre>{
  "ShippingCity" : "San Francisco"
}</pre></div>
</div>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>.</p>
<p class="p">Uh, oh. Did you get a <samp>REQUIRED_FIELD_MISSING</samp> response? Expand the
          <strong class="ph uicontrol">REQUIRED_FIELD_MISSING</strong> folder, and then expand the
          <strong class="ph uicontrol">fields</strong> folder. Your expanded response looks like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="We get an error when we don't provide an account name" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usacdc47d386900db35cecdeec82f36c79.png"/></span></div>
</p>
<div class="p">Because <span class="keyword parmname">Name</span> is a required field for creating an account, the
        server didn’t process the request, and we received an error. Thankfully, all the information
        we need to fix the request is in the error response. Let’s specify the name
          <kbd class="ph userinput">NewAccount2</kbd>, and change the shipping city in the request body.
        Replace the text in the request body with the following
        text.<div class="codeblock"><pre>{
  "Name" : "NewAccount2",
  "ShippingCity" : "New York"
}</pre></div>
</div>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>. Success!</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_rest_execute_query" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_execute_query"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Execute a Query</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Now let’s imagine that you or another user has created hundreds of accounts. You want
      to find the names of all the accounts where the shipping city is San Francisco. You can use
      the Query resource to execute a SOQL query and zero in on the exact records you want, just like a
      customized treasure map.<p class="p">Replace the text in the URI text box with the following text:
          <samp>/services/data/v<var class="keyword varname">XX</var>.0/query/?q=SELECT+Name+From+Account+WHERE+ShippingCity='San+Francisco'</samp>,
        where <var class="keyword varname">XX</var> maps to the API version you’re using.</p>
<p class="p">We replaced spaces
        with the <samp>+</samp> character in the query string to properly
        encode the URI. You can read about HTML URL encoding from the link in the Resources section.
        Make sure that the GET method is selected, and click
        <strong class="ph uicontrol">Execute</strong>.</p>
<p class="p">Expand the <strong class="ph uicontrol">records</strong> folder. Do
        you see a folder with the name of the first account we created, NewAccount1? Great. Click
        it. Now click the <strong class="ph uicontrol">attributes</strong> folder. Next to url is the resource URI
        of the account that was returned. Your response looks something like this.</p>
<div class="imagecenter"><span class="image image-block"><img alt="Query response returns one account record" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3c815a7c0a654b459d455d6d91e0ddb2.png"/></span></div><p class="p">When
        you write an integration, you can grab this URI from the response to access more details
        about that account.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_rest_node_ruby_samples" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_node_ruby_samples"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Node.js and Ruby Samples</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Now you have a sweet taste of what’s possible with REST API. Of course, when you move from
      Workbench to writing code, you’ll be interacting with REST API using the programming language
      of your choice. Luckily, expert Salesforce developers have written
      wrappers for several languages that simplify the process of consuming REST API. Here are two sample queries
      written in Node.js and Ruby that use wrappers Nforce and Restforce, respectively.</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Node.js Sample Using Nforce</h3>
<div class="codeblock"><pre>var nforce = require('nforce');

// create the connection with the Salesforce connected app
var org = nforce.createConnection({
  clientId: process.env.CLIENT_ID,
  clientSecret: process.env.CLIENT_SECRET,
  redirectUri: process.env.CALLBACK_URL,
  mode: 'single'
});

// authenticate and return OAuth token
org.authenticate({
  username: process.env.USERNAME,
  password: process.env.PASSWORD+process.env.SECURITY_TOKEN
}, function(err, resp){
  if (!err) {
    console.log('Successfully logged in! Cached Token: ' + org.oauth.access_token);
    // execute the query
    org.query({ query: 'select id, name from account limit 5' }, function(err, resp){
      if(!err &amp;&amp; resp.records) {
        // output the account names
        for (i=0; i&lt;resp.records.length;i++) {
          console.log(resp.records[i].get('name'));
        }
      }
    });
  }
  if (err) console.log(err);
});</pre></div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Ruby Sample Using Restforce</h3>
<div class="codeblock"><pre>require 'restforce'

// create the connection with the Salesforce connected app
client = Restforce.new :username =&gt; ENV['USERNAME'],
  :password       =&gt; ENV['PASSWORD'],
  :security_token =&gt; ENV['SECURITY_TOKEN'],
  :client_id      =&gt; ENV['CLIENT_ID'],
  :client_secret  =&gt; ENV['CLIENT_SECRET']

// execute the query
accounts = client.query("select id, name from account limit 5")

// output the account names
accounts.each do |account|
  p account.Name
end</pre></div>
</div>
</div>
</div>
<div class="topic nested0" id="api_basics_rest_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_rest_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><a class="xref" href="https://developer.salesforce.com/page/Getting_Started_with_the_Force.com_REST_API" target="_blank">Getting Started with the Force.com
                                REST API</a></p>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_rest.meta/api_rest/" target="_blank">Force.com REST API Developer
                                        Guide</a></cite></p>
<p class="p"><a class="xref" href="https://www.jamesward.com/2016/01/26/quick-force-java-getting-started-with-salesforce-rest-in-java" target="_blank">Getting Started with Salesforce REST
                                in Java</a></p>
<p class="p"><a class="xref" href="http://www.w3schools.com/tags/ref_urlencode.asp" target="_blank">HTML URL Encoding Reference</a></p>
<div class="p"><a class="xref" href="https://workbench.developerforce.com/" target="_blank">Workbench</a><div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</div>
</body></div><h1>Use SOAP API</h1><div class="unit-content">
<body id="api_basics_soap_learning_objectives"><a name="api_basics_soap_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Generate a WSDL file for your org.</li>
<li class="li">Use SoapUI to create a SOAP project from the WSDL file.</li>
<li class="li">Log in to your DE org using SOAP API.</li>
<li class="li">Create an account using SOAP API.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_soap_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_soap_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Enterprise and Partner WSDLs</span></h2>
<div class="body conbody">
<div class="section"><div class="p">If you’ve sailed the straits of another SOAP-based API, you know that the Web Services
      Description Language (WSDL) file is basically your map to understanding how to use the API. It
      contains the bindings, protocols, and objects to make API calls.<p class="p">Salesforce provides two SOAP API WSDLs for two different use
        cases. The enterprise WSDL is optimized for a single Salesforce org. It’s strongly typed,
        and it reflects your org’s specific configuration, meaning that two enterprise WSDL files
        generated from two different orgs contain different information.</p>
<p class="p">The partner WSDL is
        optimized for use with many Salesforce orgs. It’s loosely typed, and it doesn’t change based on an org’s specific configuration.
        </p>
<p class="p">Typically, if you’re writing an integration for a single Salesforce org, use the enterprise
        WSDL. For several orgs, use the partner WSDL.</p>
<p class="p"> For this unit, we’re using the
        enterprise WSDL to explore SOAP API.
        The first step is to generate a WSDL file for your org. In your DE org, from Setup, enter
          <kbd class="ph userinput">API</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select
          <strong class="ph uicontrol">API</strong>. On the API WSDL page, click <strong class="ph uicontrol">Generate Enterprise
          WSDL</strong>.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Generate enterprise WSDL" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us10b6825d8fdfc5f2655f99911e9de084.png"/></span></div>
</p>
<p class="p">On the Generate Enterprise WSDL page, click <strong class="ph uicontrol">Generate</strong>. When the
        WSDL is generated, right-click on the page and save the WSDL file somewhere on your
        computer. We’ll be using it shortly.</p>
<p class="p">Here’s a tip for working with the enterprise
        WSDL. The enterprise WSDL reflects your org’s specific configuration, so whenever you make a
        metadata change to your org, regenerate the WSDL file. This way, the WSDL file doesn’t fall
        out of sync with your org’s configuration.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_soap_soapui" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_soap_soapui"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a SOAP Project with SoapUI</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Now that we have our WSDL file, we need a way to extract the information to start
      making SOAP API requests. In web
      parlance, this process is called consuming the WSDL. Much like a kraken consumes a ship full
      of hapless sailors, tools such as Force.com Web Services Connector (WSC) consume the WSDL
      file. The tools then create classes that enable you to make requests with SOAP API using common programming
        languages.<p class="p">For this unit, we’re using a third-party tool called SoapUI to consume our
        enterprise WSDL file. SoapUI is a free and open-source app for testing web services. To get
        started, download and install SoapUI OpenSource from the <a class="xref" href="https://www.soapui.org/downloads/soapui.html" target="_blank">SoapUI website</a>. Install only the SoapUI component.</p>
<p class="p">Here’s
        a video that shows the process of consuming the enterprise WSDL and making SOAP API requests with SoapUI. To walk
        through it yourself, follow the instructions below the video.</p>
<iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//play.vidyard.com/s8gYmLgVhztuPTgPxRYGcQ" webkitallowfullscreen="1" width="640"></iframe><p class="p">After you get SoapUI installed and launched, from the File menu, select
          <strong class="ph uicontrol">New SOAP Project</strong>. For the project name, enter <kbd class="ph userinput">Exploring
          Salesforce SOAP API</kbd>. For the initial WSDL, browse to where you saved the
        enterprise WSDL file and select it. Don’t change any other options. Your SoapUI window looks
        something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Exploring Salesforce SOAP API with SoapUI" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us498f63f3c9a4527f794ca8e073338bd7.png"/></span></div>
</p>
<p class="p">Click <strong class="ph uicontrol">OK</strong>. After a few seconds of processing, an
          <span class="ph filepath">Exploring Salesforce SOAP API</span> folder appears in the navigator pane on
        the left side of the screen. Underneath it is an entry called SoapBinding that contains
        several operations.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="SoapUI SoapBinding folder" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0f5e9d7a07b2627d6a373c418971b869.png"/></span></div>
</p>
<p class="p">So what are we looking at here? Each operation corresponds to a SOAP API request we can make. The
        properties of each operation are pulled from information in the WSDL file. Each operation
        also contains a sample XML request that includes the operation’s HTTPS endpoint and a
        prepopulated SOAP message. Now we’re all set to make SOAP API requests. </p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_soap_login" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_soap_login"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Log In to Your DE Org</span></h2>
<div class="body conbody">
<div class="section"><div class="p">In SoapUI, scroll down to the <samp>login</samp> operation.
      Expand it, and then double-click <strong class="ph uicontrol">Request 1</strong>. A sample SOAP login request appears.<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Sample SOAP login request" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us62d42aa58407088ae213fcd183c958c4.png"/></span></div>
</p>
<div class="p">Here’s a quick breakdown of the endpoint URI (1).<ul class="ul bulletList">
<li class="li"><samp>https://</samp>—Specifies secure HTTP.</li>
<li class="li"><samp>login.salesforce.com</samp>—Top-level domain for a login
            request.</li>
<li class="li"><samp>/services/Soap</samp>—Specifies that we’re making a SOAP API request.</li>
<li class="li"><samp>/c</samp>—Specifies that we’re using the enterprise
            WSDL. Use <samp>/u</samp> for the partner WSDL.</li>
<li class="li"><samp>/36.0</samp>—API version number. The <samp>v</samp> prefix is missing because some APIs include it before
            the version number, and some don’t. This behavior is just a quirk of Salesforce APIs.</li>
<li class="li"><samp>/0DF36000000LHZw</samp>—Package version number.</li>
</ul>
We aren’t using managed packages for this example, so we can remove the package version
        number from the end of the URI. Go ahead and do that now.</div>
<p class="p">The SOAP message (2)
        contains everything we expect to find in a SOAP message: an envelope, a header, and a
        body.</p>
<p class="p">The properties inside the <samp>LoginScopeHeader</samp>
        element concern the authentication of Self-Service and Customer Portal users. Because we
        don’t have to worry about these values for our purposes, delete the entire <samp>&lt;urn:LoginScopeHeader&gt;</samp> element (everything from <samp>&lt;urn: LoginScopeHeader&gt;</samp> to <samp>&lt;/urn:LoginScopeHeader&gt;</samp>). Highlight the text in the window, and press the
        Delete key.</p>
<p class="p">Next, look at the <samp>&lt;urn:login&gt;</samp> element
        in the message body. This element is the meat of the login request. It’s where we provide
        our user credentials. Replace the <var class="keyword varname">?</var>s with your username and password for
        your DE org.</p>
<p class="p">Since you’re making an API request from an IP address unknown to Salesforce, you need to append your
        security token to the end of your password. For example, if your password is <samp>mypassword</samp> and your security token is <samp>XXXXXXXXXX</samp>, enter <kbd class="ph userinput">mypasswordXXXXXXXXXX</kbd>
        inside the <samp>&lt;urn:password&gt;</samp> element. Your security token
        was emailed to you when you first reset your password after signing up for your DE org. If
        you’ve reset your password since then, a new security token was emailed to you. If you can’t
        find it, you can reset it in Salesforce.</p>
<div class="p">
<ol class="ol enumList">
<li class="li">From your personal settings, enter <kbd class="ph userinput">Reset</kbd> in the <span class="keyword parmname">Quick
              Find</span> box, then select <strong class="ph uicontrol">Reset My Security Token</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Reset Security Token</strong>. The new security token is sent to
            the email address in your Salesforce personal settings.
          </li>
</ol>
</div>
<p class="p">Your SOAP message looks something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="A sample SoapUI login request with our DE org credentials" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usef11913ed6b6e62fe2f31f322faadea0.png"/></span></div>
</p>
<p class="p">Click the play button (green triangle) in the upper left of the request window. This
        button sends the request, casting your SOAP message-in-a-bottle into the sea. If you get an
        error about needing to use TLS 1.1 or higher, see this <a class="xref" href="https://blog.deadlypenguin.com/blog/2016/06/27/soapui-tls-1-2/" target="_blank">blog post</a> to fix it. Otherwise, check out the
        response. Here’s what it looks like when we expand it.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="SOAP API login response " class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0f10db3ca1db42bcce8faff9a866fad3.png"/></span></div>
</p>
<p class="p">Congratulations, captain. You successfully logged in. The response contains a bunch of
        information about your org and user. Most importantly, it contains your org’s instance (or
        custom domain, if you’re using My Domain) and a session ID that we’ll use to make future requests, highlighted here.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Instance server and session ID are contained in the login response" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us5054fabc6ff8cf89e18bad0937c952a2.png"/></span></div>
</p>
<p class="p">Copy the instance and session ID into a text file. We’ll need them in a
        minute.</p>
<p class="p">Because your org’s instance is likely to change, don’t hardcode references to
        the instance when you start building integrations! Instead, use the Salesforce feature My Domain to configure a custom domain. A custom domain not only eliminates the headache of
        changing instance names, you can use it to highlight your brand, make your org more secure,
        and personalize your login page.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_soap_create_account" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_soap_create_account"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Create an Account</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Just like we did with REST API, let’s create an account with SOAP API. In the navigation pane on the left side of the screen, find the <samp>create</samp> operation. Expand it, and double-click
        <strong class="ph uicontrol">Request 1</strong>.<p class="p">Because creating a record is more complicated than
        logging in, the <samp>create()</samp> SOAP message includes many
        more elements. Most of the elements are contained in the request header, and most of them
        are optional. To simplify things, we’ll delete most of the header info, but remember that
        the options provided by these headers are available when you create a record. For
        information on what each header does, check out the SOAP Headers topic in
        the SOAP API Developer Guide.</p>
<p class="p">One header we
        don’t want to delete, though, is <samp>SessionHeader</samp>. It’s
        going to contain the session ID we got from the <samp>login()</samp>
        response. Go ahead and delete the other headers, from <samp>&lt;urn:EmailHeader&gt;</samp> to <samp>&lt;urn:AssignmentRuleHeader&gt;</samp>. Your message looks like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Sample create() request in SoapUI" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usbafbf8c715f3f13950f2006988f6e804.png"/></span></div>
</p>
<p class="p">Get the session ID you copied to a text file and paste it inside the <samp>&lt;urn:sessionId&gt;</samp> tag, replacing the
        <var class="keyword varname">?</var>.</p>
<p class="p">We have a few more adjustments to make to the message body.
        First, we specify that we’re creating an account. Change the text in the <samp>&lt;urn:sObjects&gt;</samp> tag to look like this: <samp>&lt;urn:sObjects xsi:type="urn1:Account"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;</samp>. This adjustment specifies
        the correct record type using the XML instance schema declaration.</p>
<p class="p">We also want to give the account a name. Add <samp>&lt;Name&gt;Sample SOAP
          Account&lt;/Name&gt;</samp> inside the <samp>sObjects</samp>
        element. Delete the <samp>fieldsToNull</samp> and <samp>Id</samp> elements, too. Now your message looks something like
        this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create() request with extraneous elements removed" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7e603e8941b2e6718766cb4b1a745086.png"/></span></div>
</p>
<p class="p">One last thing to do before we make the request. Change the endpoint to specify your
        org’s instance rather than <samp>login</samp>, and remove the
        package version from the end of the URI. The endpoint URI looks something like this: <samp>https://na30.salesforce.com/services/Soap/c/36.0</samp>.</p>
<p class="p">We’re
        ready to send the request. Click the green triangle again. It worked! Let’s look at the
        response.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="SOAP response for creating an account" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0c124cecd379e4a7c473f0ca12f13542.png"/></span></div>
</p>
<p class="p">Notice the <samp>LimitInfoHeader</samp>. This header returns
        information about your API usage. In the above example, we’ve made 9 out of 15,000 allowed
        calls today. </p>
<p class="p">In the response body, notice the <samp>&lt;result&gt;</samp> element. <samp>&lt;success&gt;true&lt;/success&gt;</samp> indicates that the record was created
        successfully. <samp>&lt;id&gt;</samp> includes the ID of the record, which
        you can use in future requests. </p>
<p class="p">We covered the basics of making requests with SOAP API. Of course, each operation has
        its own parameters and peculiarities. Make sure that you use the SOAP API Developer Guide as your map when you start
        writing integrations with SOAP API.</p>
</div></div>
</div>
</div>
<div class="topic nested0" id="api_basics_soap_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_soap_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api.meta/api/" target="_blank">SOAP API Developer
                                        Guide</a></cite></p>
<p class="p"><cite class="cite"><a class="xref" href="http://resources.docs.salesforce.com/rel1/doc/en-us/static/pdf/SF_Soap_API_cheatsheet_web.pdf" target="_blank">SOAP API
                                Cheatsheet</a></cite></p>
<p class="p"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2015/06/salesforce-soap-api-sample-wsdls.html" target="_blank">SOAP API Sample WSDL
                                Structures</a></p>
<p class="p"><a class="xref" href="https://developer.salesforce.com/page/Introduction_to_the_Force.com_Web_Services_Connector" target="_blank">Introduction to the Force.com Web
                                Services Connector</a></p>
<div class="p"><a class="xref" href="https://www.soapui.org/" target="_blank">SoapUI
                                Homepage</a><div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</div>
</body></div><h1>Use Bulk API</h1><div class="unit-content">
<body id="api_basics_bulk_learning_objectives"><a name="api_basics_bulk_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Describe how an asynchronous request differs from a synchronous
                                        request.</li>
<li class="li">Create a bulk job using REST Explorer in Workbench.</li>
<li class="li">Import data to your Salesforce org by adding batches to a job.</li>
<li class="li">Monitor a job’s progress.</li>
<li class="li">Get a batch’s results.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_bulk_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_bulk_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Bulk API and
      Asynchronous Requests</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Bulk API is based on REST
      principles and is optimized for working with large sets of data. You can use it to query,
      insert, update, upsert, or delete many records asynchronously, meaning that you submit a
      request and come back for the results later. Salesforce processes the request in the
        background.<p class="p">In contrast, SOAP and REST API use synchronous requests and
        are optimized for real-time client applications that update a few records at a time. You can
        use both of these APIs for processing many records, but when the data sets contain hundreds
        of thousands of records, they’re less practical. Bulk API’s asynchronous framework is
        designed to make it simple and efficient to process data from a few thousand to millions of
        records.</p>
<p class="p">The easiest way to use Bulk API is to enable it for processing
        records in Data Loader using CSV files.
        With Data Loader, you don’t have to
        write your own client app. Sometimes, though, unique requirements necessitate writing a
        custom app. Bulk API lets you take the
        ship’s wheel into your own hands and steer the course toward a solution that works for
        you.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_bulk_import_data" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_bulk_import_data"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Import Data to Your Org</span></h2>
<div class="body conbody">
<div class="section"><div class="p">To explore Bulk API, we’ll
            use SoapUI and Workbench to create some account records.</div></div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_grab_session_id" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_grab_session_id"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Get a Session ID</span></h3>
<div class="body conbody">
<div class="section"><div class="p">Authentication works a bit differently in Bulk API. We need a valid session
            ID, which we’ll include in the X-SFDC-Session header with each of our Bulk API requests. We obtain a
            session ID using the SOAP API
            <samp>login()</samp> call, just like we did in the previous
            unit. See Log In to Your DE Org for
            instructions, and make sure to copy the session ID into a text file.</div></div>
</div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_create_job" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_create_job"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Bulk Job</span></h3>
<div class="body conbody">
<div class="section">
<div class="p">Bulk API is REST-based, so we can use
        Workbench’s REST Explorer to make Bulk API requests.<ol class="ol enumList">
<li class="li">Log in to your Trailhead DE org and navigate to <a class="xref" href="https://workbench.developerforce.com" target="_blank">Workbench</a>.</li>
<li class="li">For Environment, select <strong class="ph uicontrol">Production</strong>. For API Version, select the
            highest available number. Make sure that you select <strong class="ph uicontrol">I agree to the terms of
              service</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Login with Salesforce</strong>.</li>
<li class="li">In the top menu, select <span class="ph menucascade"><strong class="ph uicontrol">utilities</strong> | <strong class="ph uicontrol">REST Explorer</strong></span>.</li>
</ol>
</div>
<p class="p">Now we’re ready to upload our data. The first step is to create a job. A job specifies the
        type of operation and data object we’re working with. It functions as a bucket into which we
        add batches of data for processing.</p>
<p class="p">A job is represented by the JobInfo resource. This resource creates a job, gets a job’s status, and changes a job’s
        status.</p>
<p class="p">To create a job, we submit a POST request to the JobInfo resource with the job’s properties in the request body. Because Bulk API is REST-based, the request
        takes the familiar form of a REST request with four components: URI, HTTP method, headers,
        and body. The method is POST, as we just mentioned. </p>
<div class="p">For the URI, replace the text in the URI text box with the following: <samp>/services/async/<var class="keyword varname">XX</var>.0/job</samp>, where <samp><var class="keyword varname">XX</var>.0</samp> corresponds to the API version you’re
        using. Let’s note a few things about this URI.<ul class="ul bulletList">
<li class="li">We’re using <samp>/services/async</samp> instead of <samp>/services/data</samp>. The <samp>async</samp> portion specifies that we’re making a Bulk API request.</li>
<li class="li">Like SOAP API, the API version
            number doesn’t include a <samp>v</samp> prefix.</li>
<li class="li"><samp>/job</samp> indicates that we’re accessing the JobInfo resource.</li>
</ul>
</div>
<div class="p">For the request body, copy and paste the following
        text.<div class="codeblock"><pre>{
  "operation" : "insert",
  "object" : "Account",
  "contentType" : "JSON"
}</pre></div>
</div>
<p class="p">These properties indicate that we want to use the insert operation on the data we submit to
        the job. We’re submitting account data, and it’s in JSON format. Bulk API supports payloads in CSV, XML,
        and JSON.</p>
<p class="p">Your REST Explorer looks something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create job request in REST Explorer" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4818b11131433b04d6f8f2358d002c73.png"/></span></div>
</p>
<p class="p">To authenticate this request, we need to include the session ID we got from the SOAP API
        <samp>login()</samp> response. Click <strong class="ph uicontrol">Headers</strong>.
        Under the <samp>Accept</samp> header, add the following text:
          <samp>X-SFDC-Session: <var class="keyword varname">sessionID</var></samp>. Replace
          <var class="keyword varname">sessionID</var> with the session ID you copied earlier. Your REST Explorer
        looks something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create job request with session ID in header" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc81a33bf644e7c55a1371f072742107d.png"/></span></div>
</p>
<p class="p">Click <strong class="ph uicontrol">Execute</strong> and check out the response.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create job response" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us41a51cd0e6a53275b8d6caed24b9a2f0.png"/></span></div>
</p>
<p class="p">The response includes all sorts of properties about the job, most of which aren’t useful to
        us right now because we haven’t added batches yet. Although we want to note two properties.
        Look at the job ID (<span class="keyword parmname">id</span>) and copy it into a text file. We’ll be using it
        to add batches to the job and check in on the job’s status. The other property is
          <span class="keyword parmname">state</span>. When you create a job, it’s immediately set to the <samp>Open</samp> state. That means it’s ready to start receiving
        batches.</p>
</div>
</div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_add_batches" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_add_batches"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Add Batches to the Job</span></h3>
<div class="body conbody">
<div class="section"><div class="p">Now we can insert account data via a batch. A batch is a set of records sent to the
      server in a POST request. The server processes each batch independently, not necessarily in
      the order it’s received. When created, the status of a batch is accessible via the BatchInfo resource.<p class="p">When a batch is complete, the result for each record is available in a result
        set resource. We’ll get to that in a bit. For now, replace the text in the URI text box with
        the following: <samp>/services/async/<var class="keyword varname">XX</var>.0/job/<var class="keyword varname">jobID</var>/batch</samp>.
        Replace <var class="keyword varname">jobID</var> with the job ID you copied.</p>
<div class="p">For this example, we’re
        adding a batch with only four accounts. Usually, you use Bulk API to add thousands or millions of
        records, but the principle is the same. Copy the following JSON text into the request
        body.<div class="codeblock"><pre>[
   {
      "Name" : "Sample Bulk API Account 1 (batch 1)"
   },
   {
      "Name" : "Sample Bulk API Account 2 (batch 1)"
   },
   {
      "Name" : "Sample Bulk API Account 3 (batch 1)"
   },
   {
      "Name" : "Sample Bulk API Account 4 (batch 1)"
   }
] </pre></div>
</div>
<p class="p">We’re
        using JSON because that’s what we specified when we created the job.</p>
<p class="p">Click
          <strong class="ph uicontrol">Headers</strong> and make sure that the <samp>X-SFDC-Session</samp> header is still there with your session ID. Your request looks
        something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create batch using REST Explorer" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd7519e99786b18d5203afc4f79147e84.png"/></span></div>
</p>
<p class="p">Click <strong class="ph uicontrol">Execute</strong>. Let’s examine the result.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create batch result" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc23a9026f0b78b93b380b45538717757.png"/></span></div>
</p>
<p class="p">The response contains information about the batch, including a batch ID and a state.
        The state is Queued. The server is aware of the request and has queued it for
        processing.</p>
<div class="p">Let’s add another batch to the same job. Replace the JSON text in the
        request body with the
        following.<div class="codeblock"><pre>[
   {
      "Name" : "Sample Bulk API Account 5 (batch 2)"
   },
   {
      "Name" : "Sample Bulk API Account 6 (batch 2)"
   },
   {
      "Name" : "Sample Bulk API Account 7 (batch 2)"
   },
   {
      "Name" : "Sample Bulk API Account 8 (batch 2)"
   }
] </pre></div>
</div>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>. We get a similar response with a different batch
      ID.</p>
</div></div>
</div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_close_job" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_close_job"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Close the Job</span></h3>
<div class="body conbody">
<div class="section"><div class="p">Now that we’ve submitted our batches, we can move on to monitoring them and retrieving
      our results. Before we do, though, it’s a good practice to change the job’s status to Closed
      because we aren’t submitting any more batches.<div class="p">Replace the text in the URI text box with the
        following: <samp>/services/async/<var class="keyword varname">XX</var>.0/job/<var class="keyword varname">jobID</var></samp>. Again,
        replace <var class="keyword varname">XX</var> with the API version you’re using, and replace
          <var class="keyword varname">jobID</var> with the job’s ID. For the HTTP method, select POST. In the
        request body, replace the text with the following JSON
        text.<div class="codeblock"><pre>{
   "state" : "Closed"
}</pre></div>
</div>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>. The response contains job status information. The
          <span class="keyword parmname">state</span> property indicates that the job is closed.</p>
</div></div>
</div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_check_status" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_check_status"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Check the Status of the Job</span></h3>
<div class="body conbody">
<div class="section"><div class="p">We’ve submitted our batches. We’ve closed the job. Now it’s up to the server to process
      the request. We can monitor the server’s progress by checking the status of the job’s batches
      through the API or through the Salesforce UI. In Salesforce, from Setup, enter
        <kbd class="ph userinput">Bulk Data Load Jobs</kbd> in the <span class="keyword parmname">Quick Find</span> box, then
      select <strong class="ph uicontrol">Bulk Data Load Jobs</strong>. You can check the status of a job on this
      page. Or, you can click a job ID to check the statuses and get results for batches associated
      with that job.<p class="p">In the API, we use the JobInfo resource to monitor a job. Replace the text in the URI text box with the following:
          <samp>/services/async/<var class="keyword varname">XX</var>.0/job/<var class="keyword varname">jobID</var></samp>, with the
        usual replacements. For the HTTP method, select GET.</p>
<p class="p">Click
          <strong class="ph uicontrol">Execute</strong>. You see something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Check the job's status" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9cfb7b9b7bddf6410a5fbea6f89d44ef.png"/></span></div>
</p>
<p class="p">If your <span class="keyword parmname">numberBatchesQueued</span> is 1 or 2, at least one of your
        batches is still in the queue. Don’t worry, it’ll be processed in a few minutes. In the
        meantime, go treat yourself to a mug of grog and try the same request again when you get
        back. If you’re lucky and your batches are already processed, continue on to retrieve the
        batch results, or feel free to take a grog break anyway.</p>
</div></div>
</div>
</div>
<div class="topic concept nested1" id="api_basics_bulk_get_results" lang="en-us" xml:lang="en-us"><a name="api_basics_bulk_get_results"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Get the Batch Results</span></h3>
<div class="body conbody">
<div class="section"><div class="p">First, let’s check the statuses of the individual batches to confirm what we learned
      from the job’s status. Add <samp>/batch</samp> to the end of the URI
      in the URI text box—this is the URI for the BatchInfo resource. Click <strong class="ph uicontrol">Execute</strong>. Expand the <strong class="ph uicontrol">batchInfo</strong>
      folder, and then expand the <strong class="ph uicontrol">[Item 1]</strong> and <strong class="ph uicontrol">[Item
        2]</strong> folders. Your results look something like this.<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Check the statuses of the batches" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us566b148bcdfa875ff1b08bec34b35dcd.png"/></span></div>
</p>
<p class="p">As we determined from the JobInfo resource, each batch has completed. Next, we access the results resource to get the
        results of the first batch. </p>
<p class="p">Copy the value next to the <span class="keyword parmname">id</span> field
        under <strong class="ph uicontrol">Item 1</strong>. Make sure that you copy the <span class="keyword parmname">id</span> and
        not the <span class="keyword parmname">jobId</span>. In the URI text box, after <samp>/batch</samp>, enter <samp>/</samp> and paste the ID value.
        Then add <samp>/result</samp>. </p>
<p class="p">The URI looks something like
        this: <samp>/services/async/36.0/job/75036000001xYl1AAE/batch/75136000001jSZIAA2/result</samp>.
        </p>
<p class="p">Click <strong class="ph uicontrol">Execute</strong>. Expand each <strong class="ph uicontrol">[Item]</strong>
        folder in the response. The results look something like this.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Retrieve the results of the first batch" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf5f14041eb869a76ab1935b799f1f001.png"/></span></div>
</p>
<p class="p">Each result contains all the information we get when we create a record through the
        API, including the new record’s ID. To get the other batch’s results, in the URI, replace
        this batch’s ID with the other batch’s ID. Tidy work, captain!</p>
</div></div>
</div>
</div>
</div>
<div class="topic nested0" id="api_basics_bulk_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_bulk_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_asynch.meta/api_asynch/" target="_blank">Bulk API Developer
                                        Guide</a></cite></p>
<p class="p"><a class="xref" href="https://developer.salesforce.com/page/Loading_Large_Data_Sets_with_the_Force.com_Bulk_API" target="_blank">Loading Large Data Sets with
                                Force.com Bulk API</a></p>
<p class="p"><a class="xref" href="https://workbench.developerforce.com/" target="_blank">Workbench</a></p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Use Streaming API</h1><div class="unit-content">
<body id="api_basics_streaming_learning_objectives"><a name="api_basics_streaming_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Describe the primary benefit that push technology offers over
                                        pull technology.</li>
<li class="li">Create a PushTopic and receive event notifications.</li>
<li class="li">Specify replay options for durable streaming.</li>
<li class="li">Broadcast a message with generic streaming.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Streaming Events</span></h2>
<div class="body conbody">
<div class="section"><div class="p">To conclude our survey of Salesforce’s data APIs, let’s look at an
      API that serves an entirely different use case. Streaming API lets you push a stream of
      notifications from Salesforce to
      client apps based on criteria that you define. How does pushing notifications differ from the
      pull paradigm that our other APIs use, in which the client app requests, or pulls, data from
        Salesforce? Let’s examine the
      problem from a ship captain’s point of view.<p class="p">Imagine that you’re sailing the high seas, and
        you want to keep an eye out for oncoming hazards, other ships, and islands rich with
        treasure. You put a sailor in the crow’s nest to keep an active lookout. Now put on your
        developer hat again. Let’s say you’re writing an app using REST or SOAP API that periodically checks to see
        if any accounts have been updated. You can use a similar solution and keep an active lookout
        by constantly requesting account data and checking to see if it matches the old
        data.</p>
<p class="p">Now imagine that you’re on your ship again, but this time you have access to a
        shiny, new radar display. You don’t need to keep a sailor in the crow’s nest, because
        whenever an object of interest approaches, the display beeps.</p>
<p class="p">Streaming API is your radar. It lets you
        define events and push notifications to your client app when the events occur. You don’t
        have to keep an active lookout for data changes—you don’t have to constantly poll Salesforce and make unnecessary API
        requests.</p>
<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Streaming API can be used like a radar to detect data changes and send notifications" class="image image-block" height="450" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6adf20e6ef6500b68ece853da49c9557.gif" width="600"/></span></div>
</p>
<p class="p">Tracking data changes in Salesforce is especially useful when
        you have business data stored in a system external to Salesforce. You can use Streaming API to keep your external
        source in sync with your Salesforce
        data. Also, Streaming API lets you
        process business logic in an external system in response to data changes in Salesforce. For example, you can use
          Streaming API to notify a fulfillment
        center whenever an opportunity is updated.</p>
<p class="p">In addition to data changes, you can use
          Streaming API to broadcast
        notifications for events defined outside of Salesforce. For example, you can make
        your app display a message whenever a system maintenance window is about to start or when a
        new offer is available to your users. This functionality is called generic streaming, and
        we’ll cover it as well.</p>
<p class="p">Streaming API uses the Bayeux protocol
        and the CometD messaging library.</p>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_push_topics" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_push_topics"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>PushTopics</span></h2>
<div class="body conbody">
<div class="section"><div class="p">We interface with Streaming API
      through PushTopics. A PushTopic is an sObject that contains the criteria of events you want to listen to, such as data
      changes for a particular object. You define the criteria as a SOQL query in the PushTopic and specify the record operations to notify on (create, update, delete, and undelete). In
      addition to event criteria, a PushTopic represents the channel that client apps subscribe to.<p class="p">We’ll dive deeper when we create
        our own PushTopic.</p>
</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Supported Objects in PushTopic Queries</h3>
<div class="p">PushTopic queries support all custom objects. PushTopic queries support the following standard objects.<ul class="ul bulletList">
<li class="li">Account</li>
<li class="li">Campaign</li>
<li class="li">Case</li>
<li class="li">Contact</li>
<li class="li">Lead</li>
<li class="li">Opportunity</li>
<li class="li">Task</li>
</ul>
The following standard objects are supported in PushTopic queries through a pilot program.<ul class="ul bulletList">
<li class="li">ContractLineItem</li>
<li class="li">Entitlement</li>
<li class="li">LiveChatTranscript</li>
<li class="li">Quote</li>
<li class="li">QuoteLineItem</li>
<li class="li">ServiceContract</li>
</ul>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_create_push_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_create_push_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>PushTopics</span> and Notifications</h2>
<div class="body conbody">
<div class="section">
<div class="p">A PushTopic enables you to define the object, fields, and criteria you’re interested in receiving
        event notifications for. The following example shows a PushTopic defined and inserted in Apex. After this PushTopic is created, you can subscribe to this PushTopic channel to track changes on accounts whose billing city is San Francisco. This PushTopic specifies that the Id, Name, Phone fields are returned in each event notification. By
        default, notifications are sent for create, update, delete, and undelete operations that
        match the query’s
        criteria.<div class="codeblock"><pre>PushTopic pushTopic = new PushTopic();
pushTopic.Name = 'AccountUpdates';
pushTopic.Query = 'SELECT Id, Name, Phone FROM Account WHERE BillingCity=\'San Francisco\'';
pushTopic.ApiVersion = 37.0;

insert pushTopic;</pre></div>
</div>
<p class="p">At the minimum, define the PushTopic name, query, and API version. You can use default values for the remaining properties. By
        default, the fields in the <samp>SELECT</samp> statement field list
        and <samp>WHERE</samp> clause are the ones that trigger notifications.
        Notifications are sent only for the records that match the criteria in the <samp>WHERE</samp> clause. To change which fields trigger notifications, set
          <samp>pushTopic.NotifyForFields</samp> to one of these
        values.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d33887e297"><span class="keyword parmname">NotifyForFields</span> Value</th>
<th class="featureTableHeader " id="d33887e302">Description</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="NotifyForFields Value" headers="d33887e297"><samp>All</samp></td>
<td class="entry" data-title="Description" headers="d33887e302">Notifications are generated for all record field changes, provided the evaluated
       records match the criteria specified in the WHERE clause.</td>
</tr>
<tr>
<td class="entry" data-title="NotifyForFields Value" headers="d33887e297"><samp>Referenced (default)</samp></td>
<td class="entry" data-title="Description" headers="d33887e302">Changes to fields referenced in the SELECT and WHERE clauses are evaluated.
       Notifications are generated for the evaluated records only if they match the criteria
       specified in the WHERE clause.</td>
</tr>
<tr>
<td class="entry" data-title="NotifyForFields Value" headers="d33887e297"><samp>Select</samp></td>
<td class="entry" data-title="Description" headers="d33887e302">Changes to fields referenced in the SELECT clause are evaluated. Notifications are
       generated for the evaluated records only if they match the criteria specified in the WHERE
       clause.</td>
</tr>
<tr>
<td class="entry" data-title="NotifyForFields Value" headers="d33887e297"><samp>Where</samp></td>
<td class="entry" data-title="Description" headers="d33887e302">Changes to fields referenced in the WHERE clause are evaluated. Notifications are
       generated for the evaluated records only if they match the criteria specified in the WHERE
       clause.</td>
</tr>
</tbody>
</table></div>
<div class="p">To set notification preferences explicitly, set the following properties to either <samp>true</samp> or <samp>false</samp>. By
        default, all values are set to <samp>true</samp>.<div class="codeblock"><pre>pushTopic.NotifyForOperationCreate = true;
pushTopic.NotifyForOperationUpdate = true;
pushTopic.NotifyForOperationUndelete = true;
pushTopic.NotifyForOperationDelete = true;</pre></div>
</div>
<p class="p">If you create an account, an event notification is generated. The notification is in JSON
        and contains the fields that we specified in the PushTopic query: <span class="keyword parmname">Id</span>, <span class="keyword parmname">Name</span>, and
        <span class="keyword parmname">Phone</span>. The event notification looks similar to the following.</p>
<div class="codeblock"><pre>{
  "clientId": "lxdl9o32njygi1gj47kgfaga4k", 
  "data": {
    "event": {
      "createdDate": "2016-09-16T19:45:27.454Z", 
      "replayId": 1, 
      "type": "created"
    }, 
    "sobject": {
      "Phone": "(415) 555-1212", 
      "Id": "001D000000KneakIAB", 
      "Name": "Blackbeard"
    }
  }, 
  "channel": "/topic/AccountUpdates"
}</pre></div>
<p class="p">The notification message includes the channel for the PushTopic, whose name format is <samp>/topic/<var class="keyword varname">PushTopicName</var></samp>. When you create a PushTopic, the channel is created automatically.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_push_topic_queries" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_push_topic_queries"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>PushTopic Queries</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Let’s take a moment to dive into the query we just defined for our PushTopic. PushTopic queries are regular SOQL
      queries, so if you’re familiar with SOQL, you don’t need to learn a new
      format. If you’re not familiar, don’t worry. We cover the basic query format here. In short,
      the query contains a <samp>SELECT</samp> statement with an optional
        <samp>WHERE</samp> clause, as
      follows.<div class="codeblock"><pre>SELECT &lt;comma-separated list of fields&gt; FROM &lt;Salesforce object&gt; WHERE &lt;filter criteria&gt;</pre></div>
By
      default, the comma-separated list of fields specifies the fields to detect changes for. The
      values of these fields are sent in the notification messages. The <samp>FROM</samp> clause specifies the object whose data changes we’re interested in. The
        <samp>WHERE</samp> clause narrows down the set of records to a more
      specific set based on criteria. A change to a field in the <samp>WHERE</samp> clause also generates a notification if the conditions in the <samp>WHERE</samp> clause are met. You can change which fields generate
      notifications by modifying the PushTopic field <span class="keyword parmname">NotifyForFields</span>.<div class="p">The <samp>WHERE</samp> clause supports operators that SOQL supports, such as the <samp>LIKE</samp>, <samp>IN</samp>, <samp>OR</samp>, and <samp>AND</samp> operators. For
        example, to filter on accounts whose billing city is either San Francisco or New York, we’d
        use this
        query.<div class="codeblock"><pre>SELECT Id, Name, Phone FROM Account WHERE BillingCity='San Francisco' OR BillingCity='New York'</pre></div>
To
        ensure that notifications are sent in a timely manner, the following requirements apply to
          PushTopic queries.</div>
<ul class="ul bulletList">
<li class="li">The <samp>SELECT</samp> statement’s field list must include
            <span class="keyword parmname">Id</span>.</li>
<li class="li">Only one object per query is allowed.</li>
<li class="li">The object must be valid for the specified API version.</li>
</ul>
Certain queries aren’t supported, such as aggregate queries or semi-joins.</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_durable_streaming" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_durable_streaming"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Retrieve Past Notifications Using Durable Streaming</span></h2>
<div class="body conbody">
<div class="section"><div class="p">
<p class="p">So far, you’ve learned about PushTopics and event notifications for Salesforce
        record changes. What happens if a Salesforce record is created or updated before a client subscribes to the PushTopic? Before API version 37.0, the client misses the corresponding notification. As of API
        version 37.0, Salesforce stores
        events that match PushTopic queries, even if no one is subscribed to the PushTopic. The events are stored for 24 hours, and you can retrieve them at any time during that
        window. Yay!</p>
<p class="p">Starting with API version 37.0, each event notification contains a field called
          <span class="keyword parmname">replayId</span>. Similar to replaying a video, Streaming API replays the event
        notifications that were sent by using the <span class="keyword parmname">replayId</span> field. The value of
        the <span class="keyword parmname">replayId</span> field is a number that identifies the event in the stream.
        The replay ID is unique for the org and channel. When you replay an event, you’re retrieving
        a stored event from a location in the stored stream. You can either retrieve a stream of
        events starting after the event specified by a replay ID, or you can retrieve all stored
        events. Here’s a summary of the replay options we can specify when subscribing to a
        channel.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d33887e571">Replay Option</th>
<th class="featureTableHeader " id="d33887e574">Description</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Replay Option" headers="d33887e571"><var class="keyword varname">replayId</var></td>
<td class="entry" data-title="Description" headers="d33887e574">Subscriber receives notifications for events that occur after the event
                specified by the replay ID value.</td>
</tr>
<tr>
<td class="entry" data-title="Replay Option" headers="d33887e571">-1</td>
<td class="entry" data-title="Description" headers="d33887e574">Subscriber receives notifications for all new events that occur after
                subscription.</td>
</tr>
<tr>
<td class="entry" data-title="Replay Option" headers="d33887e571">-2</td>
<td class="entry" data-title="Description" headers="d33887e574">Subscriber receives notifications for all new events that occur after
                subscription and previous events that fall within the 24-hour retention
                window.</td>
</tr>
</tbody>
</table></div>
<p class="p">This diagram shows how event consumers can read a stream of events by using various replay
        options.</p>
<div class="imagecenter"><span class="image image-block"><img alt="Streaming events with replay options" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc969c2770c5a185416d77aeb30a8af4f.png"/></span></div>
</div></div>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_sample_app" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_sample_app"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Sample Durable Streaming Apps</span></h2>
<div class="body conbody">
<p class="p">To learn how to subscribe to events and use replay options, check out the durable
            streaming code examples in the Streaming API Developer Guide.
            Several examples are provided including a Visualforce page that uses a
            JavaScript CometD extension, and a Java client that uses a CometD connector. Links to
            these code examples are included in the Resources section.</p>
</div>
</div>
<div class="topic concept nested0" id="api_basics_streaming_generic_streaming" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_generic_streaming"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Generic Streaming</span></h2>
<div class="body conbody">
<div class="section"><div class="p">Before you set sail on your own, let’s spend a few minutes reviewing generic streaming.
        Streaming API supports sending
      notifications with a generic payload that aren’t tied to Salesforce data changes.<div class="p">You can use
        generic streaming for any situation where you want to send custom notifications, such as:<ul class="ul bulletList">
<li class="li">Broadcasting messages to specific teams or to your entire organization</li>
<li class="li">Sending notifications for events that are external to Salesforce</li>
</ul>
To use generic streaming, you need:<ul class="ul bulletList">
<li class="li">A streaming channel that defines the channel</li>
<li class="li">One or more clients subscribed to the channel</li>
<li class="li">The Streaming Channel Push resource to monitor and invoke events on the channel</li>
</ul>
You can create a streaming channel for generic streaming either through the Streaming
        Channels app in the user interface, or through the API. A streaming channel is represented
        by the StreamingChannel sObject, so you can create it through Apex, REST API, or SOAP API. The format of the
        channel name for generic streaming is <samp>/u/<var class="keyword varname">ChannelName</var></samp>. For example, this Apex snippet creates a channel
        named <samp>Broadcast</samp>.</div>
<div class="codeblock"><pre>StreamingChannel ch = new StreamingChannel();
ch.Name = '/u/Broadcast';

insert ch;</pre></div>
<p class="p">Alternatively,
        you can opt to have Salesforce
        create the streaming channel dynamically for you if it doesn’t exist. To enable dynamic
        streaming channels in your org, from Setup, enter <kbd class="ph userinput">User Interface</kbd> in
        the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">User Interface</strong>.
        On the User Interface page, select the <strong class="ph uicontrol">Enable Dynamic Streaming Channel
          Creation</strong> option.</p>
<p class="p">You can subscribe to the channel by using a CometD
        client. (The Resources section links to a sample walkthrough in the Streaming API Developer Guide.)</p>
<p class="p">To
        generate events, make a POST request to the following REST resource. Replace
          <var class="keyword varname">XX.0</var> with the API version and <var class="keyword varname">Streaming Channel ID</var>
        with the ID of your
        channel.</p>
<div class="codeblock"><pre>/services/data/vXX.0/sobjects/StreamingChannel/Streaming Channel ID/push</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>To
        obtain your channel ID, run a SOQL query on StreamingChannel, such as: <samp>SELECT Id, Name FROM StreamingChannel</samp></p></div></div></div></div></div>
<p class="p">Example REST
        request
        body.</p>
<div class="codeblock"><pre>{ 
  "pushEvents": [
      { 
          "payload": "Broadcast message to all subscribers", 
          "userIds": [] 
      } 
   ] 
}</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Instead
        of broadcasting to all subscribers, specify a list of subscribed users to send notifications
        to by using the optional <samp>userIds</samp> field. Also, you can
        use the GET method of the Streaming Channel Push REST API resource to get a list of active
        subscribers to the channel.</p></div></div></div></div></div>
<p class="p">The event notification that the subscribed client
        receives looks similar to the
        following.</p>
<div class="codeblock"><pre>{
  "clientId": "1p145y6g3x3nmnlodd7v9nhi4k", 
  "data": {
    "payload": "Broadcast message to all subscribers", 
    "event": {
      "createdDate": "2016-09-16T20:43:39.392Z", 
      "replayId": 1
    }
  }, 
  "channel": "/u/Broadcast"
}</pre></div>
<p class="p">Notice
        that this event notification contains the <span class="keyword parmname">replayId</span> field. As with
        PushTopic streaming, generic event notifications are also stored for 24 hours and can be
        retrieved using the <span class="keyword parmname">replayId</span> value starting in API version
        37.0.</p>
<p class="p">Thanks to event notifications, you can set sail in the high seas with confidence
        and head to the island rich with treasure!</p>
</div></div>
</div>
</div>
<div class="topic nested0" id="api_basics_streaming_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="api_basics_streaming_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">Check out the following resources in the <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/" target="_blank">Streaming API Developer Guide</a></cite>.<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api.meta/object_ref/pushtopic.htm" target="_blank">PushTopic Object Reference</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.202.0.api_streaming.meta/api_streaming/resources_push.htm" target="_blank">Streaming Channel Push REST Resource</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/BayeauxProtocolAndCometD.htm" target="_blank">Bayeux Protocol, CometD, and Long
                                        Polling</a></li>
</ul>
</div>
<div class="p">Check out the following code examples in the <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/" target="_blank">Streaming API Developer Guide</a></cite>.<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/code_sample_generic_vfp_intro.htm" target="_blank">Example: Subscribe to and Replay Events Using a Visualforce Page</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_streaming.meta/api_streaming/code_sample_java_client_intro.htm" target="_blank">Example: Subscribe to and Replay Events Using a Java Client</a></li>
</ul>
</div>
<div class="p">Check out the following resources on GitHub.<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://github.com/developerforce/SalesforceDurableStreamingDemo" target="_blank">Salesforce Durable Streaming Demo in
                                        GitHub</a></li>
<li class="li"><a class="xref" href="https://github.com/forcedotcom/EMP-Connector/" target="_blank">Enterprise Messaging Platform Connector (CometD
                                                Java Client)</a></li>
<li class="li"><a class="xref" href="https://github.com/developerforce/StreamingReplayClientExtensions" target="_blank">Java and JavaScript CometD Extensions</a></li>
</ul>
</div>
<p class="p"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.soql_sosl.meta/soql_sosl/" target="_blank">Force.com SOQL and SOSL
                                        Reference</a></cite></p>
</div>
</div>
</body></div><h1>Apex Integration Overview</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="apex_integration_callouts_learning_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_callouts_learning_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this module, you will be able to: <ul class="ul bulletList">
<li class="li">Describe the differences between web service and HTTP callouts.</li>
<li class="li">Authorize an external site with remote site settings.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_callouts_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_callouts_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Make Callouts to External Services from Apex</span></h2>
<div class="body conbody"><div class="shortdesc">An Apex callout enables
    you to tightly integrate your Apex
    code with an external service. The callout makes a call to an external web service or sends an
    HTTP request from Apex code, and then receives the response. </div>
<div class="section">
<p class="p">Apex callouts come in two flavors.</p>
<div class="p">
<ul class="ul bulletList">
<li class="li">Web service callouts to SOAP web services use XML, and typically require a WSDL
            document for code generation.</li>
<li class="li">HTTP callouts to services typically use REST with JSON.</li>
</ul>
</div>
<p class="p">These two types of callouts are similar in terms of sending a request to a service and
        receiving a response. But while WSDL-based callouts apply to SOAP Web services, HTTP
        callouts can be used with any HTTP service, either SOAP or REST. </p>
<p class="p">So you are probably asking yourself right now, “Which one should I use?” Whenever possible,
        use an HTTP service. These services are typically easier to interact with, require much less
        code, and utilize easily readable JSON. All the “cool kids” have been switching to REST
        services over the last couple of years, but that’s not to say that SOAP Web services are
        bad. They’ve been around forever (in Internet years) and are commonly used for enterprise
        applications. They are not going away anytime soon. You’ll probably use SOAP mostly when
        integrating with legacy applications or for transactions that require a formal exchange
        format or stateful operations. In this module we’ll touch on SOAP, but will spend most of
        our time on REST.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="apex_integration_callouts_authorizing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_callouts_authorizing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Authorize Endpoint Addresses</span></h2>
<div class="body taskbody"><div class="shortdesc">We love security at Salesforce! So, any time you make a callout to an external site we want to make sure that it is
        authorized. We can’t have code calling out willy-nilly to any endpoint without prior
        approval. Before you start working with callouts, update the list of approved sites for your
        org on the Remote Site Settings page. </div>
<div class="section context">
<p class="p">We’ll be using the following endpoints in this module, so go ahead and add them now.
                If you forget to add an endpoint, trust me, you'll get a reminder when you try to
                run your code. We’ll be making calls to the following sites.</p>
<ul class="ul bulletList">
<li class="li"><span class="ph filepath">https://th-apex-http-callout.herokuapp.com</span></li>
<li class="li"><span class="ph filepath">https://th-apex-soap-service.herokuapp.com</span></li>
</ul>
<p class="p">Authorize both of these endpoint URLs by following these steps.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Remote Site Settings</kbd> in the
                        <span class="keyword parmname">Quick Find</span> box, then click <strong class="ph uicontrol">Remote Site
                        Settings</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">New Remote Site</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the remote site name, enter <kbd class="ph userinput">animals_http</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the remote site URL, enter
                        <kbd class="ph userinput">https://th-apex-http-callout.herokuapp.com</kbd>. This URL
                    authorizes all subfolders for the endpoint, like
                        <span class="ph filepath">https://th-apex-http-callout.herokuapp.com/path1</span> and
                        <span class="ph filepath">https://th-apex-http-callout.herokuapp.com/path2</span>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the description, enter <kbd class="ph userinput">Trailhead animal service:
                        HTTP</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Save &amp; New</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the second remote site name, enter
                    <kbd class="ph userinput">animals_soap</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the remote site URL, enter
                        <kbd class="ph userinput">https://th-apex-soap-service.herokuapp.com</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the description, enter <kbd class="ph userinput">Trailhead animal service:
                        SOAP</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="apex_integration_callouts_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_callouts_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Articles"><a class="xref" href="https://developer.salesforce.com/page/Apex_Web_Services_and_Callouts" target="_blank" title="HTML (New Window)">Apex
                                        Web Services and Callouts</a></li>
<li class="li Articles"><a class="xref" href="https://stormpath.com/blog/rest-vs-soap/" target="_blank" title="HTML (New Window)">REST
                                        vs SOAP: When Is REST Better?</a></li>
</ul>
</div>
</div>
</body></div><h1>Apex REST Callouts</h1><div class="unit-content">
<body id="apex_integration_rest_callouts_learning_objectives"><a name="apex_integration_rest_callouts_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this module, you’ll be able to: <ul class="ul bulletList">
<li class="li">Perform a callout to receive data from an external service.</li>
<li class="li">Perform a callout to send data to an external service.</li>
<li class="li">Test callouts by using mock callouts.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_rest_http_basics" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_http_basics"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>HTTP and Callout Basics</span></h2>
<div class="body conbody"><div class="shortdesc">REST callouts are based on HTTP. To understand how callouts work, it’s helpful to
  understand a few things about HTTP. Each callout request is associated with an HTTP method and an
  endpoint. The HTTP method indicates what type of action is desired.</div>
<div class="fig fignone" id="fig_g24_lxb_b5"><a name="fig_g24_lxb_b5"></a>
<a name="image_h24_lxb_b5"></a><div class="imagecenter"><span class="image image-block"><img alt="Apex callouts to an external service" class="image image-block" id="image_h24_lxb_b5" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9e44c283a52e2f5ac41ea9d332799104.png"/></span></div>
</div>
<p class="p">The simplest request is a GET request (GET is an HTTP method). A GET request means that the
   sender wants to obtain information about a resource from the server. When the server receives and
   processes this request, it returns the request information to the recipient. A GET request is
   similar to navigating to an address in the browser. When you visit a web page, the browser
   performs a GET request behind the scenes. In the browser, the result of the navigation is a new
   HTML page that’s displayed. With a callout, the result is the response object.</p>
<p class="p">To illustrate how a GET request works, open your browser and navigate to the following URI:
    <a class="xref" href="https://th-apex-http-callout.herokuapp.com/animals" target="_blank" title="HTML (New Window)">https://th-apex-http-callout.herokuapp.com/animals</a>. Your browser displays a list of animals in a weird format, because the
   service returns the response in a format called JSON. Sometimes a GET response is also formatted
   in XML.</p>
<p class="p">The following are descriptions of common HTTP methods.</p>
<div class="data colSort"><table class="featureTable sort_table" summary=""><caption><span class="tablecap">Table 1. Some Common HTTP Methods</span></caption>
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d23027e79">HTTP Method</th>
<th class="featureTableHeader " id="d23027e82">Description</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="HTTP Method" headers="d23027e79">GET</td>
<td class="entry" data-title="Description" headers="d23027e82">Retrieve data identified by a URL.</td>
</tr>
<tr>
<td class="entry" data-title="HTTP Method" headers="d23027e79">POST</td>
<td class="entry" data-title="Description" headers="d23027e82">Create a  resource or post data to the server.</td>
</tr>
<tr>
<td class="entry" data-title="HTTP Method" headers="d23027e79">DELETE</td>
<td class="entry" data-title="Description" headers="d23027e82">Delete a resource identified by a URL.</td>
</tr>
<tr>
<td class="entry" data-title="HTTP Method" headers="d23027e79">PUT</td>
<td class="entry" data-title="Description" headers="d23027e82">Create or replace the resource sent in the request body.</td>
</tr>
</tbody>
</table></div>
<p class="p">If you have some free time, browse the exhaustive list of all HTTP methods in the <a class="xref" href="#apex_integration_rest_callouts_resources">Resources</a> section.</p>
<p class="p">In addition to the HTTP method, each request sets a URI, which is the endpoint address at which
   the service is located. For example, an endpoint can be
    <span class="ph filepath">http://www.example.com/api/resource</span>. In the example in the “HTTP and Callout Basics” unit, the endpoint is
    <span class="ph filepath">https://th-apex-http-callout.herokuapp.com/animals</span>.</p>
<p class="p">When the server processes the request, it sends a status code in the response. The status code
   indicates whether the request was processed successfully or whether errors were encountered. If
   the request is successful, the server sends a status code of <samp>200</samp>. You’ve probably seen some other status codes, such as 404 for file not found or
   500 for an internal server error.</p>
<p class="p">If you still have free time after browsing the list of HTTP methods, check out the list of all
   response status codes in the <a class="xref" href="#apex_integration_rest_callouts_resources">Resources</a> section. If you’re having a hard time sleeping at night, these two resources can
   help.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>In addition to the endpoint and the HTTP method, you can set other properties for a request.
   For example, a request can contain headers that provide more information about the request, such
   as the content type. A request can also contain data to be sent to the service, such as for POST
   requests. You’ll see an example of a POST request in a later step. A POST request is similar to
   clicking a button on a web page to submit form data. With a callout, you send data as part of the
   body of the request instead of manually entering the data on a web page.</p></div></div></div></div></div>
</div>
</div>
<div class="topic task nested0" id="apex_integration_rest_get_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_get_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Get Data from a Service</span></h2>
<div class="body taskbody"><div class="shortdesc">It’s time to put your new HTTP knowledge to use with some Apex callouts. This example sends a
    GET request to a web service to get a list of woodland creatures. The service sends the response
    in JSON format. JSON is essentially a string, so the built-in <samp>JSONParser</samp> class converts it to an object. We can then use that object to write the
    name of each animal to the debug log.</div>
<div class="section prereq p">
<p class="p">Before you run the examples in this unit, you’ll need to authorize the endpoint URL of the
        callout, <span class="ph filepath">https://th-apex-http-callout.herokuapp.com</span>, using the steps
        from the <a class="xref" href="https://trailhead.salesforce.com/apex_integration_services/apex_integration_callouts.htm#apex_integration_callouts_authorizing" target="_blank" title="HTML (New Window)">Authorize Endpoint Addresses</a> section.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console under
            <span class="keyword parmname">Your Name</span> or the quick access menu (<img alt="Setup gear icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us02e863126fef084a82dc1f96dea047ff.png"/>).</span>
</li>
<li class="li step">
<span class="ph cmd">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">Debug</strong> | <strong class="ph uicontrol">Open Execute Anonymous Window</strong></span>.</span>
</li>
<li class="li step">
<span class="ph cmd">Delete the existing code and insert the following snippet.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>Http http = new Http();
HttpRequest request = new HttpRequest();
request.setEndpoint('https://th-apex-http-callout.herokuapp.com/animals');
request.setMethod('GET');
HttpResponse response = http.send(request);
// If the request is successful, parse the JSON response.
if (response.getStatusCode() == 200) {
    // Deserialize the JSON string into collections of primitive data types.
    Map&lt;String, Object&gt; results = (Map&lt;String, Object&gt;) JSON.deserializeUntyped(response.getBody());
    // Cast the values in the 'animals' key as a list
    List&lt;Object&gt; animals = (List&lt;Object&gt;) results.get('animals');
    System.debug('Received the following animals:');
    for (Object animal: animals) {
        System.debug(animal);
    }
}</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Select <strong class="ph uicontrol">Open Log</strong>, and then click
          <strong class="ph uicontrol">Execute</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">After the debug log opens, select <strong class="ph uicontrol">Debug Only</strong> to view the output
          of the <span class="ph filepath">System.debug</span> statements.</span>
<div class="itemgroup stepresult">The names of the animals are displayed.</div>
</li>
</ol>
<div class="section postreq">
<p class="p">The JSON for our example is fairly simple and easy to parse. For more complex JSON
        structures, you can use <a class="xref" href="https://json2apex.herokuapp.com/" target="_blank" title="HTML (New Window)">JSON2Apex</a>. This tool generates strongly
        typed Apex code for parsing a
        JSON structure. You simply paste in the JSON, and the tool generates the necessary Apex code for you.
        Brilliant!</p>
</div>
</div>
</div>
<div class="topic task nested0" id="apex_integration_rest_post_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_post_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Send Data to a Service</span></h2>
<div class="body taskbody"><div class="shortdesc">Another common use case for HTTP callouts is sending data to a service. For instance,
    when you buy the latest Justin Bieber album or comment on your favorite “Cat in a Shark Costume
    Chases a Duck While Riding a Roomba” video, your browser is making a POST request to submit
    data. Let’s see how we send data in Apex.</div>
<div class="section context">
<p class="p">This example sends a POST request to the web service to add an animal name. The new name is
        added to the request body as a JSON string. The request <samp>Content-Type</samp> header is set to let the service know that the sent data is in JSON
        format so that it can process the data appropriately. The service responds by sending a
        status code and a list of all animals, including the one you added. If the request was
        processed successfully, the status code returns 201, because a resource has been created.
        The response is sent to the debug log when anything other than 201 is returned.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console under
            <span class="keyword parmname">Your Name</span> or the quick access menu (<img alt="Setup gear icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us02e863126fef084a82dc1f96dea047ff.png"/>).</span>
</li>
<li class="li step">
<span class="ph cmd">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">Debug</strong> | <strong class="ph uicontrol">Open Execute Anonymous Window</strong></span>.</span>
</li>
<li class="li step">
<span class="ph cmd">Delete any existing code and insert the following snippet.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>Http http = new Http();
HttpRequest request = new HttpRequest();
request.setEndpoint('https://th-apex-http-callout.herokuapp.com/animals');
request.setMethod('POST');
request.setHeader('Content-Type', 'application/json;charset=UTF-8');
// Set the body as a JSON object
request.setBody('{"name":"mighty moose"}');
HttpResponse response = http.send(request);
// Parse the JSON response
if (response.getStatusCode() != 201) {
    System.debug('The status code returned was not expected: ' +
        response.getStatusCode() + ' ' + response.getStatus());
} else {
    System.debug(response.getBody());
}</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Select <strong class="ph uicontrol">Open Log</strong>, and then click
          <strong class="ph uicontrol">Execute</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">When the debug log opens, select <strong class="ph uicontrol">Debug Only</strong> to view the output
          of the <samp>System.debug</samp> statement. The last item in
          the list of animals is <samp>"mighty
          moose"</samp>.</span>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="apex_integration_rest_testing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_testing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Test Callouts</span></h2>
<div class="body">
<p class="p">There’s good news and bad news regarding callout testing. The bad news is that Apex test methods don’t
            support callouts, and tests that perform callouts fail. The good news is that the
            testing runtime allows you to “mock” the callout. Mock callouts allow you to specify the
            response to return in the test instead of actually calling the web service. You are
            essentially telling the runtime, “I know what this web service will return, so instead
            of calling it during testing, just return this data.” Using mock callouts in your tests
            helps ensure that you attain adequate code coverage and that no lines of code are
            skipped due to callouts.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Prerequisites</h3>
<p class="p">Before you write your tests, let’s create a class that contains the GET and POST
                request examples we executed anonymously in the “Send Data to a Service” unit. These examples are slightly modified so that the requests are in methods
                and return values, but they’re essentially the same as the previous examples. </p>
</div>
<ol class="ol enumList">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">AnimalsCallouts</kbd> and then click
                    <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class
                definition.<div class="codeblock"><pre>public class AnimalsCallouts {

    public static HttpResponse makeGetCallout() {
        Http http = new Http();
        HttpRequest request = new HttpRequest();
        request.setEndpoint('https://th-apex-http-callout.herokuapp.com/animals');
        request.setMethod('GET');
        HttpResponse response = http.send(request);
        // If the request is successful, parse the JSON response.
        if (response.getStatusCode() == 200) {
            // Deserializes the JSON string into collections of primitive data types.
            Map&lt;String, Object&gt; results = (Map&lt;String, Object&gt;) JSON.deserializeUntyped(response.getBody());
            // Cast the values in the 'animals' key as a list
            List&lt;Object&gt; animals = (List&lt;Object&gt;) results.get('animals');
            System.debug('Received the following animals:');
            for (Object animal: animals) {
                System.debug(animal);
            }
        }
        return response;
    }

    public static HttpResponse makePostCallout() {
        Http http = new Http();
        HttpRequest request = new HttpRequest();
        request.setEndpoint('https://th-apex-http-callout.herokuapp.com/animals');
        request.setMethod('POST');
        request.setHeader('Content-Type', 'application/json;charset=UTF-8');
        request.setBody('{"name":"mighty moose"}');
        HttpResponse response = http.send(request);
        // Parse the JSON response
        if (response.getStatusCode() != 201) {
            System.debug('The status code returned was not expected: ' +
                response.getStatusCode() + ' ' + response.getStatus());
        } else {
            System.debug(response.getBody());
        }
        return response;
    }        

}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
</ol>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Test a Callout with StaticResourceCalloutMock</h3>
<p class="p">To test your callouts, use mock callouts by either implementing an interface or using
                static resources. In this example, we use static resources and a mock interface
                later on. The static resource contains the response body to return. Again, when
                using a mock callout, the request isn’t sent to the endpoint. Instead, the Apex runtime knows to
                look up the response specified in the static resource and return it instead. The
                    <samp>Test.setMock</samp> method informs the runtime
                that mock callouts are used in the test method. Let’s see mock callouts in action.
                First, we create a static resource containing a JSON-formatted string to use for the
                GET request.</p>
<a name="ol_adq_sqn_c5"></a><ol class="ol enumList" id="ol_adq_sqn_c5">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Static Resource</strong></span>.</li>
<li class="li">For the name, enter <kbd class="ph userinput">GetAnimalResource</kbd>.</li>
<li class="li">For the MIME type, select <strong class="ph uicontrol">text/plain</strong>, even though we are
                    using JSON.</li>
<li class="li">Click <strong class="ph uicontrol">Submit</strong>.</li>
<li class="li">In the tab that opens for the resource, insert the following content. Make sure
                    that it is all on one line and doesn’t break to the next line. This content is
                    what the mock callout returns. It’s an array of three woodland
                    creatures.<div class="codeblock"><pre>{"animals": ["pesky porcupine", "hungry hippo", "squeaky squirrel"]}</pre></div>
</li>
<li class="li">Press <kbd class="ph userinput">CTRL+S</kbd> to save.</li>
</ol>
<p class="p">You’ve successfully created your static resource! Now, let’s add a test for our
                callout that uses this resource.</p>
<a name="ol_ip5_zqn_c5"></a><ol class="ol enumList" id="ol_ip5_zqn_c5">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">AnimalsCalloutsTest</kbd> and then
                    click <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following test class
                    definition.<div class="codeblock"><pre>@isTest
private class AnimalsCalloutsTest {

    @isTest static  void testGetCallout() {
        // Create the mock response based on a static resource
        StaticResourceCalloutMock mock = new StaticResourceCalloutMock();
        mock.setStaticResource('GetAnimalResource');
        mock.setStatusCode(200);
        mock.setHeader('Content-Type', 'application/json;charset=UTF-8');
        // Associate the callout with a mock response
        Test.setMock(HttpCalloutMock.class, mock);
        // Call method to test
        HttpResponse result = AnimalsCallouts.makeGetCallout();
        // Verify mock response is not null
        System.assertNotEquals(null,result,
            'The callout returned a null response.');
        // Verify status code
        System.assertEquals(200,result.getStatusCode(),
          'The status code is not 200.');
        // Verify content type   
        System.assertEquals('application/json;charset=UTF-8',
          result.getHeader('Content-Type'),
          'The content type value is not expected.');  
        // Verify the array contains 3 items     
        Map&lt;String, Object&gt; results = (Map&lt;String, Object&gt;) 
            JSON.deserializeUntyped(result.getBody());
        List&lt;Object&gt; animals = (List&lt;Object&gt;) results.get('animals');
        System.assertEquals(3, animals.size(),
          'The array should only contain 3 items.');          
    }   

}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
<li class="li">Select <span class="ph menucascade"><strong class="ph uicontrol">Test</strong> | <strong class="ph uicontrol">Always Run Asynchronously</strong></span>. If you don’t select Always Run Asynchronously, test runs that
                    include only one class run synchronously. You can open logs from the Tests tab
                    only for synchronous test runs.</li>
<li class="li">To run the test, select <span class="ph menucascade"><strong class="ph uicontrol">Test</strong> | <strong class="ph uicontrol">New Run</strong></span>.</li>
<li class="li">From the Test Classes list, select
                    <strong class="ph uicontrol">AnimalsCalloutsTest</strong>.</li>
<li class="li">Click <span class="ph menucascade"><strong class="ph uicontrol">Add Selected</strong> | <strong class="ph uicontrol">Run</strong></span>.</li>
</ol>
<p class="p">The test result is displayed in the Tests tab under a test run ID. When the test
                execution finishes, expand the test run to view details. Now double-click
                        <strong class="ph uicontrol"><samp>AnimalCallouts</samp></strong> in the Overall Code Coverage pane to see
                which lines are covered by your tests.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading9">Test a Callout with HttpCalloutMock</h3>
<p class="p">To test your POST callout, we provide an implementation of the <samp>HttpCalloutMock</samp> interface. This interface
                enables you to specify the response that’s sent in the <samp>respond</samp> method. Your test class instructs the
                    Apex runtime to
                send this fake response by calling <samp>Test.setMock</samp> again. For the first argument, pass <samp>HttpCalloutMock.class</samp>. For the second argument,
                pass a new instance of <samp>AnimalsHttpCalloutMock</samp>, which is your interface implementation of
                    <samp>HttpCalloutMock</samp>. (We’ll write <samp>AnimalsHttpCalloutMock</samp> in the example after this
                one.)</p>
<div class="codeblock"><pre>Test.setMock(HttpCalloutMock.class, new AnimalsHttpCalloutMock());</pre></div>
<p class="p">Now add the class that implements the <samp>HttpCalloutMock</samp> interface to
                intercept the callout. If an HTTP callout is invoked in test context, the callout is
                not made. Instead, you receive the mock response that you specify in the <samp>respond</samp> method implementation in <samp>AnimalsHttpCalloutMock</samp>. </p>
<a name="ol_xjc_srn_c5"></a><ol class="ol enumList" id="ol_xjc_srn_c5">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">AnimalsHttpCalloutMock</kbd> and then
                    click <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class
                    definition.<div class="codeblock"><pre>@isTest
global class AnimalsHttpCalloutMock implements HttpCalloutMock {
    // Implement this interface method
    global HTTPResponse respond(HTTPRequest request) {
        // Create a fake response
        HttpResponse response = new HttpResponse();
        response.setHeader('Content-Type', 'application/json');
        response.setBody('{"animals": ["majestic badger", "fluffy bunny", "scary bear", "chicken", "mighty moose"]}');
        response.setStatusCode(200);
        return response; 
    }
}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
</ol>
<p class="p">In your test class, create the <samp>testPostCallout</samp>
                method to set the mock callout, as shown in the next example. The <samp>testPostCallout</samp> method calls <samp>Test.setMock</samp>, and then calls the <samp>makePostCallout</samp> method in the <samp>AnimalsCallouts</samp> class. It then verifies that the
                response that’s returned is what you specified in the respond method of the mock
                implementation. </p>
<a name="ol_s3d_fsn_c5"></a><ol class="ol enumList" id="ol_s3d_fsn_c5">
<li class="li">Modify the test class <samp>AnimalsCalloutsTest</samp> to add a second test method. Click the class
                    tab, and then add the following method before the closing
                    bracket.<div class="codeblock"><pre>@isTest static void testPostCallout() {
    // Set mock callout class 
    Test.setMock(HttpCalloutMock.class, new AnimalsHttpCalloutMock()); 
    // This causes a fake response to be sent
    // from the class that implements HttpCalloutMock. 
    HttpResponse response = AnimalsCallouts.makePostCallout();
    // Verify that the response received contains fake values
    String contentType = response.getHeader('Content-Type');
    System.assert(contentType == 'application/json');
    String actualValue = response.getBody();
    System.debug(response.getBody());
    String expectedValue = '{"animals": ["majestic badger", "fluffy bunny", "scary bear", "chicken", "mighty moose"]}';
    System.assertEquals(actualValue, expectedValue);
    System.assertEquals(200, response.getStatusCode());
}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
<li class="li">Select <span class="ph menucascade"><strong class="ph uicontrol">Test</strong> | <strong class="ph uicontrol">New Run</strong></span>.</li>
<li class="li">From the Test Classes list, select
                    <strong class="ph uicontrol">AnimalsCalloutsTest</strong>.</li>
<li class="li">Click <span class="ph menucascade"><strong class="ph uicontrol">Add Selected</strong> | <strong class="ph uicontrol">Run</strong></span>.<p class="p">The test result displays in the Tests tab under a new test run
                        ID. When the test execution finishes, expand the test run to view details
                        about both tests.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_rest_tell_me_more" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_tell_me_more"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Tell Me More...</span></h2>
<div class="body conbody"><div class="shortdesc">Learn about using callouts in triggers and in asynchronous Apex, and about making asynchronous
    callouts.</div>
<p class="p">When making a callout from a method, the method waits for the external service to send back
      the callout response before executing subsequent lines of code. Alternatively, you can place
      the callout code in an asynchronous method that’s annotated with <samp>@future(callout=true)</samp> or use Queueable Apex. This way, the callout runs
      on a separate thread, and the execution of the calling method isn’t blocked.</p>
<p class="p">When making a callout from a trigger, the callout must not block the trigger process while
      waiting for the response. For the trigger to be able to make a callout, the method containing
      the callout code must be annotated with <samp>@future(callout=true)</samp> to run in a separate thread.</p>
</div>
</div>
<div class="topic nested0" id="apex_integration_rest_callouts_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_rest_callouts_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_callouts.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: Invoking Callouts Using Apex</a></li>
<li class="li Article"><a class="xref" href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" title="HTML (New Window)"><em class="ph i">Wikipedia</em>: Representational state
                                        transfer</a></li>
<li class="li Article"><a class="xref" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/" target="_blank" title="HTML (New Window)"><em class="ph i">W3C
                                                Note</em>: Simple Object Access Protocol (SOAP)
                                        1.1</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Apex SOAP Callouts</h1><div class="unit-content">
<body id="apex_integration_soap_callouts_learning_objectives"><a name="apex_integration_soap_callouts_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this module, you’ll be able to: <a name="ul_mbx_b5n_c5"></a><ul class="ul bulletList" id="ul_mbx_b5n_c5">
<li class="li">Generate Apex
                    classes using WSDL2Apex.</li>
<li class="li">Perform a callout to send data to an external service using SOAP.</li>
<li class="li">Test callouts by using mock callouts.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="apex_integration_soap_wsdl2apex" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_soap_wsdl2apex"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Use WSDL2Apex to Generate Apex Code</span></h2>
<div class="body"><div class="shortdesc">In addition to REST callouts, Apex can also make callouts to
        SOAP web services using XML. Working with SOAP can be a painful (but necessary) experience.
        Fortunately, we have tools to make the process easier. </div>
<p class="p">WSDL2Apex automatically generates Apex classes from a WSDL
            document. You download the web service’s WSDL file, and then you upload the WSDL and
            WSDL2Apex generates the Apex classes for you. The Apex classes construct the SOAP XML, transmit the data, and parse the response XML into
                Apex objects. Instead
            of developing the logic to construct and parse the XML of the web service messages, let
            the Apex classes generated
            by WSDL2Apex internally handle all that overhead. If you are familiar with WSDL2Java or
            with importing a WSDL as a Web Reference in .NET, this functionality is similar to
            WSDL2Apex. You’re welcome.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Use outbound messaging to handle integration solutions when possible. Use callouts to
            third-party web services only when necessary.</p></div></div></div></div></div>
<p class="p">For this example, we’re using a simple calculator web service to add two numbers. It’s a
            groundbreaking service that is all the rage! The first thing we need to do is download
            the WSDL file to generate the Apex classes. <a class="xref" href="https://th-apex-soap-service.herokuapp.com/assets/calculator.xml" target="_blank">Click this link</a> and
            download the <span class="ph filepath">calculator.xml</span> file to your computer. Remember where
            you save this file, because you need it in the next step.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Generate an Apex
                Class from the WSDL</h3>
<a name="ol_hdp_45n_c5"></a><ol class="ol enumList" id="ol_hdp_45n_c5">
<li class="li">From Setup, enter <kbd class="ph userinput">Apex Classes</kbd> in the <span class="keyword parmname">Quick
                        Find</span> box, then click <strong class="ph uicontrol">Apex Classes</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Generate from WSDL</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Choose File</strong> and select the downloaded
                        <span class="ph filepath">calculator.xml</span> file.</li>
<li class="li">Click <strong class="ph uicontrol">Parse WSDL</strong>. The application generates a default
                    class name for each namespace in the WSDL document and reports any errors.<p class="p">For
                        this example, use the default class name. However, in real life it is highly
                        recommended that you change the default names to make them easier to work
                        with and make your code more intuitive.</p>
<p class="p">It’s time to talk honestly
                        about the WSDL parser. WSDL2Apex parsing is a notoriously fickle beast. The
                        parsing process can fail for several reasons, such as an unsupported type,
                        multiple bindings, or unknown elements. Unfortunately, you could be forced
                        to manually code the Apex classes
                        that call the web service or use HTTP. </p>
</li>
<li class="li">Click <strong class="ph uicontrol">Generate Apex code</strong>. The final page of the wizard
                    shows the generated classes, along with any errors. The page also provides a
                    link to view successfully generated code.</li>
</ol>
<p class="p">The generated Apex
                classes include stub and type classes for calling the third-party web service
                represented by the WSDL document. These classes allow you to call the external web
                service from Apex. For
                each generated class, a second class is created with the same name and the prefix
                    <samp>Async</samp>. The <samp>calculatorServices</samp> class is for synchronous
                callouts. The <samp>AsyncCalculatorServices</samp> class
                is for asynchronous callouts.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Execute the Callout</h3>
<p class="p"><strong class="ph b">Prerequisites</strong></p>
<p class="p">Before you run this example, authorize the endpoint URL of the web service callout,
                    <span class="ph filepath">https://th-apex-soap-service.herokuapp.com</span>, using the steps
                from the <a class="xref" href="https://trailhead.salesforce.com/apex_integration_services/apex_integration_callouts.htm#apex_integration_callouts_authorizing" target="_blank" title="HTML (New Window)">Authorize Endpoint Addresses</a> section.</p>
<p class="p">Now you can execute the callout and see if it correctly adds two numbers. Have a
                calculator handy to check the results.</p>
<a name="ol_ipf_2vn_c5"></a><ol class="ol enumList" id="ol_ipf_2vn_c5">
<li class="li">Open the Developer Console under
                        <span class="keyword parmname">Your Name</span> or the quick access menu (<img alt="Setup gear icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us02e863126fef084a82dc1f96dea047ff.png"/>).</li>
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">Debug</strong> | <strong class="ph uicontrol">Open Execute Anonymous Window</strong></span>.</li>
<li class="li">Delete all existing code and insert the following
                    snippet.<div class="codeblock"><pre>calculatorServices.CalculatorImplPort calculator = new  calculatorServices.CalculatorImplPort();
Double x = 1.0;
Double y = 2.0;
Double result = calculator.doAdd(x,y);
System.debug(result);</pre></div>
</li>
<li class="li">Select <strong class="ph uicontrol">Open Log</strong>, and then click
                        <strong class="ph uicontrol">Execute</strong>.</li>
<li class="li">After the debug log opens, click <strong class="ph uicontrol">Debug Only</strong> to view the
                    output of the <samp>System.debug</samp> statements. The
                    log should display <samp class="ph systemoutput">3.0</samp>.</li>
</ol>
</div>
</div>
</div>
<div class="topic nested0" id="apex_integration_soap_test_web_service" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_soap_test_web_service"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Test Web Service Callouts</span></h2>
<div class="body">
<p class="p">All experienced Apex
            developers know that to deploy or package Apex code, at least 75% of
            that code must have test coverage. This coverage includes our classes generated by
            WSDL2Apex. You might have heard this before, but test methods don’t support web service
            callouts, and tests that perform web service callouts fail. So, we have a little work to
            do. To prevent tests from failing and to increase code coverage, Apex provides a built-in
                <samp>WebServiceMock</samp> interface and the <samp>Test.setMock</samp> method. You can use this interface to
            receive fake responses in a test method, thereby providing the necessary test
            coverage.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Specify a Mock Response for Callouts</h3>
<p class="p">When you create an Apex
                class from a WSDL, the methods in the autogenerated class call <samp>WebServiceCallout.invoke</samp>, which performs the
                callout to the external service. When testing these methods, you can instruct the
                    Apex runtime to
                generate a fake response whenever <samp>WebServiceCallout.invoke</samp> is called. To do so, implement the <samp>WebServiceMock</samp> interface and specify a fake
                response for the testing runtime to send. </p>
<p class="p">Instruct the Apex
                runtime to send this fake response by calling <samp>Test.setMock</samp> in your test method. For the first argument, pass <samp>WebServiceMock.class</samp>. For the second argument, pass
                a new instance of your <samp>WebServiceMock</samp> interface
                implementation.</p>
<div class="codeblock"><pre>Test.setMock(WebServiceMock.class, new MyWebServiceMockImpl());</pre></div>
<p class="p">That’s a lot to grok, so let’s look at some code for a complete example. In this
                example, you create the class that makes the callout, a mock implementation for
                testing, and the test class itself.</p>
<a name="ol_y3x_cwn_c5"></a><ol class="ol enumList" id="ol_y3x_cwn_c5">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">AwesomeCalculator</kbd> and then
                    click <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace autogenerated code with the following class
                    definition.<div class="codeblock"><pre>public class AwesomeCalculator {
    public static Double add(Double x, Double y) {
        calculatorServices.CalculatorImplPort calculator = 
            new calculatorServices.CalculatorImplPort();
        return calculator.doAdd(x,y);
    }
}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.<p class="p">Create your mock implementation
                        to fake the callout during testing. Your implementation of <samp>WebServiceMock</samp> calls the <samp>doInvoke</samp> method, which returns the response
                        you specify for testing. Most of this code is boilerplate. The hardest part
                        of this exercise is figuring out how the web service returns a response so
                        that you can fake a value.</p>
</li>
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">CalculatorCalloutMock</kbd> and then
                    click <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class definition.
                    <div class="codeblock"><pre>@isTest
global class CalculatorCalloutMock implements WebServiceMock {
   global void doInvoke(
           Object stub,
           Object request,
           Map&lt;String, Object&gt; response,
           String endpoint,
           String soapAction,
           String requestName,
           String responseNS,
           String responseName,
           String responseType) {
        // start - specify the response you want to send
        calculatorServices.doAddResponse response_x = 
            new calculatorServices.doAddResponse();
        response_x.return_x = 3.0;
        // end
        response.put('response_x', response_x); 
   }
}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.<p class="p">Lastly, your test method needs to
                        instruct the Apex runtime
                        to send the fake response by calling <samp>Test.setMock</samp> before making the callout in the <samp>AwesomeCalculator</samp> class. Like any other
                        test method, we assert that the correct result from our mock response was
                        received.</p>
</li>
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li"> For the class name, enter <kbd class="ph userinput">AwesomeCalculatorTest</kbd> and then
                    click <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class
                    definition.<div class="codeblock"><pre>@isTest
private class AwesomeCalculatorTest {
    @isTest static void testCallout() {              
        // This causes a fake response to be generated
        Test.setMock(WebServiceMock.class, new CalculatorCalloutMock());
        // Call the method that invokes a callout
        Double x = 1.0;
        Double y = 2.0;
        Double result = AwesomeCalculator.add(x, y);
        // Verify that a fake result is returned
        System.assertEquals(3.0, result); 
    }
}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
<li class="li">To run the test, select <span class="ph menucascade"><strong class="ph uicontrol">Test</strong> | <strong class="ph uicontrol">Run All</strong></span>.</li>
</ol>
<p class="p">The <samp>AwesomeCalculator</samp> class should now display
                100% code coverage!</p>
</div>
</div>
</div>
<div class="topic nested0" id="apex_integration_soap_callouts_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_soap_callouts_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_callouts_wsdl2apex.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: SOAP Services: Defining a Class from a WSDL Document</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_callouts_wsdl2apex_testing.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: Test Web Service Callouts</a></li>
<li class="li Article"><a class="xref" href="https://developer.salesforce.com/blogs/engineering/2014/09/announcing-open-source-wsdl2apex-generator.html" target="_blank" title="HTML (New Window)">Announcing the Open-Source WSDL2Apex Generator</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Apex Web Services</h1><div class="unit-content">
<body id="apex_integration_webservices_learning_objectives"><a name="apex_integration_webservices_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this module, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe the two types of Apex web services
                    and provide a high-level overview of these services.</li>
<li class="li">Create an Apex REST class
                    that contains methods for each HTTP method.</li>
<li class="li">Invoke a custom Apex REST
                    method with an endpoint.</li>
<li class="li">Pass data to a custom Apex REST
                    method by sending a request body in JSON format.</li>
<li class="li">Write a test method for an Apex REST
                    method and set properties in a test REST request.</li>
<li class="li">Write a test method for an Apex REST
                    method by calling the method with parameter values.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_webservices_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Expose Your Apex Class as a Web
    Service</span></h2>
<div class="body conbody"><div class="shortdesc">You can expose your Apex
    class methods as a REST or SOAP web service operation. By making your methods callable through
    the web, your external applications can integrate with Salesforce to perform all sorts of nifty
    operations. </div>
<div class="section">
<p class="p">For example, say your company’s call center is using an internal application to manage
        on-premises resources. Customer support representatives are expected to use the same
        application to perform their daily work, including managing case records in Salesforce. By using one interface,
        representatives can view and update case records and access internal resources. The
        application calls an Apex web
        service class to manage Salesforce
        case records.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Expose a Class as a REST Service</h3>
<p class="p">Making your Apex class
        available as a REST web service is straightforward. Define your class as global, and define
        methods as global static. Add annotations to the class and methods. For example, this sample
          Apex REST class uses one
        method. The <samp>getRecord</samp> method is a custom REST API
        call. It’s annotated with <samp>@HttpGet</samp> and is invoked
        for a GET request.</p>
<div class="codeblock"><pre>@RestResource(urlMapping='/Account/*')
global with sharing class MyRestResource {
    @HttpGet
    global static Account getRecord() {
        // Add your code
    }
}</pre></div>
<p class="p">As you can see, the class is annotated with <samp>@RestResource(urlMapping='/Account/*)</samp>. The base endpoint for Apex REST is <span class="ph filepath">https://<var class="keyword varname">yourInstance</var>.salesforce.com/services/apexrest/</span>. The URL mapping is appended to the base endpoint to form
        the endpoint for your REST service. For example, in the class example, the REST endpoint is
            <span class="ph filepath">https://<var class="keyword varname">yourInstance</var>.salesforce.com/services/apexrest/Account/</span>. For your org, it could look something like,<span class="ph filepath">
          https://<var class="keyword varname">yourInstance</var>.salesforce.com/services/apexrest/Account/</span>.</p>
<p class="p">The URL mapping is case-sensitive and can contain a wildcard character (*).</p>
<p class="p">Define each exposed method as <samp>global static</samp> and add an
        annotation to associate it with an HTTP method. The following annotations are available. You
        can use each annotation only once in each Apex class.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d24888e182">Annotation</th>
<th class="featureTableHeader " id="d24888e185">Action</th>
<th class="featureTableHeader " id="d24888e188">Details</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Annotation" headers="d24888e182"><samp>@HttpGet</samp></td>
<td class="entry" data-title="Action" headers="d24888e185">Read</td>
<td class="entry" data-title="Details" headers="d24888e188">Reads or retrieves records.</td>
</tr>
<tr>
<td class="entry" data-title="Annotation" headers="d24888e182"><samp>@HttpPost</samp></td>
<td class="entry" data-title="Action" headers="d24888e185">Create</td>
<td class="entry" data-title="Details" headers="d24888e188">Creates records.</td>
</tr>
<tr>
<td class="entry" data-title="Annotation" headers="d24888e182"><samp>@HttpDelete</samp></td>
<td class="entry" data-title="Action" headers="d24888e185">Delete</td>
<td class="entry" data-title="Details" headers="d24888e188">Deletes records.</td>
</tr>
<tr>
<td class="entry" data-title="Annotation" headers="d24888e182"><samp>@HttpPut</samp></td>
<td class="entry" data-title="Action" headers="d24888e185">Upsert</td>
<td class="entry" data-title="Details" headers="d24888e188">Typically used to update existing records or create records.</td>
</tr>
<tr>
<td class="entry" data-title="Annotation" headers="d24888e182"><samp>@HttpPatch</samp></td>
<td class="entry" data-title="Action" headers="d24888e185">Update</td>
<td class="entry" data-title="Details" headers="d24888e188">Typically used to update fields in existing records.</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Expose a Class as a SOAP Service</h3>
<p class="p">Making your Apex class
        available as a SOAP web service is as easy as with REST. Define your class as global. Add
        the <samp>webservice</samp> keyword and the <samp>static</samp> definition modifier to each method you want to
        expose. The <samp>webservice</samp> keyword provides global
        access to the method it is added to.</p>
<p class="p">For example, here’s a sample class with one method. The <samp>getRecord</samp> method is a custom SOAP API call that returns an Account record.</p>
<div class="codeblock"><pre>global with sharing class MySOAPWebService {
    webservice static Account getRecord(String id) {
        // Add your code
    }
}</pre></div>
<p class="p">The external application can call your custom Apex methods as web service
        operations by consuming the class WSDL file. Generate this WSDL for your class from the
        class detail page, accessed from the Apex Classes page in Setup. You
        typically send the WSDL file to third-party developers (or use it yourself) to write
        integrations for your web service.</p>
<p class="p">Because platform security is a first-class Salesforce citizen, your web service
        requires authentication. In addition to the Apex class WSDL, external
        applications must use either the Enterprise WSDL or the Partner WSDL for login
        functionality.</p>
</div>
</div>
</div>
<div class="topic nested0" id="apex_integration_webservices_rest_example_basic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_rest_example_basic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Apex REST Walkthrough
        </span></h2>
<div class="body"><div class="shortdesc">Now the fun stuff. The next few steps walk you through the process of building an Apex REST service. First,
        you create the Apex class that
        is exposed as a REST service. Then you try calling a few methods from a client, and finally
        write unit tests. There’s quite a bit of code, but it will be worth the effort!</div>
<div class="section">
<p class="p">Your Apex class manages
                case records. The class contains five methods, and each method corresponds to an
                HTTP method. For example, when the client application invokes a REST call for the
                GET HTTP method, the <samp>getCaseById</samp> method is
                invoked.</p>
<p class="p">Because the class is defined with a URL mapping of <span class="ph filepath">/Cases/*</span>, the
                endpoint used to call this REST service is any URI that starts with <span class="ph filepath">https://<var class="keyword varname">yourInstance</var>.salesforce.com/services/apexrest/Cases/</span>.</p>
<p class="p">We suggest that you also think about versioning your API endpoints so that you can
                provide upgrades in functionality without breaking existing code. You could create
                two classes specifying URL mappings of <span class="ph filepath">/Cases/v1/*</span> and
                    <span class="ph filepath">/Cases/v2/*</span> to implement this functionality.</p>
<p class="p">Let’s get started by creating an Apex REST class. </p>
<ol class="ol enumList">
<li class="li">Open the Developer Console under
                        <span class="keyword parmname">Your Name</span> or the quick access menu (<img alt="Setup gear icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us02e863126fef084a82dc1f96dea047ff.png"/>).</li>
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">CaseManager</kbd> and then click
                        <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class
                    definition.<div class="codeblock"><pre>@RestResource(urlMapping='/Cases/*')
global with sharing class CaseManager {

    @HttpGet
    global static Case getCaseById() {
        RestRequest request = RestContext.request;
        // grab the caseId from the end of the URL
        String caseId = request.requestURI.substring(
          request.requestURI.lastIndexOf('/')+1);
        Case result =  [SELECT CaseNumber,Subject,Status,Origin,Priority
                        FROM Case
                        WHERE Id = :caseId];
        return result;
    }

    @HttpPost
    global static ID createCase(String subject, String status,
        String origin, String priority) {
        Case thisCase = new Case(
            Subject=subject,
            Status=status,
            Origin=origin,
            Priority=priority);
        insert thisCase;
        return thisCase.Id;
    }   

    @HttpDelete
    global static void deleteCase() {
        RestRequest request = RestContext.request;
        String caseId = request.requestURI.substring(
            request.requestURI.lastIndexOf('/')+1);
        Case thisCase = [SELECT Id FROM Case WHERE Id = :caseId];
        delete thisCase;
    }     

    @HttpPut
    global static ID upsertCase(String subject, String status,
        String origin, String priority, String id) {
        Case thisCase = new Case(
                Id=id,
                Subject=subject,
                Status=status,
                Origin=origin,
                Priority=priority);
        // Match case by Id, if present.
        // Otherwise, create new case.
        upsert thisCase;
        // Return the case ID.
        return thisCase.Id;
    }

    @HttpPatch
    global static ID updateCaseFields() {
        RestRequest request = RestContext.request;
        String caseId = request.requestURI.substring(
            request.requestURI.lastIndexOf('/')+1);
        Case thisCase = [SELECT Id FROM Case WHERE Id = :caseId];
        // Deserialize the JSON string into name-value pairs
        Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;)JSON.deserializeUntyped(request.requestbody.tostring());
        // Iterate through each parameter field and value
        for(String fieldName : params.keySet()) {
            // Set the field and value on the Case sObject
            thisCase.put(fieldName, params.get(fieldName));
        }
        update thisCase;
        return thisCase.Id;
    }    

}</pre></div>
</li>
<li class="li">Press <strong class="ph uicontrol">CTRL+S</strong> to save.</li>
</ol>
</div>
</div>
</div>
<div class="topic task nested0" id="apex_integration_webservices_rest_workbench_post" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_rest_workbench_post"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Record with a POST Method</span></h2>
<div class="body taskbody"><div class="shortdesc">Let’s use the Apex REST class that you’ve
        just created and have some fun. First, we’ll call the POST method to create a case
        record.</div>
<div class="section context">
<p class="p">To invoke your REST service, you need to use a… REST client! You can use almost any
                REST client, such as your own API client, the cURL command-line tool, or the curl
                library for PHP. We’ll use the Workbench tool as our REST client application, but
                we’ll take a peek at cURL later on.</p>
<p class="p">Apex REST
                supports two formats for representations of resources: JSON and XML. JSON
                representations are passed by default in the body of a request or response, and the
                format is indicated by the <samp>Content-Type</samp>
                property in the HTTP header. Since JSON is easier to read and understand than XML, this unit uses JSON
                exclusively. In this step, you send a case record in JSON format. </p>
<p class="p">Apex REST supports
                OAuth 2.0 and session authentication mechanisms. In simple terms, this means that we
                use industry standards to keep your application and data safe. Fortunately, you can
                use Workbench to make testing easier. Workbench is a powerful, web-based suite of
                tools for administrators and developers to interact with orgs via Force.com APIs. With
                Workbench, you use session authentication as you log in with your username and
                password to Salesforce. And
                you use the REST Explorer to call your REST service.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Navigate to <a class="xref" href="https://workbench.developerforce.com/login.php" target="_blank" title="HTML (New Window)"><span class="ph filepath">https://workbench.developerforce.com/login.php</span></a>.</span>
</li>
<li class="li step">
<span class="ph cmd">For Environment, select <strong class="ph uicontrol">Production</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Select the latest API version from the <strong class="ph uicontrol">API Version</strong>
                    drop-down.</span>
</li>
<li class="li step">
<span class="ph cmd">Accept the terms of service, and click <strong class="ph uicontrol">Login with Salesforce</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd"> To allow Workbench to access your information, click
                        <strong class="ph uicontrol">Allow</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Enter your login credentials and then click <strong class="ph uicontrol">Log in to Salesforce</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">After logging in, select <span class="ph menucascade"><strong class="ph uicontrol">utilities</strong> | <strong class="ph uicontrol">REST Explorer</strong></span>. </span>
</li>
<li class="li step">
<span class="ph cmd">Select <strong class="ph uicontrol">POST</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">The URL path that REST Explorer accepts is relative to the instance URL of your
                    org. Provide only the path that is appended to the instance URL. In the relative
                    URI input field, replace the default URI with
                        <kbd class="ph userinput">/services/apexrest/Cases/</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the request body, insert the following JSON string representation of the
                    object to insert.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>{
  "subject" : "Bigfoot Sighting!",
  "status" : "New",
  "origin" : "Phone",
  "priority" : "Low"
}</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Execute</strong>.</span>
<div class="itemgroup stepresult">This invocation calls the method that is associated with the POST HTTP
                    method, namely the <samp>createCase</samp>
                    method.</div>
</li>
<li class="li step">
<span class="ph cmd">To view the response returned, click <strong class="ph uicontrol">Show Raw
                    Response</strong>.</span>
<div class="itemgroup stepresult">The returned response looks similar to this response. The response
                    contains the ID of the new case record. Your ID value is likely different from
                        <samp>50061000000t7kYAAQ</samp>. Save your ID value
                    to use in the next
                    steps.<div class="codeblock"><pre>HTTP/1.1 200 OK
Date: Wed, 07 Oct 2015 14:18:20 GMT
Set-Cookie: BrowserId=F1wxIhHPQHCXp6wrvqToXA;Path=/;Domain=.salesforce.com;Expires=Sun, 06-Dec-2015 14:18:20 GMT
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Content-Encoding: gzip
Transfer-Encoding: chunked

"50061000000t7kYAAQ" </pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="apex_integration_webservices_rest_workbench_get" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_rest_workbench_get"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Retrieve Data with a Custom GET Method</span></h2>
<div class="body">
<p class="p">By following similar steps as before, use Workbench to invoke the GET HTTP method.</p>
<ol class="ol enumList">
<li class="li">In Workbench, select <strong class="ph uicontrol">GET</strong>.</li>
<li class="li">Enter the URI <span class="ph filepath">/services/apexrest/Cases/<var class="keyword varname">&lt;Record
                    ID&gt;</var></span>, replacing <var class="keyword varname">&lt;Record ID&gt;</var> with the
                ID of the record you created in the previous step.</li>
<li class="li"><p class="p">Click <strong class="ph uicontrol">Execute</strong>.</p>
<p class="p">This invocation calls the method associated with the GET HTTP method, namely the
                        <samp>getCaseById</samp> method.</p>
</li>
<li class="li">
<p class="p">To view the response returned, click <strong class="ph uicontrol">Show Raw
                    Response</strong>.</p>
<p class="p">The returned response looks similar to this response. The response contains the
                    fields that the method queried for the new case record.</p>
<div class="codeblock"><pre>HTTP/1.1 200 OK
Date: Wed, 07 Oct 2015 14:28:20 GMT
Set-Cookie: BrowserId=j5qAnPDdRxSu8eHGqaRVLQ;Path=/;Domain=.salesforce.com;Expires=Sun, 06-Dec-2015 14:28:20 GMT
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Content-Encoding: gzip
Transfer-Encoding: chunked

{
  "attributes" : {
    "type" : "Case",
    "url" : "/services/data/v34.0/sobjects/Case/50061000000t7kYAAQ"
  },
  "CaseNumber" : "00001026",
  "Subject" : "Bigfoot Sighting!",
  "Status" : "New",
  "Origin" : "Phone",
  "Priority" : "Low",
  "Id" : "50061000000t7kYAAQ"
}
</pre></div>
</li>
</ol>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Retrieve Data Using cURL</h3>
<div class="p"><p class="p">Every good developer should know at least
                three things: 1) how to make an animated GIF of yourself eating ice cream; 2) the
                value of pi to 25 decimal places; and 3) how to use <a class="xref" href="http://man.cx/curl" target="_blank" title="HTML (New Window)">cURL</a>. The first two
                are beyond the scope of this module, so we’ll concentrate on the last
                one.</p>
<p class="p">cURL is a command-line tool for getting or sending files using URL
                syntax. It comes in quite handy when working with REST endpoints. Instead of using
                Workbench for your Apex REST service,
                you’ll use cURL to invoke the GET HTTP method. Each time you “cURL” your REST
                endpoint, you pass along the session ID for authorization. You were spoiled when
                working in Workbench because it passes the session ID for you, under the covers,
                after you log in.</p>
<p class="p">You can obtain a session ID a few different ways, but the
                easiest—because you’re already in Workbench—is to grab the ID from there. In the top
                menu, select <span class="ph menucascade"><strong class="ph uicontrol">info</strong> | <strong class="ph uicontrol">Session Information</strong></span> and then expand the Connection folder to find the session
                ID.</p>
<p class="p">Now open up terminal or the command prompt and enter your cURL command,
                which will be similar to the
                following.</p>
<div class="codeblock"><pre>curl https://yourInstance.salesforce.com/services/apexrest/Cases/&lt;Record_ID&gt; -H 'Authorization: Bearer &lt;your_session_id&gt;' -H 'X-PrettyPrint:1'</pre></div>
<p class="p">After
                pressing Enter, you see something similar to the following. Now that you are a
                command-line master, feel free to cURL, jq, sed, awk, and grep to your heart’s
                content. For more info on cURL, see the <a class="xref" href="#apex_integration_webservices_resources">Resources</a> section.</p>
<img alt="cURL and response from the command line" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us22d332220d6492e8d048cb8c01b6828f.png"/></div></div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_webservices_rest_workbench_update" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_rest_workbench_update"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Update Data with a Custom PUT or PATCH Method</span></h2>
<div class="body conbody"><div class="shortdesc">You can update records with the PUT or PATCH HTTP methods. The PUT method either
        updates the entire resource, if it exists, or creates the resource if it doesn’t exist. PUT
        is essentially an upsert method. The PATCH method updates only the specified portions of an
        existing resource. In Apex,
        update operations update only the specified fields and don’t overwrite the entire record.
        We’ll write some Apex code to
        determine whether our methods update or upsert. </div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading10">Update Data with the PUT Method</h3>
<p class="p">The <samp>upsertCase</samp> method that you added to the
                    <samp>CaseManager</samp> class implements the PUT
                action. This method is included here for your reference. The method uses the
                built-in <samp>upsert</samp>
                Apex DML method to
                either create or overwrite case record fields by matching the ID value. If an ID is
                sent in the body of the request, the case sObject is populated with it. Otherwise,
                the case sObject is created without an ID. The <samp>upsert</samp> method is invoked with the populated case sObject, and the DML
                statement does the rest. Voila!</p>
<div class="codeblock"><pre>@HttpPut
global static ID upsertCase(String subject, String status,
    String origin, String priority, String id) {
    Case thisCase = new Case(
        Id=id,
        Subject=subject,
        Status=status,
        Origin=origin,
        Priority=priority);
    // Match case by Id, if present.
    // Otherwise, create new case.
    upsert thisCase;
    // Return the case ID.
    return thisCase.Id;
}</pre></div>
<div class="p">To invoke the PUT method:<ol class="ol enumList">
<li class="li">In Workbench REST Explorer, select <strong class="ph uicontrol">PUT</strong>.</li>
<li class="li">For the URI, enter <kbd class="ph userinput">/services/apexrest/Cases/</kbd>. </li>
<li class="li">The <samp>upsertCase</samp> method expects the
                        field values to be passed in the request body. Add the following for the
                        request body, and then replace <var class="keyword varname">&lt;Record ID&gt;</var> with the ID
                        of the case record you created
                            earlier.<div class="codeblock"><pre>{
  "id": "&lt;Record_ID&gt;",
  "status" : "Working",
  "subject" : "Bigfoot Sighting!",
  "priority" : "Medium"
}</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The
                            ID field is optional. To create a case record, omit this field. In our
                            example, you’re passing this field because you want to update the case
                            record.</p></div></div></div></div></div>
</li>
<li class="li">Click <strong class="ph uicontrol">Execute</strong>.<p class="p">This request invokes the <samp>upsertCase</samp> method from your REST
                            service. The <span class="keyword parmname">Status</span>, <span class="keyword parmname">Subject</span>,
                            and <span class="keyword parmname">Priority</span> fields are updated. The subject is
                            updated, even though its value matches the old subject. Also, because
                            the request body didn’t contain a value for the <span class="keyword parmname">Case
                                Origin</span> field, the <span class="keyword parmname">origin</span> parameter
                            in the <samp>upsertCase</samp> method is null.
                            As a result, when the record is updated, the <span class="keyword parmname">Origin</span>
                            field is cleared.</p>
<p class="p">To check these fields, view this record in Salesforce by
                            navigating to <span class="ph filepath">https://<var class="keyword varname">yourInstance</var>.salesforce.com/<var class="keyword varname">&lt;Record ID&gt;</var></span>.</p>
</li>
</ol>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading11">Update Data with the PATCH Method</h3>
<p class="p">As an alternative to the PUT method, use the PATCH method to update record fields.
                You can implement the PATCH method in different ways. One way is to specify
                parameters in the method for each field to update. For example, you can create a
                method to update the priority of a case with this signature: <samp>updateCasePriority(String priority)</samp>. To update
                multiple fields, you can list all the desired fields as parameters.</p>
<p class="p">Another approach that provides more flexibility is to pass the fields as JSON name/value pairs
                in the request body. That way the method can accept an arbitrary number of
                parameters, and the parameters aren’t fixed in the method’s signature. Another
                advantage of this approach is that no field is accidentally cleared because of being
                null. The <samp>updateCaseFields</samp> method that you
                added to the <samp>CaseManager</samp> class uses this
                second approach. This method deserialize the JSON string from the request body 
                into a map of name/value pairs and uses the sObject <samp>PUT</samp> 
                method to set the fields. </p>
<div class="codeblock"><pre>@HttpPatch
global static ID updateCaseFields() {
    RestRequest request = RestContext.request;
    String caseId = request.requestURI.substring(
        request.requestURI.lastIndexOf('/')+1);
    Case thisCase = [SELECT Id FROM Case WHERE Id = :caseId];
    // Deserialize the JSON string into name-value pairs
    Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;)JSON.deserializeUntyped(request.requestbody.tostring());
    // Iterate through each parameter field and value
    for(String fieldName : params.keySet()) {
        // Set the field and value on the Case sObject
        thisCase.put(fieldName, params.get(fieldName));
    }
    update thisCase;
    return thisCase.Id;
}</pre></div>
<div class="p">To invoke the PATCH method:<ol class="ol enumList">
<li class="li">In Workbench REST Explorer, click <strong class="ph uicontrol">PATCH</strong>.</li>
<li class="li">For the URI, enter
                                <kbd class="ph userinput">/services/apexrest/Cases/<var class="keyword varname">&lt;Record
                                ID&gt;</var></kbd>.
                        Replace <var class="keyword varname">&lt;Record ID&gt;</var> with the ID of the case record
                        created earlier. Enter the following JSON in the Request Body.<div class="codeblock"><pre>{
  "status" : "Escalated",
  "priority" : "High"
}</pre></div>
<p class="p">This JSON has two field values:
                                <span class="keyword parmname">status</span> and
                                <span class="keyword parmname">priority</span>. The <samp>updateCaseFields</samp> method retrieves these values from
                            the submitted JSON and are used to specify the fields to update in the object.</p>
</li>
<li class="li">Click <strong class="ph uicontrol">Execute</strong>.<p class="p">This request invokes the <samp>updateCaseFields</samp> method in your REST
                            service. The <span class="keyword parmname">Status</span> and
                                <span class="keyword parmname">Priority</span> fields of the case record are updated
                            to new values. To check these fields, view this record in Salesforce by
                            navigating to <span class="ph filepath">https://<var class="keyword varname">yourInstance</var>.salesforce.com/<var class="keyword varname">&lt;Record ID&gt;</var></span>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_webservices_rest_example_testing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_rest_example_testing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading12"><span class="ph" id="topic-title"><a name="topic-title"></a>Test Your Apex REST
        Class</span></h2>
<div class="body conbody"><div class="shortdesc">Testing your Apex REST class is similar to testing any other Apex class—just call
        the class methods by passing in parameter values and then verify the results. For methods
        that don’t take parameters or that rely on information in the REST request, create a test
        REST request.</div>
<div class="section">
<p class="p">In general, here’s how you test Apex REST services.
                To simulate a REST request, create a <samp>RestRequest</samp> in the test method, and then set properties on the request
                as follows. You can also add params that you “pass” in the request to simulate URI
                parameters.</p>
<div class="codeblock"><pre>// Set up a test request
RestRequest request = new RestRequest();

// Set request properties
request.requestUri =
    'https://yourInstance.salesforce.com/services/apexrest/Cases/'
    + recordId;
request.httpMethod = 'GET';

// Set other properties, such as parameters
request.params.put('status', 'Working');

// more awesome code here....
// Finally, assign the request to RestContext if used
RestContext.request = request;</pre></div>
<p class="p">If the method you’re testing accesses request values through <samp>RestContext</samp>, assign the request to <samp>RestContext</samp> to populate it (<samp>RestContext.request = request;</samp>).</p>
<p class="p">Now, let’s save the entire class in the Developer Console and run the
                results.</p>
<a name="ol_ibd_zcd_d5"></a><ol class="ol enumList" id="ol_ibd_zcd_d5">
<li class="li">In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Apex Class</strong></span>.</li>
<li class="li">For the class name, enter <kbd class="ph userinput">CaseManagerTest</kbd> and then click
                        <strong class="ph uicontrol">OK</strong>.</li>
<li class="li">Replace the autogenerated code with the following class
                    definition.<div class="codeblock"><pre>@IsTest
private class CaseManagerTest {

    @isTest static void testGetCaseById() {
        Id recordId = createTestRecord();
        // Set up a test request
        RestRequest request = new RestRequest();
        request.requestUri =
            'https://yourInstance.salesforce.com/services/apexrest/Cases/'
            + recordId;
        request.httpMethod = 'GET';
        RestContext.request = request;
        // Call the method to test
        Case thisCase = CaseManager.getCaseById();
        // Verify results
        System.assert(thisCase != null);
        System.assertEquals('Test record', thisCase.Subject);
    }

    @isTest static void testCreateCase() {
        // Call the method to test
        ID thisCaseId = CaseManager.createCase(
            'Ferocious chipmunk', 'New', 'Phone', 'Low');
        // Verify results
        System.assert(thisCaseId != null);
        Case thisCase = [SELECT Id,Subject FROM Case WHERE Id=:thisCaseId];
        System.assert(thisCase != null);
        System.assertEquals(thisCase.Subject, 'Ferocious chipmunk');
    }

    @isTest static void testDeleteCase() {
        Id recordId = createTestRecord();
        // Set up a test request
        RestRequest request = new RestRequest();
        request.requestUri =
            'https://yourInstance.salesforce.com/services/apexrest/Cases/'
            + recordId;
        request.httpMethod = 'GET';
        RestContext.request = request;
        // Call the method to test
        CaseManager.deleteCase();
        // Verify record is deleted
        List&lt;Case&gt; cases = [SELECT Id FROM Case WHERE Id=:recordId];
        System.assert(cases.size() == 0);
    }

    @isTest static void testUpsertCase() {
        // 1. Insert new record
        ID case1Id = CaseManager.upsertCase(
                'Ferocious chipmunk', 'New', 'Phone', 'Low', null);
        // Verify new record was created
        System.assert(Case1Id != null);
        Case case1 = [SELECT Id,Subject FROM Case WHERE Id=:case1Id];
        System.assert(case1 != null);
        System.assertEquals(case1.Subject, 'Ferocious chipmunk');
        // 2. Update status of existing record to Working
        ID case2Id = CaseManager.upsertCase(
                'Ferocious chipmunk', 'Working', 'Phone', 'Low', case1Id);
        // Verify record was updated
        System.assertEquals(case1Id, case2Id);
        Case case2 = [SELECT Id,Status FROM Case WHERE Id=:case2Id];
        System.assert(case2 != null);
        System.assertEquals(case2.Status, 'Working');
    }    

    @isTest static void testUpdateCaseFields() {
        Id recordId = createTestRecord();
        RestRequest request = new RestRequest();
        request.requestUri =
            'https://yourInstance.salesforce.com/services/apexrest/Cases/'
            + recordId;
        request.httpMethod = 'PATCH';
        request.addHeader('Content-Type', 'application/json');
        request.requestBody = Blob.valueOf('{"status": "Working"}');
        RestContext.request = request;
        // Update status of existing record to Working
        ID thisCaseId = CaseManager.updateCaseFields();
        // Verify record was updated
        System.assert(thisCaseId != null);
        Case thisCase = [SELECT Id,Status FROM Case WHERE Id=:thisCaseId];
        System.assert(thisCase != null);
        System.assertEquals(thisCase.Status, 'Working');
    }  

    // Helper method
    static Id createTestRecord() {
        // Create test record
        Case caseTest = new Case(
            Subject='Test record',
            Status='New',
            Origin='Phone',
            Priority='Medium');
        insert caseTest;
        return caseTest.Id;
    }          

}</pre></div>
</li>
<li class="li">Press <kbd class="ph userinput">CTRL+S</kbd> to save.</li>
<li class="li">Run all the tests in your org by selecting <span class="ph menucascade"><strong class="ph uicontrol">Test</strong> | <strong class="ph uicontrol">Run All</strong></span>.</li>
</ol>
<p class="p">The test results display in the Tests tab. After the test execution finishes, check
                the CaseManager row in the Overall Code Coverage pane. It’s at 100% coverage.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="apex_integration_webservices_tell_me_more" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_tell_me_more"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading13"><span class="ph" id="topic-title"><a name="topic-title"></a>Tell Me More ...</span></h2>
<div class="body conbody"><div class="shortdesc">Learn about supported data types and namespaces in Apex REST, Salesforce APIs, and security
        considerations.</div>
<div class="section">
<dl class="dl detailList">
<dt class="dt dlterm">Supported Data Types for Apex REST</dt>
<dd class="dd">Apex REST
                        supports these data types for parameters and return values.<ul class="ul bulletList">
<li class="li" id="d654211e33-d654265e57"><a name="d654211e33-d654265e57"></a>Apex primitives
                (excluding sObject and Blob).</li>
<li class="li" id="d654211e33-d654265e61"><a name="d654211e33-d654265e61"></a>sObjects</li>
<li class="li" id="d654211e33-d654265e64"><a name="d654211e33-d654265e64"></a>Lists or maps of Apex primitives or
                sObjects (only maps with String keys are supported). </li>
<li class="li">User-defined types that contain member variables of the types listed
                above.</li>
</ul>
</dd>
<dt class="dt dlterm">Namespaces in Apex REST
                        Endpoints</dt>
<dd class="dd">Apex REST methods can be used in managed and unmanaged packages. When calling
                                Apex REST methods that are contained in a managed package, you need to include
                            the managed package namespace in the REST call URL. For example, if the
                            class is contained in a managed package namespace called <samp>packageNamespace</samp> and the Apex REST methods use a URL mapping of <span class="ph filepath">/MyMethod/*</span>, the
                            URL used via REST to call these methods would be of the form
                                    <span class="ph filepath">https://<var class="keyword varname">instance</var>.salesforce.com/services/apexrest/packageNamespace/MyMethod/</span>.</dd>
<dt class="dt dlterm">Custom Apex
                        Web Services and Salesforce APIs</dt>
<dd class="dd">Instead of using custom Apex code for
                        REST and SOAP services, external applications can integrate with Salesforce by using
                            Salesforce’s
                        REST and SOAP APIs. These APIs let you create, update, and delete records.
                        However, the advantage of using Apex web
                        services is that Apex methods
                        can encapsulate complex logic. This logic is hidden from the consuming
                        application. Also, the Apex class
                        operations can be faster than making individual API calls, because fewer
                        roundtrips are performed between the client and the Salesforce servers.
                        With an Apex
                        web service call, there is only one request sent, and all operations within
                        the method are performed on the server.</dd>
<dt class="dt dlterm">Security Considerations for Apex Web
                        Services</dt>
<dd class="dd">The security context under which Apex web service methods run differs from
                        the security context of Salesforce APIs.
                        Unlike Salesforce
                        APIs, Apex web
                        service methods run with system privileges and don’t respect the user’s
                        object and field permissions. However, Apex web
                        service methods enforce sharing rules when declared with the <samp>with sharing</samp> keyword.</dd>
</dl>
</div>
</div>
</div>
<div class="topic nested0" id="apex_integration_webservices_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="apex_integration_webservices_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading14"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_rest_intro.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: Introduction to Apex REST</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_rest.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: Exposing Apex Classes as REST Web Services</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_web_services.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Apex Developer Guide</em>: Exposing Apex Methods as SOAP Web Services</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_rest.meta/api_rest/intro_curl.htm" target="_blank" title="HTML (New Window)"><em class="ph i">Force.com REST API Developer Guide</em>: Using cURL in the REST Examples</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/page/Creating_REST_APIs_using_Apex_REST" target="_blank" title="HTML (New Window)">Creating REST APIs Using Apex REST</a></li>
<li class="li Article"><a class="xref" href="https://tools.ietf.org/html/rfc7231" target="_blank" title="HTML (New Window)">RFC7231 - Information about HTTP 1.1 (including request
                                        methods and responses)</a></li>
<li class="li Article"><a class="xref" href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" title="HTML (New Window)"><em class="ph i">Wikipedia</em>: Representational state
                                        transfer</a></li>
<li class="li Article"><a class="xref" href="https://developer.salesforce.com/page/REST_API" target="_blank" title="HTML (New Window)"><em class="ph i">Salesforce Developers</em>: REST API</a></li>
<li class="li Article"><a class="xref" href="http://curl.haxx.se/docs/manpage.html" target="_blank" title="HTML (New Window)">cURL
                                        Documentation</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Introducing Asynchronous Processing</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<a name="ul_pg1_3qy_w5"></a><ul class="ul bulletList" id="ul_pg1_3qy_w5">
<li class="li">Explain the difference between synchronous and asynchronous processing.</li>
<li class="li">Choose which kind of asynchronous Apex to use
                    in various scenarios.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Asynchronous Apex</span></h2>
<div class="body">
<p class="p">In a nutshell, asynchronous Apex is used to run
            processes in a separate thread, at a later time.</p>
<p class="p">An asynchronous process is a process or function that executes a task "in the background"
            without the user having to wait for the task to finish.</p>
<p class="p">Here’s a real-world example. Let’s say you have a list of things to accomplish before
            your weekly Dance Dance Revolution practice. Your car is making a funny noise, you need
            a different color hair gel and you have to pick up your uniform from your mom’s house.
            You could take your car to the mechanic and wait until it is fixed before completing the
            rest of your list (synchronous processing), or you could leave it there and get your
            other things done, and have the shop call you when it’s fixed (asynchronous processing).
            If you want to be home in time to iron your spandex before practice, asynchronous
            processing allows you to get more stuff done in the same amount of time without the
            needless waiting.</p>
<p class="p">You’ll typically use Asynchronous Apex for callouts to
            external systems, operations that require higher limits, and code that needs to run at a
            certain time. The key benefits of asynchronous processing include:</p>
<dl class="dl detailList">
<dt class="dt dlterm">User efficiency</dt>
<dd class="dd">
<p class="p"> Let's say you have a process that makes many calculations on a custom object
                        whenever an Opportunity is created. The time needed to execute these
                        calculations could range from a minor annoyance to a productivity blocker
                        for the user. Since these calculations don't affect what the user is
                        currently doing, making them wait for a long running process is not an
                        efficient use of their time. With asynchronous processing the user can get
                        on with their work, the processing can be done in the background and the
                        user can see the results at their convenience.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">Scalability</dt>
<dd class="dd">
<p class="p">By allowing some features of the platform to execute when resources become
                        available at some point in the future, resources can be managed and scaled
                        quickly. This allows the platform to handle more jobs using parallel
                        processing.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">Higher Limits</dt>
<dd class="dd">
<p class="p">Asynchronous processes are started in a new thread, with higher governor and
                        execution limits. And to be honest, doesn’t everyone want higher governor
                        and execution limits?</p>
</dd>
</dl>
<p class="p">Asynchronous Apex comes in
            a number of different flavors. We’ll get into more detail for each one shortly, but
            here’s a high level overview.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d55434e174">Type</th>
<th class="featureTableHeader " id="d55434e177">Overview</th>
<th class="featureTableHeader " id="d55434e180">Common Scenarios</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Type" headers="d55434e174">Future Methods</td>
<td class="entry" data-title="Overview" headers="d55434e177">Run in their own thread, and do not start until resources are
                            available.</td>
<td class="entry" data-title="Common Scenarios" headers="d55434e180">Web service callout.</td>
</tr>
<tr>
<td class="entry" data-title="Type" headers="d55434e174">Batch Apex</td>
<td class="entry" data-title="Overview" headers="d55434e177">Run large jobs that would exceed normal processing limits.</td>
<td class="entry" data-title="Common Scenarios" headers="d55434e180">Data cleansing or archiving of records.</td>
</tr>
<tr>
<td class="entry" data-title="Type" headers="d55434e174">Queueable Apex</td>
<td class="entry" data-title="Overview" headers="d55434e177">Similar to future methods, but provide additional job chaining and
                            allow more complex data types to be used.</td>
<td class="entry" data-title="Common Scenarios" headers="d55434e180">Performing sequential processing operations with external Web
                            services.</td>
</tr>
<tr>
<td class="entry" data-title="Type" headers="d55434e174">Scheduled Apex</td>
<td class="entry" data-title="Overview" headers="d55434e177">Schedule Apex to
                            run at a specified time.</td>
<td class="entry" data-title="Common Scenarios" headers="d55434e180">Daily or weekly tasks.</td>
</tr>
</tbody>
</table></div>
<p class="p">It’s also worth noting that these different types of asynchronous operations are not
            mutually exclusive. For instance, a common pattern is to kick off a Batch Apex job from a Scheduled
                Apex job.</p>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_increased_limits" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_increased_limits"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Increased Governor and Execution Limits</span></h2>
<div class="body">
<p class="p">One of the main benefits of running asynchronous Apex is higher governor
            and execution limits. For example, the number of SOQL queries is doubled from 100 to 200
            queries when using asynchronous calls. The total heap size and maximum CPU time are
            similarly larger for asynchronous calls.</p>
<p class="p">Not only do you get higher limits with async, but also those governor limits are
            independent of the limits in the synchronous request that queued the async request
            initially. That’s a mouthful, but essentially, you have two separate Apex invocations, and more
            than double the processing capability. This comes in handy for instances when you want
            to do as much processing as you can in the current transaction but when you start to get
            close to governor limits, continue asynchronously.</p>
<p class="p">If you enjoy reading about heap sizes, maximum execution times and limits in general, see
                <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_gov_limits.htm" target="_blank" title="HTML (New Window)">Execution Governors and
                Limits</a> for compelling details.</p>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_how_it_works" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_how_it_works"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>How Asynchronous Processing Works</span></h2>
<div class="body">
<p class="p">Asynchronous processing, in a multi-tenant environment, presents some challenges:</p>
<dl class="dl detailList">
<dt class="dt dlterm">Ensure fairness of processing</dt>
<dd class="dd">
<p class="p">Make sure every customer gets a fair share of processing resources.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">Ensure fault tolerance</dt>
<dd class="dd">
<p class="p">Make sure no asynchronous requests are lost due to equipment or software
                        failures.</p>
</dd>
</dl>
<p class="p">The platform uses a queue-based asynchronous processing framework. This framework is used
            to manage asynchronous requests for multiple organizations within each instance. The
            request lifecycle is made up of three parts:</p>
<dl class="dl detailList">
<dt class="dt dlterm">Enqueue</dt>
<dd class="dd">
<p class="p">The request gets put into the queue. This could be an Apex batch
                        request, future Apex request
                        or one of many others. The platform will enqueue requests along with the
                        appropriate data to process that request.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">Persistence</dt>
<dd class="dd">
<p class="p">The enqueued request is persisted. Requests are stored in persistent storage
                        for failure recovery and to provide transactional capabilities.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">Dequeue</dt>
<dd class="dd">
<p class="p">The enqueued request is removed from the queue and processed. Transaction
                        management occurs in this step to assure messages are not lost if there is a
                        processing failure.</p>
</dd>
</dl>
<p class="p">Each request is processed by a handler. The handler is the code that performs functions
            for a specific request type. Handlers are executed by a finite number worker threads on
            each of the application servers that make up an instance. The threads request work from
            the queuing framework and when received, start a specific handler to do the work. </p>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_resource_conservation" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_resource_conservation"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Resource Conservation</span></h2>
<div class="body">
<p class="p">Asynchronous processing has lower priority than real-time interaction via the browser and
            API. To ensure there are sufficient resources to handle an increase in computing
            resources, the queuing framework monitors system resources such as server memory and CPU
            usage and reduce asynchronous processing when thresholds are exceeded. This is a fancy
            way of saying that the multitenant system protects itself. If an org tries to “gobble
            up” more than its share of resources, asynchronous processing is suspended until a
            normal threshold is reached. The long and short of it is that there’s no guarantee on
            processing time, but it’ll all work out in the end.</p>
</div>
</div>
<div class="topic nested0" id="async_apex_introduction_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_introduction_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_gov_limits.htm" target="_blank" title="HTML (New Window)">Execution Governors and
            Limits</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/Asynchronous_Processing_in_Force_com" target="_blank" title="HTML (New Window)">Asynchronous Processing in Force
            com</a></li>
</ul>
</div>
</div>
</div>
</body></div><h1>Using Future Methods</h1><div class="unit-content">
<body id="async_apex_future_methods_objectives"><a name="async_apex_future_methods_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p">After completing this unit, you’ll know:</p>
<a name="ul_ofm_jty_w5"></a><ul class="ul bulletList" id="ul_ofm_jty_w5">
<li class="li">When to use future methods.</li>
<li class="li">The limitations of using future methods.</li>
<li class="li">How to use future methods for callouts.</li>
<li class="li">Future method best practices.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Future Apex</span></h2>
<div class="body">
<p class="p">Future Apex is used to run
            processes in a separate thread, at a later time when system resources become
            available.</p>
<p class="p">Note: Technically, you use the <samp>@future</samp> annotation
            to identify methods that run asynchronously. However, because "methods identified with
            the <samp>@future</samp> annotation" is laborious, they are
            commonly referred to as "future methods" and that’s how we’ll reference them for the
            remainder of this module.</p>
<p class="p">When using synchronous processing, all method calls are made from the same thread that is
            executing the Apex code,
            and no additional processing can occur until the process is complete. You can use future
            methods for any operation you’d like to run asynchronously in its own thread. This
            provides the benefits of not blocking the user from performing other operations and
            providing higher governor and execution limits for the process. Everyone’s a winner with
            asynchronous processing.</p>
<div class="p">Future methods are typically used for:<a name="ul_g3h_4ty_w5"></a><ul class="ul bulletList" id="ul_g3h_4ty_w5">
<li class="li">Callouts to external Web services. If you are making callouts from a trigger or
                    after performing a DML operation, you must use a future or queueable method. A
                    callout in a trigger would hold the database connection open for the lifetime of
                    the callout and that is a "no-no" in a multitenant environment.</li>
<li class="li">Operations you want to run in their own thread, when time permits such as some
                    sort of resource-intensive calculation or processing of records.</li>
<li class="li">Isolating DML operations on different sObject types to prevent the mixed DML
                    error. This is somewhat of an edge-case but you may occasionally run across this
                    issue. See <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_dml_non_mix_sobjects.htm" target="_blank" title="HTML (New Window)">sObjects That Cannot
                        Be Used Together in DML Operations</a> for more details.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_syntax" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_syntax"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Future Method Syntax</span></h2>
<div class="body">
<p class="p">Future methods must be static methods, and can only return a void type. The specified
            parameters must be primitive data types, arrays of primitive data types, or collections
            of primitive data types. Notably, future methods can’t take standard or custom objects
            as arguments. A common pattern is to pass the method a List of record IDs that you want
            to process asynchronously.</p>
<div class="codeblock"><pre>global class SomeClass {
  @future
  public static void someFutureMethod(List&lt;Id&gt; recordIds) {
    List&lt;Account&gt; accounts = [Select Id, Name from Account Where Id IN :recordIds];
    // process account records to do awesome stuff
  }
}</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The reason why objects can’t be passed as arguments to future methods is because the
            object can change between the time you call the method and the time that it actually
            executes. Remember, future methods are executed when system resources become available.
            In this case, the future method may have an old object value when it actually executes,
            which can cause all sorts of bad things to happen.</p></div></div></div></div></div>
<p class="p">It’s important to note that future methods are not guaranteed to execute in the same
            order as they are called. Again, future methods are not guaranteed to execute in the
            same order as they are called. If you need this type of functionality then Queueable
            Apex might be a better solution. When using future methods, it’s also possible that two
            future methods could run concurrently, which could result in record locking and a nasty
            runtime error if the two methods were updating the same record.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Sample Callout Code</h3>
<p class="p">To make a Web service callout to an external service or API, you create an Apex class
                with a future method that is marked with <samp>(callout=true)</samp>. The class below has methods for making the callout
                both synchronously and asynchronously where callouts are not permitted. We insert a
                record into a custom log object to track the status of the callout simply because
                logging is always fun to do!</p>
<div class="codeblock"><pre>public class SMSUtils {

    // Call async from triggers, etc, where callouts are not permitted.
    @future(callout=true)
    public static void sendSMSAsync(String fromNbr, String toNbr, String m) {
        String results = sendSMS(fromNbr, toNbr, m);
        System.debug(results);
    }

    // Call from controllers, etc, for immediate processing
    public static String sendSMS(String fromNbr, String toNbr, String m) {
        // Calling 'send' will result in a callout
        String results = SmsMessage.send(fromNbr, toNbr, m);
        insert new SMS_Log__c(to__c=toNbr, from__c=fromNbr, msg__c=results);
        return results;
    }

}</pre></div>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_test_classes" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_test_classes"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Test Classes</span></h2>
<div class="body">
<p class="p">Testing future methods is a little different than typical Apex testing. To test future
            methods, enclose your test code between the <samp>startTest</samp> and <samp>stopTest</samp> test
            methods. The system collects all asynchronous calls made after the startTest. When
                <samp>stopTest</samp> is executed, all these collected
            asynchronous processes are then run synchronously. You can then assert that the
            asynchronous call operated properly.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Test code cannot actually send callouts to external systems, so you’ll have to ‘mock’
            the callout for test coverage. Check out the <a class="xref" href="https://trailhead.salesforce.com/module/apex_integration_services" target="_blank" title="HTML (New Window)">Apex Integration
                Services</a> module for complete details on mocking callouts for testing. </p></div></div></div></div></div>
<p class="p">Here’s our mock callout class used for testing. The Apex testing framework
            utilizes this ‘mock’ response instead of making the actual callout to the REST API endpoint.</p>
<div class="codeblock"><pre>@isTest
global class SMSCalloutMock implements HttpCalloutMock {
    global HttpResponse respond(HttpRequest req) {
        // Create a fake response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'application/json');
        res.setBody('{"status":"success"}');
        res.setStatusCode(200);
        return res; 
    }
}</pre></div>
<p class="p">The test class contains a single test method, which tests both the asynchronous and
            synchronous methods as the former calls the latter. </p>
<div class="codeblock"><pre>@IsTest
private class Test_SMSUtils {

  @IsTest
  private static void testSendSms() {
    Test.setMock(HttpCalloutMock.class, new SMSCalloutMock());
    Test.startTest();
      SMSUtils.sendSMSAsync('111', '222', 'Greetings!');
    Test.stopTest();
    // runs callout and check results
    List&lt;SMS_Log__c&gt; logs = [select msg__c from SMS_Log__c];
    System.assertEquals(1, logs.size());
    System.assertEquals('success', logs[0].msg__c);
  }

}</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_best_practices" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_best_practices"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Best Practices</span></h2>
<div class="body">
<div class="p">Since every future method invocation adds one request to the asynchronous queue, avoid
            design patterns that add large numbers of future requests over a short period of time.
            If your design has the potential to add 2000 or more requests at a time, requests could
            get delayed due to flow control. Here are some best practices you want to keep in
                mind:<a name="ul_bzn_dwy_w5"></a><ul class="ul bulletList" id="ul_bzn_dwy_w5">
<li class="li">Ensure that future methods execute as fast as possible.</li>
<li class="li">If using Web service callouts, try to bundle all callouts together from the same
                    future method, rather than using a separate future method for each callout.</li>
<li class="li">Conduct thorough testing at scale. Test that a trigger enqueuing the <samp>@future</samp> calls is able to handle a trigger
                    collection of 200 records. This helps determine if delays may occur given the
                    design at current and future volumes.</li>
<li class="li">Consider using Batch Apex instead of
                    future methods to process large number of records asynchronously. This is more
                    efficient than creating a future request for each record.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_remember" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_remember"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Things to Remember</span></h2>
<div class="body">
<div class="p">Future methods are a great tool, but with great power comes great responsibility. Here
            are some things to keep in mind when using them:<a name="ul_opz_kwy_w5"></a><ul class="ul bulletList" id="ul_opz_kwy_w5">
<li class="li">Methods with the future annotation must be static methods, and can only return a
                        <samp>void</samp> type.</li>
<li class="li">The specified parameters must be primitive data types, arrays of primitive data
                    types, or collections of primitive data types; future methods can’t take objects
                    as arguments.</li>
<li class="li">Future methods won’t necessarily execute in the same order they are called. In
                    addition, it’s possible that two future methods could run concurrently, which
                    could result in record locking if the two methods were updating the same
                    record.</li>
<li class="li">Future methods can’t be used in Visualforce controllers in <samp>getMethodName()</samp>, <samp>setMethodName()</samp>, nor in the
                    constructor.</li>
<li class="li">You can’t call a future method from a future method. Nor can you invoke a
                    trigger that calls a future method while running a future method. See the link
                    in the Resources for preventing recursive future method calls.</li>
<li class="li">The <samp>getContent()</samp> and <samp>getContentAsPDF()</samp> methods can’t be used in
                    methods with the future annotation.</li>
<li class="li">You’re limited to 50 future calls per Apex invocation, and there’s an additional
                    limit on the number of calls in a 24-hour period. For more information on
                    limits, see the link below.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_future_methods_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_future_methods_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<a name="ul_cv4_swy_w5"></a><ul class="ul bulletList" id="ul_cv4_swy_w5">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_invoking_future_methods.htm" target="_blank" title="HTML (New Window)">Future Methods</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_dml_non_mix_sobjects.htm" target="_blank" title="HTML (New Window)">sObjects That Cannot Be Used Together in
     DML Operations</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_gov_limits.htm" target="_blank" title="HTML (New Window)">Execution Governors and
    Limits</a></li>
<li class="li"><a class="xref" href="http://blog.jeffdouglas.com/2009/10/02/preventing-recursive-future-method-calls-in-salesforce/" target="_blank" title="HTML (New Window)">Preventing Recursive Future Method Calls
     in Salesforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Using Batch Apex</h1><div class="unit-content">
<body id="async_apex_batch_objectives"><a name="async_apex_batch_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll know:<a name="ul_p1t_xwy_w5"></a><ul class="ul bulletList" id="ul_p1t_xwy_w5">
<li class="li">Where to use Batch Apex.</li>
<li class="li">The higher Apex limits
                    when using batch.</li>
<li class="li">Batch Apex
                    syntax.</li>
<li class="li">Batch Apex
                    best practices.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Batch Apex</span></h2>
<div class="body">
<p class="p">Batch Apex is used to run
            large jobs (think thousands or millions of records!) that would exceed normal processing
            limits. Using Batch Apex,
            you can process records asynchronously in batches (hence the name, “Batch Apex”) to stay within
            platform limits. If you have a lot of records to process, for example, data cleansing or
            archiving, Batch Apex is
            probably your best solution. </p>
<div class="p">Here’s how Batch Apex works
            under the hood. Let’s say you want to process 1 million records using Batch Apex. The execution logic
            of the batch class is called once for each batch of records you are processing. Each
            time you invoke a batch class, the job is placed on the Apex job queue and is
            executed as a discrete transaction. This functionality has two awesome advantages:<a name="ul_cng_cxy_w5"></a><ul class="ul bulletList" id="ul_cng_cxy_w5">
<li class="li">Every transaction starts with a new set of governor limits, making it easier to
                    ensure that your code stays within the governor execution limits.</li>
<li class="li">If one batch fails to process successfully, all other successful batch
                    transactions aren’t rolled back.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_syntax" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_syntax"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Batch Apex Syntax</span></h2>
<div class="body">
<p class="p">To write a Batch Apex class, your class must implement the <samp>Database.Batchable</samp> interface and include the following three methods:</p>
<dl class="dl detailList">
<dt class="dt dlterm">start</dt>
<dd class="dd">
<p class="p">Used to collect the records or objects to be passed to the interface method
                            <samp>execute</samp> for processing. This
                        method is called once at the beginning of a Batch Apex job and
                        returns either a Database.QueryLocator object or an Iterable that contains
                        the records or objects passed to the job.</p>
<p class="p">Most of the time a <samp>QueryLocator</samp> does
                        the trick with a simple SOQL query to generate the scope of objects in the
                        batch job. But if you need to do something crazy like loop through the
                        results of an API call or pre-process records before being passed to the
                            <samp>execute</samp> method, you might want
                        to check out the Custom Iterators link in the Resources section.</p>
<p class="p">With the QueryLocator object, the governor limit for the total number of
                        records retrieved by SOQL queries is bypassed and you can query up to 50
                        million records. However, with an Iterable, the governor limit for the total
                        number of records retrieved by SOQL queries is still enforced.</p>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">execute</dt>
<dd class="dd">
<p class="p">Performs the actual processing for each chunk or “batch” of data passed to
                        the method. The default batch size is 200 records. Batches of records are
                        not guaranteed to execute in the order they are received from the <samp>start</samp> method.</p>
<div class="p">This method takes the following:<a name="ul_bwx_4xy_w5"></a><ul class="ul bulletList" id="ul_bwx_4xy_w5">
<li class="li">A reference to the <samp>Database.BatchableContext</samp> object.</li>
<li class="li">A list of sObjects, such as <samp>List&lt;sObject&gt;</samp>, or a list of parameterized types. If
                                you are using a <samp>Database.QueryLocator</samp>, use the returned list.</li>
</ul>
</div>
</dd>
</dl>
<dl class="dl detailList">
<dt class="dt dlterm">finish</dt>
<dd class="dd">Used to execute post-processing operations (for example, sending an email) and
                    is called once after all batches are processed. </dd>
</dl>
<p class="p">Here’s what the skeleton of a Batch Apex class looks like:</p>
<div class="codeblock"><pre>global class MyBatchClass implements Database.Batchable&lt;sObject&gt; {

    global (Database.QueryLocator | Iterable&lt;sObject&gt;) start(Database.BatchableContext bc) {
        // collect the batches of records or objects to be passed to execute
    }

    global void execute(Database.BatchableContext bc, List&lt;P&gt; records){
        // process each batch of records
    }    

    global void finish(Database.BatchableContext bc){
        // execute any post-processing operations
    }    

}</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_invoking" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_invoking"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Invoking a Batch Class</span></h2>
<div class="body">
<p class="p">To invoke a batch class, simply instantiate it and then call <samp>Database.executeBatch</samp> with the instance:</p>
<div class="codeblock"><pre>MyBatchClass myBatchObject = new MyBatchClass(); 
Id batchId = Database.executeBatch(myBatchObject);</pre></div>
<p class="p">You can also optionally pass a second <samp>scope</samp>
            parameter to specify the number of records that should be passed into the execute method
            for each batch. Pro tip: you might want to limit this batch size if you are running into
            governor limits.</p>
<div class="codeblock"><pre>Id batchId = Database.executeBatch(myBatchObject, 100);</pre></div>
<p class="p">Each batch Apex invocation
            creates an AsyncApexJob record so that you can track the job’s progress. You can view
            the progress via SOQL or manage your job in the Apex Job Queue. We’ll talk about the Job
            Queue shortly.</p>
<div class="codeblock"><pre>AsyncApexJob job = [SELECT Id, Status, JobItemsProcessed, TotalJobItems, NumberOfErrors FROM AsyncApexJob WHERE ID = :batchId ];</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_using_state" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_using_state"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Using State in Batch Apex</span></h2>
<div class="body">
<p class="p">Batch Apex is typically stateless. Each execution of a batch Apex job is considered a
            discrete transaction. For example, a batch Apex job that contains
            1,000 records and uses the default batch size is considered five transactions of 200
            records each.</p>
<p class="p">If you specify <samp>Database.Stateful</samp> in the class
            definition, you can maintain state across all transactions. When using <samp>Database.Stateful</samp>, only instance member variables
            retain their values between transactions. Maintaining state is useful for counting or
            summarizing records as they’re processed. In our next example, we’ll be updating contact
            records in our batch job and want to keep track of the total records affected so we can
            include it in the notification email.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Sample Batch Apex
                Code</h3>
<p class="p">Now that you know how to write a Batch Apex class, let’s see
                a practical example. Let’s say you have a business requirement that states that all
                contacts for companies in the USA must have their parent company’s billing address
                as their mailing address. Unfortunately, users are entering new contacts without the
                correct addresses! Will users never learn?! Write a Batch Apex class that
                ensures that this requirement is enforced.</p>
<p class="p">The following sample class finds all account records that are passed in by the
                    <samp>start()</samp> method using a <samp>QueryLocator</samp> and updates the associated contacts
                with their account’s mailing address. Finally, it sends off an email with the
                results of the bulk job and, since we are using <samp>Database.Stateful</samp> to track state, the number of records updated.</p>
<div class="codeblock"><pre>global class UpdateContactAddresses implements 
    Database.Batchable&lt;sObject&gt;, Database.Stateful {
    
    // instance member to retain state across transactions
    global Integer recordsProcessed = 0;

    global Database.QueryLocator start(Database.BatchableContext bc) {
        return Database.getQueryLocator(
            'SELECT ID, BillingStreet, BillingCity, BillingState, ' +
            'BillingPostalCode, (SELECT ID, MailingStreet, MailingCity, ' +
            'MailingState, MailingPostalCode FROM Contacts) FROM Account ' + 
            'Where BillingCountry = \'USA\''
        );
    }

    global void execute(Database.BatchableContext bc, List&lt;Account&gt; scope){
        // process each batch of records
        List&lt;Contact&gt; contacts = new List&lt;Contact&gt;();
        for (Account account : scope) {
            for (Contact contact : account.contacts) {
                contact.MailingStreet = account.BillingStreet;
                contact.MailingCity = account.BillingCity;
                contact.MailingState = account.BillingState;
                contact.MailingPostalCode = account.BillingPostalCode;
                // add contact to list to be updated
                contacts.add(contact);
                // increment the instance member counter
                recordsProcessed = recordsProcessed + 1;
            }
        }
        update contacts;
    }    

    global void finish(Database.BatchableContext bc){
        System.debug(recordsProcessed + ' records processed. Shazam!');
        AsyncApexJob job = [SELECT Id, Status, NumberOfErrors, 
            JobItemsProcessed,
            TotalJobItems, CreatedBy.Email
            FROM AsyncApexJob
            WHERE Id = :bc.getJobId()];
        // call some utility to send email
        EmailUtils.sendMessage(a, recordsProcessed);
    }    

}</pre></div>
<div class="p">The code should be fairly straightforward but can be a little abstract in reality.
                Here’s what’s going on in more detail:<a name="ul_bh5_xyy_w5"></a><ul class="ul bulletList" id="ul_bh5_xyy_w5">
<li class="li">The <samp>start</samp> method provides the
                        collection of all records that the <samp>execute</samp> method will process in individual batches. It returns
                        the list of records to be processed by calling<samp> Database.getQueryLocator</samp> with a SOQL query. In this case we
                        are simply querying for all Account records with a Billing Country of ‘USA’. </li>
<li class="li">Each batch of 200 records is passed in the second parameter of the <samp>execute</samp> method. The <samp>execute</samp> method sets each contact’s
                        mailing address to the accounts’ billing address and increments <samp>recordsProcessed</samp> to track the number of
                        records processed.</li>
<li class="li">When the job is complete, the <samp>finish</samp>
                        method performs a query on the AsyncApexJob object (a table that lists
                        information about batch jobs) to get the status of the job, the submitter’s
                        email address, and some other information. It then sends a notification
                        email to the job submitter that includes the job info and number of contacts
                        updated.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_testing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_testing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Testing Batch Apex</span></h2>
<div class="body">
<p class="p">Since Apex development and
            testing go hand in hand, here’s how we test the above batch class. In a nutshell, we
            insert some records, call the Batch Apex class and then assert
            that the records were updated properly with the correct address.</p>
<div class="codeblock"><pre>@isTest
private class UpdateContactAddressesTest {

    @testSetup 
    static void setup() {
        List&lt;Account&gt; accounts = new List&lt;Account&gt;();
        List&lt;Contact&gt; contacts = new List&lt;Contact&gt;();
        // insert 10 accounts
        for (Integer i=0;i&lt;10;i++) {
            accounts.add(new Account(name='Account '+i, 
                billingcity='New York', billingcountry='USA'));
        }
        insert accounts;
        // find the account just inserted. add contact for each
        for (Account account : [select id from account]) {
            contacts.add(new Contact(firstname='first', 
                lastname='last', accountId=account.id));
        }
        insert contacts;
    }

    static testmethod void test() {        
        Test.startTest();
        UpdateContactAddresses uca = new UpdateContactAddresses();
        Id batchId = Database.executeBatch(uca);
        Test.stopTest();

        // after the testing stops, assert records were updated properly
        System.assertEquals(10, [select count() from contact where MailingCity = 'New York']);
    }
    
}</pre></div>
<p class="p">The <samp>setup</samp> method inserts 10 account records with
            the billing city of ‘New York’ and the billing country of ‘USA’. Then for each account,
            it creates an associated contact record. This data is used by the batch class.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Make sure that the number of records inserted is less than the batch size of 200
            because test methods can execute only one batch total.</p></div></div></div></div></div>
<p class="p">In the test method, the <samp>UpdateContactAddresses</samp>
            batch class is instantiated, invoked by calling <samp>Database.executeBatch</samp> and passing it the instance of the batch class.</p>
<p class="p">The call to <samp>Database.executeBatch</samp> is included
            within the <samp>Test.startTest</samp> and <samp>Test.stopTest</samp> block. This is where all of the magic
            happens. The job executes after the call to <samp>Test.stopTest</samp>. Any asynchronous code included within <samp>Test.startTest</samp> and <samp>Test.stopTest</samp> is executed synchronously after <samp>Test.stopTest</samp>.</p>
<p class="p">Finally, the test verifies that all contact records were updated correctly by checking
            that the number of contact records with the billing city of ‘New York’ matches the
            number of records inserted (i.e., 10).</p>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_best_practices" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_best_practices"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Best Practices</span></h2>
<div class="body">
<div class="p">As with future methods, there are a few things you want to keep in mind when using Batch
                Apex. To ensure fast
            execution of batch jobs, minimize Web service callout times and tune queries used in
            your batch Apex code. The
            longer the batch job executes, the more likely other queued jobs are delayed when many
            jobs are in the queue. Best practices include:<a name="ul_v25_pzy_w5"></a><ul class="ul bulletList" id="ul_v25_pzy_w5">
<li class="li">Only use Batch Apex if you have more than one batch of records. If you don't have enough records
                    to run more than one batch, you are probably better off using Queueable Apex.</li>
<li class="li">Tune any SOQL query to gather the records to execute as quickly as
                    possible.</li>
<li class="li">Minimize the number of asynchronous requests created to minimize the chance of
                    delays.</li>
<li class="li">Use extreme care if you are planning to invoke a batch job from a trigger. You
                    must be able to guarantee that the trigger won’t add more batch jobs than the
                    limit.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_batch_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_batch_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">
<a name="ul_tlc_vzy_w5"></a><ul class="ul bulletList" id="ul_tlc_vzy_w5">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_batch.htm" target="_blank" title="HTML (New Window)">Batch Apex</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_batch_interface.htm" target="_blank" title="HTML (New Window)">Using Batch Apex</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_classes_iterable.htm" target="_blank" title="HTML (New Window)">Custom Iterators</a></li>
</ul>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Controlling Processes with Queueable Apex</h1><div class="unit-content">
<body id="async_apex_queueable_objectives"><a name="async_apex_queueable_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll know:<a name="ul_zgj_yzy_w5"></a><ul class="ul bulletList" id="ul_zgj_yzy_w5">
<li class="li">When to use the Queueable interface.</li>
<li class="li">The differences between queueable and future methods.</li>
<li class="li">Queueable Apex
          syntax.</li>
<li class="li">Queueable method best practices.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Queueable Apex</span></h2>
<div class="body">
<p class="p">Released in Winter '15, Queueable Apex is essentially a
            superset of future methods with some extra #awesomesauce. We took the simplicity of
            future methods and the power of Batch Apex and mixed them
            together to form Queueable Apex! It gives you a class
            structure that the platform serializes for you, a simplified interface without <samp>start</samp> and <samp>finish</samp> methods and even allows you to utilize more than just primitive
            arguments! It is called by a simple <samp>System.enqueueJob()</samp> method, which returns a job ID that you can monitor.
            It beats sliced bread hands down!</p>
<div class="p">Queueable Apex allows you
            to submit jobs for asynchronous processing similar to future methods with the following
            additional benefits:<a name="ul_ynh_21z_w5"></a><ul class="ul bulletList" id="ul_ynh_21z_w5">
<li class="li">Non-primitive types: Your Queueable class can contain member variables of
                    non-primitive data types, such as sObjects or custom Apex types. Those
                    objects can be accessed when the job executes.</li>
<li class="li">Monitoring: When you submit your job by invoking the <samp>System.enqueueJob</samp> method, the method returns
                    the ID of the <samp>AsyncApexJob</samp> record. You
                    can use this ID to identify your job and monitor its progress, either through
                    the Salesforce user
                    interface in the Apex Jobs page, or programmatically by querying your record
                    from <samp>AsyncApexJob</samp>.</li>
<li class="li">Chaining jobs: You can chain one job to another job by starting a second job
                    from a running job. Chaining jobs is useful if you need to do some sequential
                    processing.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_versus_future" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_versus_future"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Queueable Versus Future</span></h2>
<div class="body">
<p class="p">Because queueable methods are functionally equivalent to future methods, most of the time
            you’ll probably want to use queueable instead of future methods. However, this doesn’t
            necessarily mean you should go back and refactor all your future methods right now. If
            you were exceeding a governor limit in your future method, or if you think a future
            method requires a higher limit, you can possibly increase the limits for your future
            method with the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_enhanced_future_overview.htm" target="_blank" title="HTML (New Window)">Future Methods with Higher
                Limits</a> pilot.</p>
<p class="p">Another reason to use future methods instead of queueable is when your functionality is
            sometimes executed synchronously, and sometimes asynchronously. It’s much easier to
            refactor a method in this manner than converting to a queueable class. This is handy
            when you discover that part of your existing code needs to be moved to async execution.
            You can simply create a similar future method that wraps your synchronous method like
            so:</p>
<div class="codeblock"><pre>@future
static void myFutureMethod(List&lt;String&gt; params) {
    // call synchronous method
    mySyncMethod(params);
}</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_syntax" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_syntax"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Queueable Syntax</span></h2>
<div class="body">
<p class="p">To use Queueable Apex,
            simply implement the Queueable interface.</p>
<div class="codeblock"><pre>public class SomeClass implements Queueable { 
    public void execute(QueueableContext context) {
        // awesome code here
    }
}</pre></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading5">Sample Code</h3>
<p class="p">A common scenario is to take some set of sObject records, execute some processing
                such as making a callout to an external REST endpoint or perform some calculations
                and then update them in the database asynchronously. Since <samp>@future</samp> methods are limited to primitive data
                types (or arrays or collections of primitives), queueable Apex is an ideal
                choice. The following code takes a collection of Account records, sets the
                    <span class="keyword parmname">parentId</span> for each record, and then updates the records in
                the database.</p>
<div class="codeblock"><pre>public class UpdateParentAccount implements Queueable {
    
    private List&lt;Account&gt; accounts;
    private ID parent;
    
    public UpdateParentAccount(List&lt;Account&gt; records, ID id) {
        this.accounts = records;
        this.parent = id;
    }

    public void execute(QueueableContext context) {
        for (Account account : accounts) {
          account.parentId = parent;
          // perform other processing or callout
        }
        update accounts;
    }
    
}</pre></div>
<p class="p">To add this class as a job on the queue, execute the following code:</p>
<div class="codeblock"><pre>// find all accounts in ‘NY’
List&lt;Account&gt; accounts = [select id from account where billingstate = ‘NY’];
// find a specific parent account for all records
Id parentId = [select id from account where name = 'ACME Corp'][0].Id;

// instantiate a new instance of the Queueable class
UpdateParentAccount updateJob = new UpdateParentAccount(accounts, parentId);

// enqueue the job for processing
ID jobID = System.enqueueJob(updateJob);</pre></div>
<p class="p">After you submit your queueable class for execution, the job is added to the queue
                and will be processed when system resources become available.</p>
<p class="p">You can use the new job ID to monitor progress, either through the Apex Jobs page or
                programmatically by querying <samp>AsyncApexJob</samp>:</p>
<div class="codeblock"><pre>SELECT Id, Status, NumberOfErrors FROM AsyncApexJob WHERE Id = :jobID</pre></div>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_testing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_testing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Testing Queueable Apex</span></h2>
<div class="body">
<p class="p">The following code sample shows how to test the execution of a queueable job in a test
            method. It looks very similar to Batch Apex testing. To ensure
            that the queueable process runs within the test method, the job is submitted to the
            queue between the <samp>Test.startTest</samp> and <samp>Test.stopTest</samp> block. The system executes all
            asynchronous processes started in a test method synchronously after the <samp>Test.stopTest</samp> statement. Next, the test method
            verifies the results of the queueable job by querying the account records that the job
            updated.</p>
<div class="codeblock"><pre>@isTest
public class UpdateParentAccountTest {

    @testSetup 
    static void setup() {
        List&lt;Account&gt; accounts = new List&lt;Account&gt;();
        // add a parent account
        accounts.add(new Account(name='Parent'));
        // add 100 child accounts
        for (Integer i = 0; i &lt; 100; i++) {
            accounts.add(new Account(
                name='Test Account'+i
            ));
        }
        insert accounts;
    }
    
    static testmethod void testQueueable() {
        // query for test data to pass to queueable class
        Id parentId = [select id from account where name = 'Parent'][0].Id;
        List&lt;Account&gt; accounts = [select id, name from account where name like 'Test Account%'];
        // Create our Queueable instance
        UpdateParentAccount updater = new UpdateParentAccount(accounts, parentId);
        // startTest/stopTest block to force async processes to run
        Test.startTest();        
        System.enqueueJob(updater);
        Test.stopTest();        
        // Validate the job ran. Check if record have correct parentId now
        System.assertEquals(100, [select count() from account where parentId = :parentId]);
    }
    
}
</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_chaining" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_chaining"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Chaining Jobs</span></h2>
<div class="body">
<p class="p">One of the best features of Queueable Apex is job chaining. If
            you ever need to run jobs sequentially, Queueable Apex could make your life
            much easier. To chain a job to another job, submit the second job from the <samp>execute()</samp> method of your queueable class. You can
            add only one job from an executing job, which means that only one child job can exist
            for each parent job. For example, if you have a second class called SecondJob that
            implements the Queueable interface, you can add this class to the queue in the <samp>execute()</samp> method as follows:</p>
<div class="codeblock"><pre>public class FirstJob implements Queueable { 
    public void execute(QueueableContext context) { 
        // Awesome processing logic here    
        // Chain this job to next job by submitting the next job
        System.enqueueJob(new SecondJob());
    }
}</pre></div>
<p class="p">Once again, testing has a slightly different pattern. You can’t chain queueable jobs in
            an Apex test, doing so
            results in an error. To avoid nasty errors, you can check if Apex is running in test
            context by calling <samp>Test.isRunningTest()</samp> before
            chaining jobs.</p>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_remember" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_remember"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Things to Remember</span></h2>
<div class="body">
<div class="p">Queueable Apex is a great
            new tool but there are a few things to watch out for:<a name="ul_jcb_rbz_w5"></a><ul class="ul bulletList" id="ul_jcb_rbz_w5">
<li class="li">The execution of a queued job counts once against the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_gov_limits.htm#asyncExecutionLimit" target="_blank" title="HTML (New Window)">shared limit for
                        asynchronous Apex method executions</a>.</li>
<li class="li">You can add up to 50 jobs to the queue with <samp>System.enqueueJob</samp> in a single transaction.</li>
<li class="li">When chaining jobs, you can add only one job from an executing job with <samp>System.enqueueJob</samp>, which means that only one
                    child job can exist for each parent queueable job. Starting multiple child jobs
                    from the same queueable job is a no-no.</li>
<li class="li">No limit is enforced on the depth of chained jobs, which means that you can
                    chain one job to another job and repeat this process with each new child job to
                    link it to a new child job. However, for Developer Edition and Trial orgs, the
                    maximum stack depth for chained jobs is 5, which means that you can chain jobs
                    four times and the maximum number of jobs in the chain is 5, including the
                    initial parent queueable job.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_queueable_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_queueable_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">
<a name="ul_c1n_ybz_w5"></a><ul class="ul bulletList" id="ul_c1n_ybz_w5">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_queueing_jobs.htm" target="_blank" title="HTML (New Window)">Queueable Apex</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_enhanced_future_overview.htm" target="_blank" title="HTML (New Window)">Future Methods with Higher
     Limits</a></li>
</ul>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Scheduling Jobs Using the Apex Scheduler</h1><div class="unit-content">
<body id="async_apex_scheduled_objectives"><a name="async_apex_scheduled_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll know:<a name="ul_tqt_ccz_w5"></a><ul class="ul bulletList" id="ul_tqt_ccz_w5">
<li class="li">When to use scheduled Apex.</li>
<li class="li">How to monitor scheduled jobs.</li>
<li class="li">Scheduled Apex syntax.</li>
<li class="li">Scheduled method best practices.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Scheduled Apex</span></h2>
<div class="body">
<p class="p">The Apex Scheduler lets you
            delay execution so that you can run Apex classes at a
            specified time. This is ideal for daily or weekly maintenance tasks using Batch Apex. To take advantage of
            the scheduler, write an Apex class that implements the Schedulable interface, and then schedule it for execution
            on a specific schedule.</p>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_syntax" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_syntax"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3">Scheduled Apex
        <span class="ph" id="topic-title"><a name="topic-title"></a>Syntax</span></h2>
<div class="body">
<p class="p">To invoke Apex classes to
            run at specific times, first implement the <samp>Schedulable</samp> interface for the class. Then, schedule an instance of the
            class to run at a specific time using the <samp>System.schedule</samp> method. </p>
<div class="codeblock"><pre>global class SomeClass implements Schedulable {
    global void execute(SchedulableContext ctx) {
        // awesome code here
    }
}</pre></div>
<p class="p">The class implements the <samp>Schedulable</samp> interface
            and must implement the only method that this interface contains, which is the <samp>execute</samp> method.</p>
<p class="p">The parameter of this method is a <samp>SchedulableContext</samp> object. After a class has been scheduled, a <samp>CronTrigger</samp> object is created that represents the
            scheduled job. It provides a <samp>getTriggerId</samp> method
            that returns the ID of a <samp>CronTrigger</samp> API
            object.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Sample Code</h3>
<p class="p">This class queries for open opportunities that should have closed by the current
                date, and creates a task on each one to remind the owner to update the
                opportunity.</p>
<div class="codeblock"><pre>global class RemindOpptyOwners implements Schedulable {

    global void execute(SchedulableContext ctx) {
        List&lt;Opportunity&gt; opptys = [SELECT Id, Name, OwnerId, CloseDate 
            FROM Opportunity 
            WHERE IsClosed = False AND 
            CloseDate &lt; TODAY];
        // Create a task for each opportunity in the list
        TaskUtils.remindOwners(opptys);
    }
    
}</pre></div>
<p class="p">You can schedule your class to run either programmatically or from the Apex Scheduler UI.</p>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_using_method" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_using_method"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Using the System.Schedule Method</span></h2>
<div class="body">
<p class="p">After you implement a class with the Schedulable interface, use the <samp>System.Schedule</samp> method to execute it. The <samp>System.Schedule</samp> method uses the user's timezone for
            the basis of all schedules, but runs in system mode—all classes are executed,
            whether or not the user has permission to execute the class.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Use extreme care if you’re planning to schedule a class from a trigger. You must be
            able to guarantee that the trigger won’t add more scheduled job classes than the limit.
            In particular, consider API bulk updates, import wizards, mass record changes through
            the user interface, and all cases where more than one record can be updated at a
            time.</p></div></div></div></div></div>
<p class="p">The <samp>System.Schedule</samp> method takes three arguments:
            a name for the job, a CRON expression used to represent the time and date the job is
            scheduled to run, and the name of the class.</p>
<div class="codeblock"><pre>RemindOpptyOwners reminder = new RemindOpptyOwners();
// Seconds Minutes Hours Day_of_month Month Day_of_week optional_year
String sch = '20 30 8 10 2 ?';
String jobID = System.schedule('Remind Opp Owners', sch, reminder);</pre></div>
<p class="p">For more information on the CRON expression used for scheduling, see the “Using the
            System.Schedule Method” section in <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_scheduler.htm" target="_blank" title="HTML (New Window)">Apex Scheduler</a>. </p>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_from_the_UI" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_from_the_UI"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Scheduling a Job from the UI</span></h2>
<div class="body">
<div class="p">You can also schedule a class using the user interface.<a name="ol_hcr_bdz_w5"></a><ol class="ol enumList" id="ol_hcr_bdz_w5">
<li class="li">From Setup, enter <kbd class="ph userinput">Apex</kbd> in the <span class="keyword parmname">Quick
                        Find</span> box, then select <strong class="ph uicontrol">Apex Classes</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Schedule Apex</strong>.</li>
<li class="li">For the job name, enter something like <kbd class="ph userinput">Daily Oppty
                        Reminder</kbd>.</li>
<li class="li">Click the lookup button next to Apex class
                    and enter <kbd class="ph userinput">*</kbd> for the search term to get a list of all
                    classes that can be scheduled. In the search results, click the name of your
                    scheduled class.</li>
<li class="li">Select Weekly or Monthly for the frequency and set the frequency desired.</li>
<li class="li">Select the start and end dates, and a preferred start time.</li>
<li class="li">Click <strong class="ph uicontrol">Save</strong>.</li>
</ol>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_testing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_testing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Testing Scheduled Apex</span></h2>
<div class="body">
<p class="p">Just like with the other async methods we’ve covered so far, with Scheduled Apex you must also ensure
            that the scheduled job is finished before testing against the results. To do this, use
                <samp>startTest</samp> and <samp>stopTest</samp> again around the <samp>System.schedule</samp> method, to ensure processing finishes before continuing
            your test.</p>
<div class="codeblock"><pre>@isTest
private class RemindOppyOwnersTest {

    // Dummy CRON expression: midnight on March 15.
    // Because this is a test, job executes
    // immediately after Test.stopTest().
    public static String CRON_EXP = '0 0 0 15 3 ? 2022';

    static testmethod void testScheduledJob() {

        // Create some out of date Opportunity records
        List&lt;Opportunity&gt; opptys = new List&lt;Opportunity&gt;();
        Date closeDate = Date.today().addDays(-7);
        for (Integer i=0; i&lt;10; i++) {
            Opportunity o = new Opportunity(
                Name = 'Opportunity ' + i,
                CloseDate = closeDate,
                StageName = 'Prospecting'
            );
            opptys.add(o);
        }
        insert opptys;
        
        // Get the IDs of the opportunities we just inserted
        Map&lt;Id, Opportunity&gt; opptyMap = new Map&lt;Id, Opportunity&gt;(opptys);
        List&lt;Id&gt; opptyIds = new List&lt;Id&gt;(opptyMap.keySet());

        Test.startTest();
        // Schedule the test job
        String jobId = System.schedule('ScheduledApexTest',
            CRON_EXP, 
            new RemindOpptyOwners());         
        // Verify the scheduled job has not run yet.
        List&lt;Task&gt; lt = [SELECT Id 
            FROM Task 
            WHERE WhatId IN :opptyIds];
        System.assertEquals(0, lt.size(), 'Tasks exist before job has run');
        // Stopping the test will run the job synchronously
        Test.stopTest();
        
        // Now that the scheduled job has executed,
        // check that our tasks were created
        lt = [SELECT Id 
            FROM Task 
            WHERE WhatId IN :opptyIds];
        System.assertEquals(opptyIds.size(), 
            lt.size(), 
            'Tasks were not created');

    }
}</pre></div>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_remember" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_remember"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Things to Remember</span></h2>
<div class="body">
<div class="p">Scheduled Apex has a number
            of items you need to be aware of (see Apex Scheduler in the
            Resources section for a complete list when you have time), but in general:<a name="ul_kmh_qdz_w5"></a><ul class="ul bulletList" id="ul_kmh_qdz_w5">
<li class="li">You can only have 100 scheduled Apex jobs at one
                    time and there are maximum number of scheduled Apex executions
                    per a 24-hour period. See Execution Governors and Limits in the Resources
                    section for details.</li>
<li class="li">Use extreme care if you’re planning to schedule a class from a trigger. You must
                    be able to guarantee that the trigger won’t add more scheduled jobs than the
                    limit.</li>
<li class="li">Synchronous Web service callouts are not supported from scheduled Apex. To be able
                    to make callouts, make an asynchronous callout by placing the callout in a
                    method annotated with <samp>@future(callout=true)</samp> and call this method from scheduled Apex. However, if
                    your scheduled Apex executes a batch job, callouts are supported from the batch class.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_scheduled_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_scheduled_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">
<a name="ul_p5k_vdz_w5"></a><ul class="ul bulletList" id="ul_p5k_vdz_w5">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_scheduler.htm" target="_blank">Apex Scheduler</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_gov_limits.htm" target="_blank">Execution Governors and
     Limits</a></li>
</ul>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Monitoring Asynchronous Apex</h1><div class="unit-content">
<body id="async_apex_monitoring_objectives"><a name="async_apex_monitoring_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll know:<a name="ul_i3p_l2z_w5"></a><ul class="ul bulletList" id="ul_i3p_l2z_w5">
<li class="li">How to monitor the different types of jobs.</li>
<li class="li">How to use the flex queue.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_monitoring_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_monitoring_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Monitoring Asynchronous Jobs</span></h2>
<div class="body">
<p class="p">The great thing about async jobs is that they work silently in the background. The tough
            thing about async jobs is that they work silently in the background. Luckily there are a
            few ways to monitor what is going on with your jobs under the covers.</p>
<p class="p">You can monitor the status of all jobs in the Salesforce user interface by going to
                <strong class="ph uicontrol">Setup</strong> and clicking <span class="ph menucascade"><strong class="ph uicontrol">Jobs</strong> | <strong class="ph uicontrol">Apex Jobs</strong></span>.</p>
<p class="p">You can also monitor the status of Apex jobs in the Apex Flex Queue, and
            reorder them to control which jobs are processed first. You can get to this queue by
            going to <strong class="ph uicontrol">Setup</strong> and clicking <span class="ph menucascade"><strong class="ph uicontrol">Jobs</strong> | <strong class="ph uicontrol">Apex Flex Queue</strong></span>.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Monitoring Future Jobs</h3>
<p class="p">Future jobs show up on the Apex Jobs page like
                any other jobs. However, future jobs are not part of the flex queue at this
                time.</p>
<p class="p">You can query <samp>AsyncApexJob</samp> to find your future
                job, but there’s a caveat. Since kicking off a future job does not return an ID,
                you’ll have to filter on some other field like <samp>MethodName</samp>, <samp>JobType</samp>, etc. to find
                your job. There are a few sample SOQL queries in <a class="xref" href="http://salesforce.stackexchange.com/questions/40679/is-there-any-way-of-confirming-that-an-future-method-has-been-called-queued-in" target="_blank" title="HTML (New Window)">this Stack Exchange
                    post</a> that may help.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Monitoring Queued Jobs with SOQL</h3>
<p class="p">To query information about your submitted job, perform a SOQL query on AsyncApexJob
                by filtering on the job ID that the <samp>System.enqueueJob</samp> method returns.</p>
<div class="codeblock"><pre>AsyncApexJob jobInfo = [SELECT Status, NumberOfErrors
    FROM AsyncApexJob WHERE Id = :jobID];</pre></div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading5">Monitoring Queue Jobs with the Flex Queue</h3>
<p class="p">The Apex Flex queue
                enables you to submit up to 100 batch jobs for execution. Any jobs that are
                submitted for execution are in holding status and are placed in the Apex Flex queue. Up to
                100 batch jobs can be in the holding status. </p>
<p class="p">Jobs are processed first-in first-out—in the order in which they’re submitted. You
                can look at the current queue order and shuffle the queue, so that you could move an
                important job to the front, or less important ones to the back.</p>
<p class="p">When system resources become available, the system picks up the next job from the top
                of the Apex Flex queue
                and moves it to the batch job queue. The system can process up to five queued or
                active jobs simultaneously for each organization. The status of these moved jobs
                changes from Holding to Queued. Queued jobs get executed when the system is ready to
                process new jobs. Like other jobs, you can monitor queued jobs in the Apex Jobs page.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Monitoring Scheduled Jobs</h3>
<p class="p">After an Apex job has
                been scheduled, you can obtain more information about it by running a SOQL query on
                    <samp>CronTrigger</samp>. The following sample
                queries the number of times the job has run, and the date and time when the job is
                scheduled to run again. It uses a <span class="keyword parmname">jobID</span> variable which is
                returned from the <samp>System.schedule</samp>
                method.</p>
<div class="codeblock"><pre>CronTrigger ct = [SELECT TimesTriggered, NextFireTime FROM CronTrigger WHERE Id = :jobID];</pre></div>
<p class="p">If you’re performing this query inside the execute method of your schedulable class,
                you can obtain the ID of the current job by calling <samp>getTriggerId</samp> on the <samp>SchedulableContext</samp> argument variable.</p>
<div class="codeblock"><pre>global class DoAwesomeStuff implements Schedulable {

    global void execute(SchedulableContext sc) {
        // some awesome code
        CronTrigger ct = [SELECT TimesTriggered, NextFireTime FROM CronTrigger WHERE Id = :sc.getTriggerId()];
    }
    
}</pre></div>
<p class="p">You can also get the job’s name and the job’s type from the <samp>CronJobDetail</samp> record associated with the <samp>CronTrigger</samp> record. To do so, use the <samp>CronJobDetail</samp> relationship when performing a query
                on <samp>CronTrigger</samp>. This example retrieves the most
                recent <samp>CronTrigger</samp> record with the job name and
                type from CronJobDetail.</p>
<div class="codeblock"><pre>CronTrigger job = [SELECT Id, CronJobDetail.Id, CronJobDetail.Name, CronJobDetail.JobType FROM CronTrigger ORDER BY CreatedDate DESC LIMIT 1];</pre></div>
<p class="p">Alternatively, you can query <samp>CronJobDetail</samp>
                directly to get the job’s name and type. The following example gets the job’s name
                and type for the <samp>CronTrigger</samp> record queried in
                the previous example. The corresponding <samp>CronJobDetail</samp> record ID is obtained by the <samp>CronJobDetail.Id</samp> expression on the <samp>CronTrigger</samp> record.</p>
<div class="codeblock"><pre>CronJobDetail ctd = [SELECT Id, Name, JobType FROM CronJobDetail WHERE Id = :job.CronJobDetail.Id];</pre></div>
<p class="p">And lastly, to obtain the total count of all Apex scheduled jobs,
                excluding all other scheduled job types, perform the following query. Note the value
                '7' is specified for the job type, which corresponds to the scheduled Apex job type. See
                CronJobDetail in the Resources section below for a list of all types.</p>
<div class="codeblock"><pre>SELECT COUNT() FROM CronTrigger WHERE CronJobDetail.JobType = '7’</pre></div>
</div>
</div>
</div>
<div class="topic nested0" id="async_apex_monitoring_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="async_apex_monitoring_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<div class="p">
<a name="ul_aby_wfz_w5"></a><ul class="ul bulletList" id="ul_aby_wfz_w5">
<li class="li"><a class="xref" href="https://developer.salesforce.com/releases/release/Spring15/FlexQueue" target="_blank" title="HTML (New Window)">Apex Flex Queue</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.object_reference.meta/object_reference/sforce_api_objects_cronjobdetail.htm" target="_blank" title="HTML (New Window)">CronJobDetail</a></li>
</ul>
</div>
</div>
</div>
</body></div><h1>Before You Start</h1><div class="unit-content">
<body id="blank_ref_lex"><a name="blank_ref_lex"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Lightning Experience</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_prereqs_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Determine if you have the skills to complete this module.</li>
<li class="li">Configure My Domain for your Developer Edition org.</li>
<li class="li">Create a required custom object.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_prereqs_before" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_before"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Before You Start This Module</span></h2>
<div class="body">
<p class="p">We know. You’re rarin’ to get started. And far be it from us to dampen anyone’s
			enthusiasm for Trailhead! But before you settle in to work through this module, we have
			a few things you should do. We suggest you do them <em class="ph i">before</em> you plan to start the
			next units. These steps can take some time, while changes percolate through your org,
			and doing them might even send you off in another direction. So, it’s worth working
			through this short unit first, before you commit to the full module.</p>
<p class="p">The first thing we’ll do is get My Domain enabled in the Developer Edition org you’re
			using for your challenges. My Domain is required to develop with Lightning Components,
			and it can take a little time to activate—anywhere from 30 seconds to 30 minutes. We’d
			hate to eat up your Trailhead Time making you sit around and wait. We’ll also create a
			necessary custom object, the Expense object, in your org.</p>
<p class="p">Then, while we wait for My Domain, we can have a chat about whether you want to take this
			module on. Nobody likes to be excluded, but really, this module isn’t for everyone. So
			we want to take a moment and talk about who this module <em class="ph i">is</em> for, and skills you’ll
			need to complete it. </p>
<p class="p">We know this sounds like we’re harshing on your excitement. We hate that as much as you
			do. But we want to be respectful of your time. If this isn’t the right module for you,
			let’s get you pointed at a different part of Trailhead, so your time with us is fun and
			challenging, without being frustrating.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If you already have My Domain enabled in your DE org or you use a Trailhead Playground
			org, skip this section. You already have My Domain set up.</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_prereqs_add_custom" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_add_custom"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Add a Custom Domain to Your Org with My Domain</span></h2>
<div class="body">
<p class="p">To use Lightning Components, your
      organization needs to have a custom domain configured using <span class="ph" id="d677705e17-d677729e9"><a name="d677705e17-d677729e9"></a>My Domain</span>.</p>
<p class="p">So what the heck is a custom domain, and why do you need to have one to use Lightning Components? First of all,
      a custom domain is a way to have your very own Salesforce server…sort of. It’s a way
      for you to use Salesforce from your
      own, customized URL, rather than a generic Salesforce instance URL. That is, once
      you have a custom domain, you’ll use Salesforce at <span class="ph filepath">https://<var class="keyword varname">yourDomain</var>.my.salesforce.com/</span>,
      which is reserved exclusively for your org’s use. Let other folks continue to use and share
        <span class="ph filepath">https://na30.salesforce.com/</span>.
      Your custom domain puts you on your own private Internet island.</p>
<div class="p">Setting up a custom domain has a lot of benefits besides just getting you a cool URL. Among
      other things, a custom domain lets you:<ul class="ul bulletList">
<li class="li">Highlight your business identity with your unique domain URL</li>
<li class="li">Brand your login screen and customize right-frame content</li>
<li class="li">Block or redirect page requests that don’t use the new domain name</li>
<li class="li">Work in multiple Salesforce orgs at the
                same time</li>
<li class="li">Set custom login policy to determine how users are authenticated</li>
<li class="li">Let users log in using a social account, like Google and Facebook, from the login
                page</li>
<li class="li">Allow users to log in once to access external services </li>
</ul>
</div>
<p class="p">A custom domain also improves your organization’s security, in ways too complicated to get
      into just now. And here we come to the reason it’s required for Lightning Components. To provide
      world class security for apps, we’re requiring that all users of Lightning Components use <span class="ph" id="d677705e51-d677729e9"><a name="d677705e51-d677729e9"></a>My Domain</span>, just as we do for other advanced features, such as Salesforce Identity. If you want to
      use Lightning Components you must enable My Domain in your org.</p>
</div>
</div>
<div class="topic task nested0" id="lightning_app_builder_custom_comps_mydomain_enable" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_app_builder_custom_comps_mydomain_enable"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Enable My Domain in Your Org</span></h2>
<div class="body taskbody"><div class="shortdesc">Before we get to the heart of creating Lightning components, let’s use
            Salesforce
        My Domain to set up a subdomain. Is setting a My Domain a requirement? Yes, if you want to use Lightning components in Lightning tabs, Lightning Pages, or as standalone
        apps. Salesforce requires My Domain as a security measure to help prevent malicious attacks—just in case a security hole lies
        hidden deep within a third-party or custom component. </div>
<div class="section context">
<p class="p">If you already have My Domain enabled in your DE org or use a Trailhead Playground org, skip this section and
                the next one. You already have My Domain set up.</p>
<p class="p">If you don’t have a subdomain yet, it’s easy to set one up. </p>
<p class="p">Every Salesforce org is
                set up within the <span class="ph filepath">salesforce.com</span> domain with a URL like
                    <span class="ph filepath">https://na30.salesforce.com</span>.
                With My Domain, you define your own domain, or a subdomain, within the
                    <span class="ph filepath">salesforce.com</span> domain. Your new URL looks something like:
                        <span class="ph filepath">https://<var class="keyword varname">yourDomain</var>.my.salesforce.com</span>.</p>
<p class="p">Use the My Domain wizard to create a subdomain. <span class="image image-block"><img alt="My Domain wizard" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc73a235177a5eb28e84221f4bbdff413.png" width="600"/></span></p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">My Domain</kbd> in the
                        <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">My
                        Domain</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Enter the name for your subdomain after <span class="ph filepath">https://</span> and click
                        <strong class="ph uicontrol">Check Availability</strong>. Typically, a subdomain is your
                    company name, but you can use any name as long as it’s unique. If this name is
                    already taken, choose another one. </span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Register Domain</strong>.</span>
</li>
</ol>
<div class="section result">
<p class="p">Salesforce updates its
                domain registries with your new subdomain. When it’s done, you receive an email with
                a subject like, “Your Developer Edition domain ready for testing.” It takes just a
                few minutes.</p>
<div class="box message confirm"><div class="inner"><div class="bd"><div class="media"><img alt="Important" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa1b68275bb2e1d6b7c064cb423d787e5.gif"/><div class="mediaBd"><h4 class="mbs">Important</h4><p>Did you catch that last part? It can take a few minutes before
                your domain is available. You can’t move to the next step until you get the
                activation email.</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic task nested0" id="lightning_app_builder_custom_comps_mydomain_rollout" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_app_builder_custom_comps_mydomain_rollout"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Roll Out My Domain to Your Org</span></h2>
<div class="body taskbody"><div class="shortdesc">Did you get your activation email? From the email, click the link to get back to the
            My Domain wizard. It takes you to Step 3, where you test the links to your subdomain URLs before
        rolling out the subdomain to your org. Even though you don’t have users to deploy it to in
        your DE org, you must still roll out My Domain to make your custom Lightning
        components available in Lightning Pages, in the Lightning App Builder, and for
        standalone apps.</div>
<div class="section context"><div class="p">
<span class="image image-block"><img alt="My Domain Wizard" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usad27e43cbd1e5141a388577c1dd39030.png" width="600"/></span>
</div></div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Click the link in the activation email to log in to your Salesforce
                    subdomain. It takes you to your Salesforce
                    org.</span>
<div class="itemgroup stepresult">Notice that the URL in the browser address bar shows your new subdomain
                    name. Right now, you’re the only one who has this URL. <span class="image image-block"><img alt="URL of subdomain" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us8c62fd5e47f7addb88eea220d18d4cb8.png" width="600"/></span></div>
</li>
<li class="li step">
<span class="ph cmd">Click around your org to make sure that links point to your new domain. You
                    probably haven’t created links in your DE org, so we can go on. (When creating a
                    domain in a production org, this important step is easily overlooked.) </span>
</li>
<li class="li step">
<span class="ph cmd">From the My Domain page, click <strong class="ph uicontrol">Deploy to Users</strong>, and then
                    click <strong class="ph uicontrol">OK</strong>. Deploying a subdomain rolls out the new
                    subdomain URL throughout your org. Now all your users see the subdomain URL in
                    the browser address bar.</span>
</li>
<li class="li step">
<span class="ph cmd">Step 4 of the wizard displays configuration options, which we can ignore for
                    now.</span>
</li>
</ol>
<div class="section result"><div class="p">Congratulations, you’ve set up My Domain! When setting up My Domain in a production org, you have a few more steps. Learn more by completing the My Domain unit of the <a class="xref" href="https://trailhead.salesforce.com/module/identity_login" target="_blank" title="HTML (New Window)">User Authentication</a>
            module. Now that you’ve protected—and branded—your org with a subdomain, let’s go
            on.</div></div>
</div>
</div>
<div class="topic task nested0" id="lex_dev_lc_basics_prereqs_expense_object" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_expense_object"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Define the Expense Custom Object</span></h2>
<div class="body taskbody"><div class="shortdesc">Many of the examples we’ll use in this module depend on a custom Expense object.
        You’ll get the most out of this module if you add these samples to your DE org and
        experiment with them for yourself. References to sObjects are validated on save and, if any
        object is undefined, the component is invalid. Lightning Components won’t let you save a
        component it knows is invalid. Let’s create the Expense object up front, so you don’t run
        into any problems compiling and saving code that depends on it.</div>
<div class="section context">
<p class="p">While we assume that you know how to create a custom object already, here are brief
                instructions, and the specifics for the Expense object and its fields.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Go to the Object Manager.</span>
<div class="itemgroup info">From Setup, enter “<kbd class="ph userinput">object</kbd>” in the Quick Find box, and
                    then select <strong class="ph uicontrol">Object Manager</strong> under Create.</div>
</li>
<li class="li step">
<span class="ph cmd">Create the custom object.</span>
<div class="itemgroup info">Select <span class="ph menucascade"><strong class="ph uicontrol">Create</strong> | <strong class="ph uicontrol">Custom Object</strong></span>.</div>
</li>
<li class="li step">
<span class="ph cmd">Define the Expense object.</span>
<div class="itemgroup info">Enter the following values for the object’s definition.
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d236756e559">Field</th>
<th class="featureTableHeader " id="d236756e562">Value</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Field" headers="d236756e559">Label</td>
<td class="entry" data-title="Value" headers="d236756e562">Expense</td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d236756e559">Plural Label</td>
<td class="entry" data-title="Value" headers="d236756e562">Expenses</td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d236756e559">Starts with vowel sound</td>
<td class="entry" data-title="Value" headers="d236756e562">checked</td>
</tr>
<tr>
<td class="entry" data-title="Field" headers="d236756e559">API Name</td>
<td class="entry" data-title="Value" headers="d236756e562">Expense__c</td>
</tr>
</tbody>
</table></div>
Accept the defaults for the rest of the object definition.</div>
</li>
<li class="li step">
<span class="ph cmd">Add custom fields to the Expense object.</span>
<div class="itemgroup info">Scroll to the Fields &amp; Relationships section of the object details page.
                    For each of the following fields, click <strong class="ph uicontrol">New</strong> and define
                    the field with the following details.
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d236756e634">Field Label</th>
<th class="featureTableHeader " id="d236756e637">API Name</th>
<th class="featureTableHeader " id="d236756e640">Field Type</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Field Label" headers="d236756e634">Amount</td>
<td class="entry" data-title="API Name" headers="d236756e637">Amount__c</td>
<td class="entry" data-title="Field Type" headers="d236756e640">Number(16,2)</td>
</tr>
<tr>
<td class="entry" data-title="Field Label" headers="d236756e634">Client</td>
<td class="entry" data-title="API Name" headers="d236756e637">Client__c</td>
<td class="entry" data-title="Field Type" headers="d236756e640">Text(50)</td>
</tr>
<tr>
<td class="entry" data-title="Field Label" headers="d236756e634">Date</td>
<td class="entry" data-title="API Name" headers="d236756e637">Date__c</td>
<td class="entry" data-title="Field Type" headers="d236756e640">Date</td>
</tr>
<tr>
<td class="entry" data-title="Field Label" headers="d236756e634">Reimbursed</td>
<td class="entry" data-title="API Name" headers="d236756e637">Reimbursed__c</td>
<td class="entry" data-title="Field Type" headers="d236756e640">Checkbox</td>
</tr>
</tbody>
</table></div>
</div>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_prereqs_skills" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_skills"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Skills You Need to Complete This Module</span></h2>
<div class="body">
<p class="p">One of the great things about Salesforce is how much you can customize it using the app. Custom
			objects and fields, formulas, flows, reports, approvals, and even the user interface
			itself—you can do all of this and more from Setup, without writing a line of code, and
			make your users very happy.</p>
<p class="p">But there are some features of Salesforce that require code, and Lightning Components is one of
			them. There are no two ways about this: to be successful with Lightning Components, you
			need to be able to read and write code. We’ll be looking at a lot of code throughout
			this module, and you’ll have to write a fair bit yourself to pass the challenges.</p>
<p class="p">Specifically, we think that:</p>
<ul class="ul bulletList">
<li class="li">You should be comfortable reading and writing JavaScript. Although Lightning Components also
				uses HTML-style markup, doing anything beyond “hello world”
					<strong class="ph b">requires</strong> JavaScript.<p class="p">There’s an enormous number of resources, free and
					otherwise, for learning JavaScript. We’d recommend getting started at <a class="xref" href="http://jstherightway.org/" target="_blank">JavaScript
						the Right Way</a>. But if your friend or colleague has a recommendation,
					or a book they can loan you, go for it!</p>
</li>
<li class="li">It would be great if you know Apex. Reading and writing data from Salesforce usually uses
				Apex, and that’s what we’ll learn in this module. You can pass the challenges in
				this module without being an Apex guru, but when you go to write real apps, you’ll
				be writing plenty of Apex. <p class="p">The <a class="xref" href="https://trailhead.salesforce.com/module/apex_database" target="_blank" title="HTML (New Window)">Apex Basics &amp; Database</a>
					module is a great way to get started with Apex, and will give you everything you
					need for this module.</p>
</li>
</ul>
<p class="p">If this doesn’t describe you, we don’t want to turn you away. It’s not impossible to complete
			this module without the preceding skills. But we do think it will be frustrating. And
			while you might earn the badge—which is definitely cool!—you won’t really be ready to
			use Lightning Components to write apps.</p>
<p class="p">We want Trailhead to be fun, and we want it to help people use Salesforce more completely and confidently. Experienced programmers will get a lot out of this module. But grinding through it without the requisite programming background might not be the best use of your Trailhead Time.</p>
<p class="p">OK. With that out of the way, let’s dive in and start learning!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_prereqs_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_prereqs_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=domain_name_overview.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">“<span class="ph" id="d677857e18-d677870e9">My Domain</span> Overview”</a> in the Salesforce Help</li>
<li class="li">Trailhead: <a class="xref" href="https://trailhead.salesforce.com/module/data_modeling" target="_blank">Data
                                        Modeling</a> module</li>
<li class="li">Trailhead: <a class="xref" href="https://trailhead.salesforce.com/en/module/apex_database" target="_blank">Apex
                                        Basics &amp; Database</a> module</li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Get Started with Lightning Components</h1><div class="unit-content">
<body id="lex_dev_lc_basics_intro_objectives"><a name="lex_dev_lc_basics_intro_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Describe what the Lightning Components framework is, and what it’s used
					for.</li>
<li class="li">List four key differences between Lightning Components and other web app
					frameworks.</li>
<li class="li">List at least five different ways you can use Lightning Components to customize
					Salesforce.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_video" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_video"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Getting Started with Lightning Components</span></h2>
<div class="body">
<p class="p">Yes! You’re still with us! We’re really excited to welcome you to the
			Lightning Components party—and it <em class="ph i">is</em> a party. When we say that Lightning
			Components is the most exciting and powerful app development technology we’ve
			built in years, it’s a bold statement. And we know it’s true, because we
			built Salesforce1 and Lightning Experience with it. We think that once you get to know
			Lightning Components, you’ll be as excited as we are about using it.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_what_is" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_what_is"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>What Is the Lightning Components Framework?</span></h2>
<div class="body">
<p class="p">Lightning Components is a UI framework for developing web apps for mobile and desktop devices. It’s a modern framework for building single-page applications with dynamic, responsive user interfaces for Force.com apps. It uses JavaScript on the client side and Apex on the server side.</p>
<p class="p">That’s…a lot of buzzwords. Let’s see if we can’t try that again, with words that normal people use.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Again, looking at a very high level architecture" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use2b69ee82209a54da14ec641431bd483.png"/></span></div></p>
<p class="p">“Lightning Components is a framework for developing web apps.” That seems understandable. An app framework is a collection of code and services that make it easier for you to create your own custom apps, without having to write all the code yourself. There are lots of different web app frameworks out there, like Ruby on Rails, Grails, AngularJS, Django, CakePHP, and on and on. We’ve even got one of our own, Visualforce, that customers know and love. Lightning Components is new, and we think it’s pretty special. We’ll talk about why it’s special more as we go, and hopefully by the end of this module, you’ll agree!</p>
<p class="p">“Web apps for mobile and desktop devices.” Again, that seems pretty easy to grasp. But…did you
			notice the order there? Lightning Components was born out of and used to build the
			Salesforce1 platform for mobile apps. Mobile is baked into the core of Lightning
			Components, and it makes developing apps that work on both mobile and desktop devices
			far simpler than many other frameworks.</p>
<p class="p">“It’s a modern framework for building single-page applications.” OK, now we’re getting a little buzzed. “Modern” is just marketing, right? And what are “single-page applications”? </p>
<p class="p">We don’t think modern is “just” marketing. In the <a class="xref" href="https://trailhead.salesforce.com/lex_dev/lex_dev_overview/lex_dev_overview_future" target="_blank">Develop for Lightning Experience</a> module we talk at length about how web apps have evolved from simple, page-by-page oriented experiences to highly responsive apps that have all the same behavior and interactivity of native apps, on desktops and especially on mobile devices. To achieve these interactive user experiences, modern web apps are built as a tightly bound collection of code that loads from a single URL, and then runs continuously as you use it. These single-page apps are built much like native apps are, with the plumbing being handled by a framework. A framework like Lightning Components.</p>
<p class="p">“Dynamic, responsive user interfaces for Force.com apps” is just applying the preceding ideas to apps you build on top of Salesforce. And finally, “it uses JavaScript on the client side and Apex on the server side” is pretty self-explanatory by itself—even if it leaves out some specifics about what goes where. We’ll get to that, soon!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>An Example Lightning Component</span></h2>
<div class="body">
<p class="p">OK, that’s a lot of talk talk talk, and not a lot of code. Let’s take a look at a real
            Lightning component, and see what all that talk is about. First, here’s what the
            component looks like when rendered on screen:</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Lightning component: not much to look at, but a fair bit going on" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf83828c78e5c9335d4fc423b03111071.png"/></span></div></p>
<p class="p">It might not look like much, but there’s a fair bit going on. Here’s the code for it; this is
            from a component we’ll dig into in detail later.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="expense" type="Expense__c"/&gt;
    &lt;aura:registerEvent name="updateExpense" type="c:expensesItemUpdate"/&gt;

    &lt;div class="slds-card"&gt;
        &lt;!-- Color the item blue if the expense is reimbursed --&gt;
        &lt;div class="{!v.expense.Reimbursed__c == true ?
            'slds-theme--success' : 'slds-theme--warning'}"&gt;

            &lt;header class="slds-card__header slds-grid grid--flex-spread"&gt;
                &lt;a aura:id="expense" href="{!'/' + v.expense.Id}"&gt;
                    &lt;h3&gt;{!v.expense.Name}&lt;/h3&gt;
                &lt;/a&gt;
            &lt;/header&gt;

            &lt;section class="slds-card__body"&gt;
                &lt;div class="slds-tile slds-hint-parent"&gt;
                    &lt;p class="slds-tile__title slds-truncate"&gt;Amount:
                        &lt;ui:outputCurrency value="{!v.expense.Amount__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Client:
                        &lt;ui:outputText value="{!v.expense.Client__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Date:
                        &lt;ui:outputDate value="{!v.expense.Date__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Reimbursed?
                        &lt;ui:inputCheckbox value="{!v.expense.Reimbursed__c}"
                            click="{!c.clickReimbursed}"/&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/aura:component&gt;
</pre></div>
<p class="p">Even before you know anything about Lightning Components, you can still notice a few things
            about this sample. First of all, it’s XML markup, and mixes both static HTML tags with
            custom Lightning Components tags, such as the <samp>&lt;aura:component&gt;</samp> tag that leads off the sample. If you’ve worked with
            Visualforce, the format of that tag is familiar: <samp><var class="keyword varname">namespace</var>:<var class="keyword varname">tagName</var></samp>. As you’ll see
            later, built-in components can come from a variety of different namespaces, such as
                <samp>aura:</samp> (as here), or <samp>force:</samp>, <samp>lightning:</samp>, or <samp>ui:</samp>.</p>
<p class="p">Speaking of <samp>ui:</samp>, you might have noticed that there are
            input and output components, like <samp>&lt;ui:inputCheckbox&gt;</samp> and <samp>&lt;ui:outputText&gt;</samp>. Again, this is a pattern familiar to Visualforce
            developers. If you’re not one of those, hopefully it’s pretty obvious that you use the
            input components to collect user input, and the output components to display read-only
            values.</p>
<p class="p">We’ll get to the rest of the components in later units. For now, one last thing to notice
            is the use of static HTML with a number of CSS class names that start with “slds”. We’re
            going to use the Salesforce Lightning Design System, or SLDS, to style our components,
            and while we won’t explain SLDS in detail in this module, we want you to see examples of
            it in action.</p>
<p class="p">OK, cool, Lightning Components markup is XML. But didn’t we say something about JavaScript
            earlier? Notice the <samp>click="{!c.clickReimbursed}"</samp>
            attribute on the checkbox? That means “when this checkbox is clicked, call the
            controller’s <samp>clickReimbursed</samp> function.” Let’s look
            at the code it’s attached to.</p>
<div class="codeblock"><pre>({
    clickReimbursed: function(component, event, helper) {
        var expense = component.get("v.expense");
        var updateEvent = component.getEvent("updateExpense");
        updateEvent.setParams({ "expense": expense });
        updateEvent.fire();
    }
})</pre></div>
<p class="p">This is the component’s client-side controller, written in JavaScript. The <samp><strong class="ph b">clickReimbursed</strong></samp> function in the component’s
            controller corresponds to the <samp>click="{!c.<strong class="ph b">clickReimbursed</strong>}"</samp> attribute on the
            checkbox in the component’s markup.</p>
<p class="p">In Lightning Components, a component is a <dfn class="term">bundle</dfn> of code. It can include
            markup like the earlier sample, in the “.cmp resource,” and it can also include
            JavaScript code, in a number of associated resources. Related resources are “auto-wired”
            to each other, and together they make up the component bundle.</p>
<p class="p">We’ll get to the details in the next unit, but for now, you’ve seen the two most important
            types of Lightning Components code.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_visualforce" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_visualforce"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>What About Visualforce?</span></h2>
<div class="body">
<p class="p">The question we get from customers, over and over, is this: “Which should I use, Lightning Components or Visualforce?” The short answer is: yes!</p>
<p class="p">Visualforce and Lightning Components each have their strengths. These are discussed in the <a class="xref" href="https://trailhead.salesforce.com/lex_dev/lex_dev_overview/lex_dev_overview_future" target="_blank">Develop for Lightning Experience</a> module, where you can find the long answer about appropriate uses for each. Here, let’s go for medium.</p>
<p class="p">First, know this: Visualforce isn’t going away. Your Visualforce code will run on
			Salesforce for a long time to come. You don’t <em class="ph i">need</em> to convert existing
			Visualforce apps, and you don’t <em class="ph i">need</em> to stop creating apps with
			Visualforce.</p>
<p class="p">However, you might <em class="ph i">want</em> to, at least in some cases. For example, Visualforce was created
			before mobile apps on phones became a thing. While you <em class="ph i">can</em> develop mobile apps
			with Visualforce, none of the built-in components are mobile-savvy. Which means you
			write more code. Lightning Components, on the other hand, is specifically optimized to
			perform well on mobile devices.</p>
<p class="p">Again, we cover a lot of specifics in the <a class="xref" href="https://trailhead.salesforce.com/lex_dev/lex_dev_overview/lex_dev_overview_future" target="_blank">Develop for Lightning Experience</a> module. If you still have questions about Visualforce and Lightning Components, that’s a good place to go next. </p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_frameworks" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_frameworks"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>What About AngularJS, React, and Those Other JavaScript
		Frameworks?</span></h2>
<div class="body">
<p class="p">Another question that comes up frequently is: “How does Lightning Components compare to
				<var class="keyword varname">MyFavoriteFramework</var>?” where that favorite framework is another
			modern JavaScript web app framework such as AngularJS, React, or Ember.</p>
<p class="p">These are all fine frameworks! Many people know them, and there are a lot of resources for
			learning them. You might be surprised to learn that we think these frameworks are a
			great way to build Force.com apps!</p>
<p class="p">We recommend using them with Visualforce, using what we call a <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_html_container_page.htm" target="_blank">container page</a>, and packaging your chosen framework and app code into static resources. Using an empty container page has Visualforce get out of your way, and lets you use the full capabilities of your chosen framework.</p>
<p class="p">While it’s possible to use third-party JavaScript frameworks with Lightning Components, it’s a
			bit cumbersome. Lightning Components doesn’t have the notion of an empty page, and has
			some specific opinions about how, for example, data access is performed, and some rather
			specific security requirements.</p>
<p class="p">And frankly, the features of Lightning Components and most modern frameworks overlap quite a
			bit. While the <em class="ph i">style</em> or <em class="ph i">specifics</em> might be different, the <em class="ph i">features</em>
			provided are conceptually similar enough that you’re effectively running duplicate code.
			That’s neither efficient nor easy to work with.</p>
<p class="p">Another thing to consider: general-purpose frameworks such as AngularJS are designed to be
			agnostic about the platform they run on top of, in particular data services. Lightning
			Components, on the other hand, is designed to connect natively with services provided by
			Salesforce and the Force.com platform. Which do you think is going to help you build
			apps faster?</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>We’re only talking about <strong class="ph b">application frameworks</strong> here. If you have a favorite
			JavaScript charting or mapping library, or other special-purpose toolkits then—subject
			to certain security requirements—modern JavaScript libraries usually work fine.</p></div></div></div></div></div>
<p class="p">OK, enough words words words! Let’s take a quick-and-graphical tour of the many places you can
			deploy Lightning Components apps. And then let’s dive into the fun stuff: the code.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_where" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_where"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Where You Can Use Lightning Components</span></h2>
<div class="body">
<p class="p">You can use Lightning Components to customize your Salesforce org in a number of different ways. But that’s not all! You can use Lightning Components to create stand-alone apps that are hosted on Salesforce. And you can even create apps that are hosted on other platforms, including embedding them into apps from those platforms.</p>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Add Apps to the Lightning Experience App Launcher</h3>
<div class="exampleblock">
<p class="p">Your Lightning Components apps and custom tabs are available from the App Launcher,
				which you reach by clicking <img alt="App Launcher icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us60485b6caa415febc0e331b695fec41b.png"/> in the header.<div class="imageleft"><span class="image image-block"><img alt="Add component to the App Launcher" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use189fc1fcbcb0e5fbe2320efe5dd31f5.png" width="800"/></span></div></p>
<p class="p">Click a custom app (1) to activate it. Items in the app display in the navigation
				bar, including any Lightning components tabs you’ve added to the app. Note that you
				need to add your components to tabs for them to be accessible in the App Launcher.
				Lightning components tabs that aren’t in apps can be found in All Items (2).</p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading9">Add Apps to Lightning Experience and Salesforce1 Navigation</h3>
<div class="exampleblock">
<p class="p">As described in the preceding example, you can add Lightning components tabs to an
				app and they display as items in the app’s navigation bar.<div class="imageleft"><span class="image image-block"><img alt="Add built-in components to the main navigation" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us56dc3e5e8f993b98e58cf98b0a2a6c09.png"/></span></div></p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading10">Create Drag-and-Drop Components for Lightning App Builder and Community
				Builder</h3>
<div class="exampleblock">
<p class="p">Build custom user interfaces using your own Lightning components, or those you
				install from AppExchange, for desktop and mobile devices.<div class="imageleft"><span class="image image-block"><img alt="Create Drag-and-Drop Components for Lightning App and Community Builder" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd3af4c963c34844c75a82eb982e720b9.png"/></span></div></p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading11">Add Lightning Components to Lightning Pages</h3>
<div class="exampleblock">
<p class="p">A Lightning Page is a custom layout that lets you design pages for use in the
				Salesforce1 mobile app or in Lightning Experience. You can use a Lightning Page to
				create an app home page and add your favorite Lightning component, such as the
				Expenses app we’ll be creating in this module, to it.</p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading12">Add Lightning Components to Lightning Experience Record Pages</h3>
<div class="exampleblock">
<p class="p">Just as the title suggests, you can customize Lightning Experience record pages by
				adding a Lightning Component.<div class="imageleft"><span class="image image-block"><img alt="Just as the title suggests, customize Lightning Experience Record Pages by adding a Lightning Component" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use1afb7cfb44bb46fb3bd5a00e94335dd.png"/></span></div></p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading13">Launch a Lightning Component as a Quick Action</h3>
<div class="exampleblock">
<p class="p">Create actions using a Lightning component, and then add the action to an object’s
				page layout to make it instantly accessible from a record page. <div class="imageleft"><span class="image image-block"><img alt="Lightning componet quick action on record page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usaf7cd2875838a2267c2a1f515b762f2a.png"/></span></div></p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading14">Create Stand-Alone Apps</h3>
<div class="exampleblock">
<p class="p">A standalone app comprises components that use your Salesforce data and can be used
				independently from the standard Salesforce environment.<div class="imageleft"><span class="image image-block"><img alt="standalone apps are components that use Salesforce data and can be used independent of the Salesforce1 app" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9959d005e85d4ceb9024507e55584b8d.png"/></span></div></p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading15">Run Lightning Components Apps Inside Visualforce Pages</h3>
<div class="exampleblock">
<p class="p">Add Lightning components to your Visualforce pages to combine features you’ve built
				using both solutions. Implement new functionality using Lightning components and
				then use it with existing Visualforce pages.</p>
</div></div>
<div class="example"><h3 class="helpHead3" id="Tdxn4tBK-heading16">Run Lightning Components Apps on Other Platforms with Lightning Out</h3>
<div class="exampleblock">
<p class="p">Lightning Out is a feature that extends Lightning apps. It acts as a bridge to surface
				Lightning components in any remote web container. This means you can use your
				Lightning components inside of an external site (for example, Sharepoint or SAP), in
				a hybrid app built with the Mobile SDK, or even elsewhere in the App Cloud like on
					Heroku.<div class="imageleft"><span class="image image-block"><img alt="Lightning Out on Heroku dialog" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us01f519e4578d335bbc784d7712f2a68a.png"/></span></div></p>
</div></div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_intro_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_intro_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading17"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/devcenter/lightning" target="_blank" title="HTML (New Window)">Lightning Developer
                                Center</a></li>
<li class="li">Trailhead: “User Interface Development Considerations” in the <a class="xref" href="https://trailhead.salesforce.com/lex_dev/lex_dev_overview/lex_dev_overview_future" target="_blank" title="HTML (New Window)">Lightning Experience
                                        Development</a> module</li>
<li class="li Video">Video: <a class="xref" href="https://www.youtube.com/watch?v=qm_kQFfRIaY" target="_blank" title="HTML (New Window)">Lightning Intro
                    Screencasts: Lightning Components</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_add_cmp_lex.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Lightning Experience</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_add_cmp_salesforce1.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Salesforce1</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_config_for_app_builder.htm" target="_blank" title="HTML (New Window)">Configure Components for
                    Lightning Pages and the Lightning App Builder</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_config_for_builder.htm" target="_blank" title="HTML (New Window)">Configure Components for
                    Communities</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_visualforce.htm" target="_blank" title="HTML (New Window)">Use Lightning Components
                    in Visualforce Pages</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/lightning_out.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Any App with Lightning Out</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/qs_aotp_app.htm" target="_blank" title="HTML (New Window)">Create a Standalone
                    Lightning App</a></li>
</ul>
</div>
</div>
</body></div><h1>Create and Edit Lightning Components</h1><div class="unit-content">
<body id="lex_dev_lc_basics_creat_objectives"><a name="lex_dev_lc_basics_creat_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Create and edit Lightning component bundle resources in the Developer
					Console.</li>
<li class="li">Create a “harness” application for testing components in
					development.</li>
<li class="li">Perform the edit and reload cycle for previewing components in development.</li>
<li class="li">List the different resources that make up a Lightning component bundle.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_editing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_editing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Creating and Editing Lightning Components</span></h2>
<div class="body">
<p class="p">OK! Time to write some code! #finally! </p>
<p class="p">The first step to writing Lightning Components code is, uh, getting set up to write code. Fortunately, this is really easy. In your DE org, open the Developer Console under <em class="ph i">Your Name</em> or the quick access menu (<img alt="Setup gear icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us02e863126fef084a82dc1f96dea047ff.png"/>).</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d231822e67">Lightning Experience</th>
<th class="featureTableHeader " id="d231822e70">Salesforce Classic</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Lightning Experience" headers="d231822e67">
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Opening the developer console" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc082f997ba4b05eebb84771a895172f3.png"/></span></div></p>
</td>
<td class="entry" data-title="Salesforce Classic" headers="d231822e70">
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Classic mode: Opening the developer console" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usfecec1750040104b0a2288bec2148373.png"/></span></div></p>
</td>
</tr>
</tbody>
</table></div>
<p class="p">Boom, you’re ready to write Lightning Components code!</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Boom: you can start writing component code" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb90fd9141862cecdadec3a1deb20e278.png"/></span></div></p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creating_dev_console" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creating_dev_console"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Create Lightning Components in the Developer Console</span></h2>
<div class="body">
<p class="p">So, let’s write something. Select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Lightning Component</strong></span> to create a new Lightning component. In the <strong class="ph b">New Lightning Bundle</strong>
			panel, enter <kbd class="ph userinput">helloWorld</kbd> for the component
			name, and click <strong class="ph uicontrol">Submit</strong>.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="New Lightning Bundle panel" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us543581192473d51a150cb6fc073cc35d.png"/></span></div></p>
<p class="p">This creates a new <samp>helloWorld</samp> component bundle, with two open tabs. Close the <samp>helloWorld</samp> tab, and keep the <samp>helloWorld.cmp</samp> tab open.</p>
<p class="p"><samp>helloWorld.cmp</samp> contains the opening and closing tags for a Lightning component, <samp>&lt;aura:component&gt;</samp>. Between them, add the following markup, and save:</p>
<div class="codeblock"><pre>&lt;p&gt;Hello Lightning!&lt;/p&gt;</pre></div>
<p class="p">Your component markup should look like the following.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Hello Lightning markup" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0c025c7cae21bda7ff929ea187020280.png"/></span></div></p>
<p class="p">Woohoo, your first Lightning component! Now…how do we see what it looks like?</p>
<p class="p">The short answer is, it’s tricky. You can’t run your component directly and see how it behaves.
			Instead, your component needs to run inside a container app, which we’ll call a
				<dfn class="term">container</dfn> for short. Examples of containers would be the Lightning
			Experience or Salesforce1 apps, or an app you build with Lightning App
			Builder—basically, any of the things you saw at the end of the prior unit. You add your
			component to one of these containers, and then access it within that container.</p>
<p class="p">We’ll talk more about containers later, and in other Lightning Components modules. For now, let’s just make a simple one of our own.</p>
<p class="p">Select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Lightning Application</strong></span> to create a new Lightning app. In the <strong class="ph b">New Lightning Bundle</strong> panel,
			enter “<kbd class="ph userinput">harnessApp</kbd>” for the app name, and
			click <strong class="ph uicontrol">Submit</strong>.</p>
<p class="p">This creates a new <samp>harnessApp</samp> bundle, with two open tabs. Close the <samp>harnessApp</samp> tab, and keep the <samp>harnessApp.app</samp> tab open.</p>
<p class="p"><samp>harnessApp.app</samp> contains the opening and closing tags for a Lightning app, <samp>&lt;aura:application&gt;</samp>. Between them, add the following markup, and save:</p>
<div class="codeblock"><pre>&lt;c:helloWorld/&gt;</pre></div>
<p class="p">This adds the <samp>helloWorld</samp> component we created earlier to the <samp>harnessApp</samp> app.</p>
<p class="p">Before we explain this deceptively simple app, click back and forth between the <samp>harnessApp.app</samp> and <samp>helloWorld.cmp</samp> tabs in the Developer Console. Besides the markup, what do you notice that’s different?</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="What is different?" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use477facf332ad50132f1c8c71e88d152.png"/></span></div></p>
<p class="p">Got it in one: the <strong class="ph uicontrol">Preview</strong> button. Apps have one, components don’t.
			Click it now, and another browser window should open and show you your app.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Preview the app." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf6692ecef7a1a985ddfb345fc0a62c34.png"/></span></div></p>
<p class="p">Now we’re cooking with…well, OK, it’s just “hello world.” But there are some interesting things to notice here, in spite of the markup being trivial.</p>
<p class="p">Let’s start with the Developer Console. If you’ve used it to write Visualforce or Apex, you have
			surely noticed the extra controls that appear in a palette on the right side of the
			editing window of any Lightning bundle. Each of the different buttons with a
				<strong class="ph uicontrol">Create</strong> label represents a different <em class="ph i">resource</em> you can
			add to the bundle. We’ll talk about resources and bundles in the next section. For now,
			just know that the Developer Console gives you an easy way to create and switch between
			them. </p>
<p class="p">Indeed, the Developer Console has a number of features for working with Lightning Components.
			There’s also <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong> | <strong class="ph uicontrol"> Lightning Resources</strong></span>, which lets you open a bunch of Lighting resources all at once.
			Useful!</p>
<p class="p">The Developer Console is a great place to write Lightning code, and we’ll work with it for the rest of this module. But, because Lightning resources are accessible via the Force.com Tooling API, there are other ways to create and edit them. The <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.eclipse.meta/eclipse/" target="_blank">Force.com IDE</a> is a good one, and there are excellent third-party tools such as Sublime Lightning and Mavens Mate. Don’t feel like you’re limited to just the Developer Console!</p>
<p class="p">One last thing before we turn to the code. The URL for our “preview” is actually the
			permanent home of our app (once it’s made available to our users). The format of
			the URL is the following:
					<span class="ph filepath">https://<var class="keyword varname">&lt;yourDomain&gt;</var>.lightning.force.com/<var class="keyword varname">&lt;yourNamespace&gt;</var>/<var class="keyword varname">&lt;yourAppName&gt;</var>.app</span>.</p>
<p class="p"><var class="keyword varname">&lt;yourAppName&gt;</var> represents the name of your app bundle, in this case,
				<samp>harnessApp</samp>. In your Trailhead DE orgs, you
			shouldn’t have a namespace configured, so you should see a “c” in that
			part of the URL. “c” represents the default namespace…and it will come
			back to haunt us later. The rest of the URL format should be self-explanatory.</p>
<p class="p">OK, on to the code!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_what_is_component" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_what_is_component"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>What Is a Component?</span></h2>
<div class="body">
<p class="p">It’s not often that hello world triggers existential questions, but here we are. Let’s talk
			about what a component is in the context of our <samp>helloWorld</samp> example. As a practical matter, a <dfn class="term">component</dfn> is a
			bundle that includes a definition resource, written in markup, and may include
			additional, optional resources like a controller, stylesheet, and so on. A
				<dfn class="term">resource</dfn> is sort of like a file, but stored in Salesforce rather than
			on a file system.</p>
<p class="p">Our <samp>helloWorld.cmp</samp> component definition resource is easy to understand.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;
    &lt;p&gt;Hello Lightning!&lt;/p&gt;
&lt;/aura:component&gt;</pre></div>
<p class="p">There are the opening and closing <samp> &lt;aura:component&gt;</samp> tags, with some static HTML in between. It would be hard to be more simple, and you might be tempted to think of it as a “page.” Don’t. We’ll come back to this in a bit.</p>
<p class="p">We’ve mentioned component bundles already, but what are they really? A <em class="ph i">bundle</em> is sort of like a folder. It groups the related resources for a single component. Resources in a bundle are <em class="ph i">auto-wired</em> together via a naming scheme for each resource type. Auto-wiring just means that a component definition can reference its controller, helper, etc., and those resources can reference the component definition. They are hooked up to each other (mostly) automatically.</p>
<p class="p">Let’s see how this works. With <samp>helloWorld.cmp</samp> active,
			click the <strong class="ph uicontrol">STYLE</strong> button in the component palette on the right.
			This opens a new tab for the style resource that was added to the <samp>helloWorld</samp> bundle. It starts with a single, empty
			selector, <samp>.THIS</samp>. To see how this works, add a
			simple style to the stylesheet, so that it looks like the following.</p>
<div class="codeblock"><pre>.THIS {
}

p.THIS {
    font-size: 24px;
}</pre></div>
<p class="p">Then reload your preview window for <samp>harnessApp.app</samp>. Voilà,
			larger text! But, how does <samp>.THIS</samp> work? It’s
			the magic of auto-wiring! At runtime <samp>.THIS</samp> is
			replaced with a style scoping string named for your component. It limits style rules to
				<em class="ph i">only</em> this component, so that you can create styles that are specific to the
			component, without worrying about how those styles might affect other components.</p>
<p class="p">So now our <samp>helloWorld</samp> bundle has two resources, the
			component definition, <samp>helloWorld.cmp</samp>, and the
			stylesheet, <samp>helloWorld.css</samp>. You can think of it
			like a folder, or an outline:</p>
<ul class="ul bulletList">
<li class="li"><samp>helloWorld</samp> — the component bundle
			<ul class="ul bulletList">
<li class="li"><samp>helloWorld.cmp</samp> — the component’s definition</li>
<li class="li"><samp>helloWorld.css</samp> — the component’s styles</li>
</ul>
</li>
</ul>
<p class="p">As you can see in the Developer Console, there are a number of other resource types you can add
			to a component bundle. Go ahead and click the <strong class="ph uicontrol">CONTROLLER</strong> and
				<strong class="ph uicontrol">HELPER</strong> items to add those resources to the bundle. Now your
			bundle looks something like this, and you can start to see the naming system.</p>
<ul class="ul bulletList">
<li class="li"><samp>helloWorld</samp> — the component bundle
			<ul class="ul bulletList">
<li class="li"><samp>helloWorld.cmp</samp> — the component’s definition</li>
<li class="li"><samp>helloWorldController.js</samp> — the component’s controller, or main JavaScript file</li>
<li class="li"><samp>helloWorldHelper.js</samp> — the component’s helper, or secondary JavaScript file</li>
<li class="li"><samp>helloWorld.css</samp> — the component’s styles</li>
</ul>
</li>
</ul>
<p class="p">In this module, we’ll work with only these four resource types. We’ll talk a <em class="ph i">lot</em> more about the controller and helper resources when we actually start writing code for them. For now, you can just leave the default implementations. After all, this is just hello world!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_what_is_app" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_what_is_app"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>What Is an App?</span></h2>
<div class="body">
<p class="p">Now that we know what a component is, it’s actually easy to explain what an app is—an app is
			just a special kind of component! For the purposes of this module, you can think of an
			app as being different from a component in only two meaningful ways:</p>
<ul class="ul bulletList">
<li class="li">An app uses <samp>&lt;aura:application&gt;</samp> tags instead of <samp>&lt;aura:component&gt;</samp> tags.</li>
<li class="li">Only an app has a <strong class="ph uicontrol">Preview</strong> button in the Developer
				Console.</li>
</ul>
<p class="p">That’s it!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_apps_for" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_apps_for"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>What Are Apps For?</span></h2>
<div class="body">
<p class="p">As simple as that sounds, there are a few practical details in how you can <em class="ph i">use</em> an app vs. a component. The main items are the following.</p>
<ul class="ul bulletList">
<li class="li">When writing markup, you can add a component to an app, but you <strong class="ph b">can’t</strong> add an app to another app, or an app to a component.</li>
<li class="li">An app has a standalone URL that you can access while testing, and which you can publish to your users. We often refer to these standalone apps as “my.app.”</li>
<li class="li">You can’t add apps to Lightning Experience or Salesforce1—you can only add components. After the last unit this might sound weird; what exactly do you add to the App Launcher, if not an app? What you add to App Launcher is a <em class="ph i">Salesforce</em> app, which wraps up a Lightning component, something defined in a <samp>&lt;aura:component&gt;</samp>. A Lightning Components app—that is, something defined in a <samp>&lt;aura:application&gt;</samp> —can’t be used to create Salesforce apps. A bit weird, but there it is.</li>
</ul>
<p class="p">So, what’s an app good for? Why would you ever use one? We answered that question earlier. You publish functionality built with Lightning Components in <em class="ph i">containers</em>. Lightning Components apps are one kind of container for our Lightning components. </p>
<p class="p">Once again being practical, this usually means that you build all of your “app” functionality inside a top-level component. Then at the end, you stick that one component in a container—maybe a Lightning Components app, maybe Salesforce1, maybe something else. If you use a my.app, the container can set up services for your main component, but otherwise it’s just there to host the component.</p>
<p class="p">Let’s take another look at the app we created. Here again is the <samp>harnessApp.app</samp> definition resource:</p>
<div class="codeblock"><pre>&lt;aura:application&gt;
	  
    &lt;c:helloWorld/&gt;
	    
&lt;/aura:application&gt;</pre></div>
<p class="p">No matter how much functionality we decide we’re going to add to our helloWorld “app”, it’s all
			going to go inside the <samp>helloWorld</samp> component. It
			could have a Quip-style editor embedded in it for revising the hello message, but our
				<samp>harnessApp.app</samp> definition is going to remain
			pretty much this simple.</p>
<p class="p">From here on, we’ll assume that you’re using an actual Lighting Application bundle as just a container, or harness, for components you create. Feel free to keep using <samp>harnessApp.app</samp>! But, when we talk about creating apps, we really mean building functionality inside a component bundle, not an application bundle, because that’s how you build “apps” in the real world.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_contain" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_contain"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Components Containing Components, Containing…Components!</span></h2>
<div class="body">
<p class="p">The <samp>harnessApp.app</samp> definition is also interesting because
			instead of static HTML we have our <samp>helloWorld</samp>
			component. We say that <samp>harnessApp</samp>
<dfn class="term">contains</dfn> the <samp>helloWorld</samp> component.
			Let’s dive into this a little bit, and make <samp>helloWorld</samp> a little more complex.</p>
<p class="p">In the Developer Console, create a new Lightning component named <samp>helloHeading</samp>. For its markup, paste in the following code.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;
    &lt;h1&gt;W E L C O M E&lt;/h1&gt;
&lt;/aura:component&gt;</pre></div>
<p class="p">Now, click back to helloWorld.cmp, and add <samp>&lt;c:helloHeading/&gt;</samp> to it, above the “Hello Lightning” line. Your <samp>helloWorld</samp> component definition should now look like this:</p>
<div class="codeblock"><pre>&lt;aura:component&gt;
	  
    &lt;c:helloHeading/&gt;
	    
    &lt;p&gt;Hello Lightning!&lt;/p&gt;
	    
&lt;/aura:component&gt;</pre></div>
<p class="p">Reload the app to see the change. Your component structure, in terms of what contains what, now looks like this:</p>
<ul class="ul bulletList">
<li class="li"><samp>harnessApp.app</samp><ul class="ul bulletList">
<li class="li"><samp>helloWorld.cmp</samp><ul class="ul bulletList">
<li class="li"><samp>helloHeading.cmp</samp></li>
<li class="li">(static HTML)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="p">We say that <samp>helloHeading</samp> is a <dfn class="term">child component</dfn>
			of <samp>helloWorld</samp>, or that <samp>helloHeading</samp> is nested inside <samp>helloWorld</samp>, or…. There are any number of different ways to say that
				<samp>helloWorld</samp> contains <samp>helloHeading</samp>. What’s more, you can keep nesting components inside other
			components down to pretty much any level you’d care to. It starts being too hard to keep
			straight in your head well before you run into a limitation of Lightning Components!</p>
<p class="p">This process of putting components inside each other is fundamental to building Lightning
			Components apps. You start with, or build, simple, “fine-grained”
			components, where each component provides a defined set of self-contained functionality.
			Then you assemble those components into new components with higher-level functionality.
			And then you use <em class="ph i">those</em> components, and “level up” again.</p>
<p class="p">Let’s talk about that with a metaphor that’s familiar to us outside of the software context.
			Imagine a house. Better yet, let us show you one. <span class="image image-block"><img alt="House animation" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-uscf5c2edd2d49c4cbe50aa13c0c5fcc6b.gif"/></span></p>
<p class="p">When you look at this house, what do you see? If you stop thinking of it as a “house”,
			but as a house <em class="ph i">component</em>, you also start to see the pieces and patterns it’s made
			of.</p>
<p class="p">At the largest scale, this house is composed of three similar structures. Those three
				<em class="ph i">components</em> have similar, but not identical designs. Each can be broken down
			further, into even smaller components, such as windows, which can be broken down into
			individual panes. The arrangement, or <dfn class="term">composition</dfn>, of these smaller
			components defines the differences between the three larger structures.</p>
<p class="p">The three structures are joined together by two smaller, narrow structures/components,
			which can themselves be broken down into smaller, reusable patterns. These connecting
			components bring the three separate structures together into a larger whole: The
			House.</p>
<p class="p">As we did with architecture, so we can do with a web app. Later in this module you’ll take
			fine-grained input components and create a form component with them. Then you’ll take
			that form component and put it into another component, to build up to app-level
			functionality. <span class="image image-block"><img alt="Expenses app composition" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf98bdcc08351f93c6a1767afad5ca20b.gif"/></span></p>
<p class="p">It’s not as pretty to look at as the house, but the principles behind the composition
			process are very similar. Thinking in terms of components, and composition, is a
			fundamental skill you’ll develop throughout this module, and whenever you build apps
			with Lightning Components.</p>
<p class="p">You’ve done a little bit of that here, but before we can really build components that <em class="ph i">do
				something</em>, we need to learn about attributes, types, values, and expressions.
			Before that, though, your first code challenge!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_creat_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_creat_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=code_dev_console.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">“Developer Console”</a> in the Salesforce Help</li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/intro_devconsole.htm" target="_blank" title="HTML (New Window)">Using the Developer
                    Console</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_markup.htm" target="_blank" title="HTML (New Window)">Component
                Markup</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_bundle.htm" target="_blank" title="HTML (New Window)">Component
                Bundles</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_html.htm" target="_blank" title="HTML (New Window)">HTML in
                Components</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Attributes and Expressions</h1><div class="unit-content">
<body id="lex_dev_lc_basics_attr_objectives"><a name="lex_dev_lc_basics_attr_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Define attributes on your components, and pass attribute values into nested
					components.</li>
<li class="li">Understand the difference between a component definition and a component
					instance, and create multiple instances of a component.</li>
<li class="li">Create basic expressions to display changing and calculated values.</li>
<li class="li">Create conditional expressions for dynamic output.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_component" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_component"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Component Attributes</span></h2>
<div class="body">
<p class="p">To this point, while we’ve created a couple of components, and learned a fair bit about building
			apps with them (at a high level), the code we’ve written isn’t doing much more than what
			plain HTML does. That is, the two components we’ve created output the same static text,
			no matter what we do. You could put a dozen of them on the same screen, and they’d
			always say the same thing.</p>
<p class="p">Boring. </p>
<p class="p">To change that, we need to learn two things. First, we need to learn how to enable a component
			to accept input when it’s created. That is, we need to set values on the component. We
			do this using <dfn class="term">attributes</dfn>. </p>
<p class="p">(The second thing we need to learn is how to actually <em class="ph i">use</em> these values to change a
			component’s behavior and output. We’ll do that after we figure out attributes.)</p>
<div class="p">Attributes on components are like instance variables in objects. They’re a way to save values
			that change, and a way to name those value placeholders. For example, let’s say we
			wanted to write a <samp>helloMessage</samp> component that
			prints a custom message. We can envision adding a message attribute to this component to
			customize its output. And then we can set that message when we add the component to our
			app, like the following.
			<div class="codeblock"><pre>&lt;aura:component&gt;
	  
    &lt;c:helloMessage message="You look nice today."/&gt;
	    
&lt;/aura:component&gt;</pre></div>
(You’ll
			want to add this to your org, because we’ll use it a few more times as we go. But if you
			do it now you’ll get an error. Why is that? Because the <samp>helloMessage</samp> component doesn’t exist yet. Lightning components validates
			your code as you write it. If you try to save code that it knows is invalid—for example,
			referencing a non-existent component—you’ll get an error. So, let’s figure out how to
			create <samp>helloMessage</samp> first.)</div>
<p class="p">You can set a component’s attributes when you create it, as we did in the preceding example. You
			can also change them over the course of your component’s lifecycle, in response to
			actions the user takes, or events that happen elsewhere, and so on. And you can of
			course read and use attribute values in a number of different ways. We’ll look at those
			when we get to expressions. </p>
<p class="p">For the moment, let’s look at how you define attributes for a component. An attribute is defined
			using an <samp>&lt;aura:attribute&gt;</samp> tag, which requires
			values for the <samp>name</samp> and <samp>type</samp> attributes, and accepts these optional attributes: <samp>default</samp>, <samp>description</samp>, <samp>required</samp>.</p>
<p class="p">Whoa, that’s a lot of different ways to use “attribute” in a sentence! It’s really easy to get
			confused here, because we have three different concepts with similar names. Let’s be
			specific.</p>
<ol class="ol enumList">
<li class="li">A <dfn class="term">component attribute</dfn> is the place where you can store a value. In the preceding
				example, the <samp>helloMessage</samp> component has a
				component attribute named <samp>message</samp>. Most of the
				time we’re talking about component attributes.</li>
<li class="li">You define a component attribute using the <samp>&lt;aura:attribute&gt;</samp> tag. We’ll see an example of that momentarily.
				Let’s call these <dfn class="term">attribute definitions</dfn>.</li>
<li class="li">The <samp>&lt;aura:attribute&gt;</samp> tag itself takes attributes when
				you use it! 😖 That is, when you define a component attribute using the
					<samp>&lt;aura:attribute&gt;</samp> tag, you set attributes
				on <samp>&lt;aura:attribute&gt;</samp> that specify the “shape”
				of the component attribute you’re defining. 😡 Wait, let’s try again: add a
				component attribute definition by setting attributes on the attribute’s definition.
				😭 A component attribute’s attribute definition takes attributes?
				😴</li>
</ol>
<p class="p">This is why writers 😱. Let’s try to solve this terminology problem with some code.
			😄</p>
<p class="p">Here’s the start of our <samp>helloMessage</samp> component:</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="message" type="String"/&gt;

    &lt;p&gt;Hello! [ message goes here, soon ]&lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
<p class="p">The <samp>helloMessage</samp> component has one component attribute, and
			that attribute is defined by setting the <samp>name</samp> and
				<samp>type</samp> of the attribute. The name of the
			attribute is <samp>message</samp> and, once we learn about
			expressions, that’s how you’ll reference it. It still only outputs static text and HTML,
			but we’re inching closer to something useful.</p>
<p class="p">👍 ?</p>
<p class="p">The other attribute we’ve used here is <samp>type</samp>, and we’ve set
			it because it’s required in an attribute definition. It says that the <samp>message</samp> attribute contains a string, which makes sense.
			We’ll talk more about attribute data types, and the other parts of attribute
			definitions, but first let’s learn about expressions, and make <samp>helloMessage</samp> actually do something.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_expressions" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_expressions"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Expressions</span></h2>
<div class="body">
<p class="p">Instead of getting lost in words again, let’s dive right into making <samp>helloMessage</samp> work as intended.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="message" type="String"/&gt;

    &lt;p&gt;Hello! {!v.message}&lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
<p class="p">Is that anticlimactic or what?</p>
<p class="p">We’re outputting the contents of <samp>message</samp> using the expression <samp>{!v.message}</samp>. That is, this expression references the <samp>message</samp> attribute. The expression is evaluated, and resolves to the text string that’s currently stored in <samp>message</samp>. And that’s what the expression outputs into the body of the component.</p>
<p class="p">Ummm…what the heck is an “expression”?</p>
<p class="p">An <dfn class="term">expression</dfn> is basically a formula, or a calculation, which you place within
				<dfn class="term">expression delimiters</dfn> (“<samp>{!</samp>” and
				“<samp>}</samp>”). So, expressions look like the
			following:</p>
<p class="p"><samp>{!<em class="ph i">&lt;expression&gt;</em>}</samp></p>
<p class="p">The formal definition of an expression is a bit intimidating, but let’s look at and then unpack it: <em class="ph i">An expression is any set of literal values, variables, sub-expressions, or operators that can be resolved to a single value.</em></p>
<p class="p">Yep, basically a formula, much like you’d write in a calculation field, filter criteria, or
			Visualforce. The formula, or expression, can contain a variety of things. Literal values
			should be obvious; they’re things like the number <samp>42</samp>, or the string “<samp>Hello</samp>”. Variables
			are things like the <samp>message</samp> attribute. Operators
			are things like <samp>+</samp>, <samp>-</samp>, and so on, and sub-expressions basically means you can use parenthesis
			to group things together.</p>
<p class="p">Let’s try this out, by making our expression slightly more complex.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="message" type="String"/&gt;

    &lt;p&gt;{!'Hello! ' + v.message}&lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
<p class="p">All we’ve done is move the “Hello” part from static text outside the expression to literal text inside the expression. Notice that we’ve used the “+” operator to concatenate the two strings together. This might seem like a pretty small difference, but moving the greeting text inside the expression lets you use labels, instead of literal text, which makes it easier to update (and translate) your components. For example:</p>
<div class="codeblock"><pre>{!$Label.c.Greeting + v.message}</pre></div>
<p class="p">Did you notice what our formal definition of expressions left out? JavaScript function calls.
			You can’t use JavaScript in expressions in Lightning Components markup.</p>
<p class="p">One last thing about expressions before we move on. You don’t normally use a plain expression to output its result. Instead, you assign expressions to attributes of components, and let the component do the outputting. This gives us an opportunity to start looking at some of the built-in components provided with Lightning Components. Here’s another version of our <samp>helloMessage</samp> component that uses <samp>&lt;ui:outputText&gt;</samp> to render our greeting.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="message" type="String"/&gt;

    &lt;p&gt;&lt;ui:outputText value="{!'Hello! ' + v.message}"/&gt;&lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
<p class="p">Using <samp>&lt;ui:outputText&gt;</samp> has a few advantages over a bare expression. For one, the output value is escaped, making it safe for displaying user input, etc. For another, the output text is automatically wrapped in a <samp>&lt;span&gt;</samp> tag, and you can attach a CSS class to that span, by setting the <samp>class</samp> attribute. <samp>&lt;ui:outputText&gt;</samp> is simple, but useful. We’ll introduce more of these built-in components in our examples as we go.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_value_providers" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_value_providers"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Value Providers</span></h2>
<div class="body">
<p class="p">Actually, we need to talk about another aspect of expressions. In the preceding examples, we’ve referenced the <samp>helloMessage</samp> component’s message attribute with <samp>v.message</samp>. What’s the “<samp>v.</samp>” part?</p>
<p class="p"><samp>v</samp> is something called a <dfn class="term">value provider</dfn>. Value
			providers are a way to group, encapsulate, and access related data. Value providers are
			a complicated topic, so for now, think of <samp>v</samp> as an
			automatic variable that’s made available for you to use. In our component, <samp>v</samp> is a value provider for the <dfn class="term">view</dfn>, which
			is the <samp>helloMessage</samp> component itself.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="v is the value provider for the view component, which is the helloMessage component" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us8acacc10e8e69465ed7ba29e9efc9cb9.png"/></span></div></p>
<p class="p"><samp>v</samp> gives you a “hook” to access the component’s <samp>message</samp> attribute, and it’s how you access <em class="ph i">all</em> of a component’s attributes.</p>
<p class="p">Values in a value provider are accessed as named properties. To use a value, separate the value provider and the property name with a dot (period). For example, <samp>v.message</samp>, as we’ve seen.</p>
<p class="p">When an attribute of a component is an object or other structured data (that is, not a primitive value), access the values on that attribute using the same dot notation. For example, <samp>{!v.account.Id}</samp> accesses the Id field of an account record. For deeply nested objects and attributes, continue adding dots to traverse the structure and access the nested values.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_data_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_data_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Attribute Data Types</span></h2>
<div class="body">
<p class="p">Accessing structured data is a nice segue back to talking about attributes, and specifically about non-primitive attribute types. <samp>message</samp> is a string, but there are a number of different attribute types.</p>
<ul class="ul bulletList">
<li class="li">Primitives data types, such as Boolean, Date, DateTime, Decimal, Double, Integer, Long, or String. The usual suspects in any programming language.</li>
<li class="li">Standard and custom Salesforce objects, such as Account or MyCustomObject__c.</li>
<li class="li">Collections, such as List, Map, and Set.</li>
<li class="li">Custom Apex classes.</li>
<li class="li">Framework-specific types, such as Aura.Component, or Aura.Component[]. These are more advanced than we’ll get to in this module, but you should know they exist.</li>
</ul>
<p class="p">Here’s a stripped down look at the <samp>expenseItem</samp>
            component, which we’ll fill in later. It illustrates how you define an attribute
            for a custom object, and how to access fields on a record.</p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="expense" type="Expense__c"/&gt;

    &lt;p&gt;Amount:
        &lt;ui:outputCurrency value="{!v.expense.Amount__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Client:
        &lt;ui:outputText value="{!v.expense.Client__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Date:
        &lt;ui:outputDate value="{!v.expense.Date__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Reimbursed?:
        &lt;ui:outputCheckbox value="{!v.expense.Reimbursed__c}"/&gt;
    &lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
<p class="p">This component has one attribute, <samp>expense</samp>, which is the
            custom object we created waaaay back at the start of this module. The component’s
            purpose is to display the details of an expense, and so we see it uses a number of
            different output components. Each of them outputs a single field from an Expense__c
            record, by referencing the field in an expression, <samp>{!v.expense.<var class="keyword varname">fieldName</var>}</samp>.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_other" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_other"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Other Aspects of Attribute Definitions</span></h2>
<div class="body">
<p class="p">When it comes to the attributes you set on the <samp>&lt;aura:attribute&gt;</samp> tag, here’s the rest of what you need to know.</p>
<ul class="ul bulletList">
<li class="li">The <samp>default</samp> attribute defines the default attribute value. It’s used when the attribute is referenced and you haven’t yet set the attribute’s value.</li>
<li class="li">The <samp>required</samp> attribute defines whether the attribute is required. The default is <samp>false</samp>.</li>
<li class="li">The <samp>description</samp> attribute defines a brief summary of the attribute and its usage. </li>
</ul>
<p class="p">Setting the default value for an attribute with a complex data type can be kind of tricky. We’ll see an example later, though, so for now we’ll just give you the heads up.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_fun" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_fun"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Fun with Attributes and Expressions</span></h2>
<div class="body">
<p class="p">To illustrate a few more concepts about attributes and expressions, let’s create a really silly component, <samp>helloPlayground</samp>, with the following markup. </p>
<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="messages" type="List"
        default="['You look nice today.',
            'Great weather we\'re having.',
            'How are you?']"/&gt;


    &lt;h1&gt;Hello Playground&lt;/h1&gt;

    &lt;p&gt;Silly fun with attributes and expressions.&lt;/p&gt;


    &lt;h2&gt;List Items&lt;/h2&gt;

    &lt;p&gt;&lt;c:helloMessage message="{!v.messages[0]}"/&gt;&lt;/p&gt;
    &lt;p&gt;&lt;c:helloMessage message="{!v.messages[1]}"/&gt;&lt;/p&gt;
    &lt;p&gt;&lt;c:helloMessage message="{!v.messages[2]}"/&gt;&lt;/p&gt;


    &lt;h2&gt;List Iteration&lt;/h2&gt;

    &lt;aura:iteration items="{!v.messages}" var="msg"&gt;
        &lt;p&gt;&lt;c:helloMessage message="{!msg}"/&gt;&lt;/p&gt;
    &lt;/aura:iteration&gt;


    &lt;h2&gt;Conditional Expressions and Global Value Providers&lt;/h2&gt;

    &lt;aura:if isTrue="{!$Browser.isIPhone}"&gt;
        &lt;p&gt;&lt;c:helloMessage message="{!v.messages[0]}"/&gt;&lt;/p&gt;
    &lt;aura:set attribute="else"&gt;
        &lt;p&gt;&lt;c:helloMessage message="{!v.messages[1]}"/&gt;&lt;/p&gt;
        &lt;/aura:set&gt;
    &lt;/aura:if&gt;

&lt;/aura:component&gt;
</pre></div>
<p class="p">Now add the <samp>helloPlayground</samp> component to your harness app, and see how it runs!</p>
<p class="p">There’s a number of new things here. We won’t go into depth on them right now, but you’ll see all of these again.</p>
<p class="p">First, <samp>helloPlayground</samp> has one attribute, <samp>messages</samp>, that’s a complex data type, List. And
            it has a default value for that list, an array of three single-quoted strings separated
            by commas. And, in the List Items section, you can see how to access each of the strings
            using an index. </p>
<p class="p">What happens if someone creates a <samp>&lt;c:helloPlayground&gt;</samp> with only two messages? Accessing the third item will fail, and while it won’t cause a crash here, with more complex components it might.</p>
<p class="p">So, in the List Iteration section, you can see a better way to work through all items in the list. The <samp>&lt;aura:iteration&gt;</samp> component repeats its body once per item in its <samp>items</samp> attribute, so the list shrinks or grows as we have fewer or more messages. </p>
<p class="p">In the Conditional Expressions and Global Value Providers section, you can see a way to choose between two different possible outputs. The format is a bit awkward, because this is markup rather than, say, JavaScript, but the <samp>&lt;aura:if&gt;</samp> component lets you, for example, add an edit button to a page only if the user has edit privileges on the object.</p>
<p class="p">Finally, something that is a little less obvious. In object-oriented programming,
            there’s a difference between a <em class="ph i">class</em> and an <em class="ph i">instance</em> of that class.
            Components have a similar concept. When you create a .cmp resource, you are providing
            the <em class="ph i">definition</em> (class) of that component. When you put a component tag in a .cmp,
            you are creating a <em class="ph i">reference</em> to (instance of) that component.</p>
<p class="p">It shouldn't be surprising that we can add multiple instances of the same component with different attributes. In the preceding example, when you use the default value for messages, you’ll end up with eight references to (instances of) our <samp>&lt;c:helloMessage&gt;</samp> component. If you pass in a longer list, you could end up with (many) more. All from our one little component!</p>
<p class="p">And with that, friend, we think you’re ready for some real work.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_attr_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_attr_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_attributes.htm" target="_blank" title="HTML (New Window)">Component
                    Attributes</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_aura_attribute.htm" target="_blank" title="HTML (New Window)">Supported aura:attribute
                    Types</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_attr_types_basic.htm" target="_blank" title="HTML (New Window)">Basic Types</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_attr_types_object_salesforce.htm" target="_blank" title="HTML (New Window)">Standard and Custom Object
                    Types</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/expr_overview.htm" target="_blank" title="HTML (New Window)">Using
                Expressions</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/expr_source.htm" target="_blank" title="HTML (New Window)">Value
                Providers</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/expr_eval.htm" target="_blank" title="HTML (New Window)">Expression
                    Evaluation</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/expr_operators.htm" target="_blank" title="HTML (New Window)">Expression Operators
                    Reference</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/expr_functions.htm" target="_blank" title="HTML (New Window)">Expression Functions
                    Reference</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Handle Actions with Controllers</h1><div class="unit-content">
<body id="lex_dev_lc_basics_ctlrs_objectives"><a name="lex_dev_lc_basics_ctlrs_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Create a client-side controller to handle user actions.</li>
<li class="li">Read values from component attributes.</li>
<li class="li">Read values from user interface controls in your component.</li>
<li class="li">Write controller code in JavaScript that changes the user interface.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_handling" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_handling"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Handling Actions with Controllers</span></h2>
<div class="body">
<p class="p">Up to now, we’ve worked only with XML-style markup. Up to now, the only way to have our component’s output change was to change that markup. Up to now, our components didn’t react to user input. Up to now, we haven’t written any JavaScript.</p>
<p class="p">That all changes in this unit.</p>
<p class="p">To get started, let’s look at a very simple component, and imagine what it needs to do to be able to handle its simple behavior.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Message of the day: You look nice today button, Today is going to be a great day button" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa744edbd7edb9e682ed35c8da0d0b479.png"/></span></div></p>
<p class="p">This is <samp>helloMessageInteractive</samp>, and it’s hard to imagine a simpler component that “does something.” It’s a bit of static text, a (currently blank) message, and two buttons. Here’s the code:</p>
<div class="codeblock"><pre>
&lt;aura:component&gt;
 
    &lt;aura:attribute name="message" type="String"/&gt;
 
    &lt;p&gt;Message of the day: &lt;ui:outputText value="{!v.message}"/&gt;&lt;/p&gt;
 
    &lt;div&gt;
        &lt;ui:button label="You look nice today."
            press="{!c.handleClick}"/&gt;
 
        &lt;ui:button label="Today is going to be a great day!"
            press="{!c.handleClick}"/&gt;
    &lt;/div&gt;
 
&lt;/aura:component&gt;
</pre></div>
<p class="p">This should look familiar. All we’ve really done is added two <samp>&lt;ui:button&gt;</samp> components to <samp>helloMessage</samp>. When you click a button, the message of the day is
            updated.</p>
<p class="p">Well, not quite yet. If you’ve already entered the code and tried it yourself, you’ve noticed that when you click either of the buttons you get an error message. </p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="There is a problem" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us92a30758a10068bcadb18e0041661979.png"/></span></div></p>
<p class="p">We’ll be the first to admit that not every error message you’ll see in Lightning Components is as helpful as you might hope. But this one is! It says that there’s no controller action named “handleClick”. Where does “handleClick” come from? It comes from the expression we assigned to the <samp>press</samp> attribute on each of the two <samp>&lt;ui:button&gt;</samp> tags:</p>
<div class="codeblock"><pre>
press="{!c.handleClick}"
</pre></div>
<p class="p">Given that this is a button, you can probably guess that the <samp>press</samp> attribute is how you assign a behavior to the button for when it’s clicked. But what have we assigned? An expression, <samp>{!c.handleClick}</samp>, that’s maybe a bit mysterious. </p>
<p class="p">It’s actually pretty simple. Just like the <samp>v.message</samp>
            expression from earlier, <samp>c.handleClick</samp> is a value
            provider, <samp>c</samp>, with a property, <samp>handleClick</samp>. <samp>c</samp>
            is the value provider for the component’s client-side controller, and <samp>handleClick</samp> is a function defined in that controller.
            So, <samp>{!c.handleClick}</samp> is a reference to an action
            handler in the component’s controller.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="c.handleClick: c is a value provider for the component controller, with the property handleClick, a function defined in that controller" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us69189905913cd2425d050a29819f2a71.png" width="800"/></span></div></p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_what_is" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_what_is"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Uh, What’s a Controller?</span></h2>
<div class="body">
<p class="p">Whoops! A <dfn class="term">controller</dfn> is basically a collection of code that defines your app’s
            behavior when “things happen,” whereby “things” we mean user input, timer and other
            events, data updates, and so on. If you look up “Model-View-Controller” on any number of
            developer sites, you’ll get various definitions. For our purposes, for Lightning
            Components, a controller is a resource in a component bundle that holds the action
            handlers for that component. And action handlers are just JavaScript functions with a
            particular function signature.</p>
<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>
<p class="p">We talk a lot about controllers in this unit, and we know that the component itself
                is a view. We even mentioned the MVC, or Model-View-Controller, design pattern
                that’s so common in web app frameworks. Is Lightning Components built on the MVC
                pattern?</p>
<p class="p">In a word, no. There are similarities, to be sure, but it would be more correct to
                say that Lightning Components is View-Controller-Controller-Model, or perhaps
                View-Controller-Controller-Database.</p>
<p class="p">Why is “controller” doubled up in that pattern name? Because when interacting with
                Salesforce, your components will have a <em class="ph i">server-side</em> controller in addition to
                the <em class="ph i">client-side</em> controller we’ve worked with in this unit. This dual
                controller design is the key difference between Lightning Components and MVC.</p>
<p class="p">What’s the distinction between “model” and “database”? In traditional MVC, the model
                is a programmatic abstraction between the underlying data storage (usually a
                relational database) and the rest of the application. In Lightning Components,
                there’s no Apex class that directly stands in between <samp>@AuraEnabled</samp> controller methods and DML operations. But then again,
                sObjects are already an abstraction between your Apex code and the underlying
                storage layer. You can add calculation fields, validation logic, and even add fully
                programmatic behavior in the form of triggers. So, is it a database or a model? We
                say po-TAY-tow but it’s totally cool if you want to go with po-TAH-tow.</p>
<p class="p">Confused? Excited? We’ll get you sorted out on the details of server-side controllers
                in a later unit.</p>
</p></div></div></div></div></div>
<p class="p">Let’s look at the <samp>helloMessageInteractive</samp> controller in more
            detail, and make that explanation a bit more concrete.</p>
<div class="codeblock"><pre>({
    handleClick: function(component, event, helper) {
        var btnClicked = event.getSource();         // the button
        var btnMessage = btnClicked.get("v.label"); // the button's label
        component.set("v.message", btnMessage);     // update our message
    }
})</pre></div>
<p class="p">Controller resources have an interesting format. They are JavaScript objects that contain a map
            of name-value pairs, where the name is the name of the action handler and the value is a
            function definition.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_action" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_action"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Action Handlers</span></h2>
<div class="body">
<p class="p">The combination of name-value pair and specific function signature is an <dfn class="term">action
                handler</dfn>. You’ll hear or see the terms <dfn class="term">action handler</dfn>,
                <dfn class="term">controller action</dfn>, and <dfn class="term">controller function</dfn> used
            interchangeably, and for the most part that’s correct. They almost always refer to the
            same thing. (We’re not going to worry about the exceptions in this module.)</p>
<p class="p">Don’t worry too much about the special format of the controller resource. When you click
            the <strong class="ph b">CONTROLLER</strong> button in the Developer Console, you’ll get a controller
            resource with an example action handler already added. The one trick is—and you
            will get syntax errors if you forget—you need to put commas between action
            handlers. This is just basic JavaScript syntax, and we’ll see the specifics in a
            bit.</p>
<p class="p">The actual <samp>handleClick</samp> function is only four lines of code, but they might seem hard to understand at first. At a high level, it’s simple: When the button is clicked, its action handler gets called (1). In the action handler, the controller gets the button that was clicked, pulls the label text out of it, and then sets the component’s <samp>message</samp> attribute to that text (2). And the message of the day is updated (3). <em class="ph i">You look nice today!</em></p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="In the action handler, the controller gets the clicked button text, then sets the component message attribute" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4ada8c62cf7f3428670f64d5c548e2ed.png" width="800"/></span></div></p>
<p class="p">Simple, right? Well… </p>
<p class="p">Because this is super important, let’s break it down line-by-line.</p>
<div class="codeblock"><pre>
handleClick: function(component, event, helper) {
</pre></div>
<p class="p">The action handler name, followed by an anonymous function declaration. The important thing here is the function signature. While it’s not technically required, you should <em class="ph i">always</em> declare your controller functions to take these three parameters. We’ll talk more about them as we go, but for now, these parameters represent:</p>
<ul class="ul bulletList">
<li class="li"><samp>component</samp>—the component. In this case, it’s <samp>helloMessageInteractive</samp>.</li>
<li class="li"><samp>event</samp>—the event that caused the action handler to be called.</li>
<li class="li"><samp>helper</samp>—the component’s helper, another JavaScript resource of reusable functions.</li>
</ul>
<div class="codeblock"><pre>
    var btnClicked = event.getSource();         // the button
</pre></div>
<p class="p">Remember that <samp>handleClick</samp> is connected to our <samp>&lt;ui:button&gt;</samp> tag and its <samp>press</samp> attribute. The <samp>event</samp>, then, is someone clicking (<strong class="ph b">press</strong>ing) the button. Inside that
            event it has the notion of a <dfn class="term">source</dfn>, which is the button itself. So,
            calling <samp>event.getSource()</samp> gets us a reference
            to the specific <samp>&lt;ui:button&gt;</samp> that was
            clicked.</p>
<div class="codeblock"><pre>
    var btnMessage = btnClicked.get("v.label"); // the button's label
</pre></div>
<p class="p">What do we do now that we have a reference to the button? We look inside it and get its label,
            which is set on the <samp>&lt;ui:button&gt;</samp> in the component
            markup. For example, <samp>&lt;ui:button label="You look nice
                today." … &gt;</samp>.</p>
<p class="p">Let’s think about that a bit more. We don’t have the definition of <samp>&lt;ui:button&gt;</samp> in front of us, but <samp>label</samp> is just another attribute, much like the <samp>message</samp> attribute we added to <samp>helloMessageInteractive</samp>. You can call <samp>get()</samp> on any component and provide the name of the
            attribute you want to retrieve, in the format <samp>v.<em class="ph i">attributeName</em></samp>. The result is the attribute value. </p>
<p class="p">Note that, as in component markup, <samp>v</samp> represents the
            view, the component itself—but in this case, it’s the <samp>&lt;ui:button&gt;</samp> child component, not <samp>helloMessageInteractive</samp>! Think of it this way. <samp>btnClicked.get("v.label")</samp> taps on the shoulder of
            whatever component <samp>btnClicked</samp> is and says “Hey,
            give me v.label”. That component thinks “v is me,” looks inside itself, and returns the
            value of its label attribute. </p>
<p class="p">So now that we have a text string retrieved from the button, we just have one step left:
            to change our <samp>message</samp> attribute to the new message
            text. Unsurprisingly, just as <samp>get()</samp>
<em class="ph i">reads</em> a value from a component, <samp>set()</samp>
<em class="ph i">writes</em> a value.</p>
<div class="codeblock"><pre>
    component.set("v.message", btnMessage);     // update our message
</pre></div>
<p class="p">However, let’s notice one important difference. We called <samp>get()</samp> on <samp>btnClicked</samp>, the <samp>&lt;ui:button&gt;</samp> that’s inside <samp>helloMessageInteractive</samp>. We’re calling <samp>set()</samp> on <samp>component</samp>—the <samp>helloMessageInteractive</samp> component itself. This is a pattern you’ll repeat
            in virtually every component you create: get values from child components, maybe do some
            processing, and set values in the component itself.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_prog_model" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_prog_model"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>The Lightning Components View-Controller Programming Model</span></h2>
<div class="body">
<p class="p">OK, gut check time. Is this making sense? For sure? If you just <em class="ph i">think so</em>, make sure you’ve
      actually created the <samp>helloMessageInteractive</samp> component
      using the preceding code. It’s one component, and copy/pasting the code takes two minutes, but
      being able to play with it is essential for understanding handling actions.</p>
<p class="p">What you’ve done here might seem very simple, because it’s not very many lines of code. But these lines of code illustrate some of the fundamental concepts of building apps with Lightning Components.</p>
<p class="p">You can think of hooking up components to action handlers as “wiring them up.” Think of <samp>helloMessageInteractive</samp> as a simple electrical circuit. There
      are switches, and there are light bulbs. (The Lightning Components framework supplies the
      power.) By itself, a switch might make a nice clicking sound, but until you wire it up, it’s
      not very functional. You can have the trendiest Edison-style light bulb, but until you wire it
      up, it doesn’t illuminate anything.</p>
<p class="p">And so it is with Lightning Components. Way back ago, we said that the different resources in a
      component bundle are “auto-wired” to each other. And that’s true: the wiring takes the form of
      the <samp>v</samp> and <samp>c</samp>
      value providers. They’re automatically created and made available within your components, so
      your controller can reference the component and vice versa. But this auto-wiring takes place
      only at a high level—in <samp>helloMessageInteractive</samp>,
      between the component .cmp resource and the controller .js resource. This is the green arrow
      in the following illustration.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="helloMessageInteractive and its controller are auto-wired" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usaf66eee31ab47e41e7da4b3fdc4747b5.png" width="800"/></span></div></p>
<p class="p">The wiring to hook up a specific <samp>&lt;ui:button&gt;</samp> component to
      a specific action handler—that is, wiring things that <em class="ph i">generate</em> events, such as buttons,
      to the things that <em class="ph i">handle</em> events, like a specific controller function—that’s wiring you
      need to do yourself. Which, in fact, you just <strong class="ph b">did</strong> yourself! These are the red arrows
      needed to complete a working circuit.</p>
<p class="p">Adding <samp>{!c.handleClick}</samp> to the <samp>press</samp> attribute of a <samp>&lt;ui:button&gt;</samp> component (1) wires it up to the specific action handler.
      Calling <samp>component.set("v.message", newMessage)</samp>
      (2) wires up the result of that action handler to the component’s <samp>message</samp> attribute. Which is itself wired up to a <samp>&lt;ui:outputText&gt;</samp> component for actual display, by
      referencing the <samp>message</samp> attribute in its value:
        <samp>&lt;ui:outputText value="{!v.message}"/&gt;</samp>. </p>
<p class="p">You can further think of the <samp>press</samp> event as an electron flowing along the circuit you’ve created. If you haven’t created a complete circuit, the event doesn’t go anywhere, and nothing happens. When you start writing your own components, keep this in mind. Do you have a complete circuit? Are you sure? When in doubt, it sometimes helps to sketch it all on a whiteboard or paper, and confirm every connection.</p>
<p class="p">You’ll wire together components, events, and handlers, at low and high levels, so often you’ll feel like an electrician. (Or, given the name of the framework, maybe Ben Franklin.) Wiring things together is <em class="ph i">the</em> fundamental programming model in Lightning Components.</p>
<p class="p">So, let’s do it some more. After all, practice makes perfect.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_function" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_function"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Function Chaining, Rewiring, and Simple Debugging</span></h2>
<div class="body">
<p class="p">Our first version of <samp>handleClick</samp> was three lines of
            code, because we broke each step in the get-process-set pattern into separate lines. You
            can use something called <dfn class="term">function chaining</dfn> to collapse those into fewer
            lines. Since you’ll probably see this in other Lightning Components code, let’s give it
            a whirl ourselves. Add the following additional code to your <samp>helloMessageInteractive</samp> controller, after <samp>handleClick</samp>.</p>
<div class="codeblock"><pre>
    handleClick2: function(component, event, helper) {
        var newMessage = event.getSource().get("v.label");
        component.set("v.message", newMessage);
    },

    handleClick3: function(component, event, helper) {
        component.set("v.message", event.getSource().get("v.label"));
    }
</pre></div>
<p class="p">Whoopsie! Did you just get a syntax error when trying to save? Remember earlier when we said you need to add commas between your action handlers? That’s the issue here. Add a comma after the final brace (“<samp>}</samp>”) of <samp>handleClick</samp>, as you can see at the end of <samp>handleClick2</samp> in the preceding snippet.</p>
<p class="p">These action handlers do exactly the same thing as handleClick, in fewer lines of code. They do this by skipping intermediate variables, often by “chaining” directly to the next function call, by adding that call to the end of the previous one, separated by a period. (This concept is most clear when looking at the differences between <samp>handleClick</samp> and <samp>handleClick2</samp>.)</p>
<p class="p">Which style you prefer is a matter of personal taste, and perhaps your organization’s coding style. Your humble author prefers <samp>handleClick2</samp>, separating the <samp>get</samp> and <samp>set</samp>, but not bothering with a variable for the button, which we only need for its label text.</p>
<p class="p">Of course, you can’t verify that the new action handlers work until you wire a <samp>&lt;ui:button&gt;</samp> to use one of them, by setting the
                <samp>press</samp> attribute to <samp>{!c.handleClick2}</samp> or <samp>{!c.handleClick3}</samp>. Think of this as disconnecting
            the wires from one light bulb, and then attaching them to a different light bulb. It’s
            that easy!</p>
<p class="p">At that point, you reload the app, click one of the rewired buttons, and…well, it’s the same by
            design, isn’t it? How can we even tell which action handler is being called?</p>
<p class="p">Sometimes simple is best. Let’s add a bit of logging to one of the action handler functions:</p>
<div class="codeblock"><pre>
    handleClick2: function(component, event, helper) {
        var newMessage = event.getSource().get("v.label");
        console.log("handleClick2: Message: " + newMessage);
        component.set("v.message", newMessage);
    },
</pre></div>
<p class="p">Now if you wire up a <samp>&lt;ui:button&gt;</samp> to <samp>handleClick2</samp>, you’ll see a log message in your
            browser’s JavaScript console whenever you click it.</p>
<p class="p">Yes, there are more sophisticated debugging tools, but printing things to the console is a
            time-honored debugging technique. If you want to output an object of some sort, wrap it
            with <samp>JSON.stringify(<var class="keyword varname">yourObject</var>)</samp> to get even more useful
            details. When you’re after a quick peek, <samp>console.log()</samp> is your friend. </p>
<p class="p">We won’t cover those more sophisticated debugging tools and techniques here, but see Resources for some great tools and instructions.</p>
<p class="p">OK, <samp>helloMessageInteractive</samp> was stupid simple and has a hard-coded (and relentlessly positive) attitude. In the next unit, we’ll work with something more complex, and learn how to capture real user input. And since people in the real world aren’t always so positive, we’ll learn how to validate their input, too.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_ctlrs_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_ctlrs_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_overview.htm" target="_blank" title="HTML (New Window)">Working with UI
               Components</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_input.htm" target="_blank" title="HTML (New Window)">Using the UI
            Components</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_button.htm" target="_blank" title="HTML (New Window)">Buttons</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_text.htm" target="_blank" title="HTML (New Window)">Text Fields</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_and_actions.htm" target="_blank" title="HTML (New Window)">Actions and Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_client_side_controller.htm" target="_blank" title="HTML (New Window)">Handling Events with
               Client-Side Controllers</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_which_button_pressed.htm" target="_blank" title="HTML (New Window)">Which Button Was
               Pressed?</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_debug_mode.htm" target="_blank" title="HTML (New Window)">Enable Debug Mode for Lightning
               Components</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Input Data Using Forms</h1><div class="unit-content">
<body id="lex_dev_lc_basics_forms_objectives"><a name="lex_dev_lc_basics_forms_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Create a form to display current values and accept new user input.</li>
<li class="li">Read values from form elements.</li>
<li class="li">Validate user input and display error messages for invalid input.</li>
<li class="li">Refactor code from a component’s controller to its helper.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_input_data" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_input_data"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Input Data Using Forms</span></h2>
<div class="body">
<p class="p">As of this unit, we’re done with <samp>helloWhatever</samp>-style components. From here, we’ll be creating and assembling the expenses tracker mini-app that we previewed earlier. We’ll spend the majority of this unit building and understanding the form that lets you create a new expense.</p>
</div>
</div>
<div class="topic concept nested0" id="lex_dev_lc_basics_forms_app_container" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_app_container"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>The <span class="titlecodeph">expenses</span> App
  Container</span></h2>
<div class="body conbody">
<p class="p">But before we get started with that, let’s also be done with creating plain, or downright ugly,
   components. The first thing we’ll do, then, is pull in the Salesforce Lightning Design System, or
   SLDS, and “activate” it in our app. The way we’ll do this lets us talk a little more about app
   containers.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>We’re not actually going to discuss SLDS itself in this unit, or anywhere in the rest of the
   module. We’re going to focus here on getting it added to an app, and then within our example code
   we’ll use the SLDS classes, but not explain them in detail. See Resources for <em class="ph i">lots</em> of
   different ways to learn more about SLDS.</p></div></div></div></div></div>
<p class="p">Today, SLDS is automatically available to your components when they run inside Lightning
   Experience or Salesforce1. We sometimes call this running in <dfn class="term">the one.app container</dfn>.
   This built-in version is the same that’s used by many of the standard Lightning components.
   However, SLDS is <em class="ph i">not</em> available by default in a stand-alone app, or when you use your
   components in Lightning Out or Lightning Components for Visualforce. These are different
    <dfn class="term">app containers</dfn>, and they provide different services and resources. We’d like to
   create our expense app in such a way that it works and looks good in all of these contexts. And
   fortunately it’s not actually that hard to do.</p>
<p class="p">The way we’ll do it is by adding SLDS to our harness application. Then, inside the “real”
   expenses app (really, the top-level component, and all its child components), we can use SLDS
   tools and techniques, without worrying about where the SLDS resources—style sheets, icons, and so
   on—come from. That is to say, our app container (the harness app) sets up resources inside its
   context so that any app running <em class="ph i">inside</em> that container has the resources it needs.</p>
<p class="p">Let’s convert those wordy concepts to some code. Create a new
    <span class="ph filepath">expensesApp.app</span> Lightning application with the following markup.</p>
<div class="codeblock"><pre>&lt;aura:application extends="force:slds"&gt;
       
        &lt;!-- This component is the real "app" --&gt;
        &lt;!-- c:expenses/ --&gt;

&lt;/aura:application&gt;</pre></div>
<p class="p">Here’s what’s going on. The <samp>extends="force:slds"</samp> attribute
   activates SLDS in this app, by including the same Lightning Design System styles provided by
   Lightning Experience and Salesforce1. But note that this harness app is just a wrapper, a shell.
   The <em class="ph i">real</em> app is the <samp>expenses</samp> component, which we
   haven’t created. (That’s the <samp>&lt;!-- c:expenses/ --&gt;</samp>
   part; it’s commented out because we can’t save our app until the <samp>expenses</samp> component actually exists.)</p>
<p class="p">By way of the wrapper app, our components use the <samp>extends="force:slds"</samp> mechanism to get access to SLDS <em class="ph i">when they run from this
    application</em>. When they run inside Lightning Experience or Salesforce1, with no code changes,
   they use that container’s automatic inclusion of SLDS.</p>
<p class="p">In this case, that amounts to the same thing. But this concept of using the outer harness app
   to set up a context so that the real app doesn’t need to worry about context differences isn’t
   limited to style resources. You can use this to provide replacement event handlers, for
   example…although that’s getting ahead of ourselves. Let’s learn to walk before we try to fly!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_app_component" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_app_component"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>The <span class="titlecodeph">expenses</span> App Component</span></h2>
<div class="body">
<p class="p">The next step is to create the component that’s the top level for our expenses app. (Remember, even though we call it an “app,” it’s really just another Lightning component.) In the Developer Console, create a new Lightning component named “expenses”, and replace the default markup with the following.</p>
<div class="codeblock"><pre>
&lt;aura:component&gt;

    &lt;!-- PAGE HEADER --&gt;
    &lt;div class="slds-page-header" role="banner"&gt;
      &lt;div class="slds-grid"&gt;
        &lt;div class="slds-col"&gt;
          &lt;p class="slds-text-heading--label"&gt;Expenses&lt;/p&gt;
          &lt;h1 class="slds-text-heading--medium"&gt;My Expenses&lt;/h1&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- / PAGE HEADER --&gt;

    &lt;!-- NEW EXPENSE FORM --&gt;
    &lt;div class="slds-col slds-col--padded slds-p-top--large"&gt;


        &lt;!-- [[ expense form goes here ]] --&gt;


    &lt;/div&gt;
    &lt;!-- / NEW EXPENSE FORM --&gt;

&lt;/aura:component&gt;
</pre></div>
<p class="p">Now you can uncomment the <samp>&lt;c:expenses/&gt;</samp> tag in the actual .app, and open the preview of what is for now just an empty shell. You should see something like the following.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Basic My Expenses form" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us56b1260103ed9182d9cb8531390505b9.png"/></span></div></p>
<p class="p">Not a lot going on yet, but it’s kind of exciting to see the SLDS styling already having an effect. Remember that we’re not going to explain most of the SLDS markup, but we’ll include comments in the markup. You can see how we created the header for the app, and start to get the idea.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_new_expense" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_new_expense"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>The New Expense Form</span></h2>
<div class="body">
<p class="p">Before we start on the form, let’s just acknowledge something upfront: What we’re about to do is temporary. Remember all that talk talk talk about decomposing your app down into separate, smaller components, and then building up from there? We’re not doing that here—not yet—and frankly it’s a bit of a cheat. </p>
<p class="p">But it’s a cheat in service to keeping the code from getting too complicated, too quickly. We’re doing it this way so we can focus on one lesson at a time. And, this isn’t a bad way for you to work on things yourself: build inside one component until it gets too “busy,” and then refactor and decompose into smaller sub-components. As long as you remember to refactor!</p>
<p class="p">OK, <samp>&lt;/preaching&gt;</samp>. In <samp>expenses</samp> component, replace the <samp>&lt;!-- [[ expense form goes here ]] --&gt;</samp> comment with the following code for the Add Expense form.</p>
<div class="codeblock"><pre>
    
    &lt;div aria-labelledby="newexpenseform"&gt;

    &lt;!-- BOXED AREA --&gt;
    &lt;fieldset class="slds-box slds-theme--default slds-container--small"&gt;

      &lt;legend id="newexpenseform" class="slds-text-heading--small 
        slds-p-vertical--medium"&gt;
        Add Expense
      &lt;/legend&gt;

      &lt;!-- CREATE NEW EXPENSE FORM --&gt;
      &lt;form class="slds-form--stacked"&gt;

        &lt;div class="slds-form-element slds-is-required"&gt;
            &lt;div class="slds-form-element__control"&gt;
                &lt;ui:inputText aura:id="expname" label="Expense Name"
                    class="slds-input"
                    labelClass="slds-form-element__label"
                    value="{!v.newExpense.Name}"
                    required="true"/&gt;
            &lt;/div&gt;
       &lt;/div&gt;

       &lt;div class="slds-form-element slds-is-required"&gt;
            &lt;div class="slds-form-element__control"&gt;
                &lt;ui:inputNumber aura:id="amount" label="Amount"
                    class="slds-input"
                    labelClass="slds-form-element__label"
                    value="{!v.newExpense.Amount__c}"
                    required="true"/&gt;

            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="slds-form-element"&gt;
            &lt;div class="slds-form-element__control"&gt;
                &lt;ui:inputText aura:id="client" label="Client"
                    class="slds-input"
                    labelClass="slds-form-element__label"
                    value="{!v.newExpense.Client__c}"
                    placeholder="ABC Co."/&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="slds-form-element"&gt;
            &lt;div class="slds-form-element__control"&gt;
                &lt;ui:inputDate aura:id="expdate" label="Expense Date"
                    class="slds-input"
                    labelClass="slds-form-element__label"
                    value="{!v.newExpense.Date__c}"
                    displayDatePicker="true"/&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="slds-form-element"&gt;
            &lt;ui:inputCheckbox aura:id="reimbursed" label="Reimbursed?"
                class="slds-checkbox"
                labelClass="slds-form-element__label"
                value="{!v.newExpense.Reimbursed__c}"/&gt;
        &lt;/div&gt;

        &lt;div class="slds-form-element"&gt;
            &lt;ui:button label="Create Expense"
                class="slds-button slds-button--brand"
                press="{!c.clickCreateExpense}"/&gt;
        &lt;/div&gt;

      &lt;/form&gt;
      &lt;!-- / CREATE NEW EXPENSE FORM --&gt;

    &lt;/fieldset&gt;
    &lt;!-- / BOXED AREA --&gt;

  &lt;/div&gt;
  &lt;!-- / CREATE NEW EXPENSE --&gt;
</pre></div>
<p class="p">That looks like a lot of code to grasp at once. It’s not. When you strip away the SLDS markup and classes, from a Lightning Components view this form boils down to just this:</p>
<div class="codeblock"><pre>
&lt;ui:inputText aura:id="expname" label="Expense Name"
    value="{!v.newExpense.Name}" required="true"/&gt;

&lt;ui:inputNumber aura:id="amount" label="Amount"
    value="{!v.newExpense.Amount__c}" required="true"/&gt;

&lt;ui:inputText aura:id="client" label="Client"
    value="{!v.newExpense.Client__c}" placeholder="ABC Co."/&gt;

&lt;ui:inputDate aura:id="expdate" label="Expense Date"
    value="{!v.newExpense.Date__c}" displayDatePicker="true"/&gt;

&lt;ui:inputCheckbox aura:id="reimbursed" label="Reimbursed?"
    value="{!v.newExpense.Reimbursed__c}"/&gt;

&lt;ui:button label="Create Expense" press="{!c.clickCreateExpense}"/&gt;
</pre></div>
<p class="p">Here’s the resulting form.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="New Expense form" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3df7ec076649e15f979c9a3e2c8624c0.png"/></span></div></p>
<p class="p">It’s just five input components, and a button. We already know about buttons, so let’s talk about some new elements of these input components.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Just because we’re not explaining the SLDS markup doesn’t mean it’s not
            important. Try creating the form with this simplified markup. It’s hideous and
            unusable. SLDS rocks. We’re just not <em class="ph i">teaching</em> it here. (Go on, tell us this
            module isn’t already long!)</p></div></div></div></div></div>
<p class="p">First, notice that we’ve got a variety of input components, and that they’re named in such a way to suggest that they go best with specific data types. That is, you’re not surprised that you’d want to use <samp>&lt;ui:inputDate&gt;</samp> with a date field, and so on. There’s a range of different input components, well beyond these four, and it’s always best to match the component type to the data type. The reason might not be obvious yet, but it will be when you try this app out on a phone—type-specific components can provide input widgets best suited to the form factor. For example, the date picker is optimized for mouse or finger tip, depending on where you access it.</p>
<p class="p">Next, notice that each input component has a label set on it, and that the <samp>label</samp> text is automatically displayed next to the input
            field. There are a few other attributes we haven’t seen before: <samp>required</samp>, <samp>placeholder</samp>, <samp>displayDatePicker</samp>. If
            you can’t guess what these are for, you can look them up. (And we’ll come back to that
            deceptive <samp>required</samp>.)</p>
<p class="p">Next, there’s an <samp>aura:id</samp> attribute set on each tag.
            What’s that for? It sets a (locally) unique ID on each tag it’s added to,
            and that ID is how you’ll read values out of the form fields. We’ll look at
            how to do that very shortly.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_sobjects" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_sobjects"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Attributes for Salesforce Objects (sObjects)</span></h2>
<div class="body">
<p class="p">But first we need to look at the <samp>value</samp> attribute. Each tag has a value on it, set to an expression. For example, <samp>{!v.newExpense.Amount__c}</samp>. From the format of the expression, you should be able to deduce a few things.</p>
<ul class="ul bulletList">
<li class="li"><samp>v</samp> means this is a property of the view value provider. That means that this is an attribute on the component. (Which we haven’t created yet.)</li>
<li class="li">Based on the dot notation, you can tell that <samp>newExpense</samp> is
                some kind of structured data type. That is, <samp>newExpense</samp> itself has properties. Or...fields?</li>
<li class="li">From the “__c” that’s at the end of most of the property names, you can guess that these map back to custom fields, most likely on the Expense custom object.</li>
<li class="li">So, <samp>newExpense</samp> is probably an Expense object!</li>
</ul>
<p class="p">Cool, we haven’t discussed this yet! Here’s the actual attribute definition, which you should add to the top of the component, right after the opening <samp>&lt;aura:component&gt;</samp> tag.</p>
<div class="codeblock"><pre>
    &lt;aura:attribute name="newExpense" type="Expense__c"
         default="{ 'sobjectType': 'Expense__c',
                        'Name': '',
                        'Amount__c': 0,
                        'Client__c': '',
                        'Date__c': '',
                        'Reimbursed__c': false }"/&gt;
</pre></div>
<p class="p">What’s going on here is actually pretty simple. The name attribute you already know. And the type is, unsurprisingly, the API name of our custom object. So far, so good.</p>
<p class="p">The default attribute isn’t new, but the format of its value is. But it shouldn’t be too hard to grasp. It’s a JSON representation of an <samp>sObject</samp>, specifying the type of the object (again, the API name), and values for each of the fields to set on it by default. In this case, we’re basically setting everything to a representation of an empty value.</p>
<p class="p">And that’s, well, most of what you need to know about sObjects! From here out, the Lightning Components framework will let you treat <samp>newExpense</samp>, in JavaScript and in markup, like it’s a record from Salesforce—even though we’re not (yet) loading it from Salesforce!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_handlers" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_handlers"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Handle Form Submission in an Action Handler</span></h2>
<div class="body">
<p class="p">So we have a form. Right now, if you fill it out and click the button to create a new expense, what happens? Unless you’ve run ahead and created it already, you’ll get another error about a missing controller action. This is because neither the controller, nor the action handler specified on the
<samp>&lt;ui:button&gt;</samp>, have been created.</p>
<p class="p">In the Developer Console, click the <strong class="ph b">CONTROLLER</strong> button for the <samp>expenses</samp> component to create the controller resource. Then replace the
            default code with the following.</p>
<div class="codeblock"><pre>
({
    clickCreateExpense: function(component, event, helper) {

        // Simplistic error checking
        var validExpense = true;

        // Name must not be blank
        var nameField = component.find("expname");
        var expname = nameField.get("v.value");
        if ($A.util.isEmpty(expname)){
            validExpense = false;
            nameField.set("v.errors", [{message:"Expense name can't be blank."}]);
        }
        else {
            nameField.set("v.errors", null);
        }

        // ... hint: more error checking here ...

        // If we pass error checking, do some real work
        if(validExpense){
            // Create the new expense
            var newExpense = component.get("v.newExpense");
            console.log("Create expense: " + JSON.stringify(newExpense));
            helper.createExpense(component, newExpense);
        }
    }
})
</pre></div>
<p class="p">OK, this is all new, so let’s look at it carefully. First, let’s note that this action handler function is basically divided into three sections, or steps:</p>
<ol class="ol enumList">
<li class="li">Setup</li>
<li class="li">Process form values</li>
<li class="li">If there are no errors, do something</li>
</ol>
<p class="p">This structure might be familiar to you, because it’s a pretty fundamental way to process user input in a web application. Let’s look at each of the steps, to see how they work in Lightning Components.</p>
<p class="p">For setup, all we do is initialize the state of our error checking. It’s a simple flag, is this a valid expense? Each time the <samp>clickCreateExpense</samp> action handler is called, we’ll start on the assumption that the expense data is OK, and then invalidate it if we find a problem.</p>
<p class="p">Processing the form values is where things get interesting. For the moment we’re only validating the expense name field, but there’s a lot going on. </p>
<p class="p">First, we’re using a new function, <samp>find()</samp>, to get a reference to the <samp>&lt;ui:inputText&gt;</samp> component for the expense name. <samp>find()</samp> takes a single argument, an ID, and that ID corresponds to the <samp>aura:id</samp> attribute we set on the component.</p>
<p class="p">Back in <samp>helloMessageInteractive</samp>, we didn’t use
                <samp>find()</samp> to figure out the label text of the
            button that was clicked. This is because we didn’t need to. We were able to get a
            reference to that button directly, by pulling it out of the <samp>event</samp> parameter using <samp>event.getSource()</samp>. You don’t always have that luxury; indeed, it’s rare
            when everything you need from user input comes only from the event.</p>
<p class="p">So, when your controller needs a way to get to a child component, first set an <samp>aura:id</samp> on that component in markup, and then use <samp>component.find(theId)</samp> to get a reference to the component at runtime.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p><samp>component.find()</samp> only lets you access direct child
            components. It isn’t a magic way to go wandering around the component hierarchy and read
            or change things. Remember, components are supposed to be self-contained, or to
            communicate with…well, we’ll get to that.</p></div></div></div></div></div>
<p class="p">Once we have a reference to the expense name field, getting the value of the user input is done using the familiar <samp>nameField.get("v.value")</samp>. Note that you can use function chaining to get a field’s value using, for example, <samp>component.find("expname").get("v.value")</samp>. Here, since we actually need the reference to the field itself, we separate it into two steps.</p>
<p class="p">Once we have the form value in a local variable, we can perform all manner of validation on it.
            In this case, we just want to ensure that it’s not blank. To do so we’re
            using a convenience utility object, <samp>$A.util</samp>,
            that’s a part of the Lightning Components framework. <samp>$A.util</samp> has some nifty functions, but you can do
            your validation with plain JavaScript, too.</p>
<p class="p">It’s when validation fails that things get interesting again. When the user enters invalid input, we want two things to happen:</p>
<ol class="ol enumList">
<li class="li">Don’t try to create the expense.</li>
<li class="li">Show a helpful error message.</li>
</ol>
<p class="p">For the first, we set the <samp>validExpense</samp> flag to false.
            For the second, we make use of our reference to the child input component to set its
                <samp>errors</samp> attribute to a message that will
            help someone fill out the form correctly.</p>
<p class="p">The specific format of the value we’re setting on <samp>errors</samp> is an array of objects containing name-value pairs. The complexity
            of this (as opposed to a simple string) is a hint that there’s a lot more you can
            do with <samp>&lt;ui:inputText&gt;</samp> and error handling. We
            unfortunately don’t have the space here to go into it in depth. For now, make a
            note of the format.</p>
<p class="p">By contrast, if the field passes validation, we set the field’s component’s errors attribute to null. That, at least, is straightforward, and it resets any errors that were previously found for that field.</p>
<p class="p">And with that, we’re on to step three in handling the form submission: actually creating the expense! As you can see, to prepare for that, we’re getting the complete <samp>newExpense</samp> object from the component attribute: <samp>component.get("v.newExpense")</samp>. This gives us a single variable that we can use to create a new expense record.</p>
<p class="p">Before we get to that, though, here’s a question for you to think about: why don’t we pull the form values out of <samp>newExpense</samp>? Get the structured variable once, at the start of the action handler, and then just access its properties, instead of what could be a long series of <samp>find().get()</samp> calls?</p>
<p class="p">The reason is simple: because we need references to the individual fields to be able to set <samp>errors</samp> on them. It’s also a good practice to validate the raw form data; your validation logic doesn’t know what kinds of processing might happen within the <samp>newExpense</samp> object.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_create" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_create"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Create the New Expense</span></h2>
<div class="body">
<p class="p">Remember earlier we said that putting the expense form in the main component was a bit of a
            cheat? Well, this next section doesn’t get the “a bit” qualifier. What we’re doing here
            is just flat out avoiding the complexity of really creating the record. And we’re
            avoiding it now because <em class="ph i">that’s the entire next unit</em>. So, let’s wrap this one up
            with something simple, but which still shows us some important concepts.</p>
<p class="p">First, let’s create a place to “store” new expenses. We’ll simply create a local-only array of
            expenses to hold them. At the top of <samp>expenses</samp>
            component markup, right before the <samp>newExpense</samp>
            attribute, add a new <samp>expenses</samp> attribute, which will
            hold an array of expense objects.</p>
<div class="codeblock"><pre>
    &lt;aura:attribute name="expenses" type="Expense__c[]"/&gt;
</pre></div>
<p class="p">All we need to do is update the <samp>expenses</samp> array. Which, it turns out, is easy (in the <em class="ph i">cheater-cheater</em> version of our form), and illustrates yet another important concept.</p>
<p class="p">In our controller, we’ve hidden the work of actually creating the new expense behind this
            function call:<samp> helper.createExpense(component,
                newExpense)</samp>. In software development, another word for “hiding” is
                <em class="ph i">abstraction</em>. And we’re using something called a helper to abstract away our
            cheating.</p>
<p class="p">We discussed helpers briefly earlier, and we’re not going to cover advanced details of
            helpers in this module. For now, let’s say three things about helpers:</p>
<ul class="ul bulletList">
<li class="li">A component’s helper is the appropriate place to put code to be shared between several different
                action handlers. </li>
<li class="li">A component’s helper is a great place to put complex processing details, so that the logic of
                your action handlers remains clear and streamlined.</li>
<li class="li">Helper functions can have any function signature. That is, they’re not constrained the way that
                action handlers in the controller are. (Why is this? Because <em class="ph i">you</em> are calling
                the helper function directly from your code. By contrast, the framework calls action
                handlers via the framework runtime.) It’s a convention and recommended practice to
                always provide the component as the first parameter to helper functions.</li>
</ul>
<p class="p">OK, let’s get on with it. In the Developer Console, click the <strong class="ph b">HELPER</strong> button for the
                <samp>expenses</samp> component to create the associated
            helper resource, and then replace the example code with the following. </p>
<div class="codeblock"><pre>
({
    createExpense: function(component, expense) {
        var theExpenses = component.get("v.expenses");
 
        // Copy the expense to a new object
        // THIS IS A DISGUSTING, TEMPORARY HACK
        var newExpense = JSON.parse(JSON.stringify(expense));
 
        theExpenses.push(newExpense);
        component.set("v.expenses", theExpenses);
    }
})
</pre></div>
<p class="p">For the moment, ignore the disgusting hack part. The other three lines of code illustrate a common pattern we’ve seen before, and which you’ll use over and over: get-process-set. First we get the array of expenses from the <samp>expenses</samp> attribute. Then we add the new expense “record” to it. Then we update (<samp>set</samp>) the <samp>expenses</samp> attribute with the changed array.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_reference" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_reference"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>The Reference Is Not the Collection</span></h2>
<div class="body">
<p class="p">What’s new here is that, for the first time, we’re updating a collection, an array.
      And if you’re an experienced programmer, you’re probably wondering: “Why do
      I need the <samp>set()</samp> here?”</p>
<p class="p">That is, <samp>component.get("v.expenses")</samp> gets a reference to the array stored in the <samp>component</samp> attribute. <samp>component.set("v.expenses", theExpenses)</samp> simply sets the <samp>component</samp> attribute to the same reference. Sure, in between, the contents of the array has been added to, but the container is the same: <em class="ph i">the reference to the array hasn’t actually changed!</em> So, why update it?</p>
<p class="p">If you’re having trouble understanding what this means, add two logging statements before and after the critical statements, and dump the contents of <samp>theExpenses</samp> to the console.</p>
<div class="codeblock"><pre>console.log("Expenses before 'create': " + JSON.stringify(theExpenses));
theExpenses.push(newExpense);
component.set("v.expenses", theExpenses);
console.log("Expenses after 'create': " + JSON.stringify(theExpenses));</pre></div>
<p class="p">Reload and run the app, add at least two expenses, and look at the structure of <samp>theExpenses</samp>. Now comment out the <samp>component.set()</samp> line, and do it again.</p>
<p class="p">What the...? <samp>component.set()</samp> doesn’t affect
        <samp>theExpenses</samp> at all! But! But! But? What does it
      actually <em class="ph i">do</em>?!?</p>
<p class="p">You are absolutely correct to be asking this question. And the answer is: magic!</p>
<p class="p">What <samp>component.set()</samp> does here isn’t update the value of the <samp>expenses</samp> attribute. It triggers notification that the <samp>expenses</samp> attribute has changed. </p>
<p class="p">The effect is that, anywhere in your app that you’ve referenced the <samp>expenses</samp> attribute in an expression, the value of that expression is updated, and that update cascades everywhere the <samp>expenses</samp> attribute was used. And they all update to rerender based on the new contents. This all happens behind the scenes, handled by the Lightning Components framework, as part of the auto-wiring that happens when you use <samp>{!v.expenses}</samp>. In a word, magic.</p>
<p class="p">To summarize, if this were plain JavaScript, you wouldn’t need the <samp>component.set()</samp>. In order to trigger underlying effects built into Lightning Components, you do. If you ever write some controller or helper code, test it, and nothing happens, make sure you’ve done the required <samp>component.set()</samp>.</p>
<p class="p">The “disgusting hack” works around a similar issue with references. To see the issue, change the line to remove the two JSON calls, and test the app. You’ll see what the problem is quickly enough. We’ll remove it in the next unit, and so won’t explain further.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_display" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_display"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Displaying the List of Expenses</span></h2>
<div class="body">
<p class="p">So, for all that talk about “magically” updating anything that uses <samp>{!v.expenses}</samp>, guess what. Nothing else is using it, yet. Let’s fix that.</p>
<div class="p">In the Developer Console, create a new Lightning component named <samp>expenseItem</samp>, and replace the default markup with the
            following. If you already created <samp>expenseItem</samp>, just
            update the
            markup.<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="expense" type="Expense__c"/&gt;

    &lt;p&gt;Amount:
        &lt;ui:outputCurrency value="{!v.expense.Amount__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Client:
        &lt;ui:outputText value="{!v.expense.Client__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Date:
        &lt;ui:outputDate value="{!v.expense.Date__c}"/&gt;
    &lt;/p&gt;
    &lt;p&gt;Reimbursed?:
        &lt;ui:outputCheckbox value="{!v.expense.Reimbursed__c}"/&gt;
    &lt;/p&gt;

&lt;/aura:component&gt;</pre></div>
</div>
<div class="p">In the Developer Console, create a new Lightning component named <samp>expensesList</samp>, and replace the default markup with the
            following.<div class="codeblock"><pre>&lt;aura:component&gt;

    &lt;aura:attribute name="expenses" type="Expense__c[]"/&gt;

    &lt;div class="slds-card slds-p-top--medium"&gt;
        &lt;header class="slds-card__header"&gt;
            &lt;h3 class="slds-text-heading--small"&gt;Expenses&lt;/h3&gt;
        &lt;/header&gt;
        
        &lt;section class="slds-card__body"&gt;
            &lt;div id="list" class="row"&gt;
                &lt;aura:iteration items="{!v.expenses}" var="expense"&gt;
                    &lt;c:expenseItem expense="{!expense}"/&gt;
                &lt;/aura:iteration&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/div&gt;

&lt;/aura:component&gt;</pre></div>
</div>
<p class="p">There’s not a lot new for you here. This is a component that displays a list of expenses.
            It has one attribute, <samp>expenses</samp>, which is an
            array of expense <samp>(Expense__c)</samp> objects. And it
            uses an <samp>&lt;aura:iteration&gt;</samp> to create an <samp>&lt;c:expenseItem&gt;</samp> for each of those expense
            objects. The overall effect is, as we noted, to display a list of expenses. So far, so
            good.</p>
<p class="p">Now add the <samp>expensesList</samp> component to the end of <samp>expenses</samp> component. Add it right before the ending <samp>&lt;/aura:component&gt;</samp> tag in <samp>expenses.cmp</samp>.</p>
<div class="codeblock"><pre>
&lt;c:expensesList expenses="{!v.expenses}"/&gt;
</pre></div>
<p class="p">If you reload the application, you’ll see an Expenses section below the form. (It’s not quite right, visually, but it’s good enough for now.)</p>
<p class="p">What did we just do? We added the <samp>expensesList</samp> component
            to <em class="ph i">and passed the main <samp>expenses</samp> attribute
                into it</em>. So now the instance of <samp>expenses</samp>
            that <samp>expensesList</samp> has is the same as the
            instance of <samp>expenses</samp> that the <samp>expenses</samp> component has. They are references to the
            same array of records, and through the magic of Lightning Components, when the main
                <samp>expenses</samp> array is updated, the <samp>expensesList</samp> component will “notice” and rerender
            its list. Give it a whirl!</p>
<p class="p">Whew! That was a long unit, and it calls for a stretch break. Please, do get up and walk around for a few minutes.</p>
<p class="p">Then come back, and we’ll show you how to save your new expenses for real.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_forms_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_forms_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_overview.htm" target="_blank" title="HTML (New Window)">Working with UI
               Components</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ui_input.htm" target="_blank" title="HTML (New Window)">Using the UI
            Components</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_and_actions.htm" target="_blank" title="HTML (New Window)">Actions and Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_client_side_controller.htm" target="_blank" title="HTML (New Window)">Handling Events with
               Client-Side Controllers</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_find_by_id.htm" target="_blank" title="HTML (New Window)">Finding Components by
            ID</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_validate_fields.htm" target="_blank" title="HTML (New Window)">Validating Fields</a></li>
<li class="li"><a class="xref" href="http://www.lightningdesignsystem.com/getting-started/lightning/" target="_blank" title="HTML (New Window)">Getting Started with the Lightning Design
                              System</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Connect to Salesforce with Server-Side Controllers</h1><div class="unit-content">
<body id="lex_dev_lc_basics_connect_objectives"><a name="lex_dev_lc_basics_connect_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Create Apex methods that can be called remotely from Lightning Components code.</li>
<li class="li">Make calls from Lightning Components to remote methods.</li>
<li class="li">Handle server responses asynchronously using callback functions.</li>
<li class="li">Stretch goal: explain the difference between “c.”, “c:”, and
          “c.”.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_ss_concepts" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_ss_concepts"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Server-Side Controller Concepts</span></h2>
<div class="body">
<p class="p">So far everything we’ve done has been strictly client-side. We’re not saving our expenses back to Salesforce yet. Create a few expenses and then hit reload and what happens? That’s right, all the expenses disappear. Woohoo, free money! </p>
<p class="p">Except, Accounting just called and, well, they’re kind of humorless about that kind of thing. And, actually, don’t we want to be reimbursed for those expenses, which are otherwise coming out of <em class="ph i">our</em> pocket...? Yikes! We need to save our data to Salesforce, no more delays!</p>
<p class="p">Kidding aside, it’s finally time to add server-side controllers to our app. We’ve been holding this back while we got the basics down. Now that you’re ready for it, let’s dive in!</p>
<p class="p">Into some pictures, that is. Let’s make sure we know where we’re headed, and that our gas tank is full, before we hit the road.</p>
<p class="p">First, let’s revisit the first diagram we saw in this module, a (very) high level look at the architecture of Lightning Components apps.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="A very high level architecture of Lightning Components: client view and controller, server apex controller and database" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use2b69ee82209a54da14ec641431bd483.png"/></span></div></p>
<p class="p">Up to now, everything we’ve looked at has been on the client side of this picture. (And note we
            simplified by merging controllers and helpers here.) Although we’ve referenced a custom
            object type, Expense__c, which is defined on the server side, we’ve never actually
            touched the server directly.</p>
<p class="p">Remember how we talked about wiring together different elements to create a complete circuit? The
            expenses form that we built in the last unit might look something like this.</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Client side of flow" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4283549c1bf23a647d6b2cf79d4c3ab3.png"/></span></div></p>
<p class="p">The circuit starts with the <strong class="ph uicontrol">Create</strong> button, which is wired to the <samp>clickCreate</samp> action handler (1). When the action handler
            runs, it gets values out of the form fields (2) and then adds a new expense to the
                <samp>expenses</samp> array (3). When the array is updated
            via <samp>set</samp>, it triggers the automatic rerendering of
            the list of expenses (4), completing the circuit. Simple, right?</p>
<p class="p">Well, when we wire in server-side access, the diagram gets a bit more complicated. More
            arrows, more colors, more numbers! (We’ll hold off on explaining all of it for the
            moment.)</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="Complete flow: client and server-side" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us570378df7a106c102d8303bec2f28eca.png"/></span></div></p>
<p class="p">What’s more, this circuit doesn’t have the same smooth, synchronous flow of control. Server calls
            are expensive, and can take a bit of time. Milliseconds when things are good, and long
            seconds when the network is congested. Lightning Components doesn’t want apps to be
            locked up while waiting for server responses.</p>
<p class="p">The solution to staying responsive while waiting is that server responses are handled <em class="ph i">asynchronously</em>. What this means is, when you click the Create Expense button, your client-side controller fires off a server request and then keeps processing. It not only doesn’t wait for the server, it forgets it ever made the request! </p>
<p class="p">Then, when the response comes back from the server, code that was packaged up with the request, called a <em class="ph i">callback function</em>, runs and handles the response, including updating client-side data and the user interface.</p>
<p class="p">If you’re an experienced JavaScript programmer, asynchronous execution and callback functions are probably your bread and butter. If you haven’t worked with them before, this is going to be new, and maybe pretty different. It’s also <em class="ph i">really</em> cool.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_query" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_query"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Querying for Data from Salesforce</span></h2>
<div class="body">
<p class="p">We’re going to start with reading data from Salesforce, to load the list of existing expenses when the Expenses app starts up. </p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If you haven’t already created a few real expense records in Salesforce, now would be a
      good time. Otherwise, after implementing what follows, you might spend time debugging why
      nothing is loading, when there’s actually just nothing to load. Your humble author falls
      for this one All. The. Time.</p></div></div></div></div></div>
<p class="p">The first step is to create your Apex controller. Apex controllers contain remote methods your
            Lightning components can call. In this case, to query for and receive expenses data from
            Salesforce.</p>
<p class="p">Let’s take a look at a simplified version of the code. In the Developer Console, create a new Apex class named “ExpensesController” and paste in the following code.</p>
<div class="codeblock"><pre>public with sharing class ExpensesController {

    // STERN LECTURE ABOUT WHAT'S MISSING HERE COMING SOON

    @AuraEnabled
    public static List&lt;Expense__c&gt; getExpenses() {
        return [SELECT Id, Name, Amount__c, Client__c, Date__c, 
                       Reimbursed__c, CreatedDate 
                FROM Expense__c];
    }
}</pre></div>
<p class="p">We’ll go into Apex controllers in some depth in the next section, but for now this is really a very straightforward Apex method. It runs a SOQL query and returns the results. There are only two specific things that make this method available to your Lightning Components code.</p>
<ul class="ul bulletList">
<li class="li">The <samp>@AuraEnabled</samp> annotation before the method
        declaration. <p class="p">“Aura” is the name of the open source framework at the core of
          Lightning Components. You’ve seen it used in the namespace for some of the core
          tags, such as <samp>&lt;aura:component&gt;</samp>. Now you know
          where it comes from.</p>
</li>
<li class="li">The <samp>static</samp> keyword. All <samp>@AuraEnabled</samp> methods must be static methods, and either <samp>public</samp> or <samp>global</samp> scope.  </li>
</ul>
<p class="p">If these requirements remind you of remote methods for Visualforce’s JavaScript remoting
            feature, that’s not a coincidence. The requirements are the same, because the
            architecture is very similar at key points.</p>
<p class="p">One other thing worth noting is that the method doesn’t do anything special to package the data for Lightning Components. It just returns the SOQL query results directly. The Lightning Components framework handles all the marshalling/unmarshalling work involved in most situations. Nice!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_load_data" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_load_data"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Loading Data from Salesforce</span></h2>
<div class="body">
<p class="p">The next step is to wire up the <samp>expenses</samp> component to the
      server-side Apex controller. This is so easy it might make you giddy. Change the opening
        <samp>&lt;aura:component&gt;</samp> tag of the expenses component to
      point at the Apex controller, like this.</p>
<div class="codeblock"><pre>
&lt;aura:component controller="ExpensesController"&gt;
</pre></div>
<p class="p">The new part is highlighted in bold and, yes, it really is that simple.</p>
<p class="p">However, pointing to the Apex controller doesn’t actually load any data, or call the remote method. Like the auto-wiring between the component and (client-side) controller, this pointing simply lets these two pieces “know about” each other. This “knowing” even takes the same form, another value provider, which we’ll see in a moment. But the auto-wiring only goes so far. It remains <strong class="ph b">our</strong> job to complete the circuit.</p>
<p class="p">In this case, completing the circuit means the following.</p>
<ol class="ol enumList">
<li class="li">When our app (the expenses component) is loaded,</li>
<li class="li">Query Salesforce for existing expense records, and</li>
<li class="li">Add those records to the <samp>expenses</samp> component attribute.</li>
</ol>
<p class="p">We’ll take each of those in turn. The first item, triggering behavior when the <samp>expenses</samp> component is first loaded, requires us to write an
        <dfn class="term">init handler</dfn>. That’s just a shorthand term for an action handler that’s wired
      to a component’s <samp>init</samp> event, which happens when the
      component is first created. </p>
<p class="p">The wiring you need for this is a single line of markup. Add the following to the <samp>expenses</samp> component, right below the component’s attribute definitions.</p>
<div class="codeblock"><pre>
&lt;aura:handler name="init" action="{!c.doInit}" value="{!this}"/&gt;
</pre></div>
<p class="p">The <samp>&lt;aura:handler&gt;</samp> tag is how you say that a component
      can, well, <em class="ph i">handle</em> a specific event. In this case, we’re saying that we’ll handle the
        <samp>init</samp> event, and that we’ll handle it with the <samp>doInit</samp> action handler in our controller. (Setting <samp>value="{!this}"</samp> marks this as a “value event.” What this means
      is too complex to go into here. Just know that you should always add this attribute-value pair
      to an <samp>init</samp> event.)</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_methods" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_methods"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Calling Server-Side Controller Methods</span></h2>
<div class="body">
<p class="p">One step down, two to go. Both of the remaining steps take place in the <samp>doInit</samp> action handler, so let’s look at it. Add the following code to the <samp>expense</samp> component’s controller.</p>
<div class="codeblock"><pre>    // Load expenses from Salesforce
    doInit: function(component, event, helper) {

        // Create the action
        var action = component.get("c.getExpenses");

        // Add callback behavior for when response is received
        action.setCallback(this, function(response) {
            var state = response.getState();
            if (component.isValid() &amp;&amp; state === "SUCCESS") {
                component.set("v.expenses", response.getReturnValue());
            }
            else {
                console.log("Failed with state: " + state);
            }
        });

        // Send action off to be executed
        $A.enqueueAction(action);
    },</pre></div>
<p class="p">Before you feel lost with all the new things here, please notice that this is just another action handler. It’s formatted the same, and the function signature is the same. We’re in familiar territory.</p>
<p class="p">That said, every line of code after the function signature is new. We’ll look at all of them in a moment, but here’s the outline of what this code does:</p>
<ol class="ol enumList">
<li class="li">Create a remote method call.</li>
<li class="li">Set up what should happen when the remote method call returns.</li>
<li class="li">Queue up the remote method call.</li>
</ol>
<p class="p">That sounds pretty simple, right? Maybe the structure or specifics of the code is new, but the basic requirements of what needs to happen are once again familiar. </p>
<p class="p">Does it sound like we’re being really encouraging? Like, maybe we’re trying to coach you through a rough patch? Well, we need to talk about something tough. The issue appears in the first line of code in the function.</p>
<div class="codeblock"><pre>        var action = component.get("c.getExpenses");</pre></div>
<p class="p">This line of code creates our remote method call, or remote action. And at first the <samp>component.get()</samp> part looks familiar. We’ve done that many times at this point.</p>
<p class="p">Except…well, before it was “v.something” that we were getting, with <samp>v</samp> being the value provider for the view. Here it’s “c”, and yes, <samp>c</samp> is another value provider. And we’ve seen a <samp>c</samp> value provider before, in expressions like <samp>press="{!c.clickCreateExpense}"</samp> and <samp>action="{!c.doInit}"</samp>. </p>
<p class="p">Those expressions were in component markup, in the view. Here in the controller, the <samp>c</samp> value provider represents something different. It represents the remote Apex controller.</p>
<p class="p">“Wait a minute. Are you telling me we have <samp>c</samp> the client-side
      controller, <samp>c</samp> the default namespace, and <samp>c</samp> the server-side controller, all in Lightning Components?”</p>
<p class="p">Well, in a word, yes. Deep breaths.</p>
<p class="p">Look, we’ll be honest with you. If we had it all to do over again, we might have made some different choices. While the choices we made weren’t accidents, three “c”s is definitely an opportunity for confusion. We get confused too!</p>
<p class="p">But as they say, it is what it is. Forewarned is forearmed. Now you know.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d237998e402">
<p class="p">
              Identifier
            </p>
</th>
<th class="featureTableHeader " id="d237998e408">
<p class="p">
              Context
            </p>
</th>
<th class="featureTableHeader " id="d237998e414">
<p class="p">
              Meaning
            </p>
</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Identifier" headers="d237998e402">
<p class="p"><samp>c.</samp></p>
</td>
<td class="entry" data-title="Context" headers="d237998e408">
<p class="p">Component markup</p>
</td>
<td class="entry" data-title="Meaning" headers="d237998e414">
<p class="p">Client-side controller</p>
</td>
</tr>
<tr>
<td class="entry" data-title="Identifier" headers="d237998e402">
<p class="p"><samp>c.</samp></p>
</td>
<td class="entry" data-title="Context" headers="d237998e408">
<p class="p">Controller code</p>
</td>
<td class="entry" data-title="Meaning" headers="d237998e414">
<p class="p">Server-side controller</p>
</td>
</tr>
<tr>
<td class="entry" data-title="Identifier" headers="d237998e402">
<p class="p"><samp>c:</samp></p>
</td>
<td class="entry" data-title="Context" headers="d237998e408">
<p class="p">Markup </p>
</td>
<td class="entry" data-title="Meaning" headers="d237998e414">
<p class="p">Default namespace</p>
</td>
</tr>
</tbody>
</table></div>
<p class="p">OK, back to our code. Before we got sidetracked, we were looking at this line.</p>
<div class="codeblock"><pre>        var action = component.get("c.getExpenses");</pre></div>
<p class="p">Where, in earlier code, <samp>component.get("<strong class="ph b">v</strong>.something")</samp> returned to us a reference to a child component in the view (component markup), <samp>component.get("<strong class="ph b">c</strong>.whatever")</samp> returns a reference to an action available in the controller. In this case, it returns a remote method call to our Apex controller. This is how you create a call to an <samp>@AuraEnabled</samp> method.</p>
<p class="p">The next “line,” action.setCallback(…), is a block of code that will run when the remote method call returns. Since this happens “later,” let’s set it aside for the moment.</p>
<p class="p">The next line that actually <em class="ph i">runs</em> is this one.</p>
<div class="codeblock"><pre>        $A.enqueueAction(action);</pre></div>
<p class="p">We saw <samp>$A</samp> briefly before, but didn’t discuss it.
      It’s a framework global variable that provides a number of important functions and
      services. <samp>$A.enqueueAction(action)</samp> adds the server call
      that we’ve just configured to the Lightning Components framework request queue. It,
      along with other pending server requests, will be sent to the server in the next request
      cycle.</p>
<p class="p">That sounds kind of vague. The full details are interesting, and important for advanced use of
      Lightning Components. But for now, here’s what you need to know about <samp>$A.enqueueAction(action)</samp>.</p>
<ul class="ul bulletList">
<li class="li">It queues up the server request.</li>
<li class="li">As far as your controller action is concerned, that’s the end of it.</li>
<li class="li">You’re not guaranteed when, or if, you’ll hear back.</li>
</ul>
<p class="p">This is where that block of code we set aside comes in. But before we talk about that, a little pop culture.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_calls" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_calls"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Server Calls, Asynchronous Execution, and Callback Functions</span></h2>
<div class="body">
<p class="p">Carly Rae Jepsen’s single “Call Me Maybe” was released in 2011, to critical and
            commercial success, hitting #1 in more than a dozen countries. To date it has sold more
            than 18 million copies worldwide and is, apparently, one of the best-selling digital
            singles of all time. The most memorable line, from the chorus, is “Here’s my
            number. So call me maybe.” In addition to being upbeat and dangerously catchy,
            it’s a metaphor for how Lightning Components handles server calls.</p>
<p class="p">Hear us out. Let’s look at our action handler in pseudo-code.</p>
<div class="codeblock"><pre>
    doInit: function(component, event, helper) {
        // Load expenses from Salesforce
        var action = component.get("c.getExpenses");
        action.setCallback(
            // Here’s my number,
            // Call me maybe
        );
        $A.enqueueAction(action);
    },
</pre></div>
<p class="p">Hmmm. Maybe we should explain the parameters to <samp>action.setCallback()</samp> in more detail. In the real action handler code, we call it like so.</p>
<div class="codeblock"><pre>
        action.setCallback(this, function(response) { ... });
</pre></div>
<p class="p"><samp>this</samp> is the scope in which the callback will execute; here <samp>this</samp> is the action handler function itself. Think of it as an address, or...maybe a <strong class="ph b">number</strong>. The function is what gets <strong class="ph b">called</strong> when the server response is returned. So:</p>
<div class="codeblock"><pre>
        action.setCallback(scope, callbackFunction);
</pre></div>
<p class="p"><em class="ph i">Here’s my number. Call me maybe.</em></p>
<p class="p">The overall effect is to create the request, package up the code for what to do when the request is done, and send it off to execute. At that point, the action handler itself stops running.</p>
<p class="p">Here’s another way to wrap your head around it. You might bundle your child up for school, and hand them a list of the chores you want them to do when they come home after classes. You drop them off at school, and then you go to work. While you’re at work, you’re doing <em class="ph i">your work</em>, secure in the knowledge that your child, being a good kid, will do <em class="ph i">the work you assigned to them</em> when they get back from school. You don’t do that work yourself, and you don’t know when, exactly, it will happen. But it does.</p>
<p class="p">Here’s one last way to look at it, again in pseudo-code. This version “unwraps” the callback
            function to show a more linear version of the action handler.</p>
<div class="codeblock"><pre>
    // Not real code! Do not cut-and-paste!
    doInit: function(component, event, helper) {

        // Create server request
        var action = component.get("c.getExpenses");

        // Send server request
        $A.enqueueAction(action);

        // ... time passes ...
        // ...
        // ... Jeopardy theme plays
        // ...
        // ... at some point in the indeterminate future ...

        // Handle server response
        var state = action.response.getState();
        if (component.isValid() &amp;&amp; state === "SUCCESS") {
            component.set("v.expenses", action.response.getReturnValue());
        }
    },
</pre></div>
<p class="p">We’ll say it again. Asynchronous execution and callback functions are <em class="ph i">de rigueur</em> for JavaScript programmers, but if you’re coming from another background, it might be less familiar. Hopefully we’ve got it down at this point, because it’s fundamental to developing apps with Lightning Components.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_srvr_resp" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_srvr_resp"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Handling the Server Response</span></h2>
<div class="body">
<p class="p">Now that we’ve got the structure of creating a server request down, let’s look at the details of how our callback function actually handles the response. Here’s just the callback function. </p>
<div class="codeblock"><pre>
    function(response) {
        var state = response.getState();
        if (component.isValid() &amp;&amp; state === "SUCCESS") {
            component.set("v.expenses", response.getReturnValue());
        }
    }
</pre></div>
<p class="p">Callback functions take a single parameter, <samp>response</samp>, which
            is an opaque object that provides the returned data, if any, and various details about
            the status of the request.</p>
<p class="p">In this specific callback function, we do the following.</p>
<ol class="ol enumList">
<li class="li">Get the state of the response.</li>
<li class="li">If the state is SUCCESS, that is, our request completed as planned, and if the component itself is still valid, then:</li>
<li class="li">Set the component’s <samp>expenses</samp> attribute to the value of the response data.</li>
</ol>
<p class="p">You probably have a few questions, such as:</p>
<ul class="ul bulletList">
<li class="li">What happens if the response state isn’t SUCCESS?</li>
<li class="li">What happens if the response never comes? (Call me <em class="ph i">maybe</em>.)</li>
<li class="li">Why would the component not be valid anymore?</li>
<li class="li">How can we just assign the response data to our component attribute?</li>
</ul>
<p class="p">The answers to the first two are that, unfortunately, we’re not going to cover those possibilities in this module. They’re certainly things you need to know about and consider in your real world apps, but we just don’t have the space.</p>
<p class="p">Your component might not be valid if, for example, while the server is churning away, the user clicks to go to another screen. At that point, our <samp>expenses</samp> component might have been destroyed. In which case, trying to set a value on one of its attributes would throw an error. As the joke goes, don’t do that.</p>
<p class="p">The last question is the most relevant here, but it’s also the easiest to answer. We defined a data type for the expenses attribute. </p>
<div class="codeblock"><pre>
&lt;aura:attribute name="expenses" type="Expense__c[]"/&gt;
</pre></div>
<p class="p">And our server-side controller action has a method signature that defines its return data type. </p>
<div class="codeblock"><pre>
public static List&lt;Expense__c&gt; getExpenses() { ... }
</pre></div>
<p class="p">The types match, and so we can just assign one to the other. Lightning Components handles all the details. You can certainly do your own processing of the results, and turn it into other data within your app. But if you design your server-side actions right, you don’t necessarily have to.</p>
<p class="p">OK, that was a lot of different ways to look at a dozen lines of code. Here’s the question: Have you tried your version of our app with it yet? Because we’re done with the loading expenses from Salesforce part. Go reload the app, and see if the expenses you entered in Salesforce show up!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_apex" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_apex"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Apex Controllers for Lightning Components</span></h2>
<div class="body">
<p class="p">Before we take the next step in developing the app, let’s dive a little deeper into that Apex controller. Here’s a look at the next version, which we’ll need to handle creating new records, as well as updating the Reimbursed? checkbox on existing records. </p>
<div class="codeblock"><pre>public with sharing class ExpensesController {

    @AuraEnabled
    public static List&lt;Expense__c&gt; getExpenses() {
        // Perform isAccessible() checking first, then
        return [SELECT Id, Name, Amount__c, Client__c, Date__c, 
                       Reimbursed__c, CreatedDate 
                FROM Expense__c];
    }
    
    @AuraEnabled
    public static Expense__c saveExpense(Expense__c expense) {
        // Perform isUpdatable() checking first, then
        upsert expense;
        return expense;
    }
}</pre></div>
<p class="p">The earlier version promised a stern lecture, and that’s coming. But first, let’s focus on the details of this minimal version.</p>
<p class="p">First, we’ve added only one new <samp>@AuraEnabled</samp> method, <samp>saveExpense()</samp>. It takes an Expense (<samp>Expense__c</samp>) object and upserts it. This allows us to
            use it to both create new records and to update existing records.</p>
<p class="p">Next, notice that we created the class with the <samp>with sharing</samp> keywords. This automatically applies your org’s sharing rules to the records that are available via these methods. For example, users would normally only see their own expense records. Salesforce handles all the complicated SOQL rules for you, automatically, behind the scenes. </p>
<p class="p">Using the <samp>with sharing</samp> keywords is one of the essential
            security measures you need to take when writing server-side controller code. However,
            it’s a measure that’s necessary, but not sufficient. Do you see the comments about
            performing <samp>isAccessible()</samp> and <samp>isUpdatable()</samp> checks? <samp>with
                sharing</samp> only takes you so far. In particular, you need to implement object-
            and field-level security (which you’ll frequently see abbreviated to FLS) yourself.</p>
<p class="p">For example, here’s a version of our <samp>getExpenses()</samp> method
            with this security minimally implemented. </p>
<div class="codeblock"><pre>    @AuraEnabled
    public static List&lt;Expense__c&gt; getExpenses() {
        
        // Check to make sure all fields are accessible to this user
        String[] fieldsToCheck = new String[] {
            'Id', 'Name', 'Amount__c', 'Client__c', 'Date__c', 
            'Reimbursed__c', 'CreatedDate'
        };
        
        Map&lt;String,Schema.SObjectField&gt; fieldDescribeTokens = 
            Schema.SObjectType.Expense__c.fields.getMap();
        
        for(String field : fieldsToCheck) {
            if( ! fieldDescribeTokens.get(field).getDescribe().isAccessible()) {
                throw new System.NoAccessException();
                return null;
            }
        }
        
        // OK, they're cool, let 'em through
        return [SELECT Id, Name, Amount__c, Client__c, Date__c, 
                       Reimbursed__c, CreatedDate 
                FROM Expense__c];
    }</pre></div>
<p class="p">It’s quite an expansion from our initial one-liner, and it’s still just adequate. Also, <samp>describe</samp> calls are expensive. If your app is calling
            this method frequently, you should find a way to optimize or cache your access checks
            per user.</p>
<p class="p">Like with SLDS, we simply don’t have the space to teach all of the details of secure Apex coding. Unlike with SLDS, taking responsibility for the security of the code you write is not optional. If you haven’t read the secure coding practices articles in the Resources, please add them to your queue.</p>
<p class="p">OK, <samp>&lt;/stern-lecture&gt;</samp>.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_saving" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_saving"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Saving Data to Salesforce</span></h2>
<div class="body">
<p class="p">Before we implement the Add Expense form for real, no cheating, let’s first look at how
            creating a new record is a different challenge from reading existing records. With
                <samp>doInit()</samp>, we simply read some data, and then
            updated the user interface of the app. Straightforward, even if we did have to get Carly
            Rae involved in the explanation.</p>
<p class="p">Creating a new record is more involved. We’re going to read values from the form, create a new expense record <em class="ph i">locally</em>, send that record off to be saved on the <em class="ph i">server</em>, and then, when the server tells us it’s saved, update the user interface, using the record returned from the <em class="ph i">server</em>.</p>
<p class="p">Does that make it sounds like it’s going to be really complicated?
Like, maybe we’re going to need the Rolling Stones and a whole album of songs to help us out with the next explanation?</p>
<p class="p">Let’s take a look at some code, and you can decide for yourself.</p>
<p class="p">First, make sure you’ve saved the updated version of the Apex controller, the preceding version that includes the <samp>saveExpense()</samp> method.</p>
<div class="p">Next, to make some concepts more clear later, let’s move the field validation logic into a helper
            function. In the <samp>expenses</samp> helper, add the following
            code, after the <samp>createExpense()</samp>
            function.<div class="codeblock"><pre>    validateExpenseForm: function(component) {

        // Simplistic error checking
        var validExpense = true;

        // Name must not be blank
        var nameField = component.find("expname");
        var expname = nameField.get("v.value");
        if ($A.util.isEmpty(expname)){
            validExpense = false;
            nameField.set("v.errors", [{message:"Expense name can't be blank."}]);
        }
        else {
            nameField.set("v.errors", null);
        }

        // Amount must be set, must be a positive number
        var amtField = component.find("amount");
        var amt = amtField.get("v.value");
        if ($A.util.isEmpty(amt) || isNaN(amt) || (amt &lt;= 0.0)){
            validExpense = false;
            amtField.set("v.errors", [{message:"Enter an expense amount."}]);
        }
        else {
            // If the amount looks good, unset any errors...
            amtField.set("v.errors", null);
        }
        
        return(validExpense);
    },</pre></div>
There’s
            nothing new here, it’s just a way to consolidate all of the tedious validation logic in
            the helper.</div>
<div class="p">With the validation logic moved, you can streamline the <samp>expenses</samp> controller <samp>clickCreateExpense()</samp> action handler to look like
            this.<div class="codeblock"><pre>    clickCreateExpense: function(component, event, helper) {
        if(helper.validateExpenseForm(component)){
            // Create the new expense
            var newExpense = component.get("v.newExpense");
            helper.createExpense(component, newExpense);
        }
    },</pre></div>
</div>
<p class="p">Because we put all of the details of (and all the cheating on) creating a new expense into the
            helper <samp>createExpense()</samp> function, we don’t
            need to make any other changes in the controller. So far, so easy?</p>
<p class="p">So, all we need to do is change the <samp>createExpense()</samp> function in the helper, to do all those complicated things we mentioned previously. Here’s that code. </p>
<div class="codeblock"><pre>    createExpense: function(component, expense) {
        var action = component.get("c.saveExpense");
        action.setParams({
            "expense": expense
        });
        action.setCallback(this, function(response){
            var state = response.getState();
            if (component.isValid() &amp;&amp; state === "SUCCESS") {
                var expenses = component.get("v.expenses");
                expenses.push(response.getReturnValue());
                component.set("v.expenses", expenses);
            }
        });
        $A.enqueueAction(action);
    },</pre></div>
<p class="p">Is that as complicated as you were expecting? As many lines? We hope not!</p>
<p class="p">In truth, there is only one new thing in this action handler, and it’s easy to understand. Let’s walk through the code.</p>
<p class="p">We begin by creating the action, with <samp>component.get("c.saveExpense")</samp> getting the new Apex controller method. Very familiar.</p>
<p class="p">Next we attach a data payload to the action. This is new. We need to send the data for the new expense up to the server. But look how easy it is! You just use <samp>action.setParams()</samp> and provide a JSON-style object with parameter name-parameter value pairs. The one trick, and it’s important, is that your parameter name must match the parameter name used in your Apex method declaration.</p>
<p class="p">Next we set the callback for the request. Again, this is what will happen when the server returns a response. If you compare this callback function with our original <samp>createExpense</samp> helper function, it’s virtually identical (minus the disgusting hack). </p>
<p class="p">Just as in the prior version, we <samp>get()</samp> the <samp>expenses</samp> attribute, <samp>push()</samp> a value onto it, and then <samp>set()</samp> it. The only real difference is, instead of <samp>push()</samp>ing our local version of the new expense into the array, we’re <samp>push()</samp>ing the server’s response! </p>
<p class="p">Why does this work? Because the server-side method upserts the (in this case new) record, which stamps an ID on it, and then returns the resulting record. Once again the server-side and client-side data types match, so we don’t have to do any extra work.</p>
<p class="p">And, well, that’s it. No Rolling Stones needed!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_watch_out" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_watch_out"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Things to Watch Out For</span></h2>
<div class="body">
<p class="p">While we’ve covered all of the essentials for connecting your client-side Lightning Components code with server-side Apex code, there are a couple of things that are kind of worth pointing out <em class="ph i">before</em> they bite you in the you-know-where.</p>
<p class="p">The first issue is case sensitivity, and this boils down to Apex and Salesforce in general are case-<strong class="ph b">in</strong>sensitive, but JavaScript is case-<strong class="ph b">sensitive</strong>. That is, “Name” and “name” are the same in Apex, but different in JavaScript. </p>
<p class="p">This can and will lead to absolutely maddening bugs that are completely invisible to your eyes,
            even when they’re right in front of your face. Especially if you’ve been
            working with non-Lightning Components code on Salesforce for a while, you might no
            longer think about the case of object and field names, methods, and so on, at all.</p>
<p class="p">So here’s a best practice for you: Always use the <strong class="ph b">exact</strong> API name of every object, field, type, class, method, entity, element, elephant, or what have you. Always, everywhere, even when it doesn’t matter. That way, you won’t have problems. Or, at least, not <em class="ph i">this</em> problem.</p>
<p class="p">The other issue we’d like to draw your attention to is the nature of
            “required.” We can’t resist repeating a famous quotation: “You keep
            using that word. I do not think it means what you think it means.”</p>
<p class="p">In the code we’ve written so far we’ve seen at least two different kinds of “required.” In the
            markup for the Add Expense form, you see the word used two ways. For example, on the
            expense name field. </p>
<div class="codeblock"><pre>
        &lt;div class="slds-form-element slds-is-required"&gt;
            &lt;div class="slds-form-element__control"&gt;
                &lt;ui:inputText aura:id="expname" label="Expense Name"
                    class="slds-input"
                    labelClass="slds-form-element__label"
                    value="{!v.newExpense.Name}"
                    required="true"/&gt;
            &lt;/div&gt;
       &lt;/div&gt;
  </pre></div>
<p class="p">There’s an SLDS required class on the <samp>&lt;div&gt;</samp> wrapping it, and the <samp>&lt;ui:inputText&gt;</samp> tag has its
<samp>required</samp> attribute set to <samp>true</samp>. These both illustrate only one meaning of required, which is “set the user interface of this element to indicate the field is required.” In other words, this is cosmetic only. There’s no protection for the quality of your data here.</p>
<p class="p">Another meaning of the word “required” is illustrated in the validation logic we wrote for the same field. </p>
<div class="codeblock"><pre>
        if ($A.util.isEmpty(expname)){
            validExpense = false;
            nameField.set("v.errors", [{message:"Expense name can't be blank."}]);
        }
</pre></div>
<p class="p">The word “required” is nowhere to be seen, but that’s what the validation logic enforces. You must set a value for the expense name field. </p>
<p class="p">And, as far as it goes, this is great. <em class="ph i">Your</em> expense form won’t submit a new expense with an empty name. Unless, you know, there’s a bug. Or, maybe some other widget uses your same server-side controller, but doesn’t do its form validation so carefully. And so on. So, this is <em class="ph i">some</em> protection for your data quality, but it’s not perfect.</p>
<p class="p">How do you enforce, and we mean <em class="ph i">enforce</em>, a data integrity rule about, in this example, expense name? You do it server-side. And not just anywhere server-side. You put the rule in the field definition, or you encode it into a trigger. Or, if you’re a belt-and-suspenders kind of engineer, as all right thinking engineers are, both.</p>
<p class="p">For true data integrity, when “required” means <em class="ph i">required</em>, enforce it at the lowest level possible.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_connect_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_connect_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_init_handler.htm" target="_blank" title="HTML (New Window)">Invoking Actions
                              on Component Initialization</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_intro.htm" target="_blank" title="HTML (New Window)">Creating
                              Server-Side Logic with Controllers</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_actions_call.htm" target="_blank" title="HTML (New Window)">Calling a Server-Side
               Action</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/apex_records.htm" target="_blank" title="HTML (New Window)">Working with Salesforce
               Records</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/apex_records_save.htm" target="_blank" title="HTML (New Window)">Saving Records</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/apex_crud_fls.htm" target="_blank" title="HTML (New Window)">CRUD and Field-Level Security
               (FLS)</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_apex_custom_errors.htm" target="_blank" title="HTML (New Window)">Returning Errors from an Apex
               Server-Side Controller</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_actions_queue.htm" target="_blank" title="HTML (New Window)">Queuing of Server-Side
               Actions</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/apps_packaging_tests.htm" target="_blank" title="HTML (New Window)">Testing Your Apex
            Code</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Connect Components with Events</h1><div class="unit-content">
<body id="lex_dev_lc_basics_components_events_objectives"><a name="lex_dev_lc_basics_components_events_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Define custom events for your apps.</li>
<li class="li">Create and fire events from a component controller.</li>
<li class="li">Create action handlers to catch and handle events that other components send.</li>
<li class="li">Refactor a big component into smaller components.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_events_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_events_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Connect Components with Events</span></h2>
<div class="body">
<p class="p">In this unit we’re going to tackle the last piece of unfinished functionality in our little
      expenses app: the Reimbursed? checkbox. You’re probably thinking that implementing a checkbox
      would be a short topic. We could certainly take some shortcuts, and make it a <em class="ph i">very</em>
      short topic.</p>
<p class="p">But this unit, in addition to making the checkbox work, is about removing all of the
      shortcuts we’ve already taken. We’re going to spend this unit “Doing It Right.” Which,
      in a few places, means refactoring work we did earlier.</p>
<p class="p">Before we start on that, let’s first talk about the shortcuts we took, the Right Way, and why
      the Right Way is (a little bit) harder, but also better.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_composition_decomposition" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_composition_decomposition"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Composition and Decomposition</span></h2>
<div class="body">
<p class="p">If you take a look at our little expenses app in source code form, and list the separate code artifacts, you’ll come up with something like the following.</p>
<ul class="ul bulletList">
<li class="li">expenses component
    <ul class="ul bulletList">
<li class="li">expenses.cmp</li>
<li class="li">expensesController.js</li>
<li class="li">expensesHelper.js</li>
</ul>
</li>
<li class="li">expensesList component
    <ul class="ul bulletList">
<li class="li">expensesList.cmp</li>
</ul>
</li>
<li class="li">expenseItem component
    <ul class="ul bulletList">
<li class="li">expenseItem.cmp</li>
</ul>
</li>
<li class="li">ExpensesController (server-side)
    <ul class="ul bulletList">
<li class="li">ExpensesController.apex</li>
</ul>
</li>
</ul>
<p class="p">But, if you look at the app on screen, what do you see? What you should see, and what you’ll eventually see everywhere you look, is that the app breaks down into many more components. You’ll see that you can <em class="ph i">decompose</em> our app further, into smaller pieces, than we’ve done so far. At the very least, we hope you see that the Add Expense form really should be its own, separate component. (That’s why we drew a box around it in the user interface!)</p>
<p class="p">Why didn’t we make that form a separate component? Not doing that is by far the biggest shortcut we took over the course of this module. It’s worse than the hack we called “disgusting,” in terms of software design. The right way to build a Lightning Components app is to create independent components, and then <em class="ph i">compose</em> them together to build new, higher level features. Why didn’t we take that approach?</p>
<p class="p">We took the shortcut, we kept the Add Expense form inside the main <samp>expenses</samp> component, because it kept the main <samp>expenses</samp> array component attribute and the controller code that affected it in the same component. We wanted the <samp>createExpense()</samp> helper function to be able to touch the <samp>expenses</samp> array directly. If we’d moved the Add Expense form into a separate component, that wouldn’t have been possible.</p>
<p class="p">Why not? We covered the reason briefly very early on, but we want to really hammer on it now. Lightning components are supposed to be self-contained. They are stand-alone elements that encapsulate all of their essential functionality. A component is not allowed to reach into another component, even a child component, and alter its internals. </p>
<p class="p">There are two principal ways to interact with or affect another component. The first way is one we’ve seen and done quite a bit of already: setting attributes on the component’s tag. A component’s public attributes constitute one part of its API.</p>
<p class="p">The second way to interact with a component is through <em class="ph i">events</em>. Like attributes, components declare the events they send out, and the events they can handle. Like attributes, these public events constitute a part of the component’s public API. We’ve actually used and handled events already, but the events have been hiding behind some convenience features. In this unit, we’ll drag events out into the light, and create a few of our own.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_wiring_a_circult" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_wiring_a_circult"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>The Wiring-a-Circuit Metaphor, Yet Again</span></h2>
<div class="body">
<p class="p">These two mechanisms—attributes and events—are the API “sockets,” the
      ways you connect components together to form complete circuits. Events are also, behind the
      scenes, the electrons flowing through that circuit. But that’s only one way that events
      are different from attributes. </p>
<p class="p">When you set the <samp>press</samp> attribute on a <samp>&lt;ui:button&gt;</samp> to an action handler in a component’s controller, you create a direct relationship between those two components. They are linked, and while they’re using public APIs to remain independent of each other, they’re still coupled.</p>
<p class="p">Events are different. Components don’t send events <em class="ph i">to</em> another component. That’s not how events work. Components broadcast events of a particular type. If there’s a component that responds to that type of event, and if that component “hears” your event, then it will act on it.</p>
<p class="p">You can think of the difference between attributes and events as the difference between wired circuits and wire<strong class="ph b">less</strong> circuits. And we’re not talking wireless phones here. One component doesn’t get the “number” for another component and call it up. That would be an attribute. No, events are like wireless broadcasts. Your component gets on the radio, and sends out a message. Is there anyone out there with their radio set turned on, and tuned to the right frequency? Your component has no way of knowing—so you should write your components in such a way that it’s OK if no one hears the events they broadcast. (That is, things might not work, but nothing should crash.)</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_sending_from_component" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_sending_from_component"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Sending an Event from a Component</span></h2>
<div class="body">
<p class="p">OK, enough theory, let’s do something specific with our app, and see how events work in code. We will start by implementing the Reimbursed? checkbox. Then we’ll take what we learned doing that, and use it to refactor the Add Expense form into its own component, the way the Great Engineer intended.</p>
<p class="p">Let’s start with the <samp>expenseItem</samp> component. You
            created this component earlier, but this version includes SLDS markup to make it a
            little more stylish. It also includes conditional styling to make unreimbursed expenses
            more noticeable. Replace your version with the following markup.</p>
<div class="codeblock"><pre>
&lt;aura:component&gt;
    &lt;aura:attribute name="expense" type="Expense__c"/&gt;

    &lt;div class="slds-card"&gt;

        &lt;!-- Color the item green if the expense is reimbursed --&gt;
        &lt;div class="{!v.expense.Reimbursed__c == true ?
            'slds-theme--success' : 'slds-theme--warning'}"&gt;

            &lt;header class="slds-card__header slds-grid grid--flex-spread"&gt;
                &lt;a aura:id="expense" href="{!'/' + v.expense.Id}"&gt;
                    &lt;h3&gt;{!v.expense.Name}&lt;/h3&gt;
                &lt;/a&gt;
            &lt;/header&gt;

            &lt;section class="slds-card__body"&gt;
                &lt;div class="slds-tile slds-hint-parent"&gt;
                    &lt;p class="slds-tile__title slds-truncate"&gt;Amount:
                        &lt;ui:outputCurrency value="{!v.expense.Amount__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Client:
                        &lt;ui:outputText value="{!v.expense.Client__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Date:
                        &lt;ui:outputDate value="{!v.expense.Date__c}"/&gt;
                    &lt;/p&gt;
                    &lt;p class="slds-truncate"&gt;Reimbursed?
                        &lt;ui:inputCheckbox value="{!v.expense.Reimbursed__c}"
                            click="{!c.clickReimbursed}"/&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/aura:component&gt;
</pre></div>
<p class="p">Another new thing we have here is a click handler on the <samp>&lt;ui:inputCheckbox&gt;</samp> for the <samp>Reimbursed__c</samp> field. The <samp>click</samp>
            attribute of <samp>&lt;ui:inputCheckbox&gt;</samp> is similar to
            the <samp>press</samp> attribute of <samp>&lt;ui:button&gt;</samp>. It gives us an easy way to wire the
            checkbox to an action handler that updates the record when it’s checked or
            unchecked.</p>
<p class="p">Before we look at an implementation of the <samp>clickReimbursed</samp> handler, let’s have a think about what should happen when it’s checked or unchecked. Based on the code we wrote to create a new expense, updating an expense is probably something like this.</p>
<ol class="ol enumList">
<li class="li">Get the <samp>expense</samp> item that changed.</li>
<li class="li">Create a server action to update the event.</li>
<li class="li">Package <samp>expense</samp> into the action.</li>
<li class="li">Set up a callback to handle the response.</li>
<li class="li">Fire the action, sending the request to the server.</li>
<li class="li">When the response comes and the callback runs, update the <samp>expenses</samp> attribute.</li>
</ol>
<p class="p">Um, what <samp>expenses</samp> attribute? Look at our component
            markup again. No <samp>expenses</samp>, just a singular
                <samp>expense</samp>. Hmmm, right, this component is
            just for a single item. There’s an <samp>expenses</samp>
            attribute on the <samp>expensesList</samp> component…but
            that’s not even the “real” <samp>expenses</samp>. The real
            one is a component attribute in the top-level <samp>expenses</samp> component. Hmmm. </p>
<p class="p">Is there a <samp>component.get("v.parent")</samp>?
Or would it have to be <samp>component.get("v.parent").get("v.parent")</samp>—something that would let us get a reference to our parent’s parent, so we can set <samp>expenses</samp> there?</p>
<p class="p">Stop. Right. There.</p>
<p class="p">Components do not reach into other components and set values on them. There’s no way to say “Hey grandparent, I’m gonna update <samp>expenses</samp>.” Components keep their hands to themselves. When a component wants an ancestor component to make a change to something, it <strong class="ph b">asks</strong>. Nicely. By sending an event.</p>
<p class="p">Here’s the cool part. Sending an event looks almost the same as handling the update directly. Here’s the code for the <samp>clickReimbursed</samp> handler. </p>
<div class="codeblock"><pre>
({
    clickReimbursed: function(component, event, helper) {
        var expense = component.get("v.expense");
        var updateEvent = component.getEvent("updateExpense");
        updateEvent.setParams({ "expense": expense });
        updateEvent.fire();
    }
})
</pre></div>
<p class="p">Whoa. That’s pretty simple! And it does look kind of like what we envisioned above. The preceding code for <samp>clickReimbursed</samp> does the following:</p>
<ol class="ol enumList">
<li class="li">Gets the <samp>expense</samp> that changed.</li>
<li class="li">Creates an event named <samp>updateExpense</samp>.</li>
<li class="li">Packages <samp>expense</samp> into the event.</li>
<li class="li">Fires the event.</li>
</ol>
<p class="p">The callback stuff is missing, but otherwise this is familiar. But…what’s going to handle calling the server, and the server response, and update the main <samp>expenses</samp> array attribute? And how do we know about this <samp>updateExpense</samp> event, anyway?</p>
<p class="p"><samp>updateExpense</samp> is a custom event, that is, an event we write ourselves. You can tell because, unlike getting a server action, we use <samp>component.<strong class="ph b">getEvent</strong>()</samp> instead of <samp>component.<strong class="ph b">get</strong>()</samp>. Also, what we are getting doesn’t have a value provider, just a name. We’ll define this event in just a moment.</p>
<p class="p">As for what’s going to handle calling the server and handling the response, let’s talk about it. We could implement the server request and handle the response right here in the <samp>expenseItem</samp> component. Then we’d send an event to just rerender things that depend on the <samp>expenses</samp> array. That would be a perfectly valid design choice, and would keep the <samp>expenseItem</samp> component totally self-contained, which is desirable.</p>
<p class="p">However, as we’ll see, the code for creating a new expense and the code for updating an existing expense are very similar, enough so that we’d prefer to avoid duplicate code. So, the design choice we’ve made is to send an <samp>updateExpense</samp> event, which the main <samp>expenses</samp> component will handle. Later, when we refactor our form, we’ll do the same for creating a new expense.</p>
<p class="p">By having all child components delegate responsibility for handling server requests and for managing the <samp>expenses</samp> array attribute, we’re breaking encapsulation a bit. But, if you think of these child components as the internal implementation details of the <samp>expenses</samp> component, that’s OK. The main <samp>expenses</samp> component <em class="ph i">is</em> self-contained.</p>
<p class="p">You have a choice: consolidation of critical logic, or encapsulation. You’ll make trade-offs in Lightning Components just like you make trade-offs in any software design. Just make sure you document the details.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_defining_event" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_defining_event"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Defining an Event</span></h2>
<div class="body">
<p class="p">The first thing we’ll do is define our custom event. In the Developer Console, select <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Lightning Event</strong></span>, and name the event “expensesItemUpdate”. Replace the default
      contents with the following markup. </p>
<div class="codeblock"><pre>&lt;aura:event type="COMPONENT"&gt;
    &lt;aura:attribute name="expense" type="Expense__c"/&gt;
&lt;/aura:event&gt;</pre></div>
<p class="p">There are two types of events, component and application. Here we’re using a component event, because we want an ancestor component to catch and handle the event. An ancestor is a component “above” this one in the component hierarchy. If we wanted a “general broadcast” kind of event, where <em class="ph i">any</em> component could receive it, we’d use an application event instead.</p>
<p class="p">The full differences and correct usage of application vs. component events isn’t something we’re able to get into here. It’s a more advanced topic, and there are enough complicated details that it’s a distraction from our purpose in this module. When you’re ready for more, the Resources will help you out.</p>
<p class="p">The other thing to notice about the event is how compact the definition is. We named the event when it was created, <samp>expensesItemUpdate</samp>, and its markup is a beginning and ending <samp>&lt;aura:event&gt;</samp> tag, and one <samp>&lt;aura:attribute&gt;</samp> tag. An event’s attributes describe the payload it can carry. In the <samp>clickReimbursed</samp> action handler, we set the payload with a call to <samp>setParams()</samp>. Here in the event definition, we see how the event parameter is defined, and that there are no other valid parameters.</p>
<p class="p">And that’s pretty much all there is to defining events. You don’t add implementation or behavior details to events themselves. They’re just packages. In fact, some events don’t have any parameters at all. They’re just messages. “This happened!” All of the behavior about what to do if “this” happens is defined in the components that send and receive the event.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_sending_event" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_sending_event"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Sending an Event</span></h2>
<div class="body">
<p class="p">We already looked at how to actually <em class="ph i">fire</em> an event, in the <samp>clickReimbursed</samp> action handler. But for that to work, we need to do one last thing, and that’s register the event. Add this line of markup to the <samp>expenseItem</samp> component, right below its attribute definitions.</p>
<div class="codeblock"><pre>
    &lt;aura:registerEvent name="updateExpense" type="c:expensesItemUpdate"/&gt;
</pre></div>
<p class="p">This markup says that our component fires an event, named “updateExpense”, of type “c:expensesItemUpdate”. But, wasn’t “expensesItemUpdate” the <em class="ph i">name</em> of the event when we defined it? And what happened to component or application event <em class="ph i">types</em>?</p>
<p class="p">You’re right to think it’s a little confusing—it really is a bit of a switch-a-roo. It might help to think of “application” and “component” as Lightning Components <em class="ph i">framework</em> event types, while the types that come from the names of events you define are custom event types, or event <em class="ph i">structure</em> types. That is, when you define an event, you define a package format. When you register to send an event, you declare what format it uses.</p>
<p class="p">The process of defining and registering an event might still seem a bit weird, so let’s look ahead a bit. Here in <samp>expenseItem</samp>, we’re going to send an event named <samp>updateExpense</samp>. Later in <samp>expenseForm</samp>, we’re going to send an event named <samp>createExpense</samp>. Both of these events need to include an expense to be saved to the server. And so they both use the <samp>c:expensesItemUpdate</samp> event type, or package format, to send their events.</p>
<p class="p">On the receiving end, our main <samp>expenses</samp> component is going to register to handle <em class="ph i">both</em> of these events. Although the server call ends up being the same, the user interface updates are slightly different. So how does <samp>expenses</samp> know whether to create or update the expense in the <samp>c:expensesItemUpdate</samp> package? By the <em class="ph i">name</em> of the event being sent.</p>
<p class="p">Understanding the distinction here, and how one event can be used for multiple purposes, is a light bulb moment in learning Lightning Components. If you haven’t had that moment quite yet, you’ll have it when you look at the rest of the code.</p>
<p class="p">Before we move on to handling events, let’s summarize what it takes to send them. </p>
<ol class="ol enumList">
<li class="li">Define a custom event by creating a Lightning Event, giving it a name and attributes.</li>
<li class="li">Register your component to send these events, by choosing a custom event type and giving this specific use of that type a name.</li>
<li class="li">Fire the event in your controller (or helper) code by:
      <ol class="ol enumList" type="a">
<li class="li">Using <samp>component.getEvent()</samp> to create a specific event instance.</li>
<li class="li">Sending the event with <samp>fire()</samp>.</li>
</ol>
</li>
</ol>
<p class="p">If you went ahead and implemented all of the code we just looked at, you can test it out. Reload your app, and toggle a Reimbursed?
  checkbox a few times. If you missed a step, you’ll get an error, and you should recheck your work. If you did everything right…hey, wait, the expense changes color to show its Reimbursed? status, just as expected!</p>
<p class="p">This behavior was present before we even started this unit. That’s the effect of the <samp>&lt;ui:inputCheckbox&gt;</samp> component having <samp>value="{!v.expense.Reimbursed__c}"</samp> set. When you toggle the checkbox, the <em class="ph i">local</em> version of the <samp>expense</samp> is updated. But that change isn’t being sent up to the server. If you look at the expense record in Salesforce, or reload the app, you won’t see the change.</p>
<p class="p">Why not? We’ve only done <em class="ph i">half</em> of the work to create a complete circuit for our event. We have to finish wiring the circuit by creating the event handler on the other side. That event handler will take care of sending the change to the server, and making the update durable.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_handling" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_handling"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Handling an Event</span></h2>
<div class="body">
<p class="p">Enabling the <samp>expenseItem</samp> component to send an event required three steps. Enabling the <samp>expenses</samp> component to receive and handle these events requires three parallel steps.</p>
<ol class="ol enumList">
<li class="li">Define a custom event. We’ve already done this, because <samp>expenseItem</samp> is sending the same custom event that <samp>expenses</samp> is receiving.</li>
<li class="li">Register the component to handle the event. This maps the event to an action handler.</li>
<li class="li">Actually handle the event in an action handler.</li>
</ol>
<p class="p">Since we’ve already done step 1, let’s immediately turn to step 2, and register <samp>expenses</samp> to receive and handle the <samp>updateExpense</samp> event. Like registering to send an event, registering to handle one is a single line of markup, which you should add to the <samp>expenses</samp> component right after the init handler. </p>
<div class="codeblock"><pre>
     &lt;aura:handler name="updateExpense" event="c:expensesItemUpdate"
        action="{!c.handleUpdateExpense}"/&gt;
</pre></div>
<p class="p">Like the init handler, this uses the <samp>&lt;aura:handler&gt;</samp> tag, and has an <samp>action</samp> attribute that sets the controller action handler for the event. Like when you registered the event in <samp>expenseItem</samp>, here you set the name and type of the event—though note the use of the much more sensibly named <samp>event</samp> attribute for the type.</p>
<p class="p">In other words, there’s not much here you haven’t seen before. What’s new, and specific to handling custom events, is the combination of the attributes, and knowing how this receiver “socket” in <samp>expenses</samp> matches up with the sender “socket” in <samp>expenseItem</samp>. </p>
<p class="p">This completes the wiring part of making this work. All that’s left is to actually write the action handler! </p>
<p class="p">We’ll start with the <samp>handleUpdateExpense</samp> action handler. Here’s the code, and be sure to put it riiiiiight under the <samp>handleCreateExpense</samp> action handler. </p>
<div class="codeblock"><pre>
    handleUpdateExpense: function(component, event, helper) {
        var updatedExp = event.getParam("expense");
        helper.updateExpense(component, updatedExp);
    }
</pre></div>
<p class="p">Huh. That’s interesting. Except for the form validation check and the specific helper function we’re delegating the work to, it looks like this action handler is the same as <samp>handleCreateExpense</samp>.</p>
<p class="p">And now let’s add the <samp>updateExpense</samp> helper function. As we did with the action handler, make sure you put this code right below the <samp>createExpense</samp> helper function.</p>
<div class="codeblock"><pre>
    updateExpense: function(component, expense) {
        var action = component.get("c.saveExpense");
        action.setParams({
            "expense": expense
        });
        action.setCallback(this, function(response){
            var state = response.getState();
            if (component.isValid() &amp;&amp; state === "SUCCESS") {
                // do nothing!
            }
        });
        $A.enqueueAction(action);
    },
</pre></div>
<p class="p">Two things you should notice right off the bat. First, except for the callback specifics, the <samp>updateExpense</samp> helper method is identical to the <samp>createExpense</samp> helper method. That smells like opportunity.</p>
<p class="p">Second, about those callback specifics. What gives? How can the right thing to do be <em class="ph i">nothing</em>?</p>
<p class="p">Think about it for a moment. Earlier, when testing sending the event (if not before), we saw that the <samp>expenseItem</samp> component’s color changed in response to toggling the Reimbursed? checkbox. Remember the explanation? The local copy of the expense record is <em class="ph i">already updated!</em> So, at least for the moment, when the server tells us it was successful at updating its version, we don’t have to do anything.</p>
<p class="p">Note that this code only handles the case where the server is <em class="ph i">successful</em> at updating the expense record. We’d definitely have some work to do if there was an error. Say, Accounting flagged this expense as non-reimbursable, making it impossible to set this field to <samp>true</samp>. But that, as they say, is a lesson for another day.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_refactor_helper_functions" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_refactor_helper_functions"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Refactor the Helper Functions</span></h2>
<div class="body">
<p class="p">Let’s go back to that opportunity we saw to factor out some common code. The two helper functions are identical except for the callback. So, let’s make a new, more generalized function that takes the callback as a parameter. </p>
<div class="codeblock"><pre>
    saveExpense: function(component, expense, callback) {
        var action = component.get("c.saveExpense");
        action.setParams({
            "expense": expense
        });
        if (callback) {
            action.setCallback(this, callback);
        }
        $A.enqueueAction(action);
    },
</pre></div>
<p class="p">The <samp>callback</samp> parameter is optional. If it’s there, we’ll pass it along to <samp>action</samp>. Simple. And now we can reduce our event-specific helper functions to the following code. </p>
<div class="codeblock"><pre>
    createExpense: function(component, expense) {
        this.saveExpense(component, expense, function(response){
            var state = response.getState();
            if (component.isValid() &amp;&amp; state === "SUCCESS") {
                var expenses = component.get("v.expenses");
                expenses.push(response.getReturnValue());
                component.set("v.expenses", expenses);
            }
        });
    },

    updateExpense: function(component, expense) {
        this.saveExpense(component, expense);
    },
</pre></div>
<p class="p"><samp>createExpense</samp> is only a little shorter, but it’s exclusively focused on what to do when the response comes back (the callback). And wow, <samp>updateExpense</samp> is a one-liner!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_refactor_add_expense_form" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_refactor_add_expense_form"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Refactor the Add Expense Form</span></h2>
<div class="body">
<p class="p">That little refactoring exercise was so satisfying, and using events was so (we’re sorry) electrifying, let’s do it again, but bigger. <em class="ph i">More cowbell!</em></p>
<p class="p">This next task involves extracting the Add Expense form from the expenses component, and moving it to its own, new component. Extracting the form markup is easy enough, a simple copy-and-paste exercise. But what else moves with it? Before we start moving pieces around willy-nilly, let’s think about what moves and what stays.</p>
<p class="p">In the current design, the form’s action handler, <samp>clickCreateExpense</samp>, handles input validation, sending the request to the server, and updating local state and user interface elements. The form will still need an action handler, and should probably still handle form validation. But we’ll plan on having the rest stay behind, because we’re keeping our server request logic consolidated in the <samp>expenses</samp> component. </p>
<p class="p">So there’s a little (but only a little!) teasing apart to do there. Our plan, then, is to start by moving the form markup, and then move as little as possible after that to make it work correctly. We’ll refactor both components to communicate via events, instead of via direct access to the <samp>expenses</samp> array component attribute.</p>
<p class="p">Let’s get started!</p>
<p class="p">In the main <samp>expenses</samp> component, select everything between the two <samp>&lt;!-- CREATE NEW EXPENSE --&gt;</samp> comments, including the beginning and ending comments themselves. Cut it to your clipboard. (Yes, <em class="ph i">cut</em>. We’re committed.)</p>
<p class="p">Create a new Lightning component, and name it “expenseForm”. Paste the copied Add Expense form markup into the new component, between the <samp>&lt;aura:component&gt;</samp> tags.</p>
<p class="p">Back to the <samp>expenses</samp> component. Add the new <samp>expenseForm</samp> component to the markup. That section of <samp>expenses</samp> should look like this. </p>
<div class="codeblock"><pre>
    &lt;!-- NEW EXPENSE FORM --&gt;
    &lt;div class="slds-col slds-col--padded slds-p-top--large"&gt;

        &lt;c:expenseForm/&gt;

    &lt;/div&gt;
    &lt;!-- / NEW EXPENSE FORM --&gt;
</pre></div>
<p class="p">At this point, you can reload your app to see the changes. There should be no <em class="ph i">visible</em> changes. But, unsurprisingly, the Create Expense button no longer works. </p>
<p class="p">Let’s get quickly through the rest of the moving things around part.</p>
<p class="p">Next, move the <samp>newExpense</samp> attribute from the <samp>expenses</samp> component to the <samp>expenseForm</samp> component markup. This is used for the form fields, so it needs to be in the form component. It moves over with no changes required, so just cut from one and paste in the other.</p>
<p class="p">In the <samp>expenseForm</samp> component, create the controller and helper resources. </p>
<p class="p">Move the <samp>clickCreateExpense</samp> action handler from the <samp>expenses</samp> controller to the <samp>expenseForm</samp> controller. The button is in the form component, and so the action handler for the button needs to be there, too. Believe it or not, this also needs no changes. (You might begin sensing a theme here.)</p>
<p class="p">Move the <samp>validateExpenseForm</samp> function from the <samp>expenses</samp> helper to the <samp>expenseForm</samp> helper. Again, no changes required.</p>
<p class="p">Now we need to make a couple of actual changes. But these will be familiar, because we’re just adding event sending, which we did before for <samp>expenseItem</samp>. <samp>expenseItem</samp>, you’ll recall, also sends an event with an <samp>expense</samp> payload, which is handled by the <samp>expenses</samp> component.</p>
<p class="p">In the <samp>expenseForm</samp> helper, create the <samp>createExpense</samp> function. </p>
<div class="codeblock"><pre>
    createExpense: function(component, newExpense) {
        var createEvent = component.getEvent("createExpense");
        createEvent.setParams({ "expense": newExpense });
        createEvent.fire();
    },
</pre></div>
<p class="p">This looks very much like the <samp>clickReimbursed</samp> action handler in <samp>expenseItem</samp>.</p>
<p class="p">If a component is going to send an event, it needs to register the event. Add the following to the <samp>expenseForm</samp> component markup, just below the <samp>newExpense</samp> attribute. </p>
<div class="codeblock"><pre>
    &lt;aura:registerEvent name="createExpense" type="c:expensesItemUpdate"/&gt;
</pre></div>
<p class="p">At this point, we’ve done all the work to implement the <samp>expenseForm</samp> component. You should be able to reload the app, and the form now “works” in the sense that there are no errors, and you should see the appropriate form messages when you enter invalid data. If you’re using the Salesforce Lightning Inspector, you can even see that the <samp>expensesItemUpdate</samp> event is being fired. All that’s left is to handle it.</p>
<p class="p">Before we handle the event, please do notice how easy this refactoring was. Most of the code didn’t change. There’s a total of six lines of new code and markup in the preceding steps. It’s unfamiliar to do this work today, but do it a few times, and you realize that you’re just moving a bit of code around. </p>
<p class="p">OK, let’s finish this. The <samp>expenseForm</samp> fires the <samp>createExpense</samp> event, but we also need the <samp>expenses</samp> component to catch it. First we register the <samp>createExpense</samp> event handler, and wire it to the <samp>handleCreateExpense</samp> action handler. Once again, this is a single line of markup. Add this line right above or below the <samp>updateExpense</samp> event handler. </p>
<div class="codeblock"><pre>
    &lt;aura:handler name="createExpense" event="c:expensesItemUpdate"
        action="{!c.handleCreateExpense}"/&gt;
</pre></div>
<p class="p">Finally, for the last step, create the <samp>handleCreateExpense</samp> action handler in the <samp>expenses</samp> controller. Add this code right above or below the handleUpdateExpense action handler. </p>
<div class="codeblock"><pre>
    handleCreateExpense: function(component, event, helper) {
        var newExpense = event.getParam("expense");
        helper.createExpense(component, newExpense);
    },
</pre></div>
<p class="p">Yep, that simple. All of the work is delegated to the <samp>createExpense</samp> helper function, and that didn’t move or change. Our <samp>handleCreateExpense</samp> action handler is just there to wire the right things together.</p>
<p class="p">And with that, we’re finished showing how to loosely couple components using events. Create and fire the event in one component, catch and handle it in another. Wireless circuits!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_components_events_bonus_lesson_minor_visual_improvements" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_components_events_bonus_lesson_minor_visual_improvements"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Bonus Lesson—Minor Visual Improvements</span></h2>
<div class="body">
<p class="p">Before we head off into the sunset, or rather, the challenge, here are two modest visual improvements. </p>
<p class="p">First, have you noticed that the little calendar icon for our <samp>&lt;ui:inputDate&gt;</samp> form field is off in left field?</p>
<p class="p"><div class="imageleft"><span class="image image-block"><img alt="little calendar icon for our ui input data form field in the left field" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usedf9d13ebeb7cab01ae4c50ce3fa0a4e.png"/></span></div></p>
<p class="p">No joke, the placement of that icon has been driving your humble author nuts this entire module. If it’s been bothering you, too, here’s how to fix it. (We held off on having you do this until we’d refactored the form into its own component.) In the <samp>expenseForm</samp> component, add a style resource by clicking the <strong class="ph b">STYLE</strong> button. Replace the default style rules with the following. </p>
<div class="codeblock"><pre>
.THIS .uiInputDate .datePicker-openIcon {
    position: absolute;
    left: 95%;
    top: 55%;
}
</pre></div>
<p class="p">Reload the app for sweet, sweet relief. </p>
<p class="p">Last, we’d like to improve the layout of our app a little bit, by adding some more SLDS markup. This last bit also gives you an opportunity to see the full <samp>expense</samp> component after all our changes. In the <samp>expense</samp> component, replace all of the markup with the following. </p>
<div class="codeblock"><pre>
&lt;aura:component controller="ExpensesController"&gt;

    &lt;aura:attribute name="expenses" type="Expense__c[]"/&gt;

    &lt;aura:handler name="init" action="{!c.doInit}" value="{!this}"/&gt;
    &lt;aura:handler name="createExpense" event="c:expensesItemUpdate"
        action="{!c.handleCreateExpense}"/&gt;
    &lt;aura:handler name="updateExpense" event="c:expensesItemUpdate"
        action="{!c.handleUpdateExpense}"/&gt;

    &lt;!-- PAGE HEADER --&gt;
    &lt;div class="slds-page-header" role="banner"&gt;
      &lt;div class="slds-grid"&gt;
        &lt;div class="slds-col"&gt;
          &lt;p class="slds-text-heading--label"&gt;Expenses&lt;/p&gt;
          &lt;h1 class="slds-text-heading--medium"&gt;My Expenses&lt;/h1&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- / PAGE HEADER --&gt;

    &lt;!-- NEW EXPENSE FORM --&gt;
    &lt;div class="slds-col slds-col--padded slds-p-top--large"&gt;

        &lt;c:expenseForm/&gt;

    &lt;/div&gt;
    &lt;!-- / NEW EXPENSE FORM --&gt;

    &lt;!-- EXISTING EXPENSES --&gt;
    &lt;div class="slds-grid slds-m-top--large"&gt;

        &lt;!-- EXPENSES LIST --&gt;
        &lt;div class="slds-col slds-col-rule--right slds-p-around--small
            slds-size--8-of-12"&gt;
            &lt;c:expensesList expenses="{!v.expenses}"/&gt;
        &lt;/div&gt;
        &lt;!-- / EXPENSES LIST --&gt;

        &lt;!-- SOMETHING COOL --&gt;
        &lt;div class="slds-col slds-p-left--large slds-size--4-of-12"&gt;
            &lt;!-- Bonus lesson, coming soon.
                 Watch this space for details. --&gt;
        &lt;/div&gt;
        &lt;!-- / SOMETHING COOL --&gt;

    &lt;/div&gt;
    &lt;!-- / EXISTING EXPENSES --&gt;

&lt;/aura:component&gt;
</pre></div>
<p class="p">The effects of the changes are to add some margins and padding, and make the expenses list more narrow. The layout leaves room to put something over there on the right. In the next unit, we’ll suggest a couple of exercises you could do on your own.</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_events_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_events_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading12">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_intro.htm" target="_blank" title="HTML (New Window)">Communicating with
               Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_and_actions.htm" target="_blank" title="HTML (New Window)">Actions and Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_client_side_controller.htm" target="_blank" title="HTML (New Window)">Handling Events with
               Client-Side Controllers</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_init_handler.htm" target="_blank" title="HTML (New Window)">Invoking Actions on Component
               Initialization</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_data_change.htm" target="_blank" title="HTML (New Window)">Detecting Data
            Changes</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_component.htm" target="_blank" title="HTML (New Window)">Component Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_component_handling_intro.htm" target="_blank" title="HTML (New Window)">Handling Component
               Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_show_hide_markup.htm" target="_blank" title="HTML (New Window)">Dynamically Showing or Hiding
               Markup</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_application.htm" target="_blank" title="HTML (New Window)">Application Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_application_handling.htm" target="_blank" title="HTML (New Window)">Handling Application
               Events</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_overview.htm" target="_blank" title="HTML (New Window)">Event Handling
            Lifecycle</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_demo.htm" target="_blank" title="HTML (New Window)">Advanced Events
            Example</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b5b4046436dfc6a34ed6fe5ecfd3df7.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Lightning Experience. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Lightning Experience</a> to complete
            this challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Discover Next Steps</h1><div class="unit-content">
<body id="lex_dev_lc_basics_discover_objectives"><a name="lex_dev_lc_basics_discover_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">List five aspects of Lightning Components that you can explore in more
                    depth.</li>
<li class="li">Plan three improvements you could make to the Expenses app.</li>
<li class="li">Earn. This. Badge!</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_next_steps_congratulations" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_next_steps_congratulations"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Congratulations!</span></h2>
<div class="body">
<p class="p">You made it! We are thrilled for you, impressed by you, and proud of you. Seriously, this
            is a hard module, and earning this badge says a lot. Congratulations!</p>
<p class="p">This unit’s challenge is all that stands between you and that badge, and after all
            the effort you’ve put in so far, we’re making this one easy. But, please
            don’t skip ahead! While this unit is “easy” in the challenge sense, if
            you want to be successful as a Lightning Components developer, this unit is every bit as
            important as all of the others.</p>
<p class="p">The Lightning Components Basics module teaches the fundamentals of developing apps with
            Lightning Components, but it’s just the start. As long as this module has been to
            this point, there’s actually more to learn still ahead of you. At least, if you
            want to become a Lightning Components master.</p>
<p class="p">In this unit we’ll cover two topics. First, we’ll provide a survey of the
            kinds of things we didn’t have space to cover in this module, along with pointers
            for where you can start to learn about them. And after that we’ll suggest a couple
            of homework-style projects you could take on. There’s a number of
            “obvious” additions to our little expenses app that you could try to do
            yourself. The best way to learn is by doing!</p>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_discover_what_we_skimmed_over_zipped_past" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_discover_what_we_skimmed_over_zipped_past"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>What We Skimmed Over or Zipped Past</span></h2>
<div class="body">
<p class="p">As we were building the expenses app we had to say “we’re not going to cover this here” more times than we can count. We hated every one of them, and you probably did, too. But we believed you would hate us more if we filled up this module to eight hours or more. </p>
<p class="p"><strong class="ph b">Salesforce Lightning Design System</strong></p>
<p class="p">The SLDS is a robust, flexible, and comprehensive system for implementing the Lighting Experience style in your apps. You can use it in Lightning Components, Visualforce, and even in plain markup. A writer on the Salesforce documentation team used it to create prototypes of…wait, we can’t tell you about that yet. </p>
<p class="p">SLDS is fun to learn, and even more fun to use. There’s a Trailhead module dedicated to it (using Visualforce), and number of Trailhead projects that illustrate its use. And there’s a <em class="ph i">wowza</em> web site dedicated to getting it into people’s hands.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/module/lightning_design_system" target="_blank" title="HTML (New Window)">Lightning Design
                    System</a> module</li>
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/project/slds-lightning-components-workshop" target="_blank" title="HTML (New Window)">Build a Lightning App with
                    the Lightning Design System</a> project</li>
<li class="li"><a class="xref" href="http://www.lightningdesignsystem.com/" target="_blank" title="HTML (New Window)">Salesforce Lightning Design System</a> site</li>
</ul>
<p class="p"><strong class="ph b">Where You Can Use Lightning Components</strong></p>
<p class="p">We blazed through this topic in a flurry of screenshots, and we never looked back. But Lightning Components can be used in many, many ways within Salesforce, and even outside of it. </p>
<p class="p">In particular, we spent all of our time building a stand-alone “my.app”. You’ll definitely want to learn how to add your apps to Salesforce1 and Lighting Experience. The good news is that it’s so easy, it’s going to make you wonder why we didn’t cover it. (Read on, partner.)</p>
<p class="p">The Lightning Components Developer Guide is the best source of information about where and how you can use your Lightning Components apps.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_add_cmp_salesforce1.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Salesforce1</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_add_cmp_lex.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Lightning Experience</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_config_for_app_builder.htm" target="_blank" title="HTML (New Window)">Configure Components for
                    Lightning Pages and the Lightning App Builder</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_config_for_builder.htm" target="_blank" title="HTML (New Window)">Configure Components for
                    Communities</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_visualforce.htm" target="_blank" title="HTML (New Window)">Use Lightning Components
                    in Visualforce Page</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/lightning_out.htm" target="_blank" title="HTML (New Window)">Add Lightning Components
                    to Any App with Lightning Out</a></li>
</ul>
<p class="p"><strong class="ph b">Debugging</strong></p>
<p class="p">We covered only the most primitive debugging techniques. Learning to debug your Lightning Components apps, using several different sophisticated tools for doing so, is something that will pay dividends, in the form of hours of your life back, and hair not pulled out. </p>
<p class="p">In particular, we recommend learning Chrome’s rich DevTools suite, and the Salesforce Lightning
            Inspector that works within it. Apex developers will also want to learn about the
            debugging tools available for Apex, many of them directly in the Developer Console.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.chrome.com/devtools" target="_blank" title="HTML (New Window)">Google Chrome DevTools</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/inspector_intro.htm" target="_blank" title="HTML (New Window)">Salesforce Lightning
                    Inspector Chrome Extension</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/debug_intro.htm" target="_blank" title="HTML (New Window)">Lightning Components
                    Debugging</a></li>
</ul>
<p class="p"><strong class="ph b">Data Types</strong></p>
<p class="p">We briefly mentioned that there are some “framework-specific” data types you can use
            for attributes. Chiefly these are used for facets, in particular the <samp>body</samp> facet. And we deliberately skipped facets,
            especially <samp>body</samp>, because they’re
            complicated, and they’re not essential for basic Lightning Components development.
            You’ll want to learn all about these concepts eventually, though, because being
            able to set a component’s <samp>body</samp> (or other
            facets) is a powerful technique that can save you a lot of code and awkwardness.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_aura_attribute.htm" target="_blank" title="HTML (New Window)">Supported aura:attribute
                    Types</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_body.htm" target="_blank" title="HTML (New Window)">Component Body</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_facets.htm" target="_blank" title="HTML (New Window)">Component
                Facets</a></li>
</ul>
<p class="p"><strong class="ph b">Helpers</strong></p>
<p class="p">You wrote a fair bit of helper code in this module, but there are some advanced uses of helpers that are worth knowing. Since helpers are the chief way you share reusable code, it’s an important area to explore.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_helper.htm" target="_blank" title="HTML (New Window)">Sharing JavaScript Code in
                    a Component Bundle</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_intro.htm" target="_blank" title="HTML (New Window)">Using
                JavaScript</a></li>
</ul>
<p class="p"><strong class="ph b">Server Request Lifecycle and Handling</strong></p>
<p class="p">We covered how to make a server request using <samp>$A.enqueueAction()</samp> and how to handle a successful response. There are other possibilities, and you really need to know how to handle them. There are also many different <em class="ph i">kinds</em> of requests, and using the right one can significantly improve your app’s performance in some cases.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_intro.htm" target="_blank" title="HTML (New Window)">Creating Server-Side Logic
                    with Controllers</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_actions_call.htm" target="_blank" title="HTML (New Window)">Calling a Server-Side
                    Action</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_actions_queue.htm" target="_blank" title="HTML (New Window)">Queuing of Server-Side
                    Actions</a></li>
</ul>
<p class="p"><strong class="ph b">Security, Security, Security, Security</strong></p>
<p class="p">We lectured earlier, so we won’t here. But there’s a lot to know.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/Lightning_Security" target="_blank" title="HTML (New Window)">Lightning Security</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/apex_crud_fls.htm" target="_blank" title="HTML (New Window)">CRUD and Field-Level
                    Security (FLS)</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/Enforcing_CRUD_and_FLS" target="_blank" title="HTML (New Window)">Enforcing CRUD and FLS</a></li>
</ul>
<p class="p"><strong class="ph b">Application Events</strong></p>
<p class="p">We mentioned these, and they’re important for larger apps. And while we covered event basics, there’s a lot to learn about them. You can’t build sophisticated apps with Lightning Components without learning all about events.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_application.htm" target="_blank" title="HTML (New Window)">Application
                Events</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_intro.htm" target="_blank" title="HTML (New Window)">Communicating with
                    Events</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_best_practices.htm" target="_blank" title="HTML (New Window)">Events Best
                    Practices</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_anti_patterns.htm" target="_blank" title="HTML (New Window)">Events
                    Anti-Patterns</a></li>
</ul>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_discover_what_we_didnt_cover_at_all" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_discover_what_we_didnt_cover_at_all"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>What We Didn’t Cover At All</span></h2>
<div class="body">
<p class="p">There’s also a number of topics we simply didn’t mention. Some of these are complex, some are advanced, and some are both. We’re listing a few here for your consideration.</p>
<p class="p"><strong class="ph b">Other Bundle Resource Types</strong></p>
<p class="p">We covered the four core Lightning Components bundle resource types. There are four others. While the Design and SVG resources have somewhat specialized purposes, the Documentation and Renderer resources are potentially useful in any Lightning component.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_bundle.htm" target="_blank" title="HTML (New Window)">Component
                Bundles</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_documentation.htm" target="_blank" title="HTML (New Window)">Providing Component
                    Documentation</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_renderers.htm" target="_blank" title="HTML (New Window)">Client-Side Rendering to
                    the DOM</a></li>
</ul>
<p class="p"><strong class="ph b">Navigation</strong></p>
<p class="p">You would be forgiven for thinking this is fundamental. In any complex, real-world app it is. And in many cases, if you’re running inside of Lightning Experience or Salesforce1, developing navigation is actually pretty easy. But, see the next item.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/url_nav.htm" target="_blank" title="HTML (New Window)">URL-Centric
                    Navigation</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_force_navigateToURL.htm" target="_blank" title="HTML (New Window)">force:navigateToURL</a></li>
</ul>
<p class="p"><strong class="ph b">Dynamically Creating Components</strong></p>
<p class="p">One of the principal ways of “navigating” within your Lightning Components apps is to create new components dynamically, in response to user actions. This whole area is rich and powerful, and complex enough that you’d be slogging away at this module for a week. We’ll give you a search term and you can start to explore: <samp>$A.createComponent()</samp>.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_cb_dynamic_cmp_async.htm" target="_blank" title="HTML (New Window)">Dynamically Creating
                    Components</a></li>
</ul>
<p class="p"><strong class="ph b">Error Handling</strong></p>
<p class="p">There’s handling server errors, and there’s handling errors that are purely client-side. For the purposes of this module, we assumed you’d always be successful. Sadly, in the real world, bugs and <em class="ph i">weird</em> both happen with alarming reliability. The Great Engineer said it best: Anything that <em class="ph i">can</em> go wrong, <em class="ph i">will</em> go wrong. So you might as well plan to handle and recover from errors as best you can.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_throw_error.htm" target="_blank" title="HTML (New Window)">Throwing and Handling
                    Errors</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/js_validate_fields.htm" target="_blank" title="HTML (New Window)">Validating
                Fields</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/controllers_server_apex_custom_errors.htm" target="_blank" title="HTML (New Window)">Returning Errors from an
                    Apex Server-Side Controller</a></li>
</ul>
<p class="p"><strong class="ph b"><samp>force:</samp> Namespace Components and Events</strong></p>
<p class="p">When your Lightning Components app runs inside Lightning Experience and Salesforce1, there
            are a number of really cool components and events you can use. Some of these components
            work in other contexts, but many of them are only easy-to-use in Lightning Experience
            and Salesforce1, and so we didn’t look at them.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/aura_compref.htm" target="_blank" title="HTML (New Window)">Component Reference</a>
                (see the <samp>force:</samp> items)</li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_events.htm" target="_blank" title="HTML (New Window)">Event Reference</a>
                (see the <samp>force:</samp> items)</li>
</ul>
<p class="p"><strong class="ph b">System Events</strong></p>
<p class="p">Technically we touched on this, in the form of init handlers, but we didn’t explain that the init event is one of a suite of system events that you can catch during the component or app lifecycle. (For that matter, we didn’t talk about that lifecycle, either.) There’s a bunch of them, and you can use them to have your components “do something” at specific points in their existence, or to handle specific situations.</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_system.htm" target="_blank" title="HTML (New Window)">System Events</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/events_overview.htm" target="_blank" title="HTML (New Window)">Event Handling
                    Lifecycle</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/components_lifecycle.htm" target="_blank" title="HTML (New Window)">Events Fired During the
                    Rendering Lifecycle</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.lightning.meta/lightning/ref_events_aura.htm" target="_blank" title="HTML (New Window)">System Event
                    Reference</a></li>
</ul>
</div>
</div>
<div class="topic nested0" id="lex_dev_lc_basics_discover_exercises_adventurous" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lex_dev_lc_basics_discover_exercises_adventurous"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Exercises for the Adventurous</span></h2>
<div class="body">
<p class="p">We hope we’ve whet your appetite for more Lightning Components learning. Here’s a couple of ideas we have for things you could do with the Expenses app that would make for interesting exploration, and that fit naturally with what you just learned.</p>
<p class="p"><strong class="ph b">Clear the Form After Submission</strong></p>
<p class="p">Right now when you click the Create Expense button, the form stays filled in. It’s not hard to set the fields to empty strings…but when should you do it? Think about the behavior you want, about usability, and about the various possibilities in terms of server responses. (That is, besides SUCCESS.) </p>
<p class="p">Once you decide on behavior, where do you put the code? It sounds easy, at first, and then you realize the server response handling is in <samp>expenses</samp>, and the form fields are in <samp>expenseForm</samp>. What does this sound like a job for?</p>
<p class="p"><strong class="ph b">Display an “Expense Saved” Message</strong></p>
<p class="p">When your expense is successfully saved to the server, it would be nice to show the user a little success message. And maybe the message is different for updating the Reimbursed? checkbox vs. creating a new expense. Or, maybe sometimes you don’t show a message at all.</p>
<p class="p"><strong class="ph b">Handle Failure</strong></p>
<p class="p">What happens if a data validation rule on a field prevents you from saving a record on the server? Or some other error happens? Right now, nothing; the app silently fails. For the Reimbursed? checkbox, the app can show an incorrect state for the expense. Both of these are bad!</p>
<p class="p">Dealing with simple failures isn’t actually that many lines of code. But you’ll need to do some reading before you start. </p>
<p class="p"><strong class="ph b">Allow Expense Record Editing</strong></p>
<p class="p">This one is kind of advanced, but you can tackle it in stages. First, when you click on an expense in the expense list, have the form fill in with the appropriate expense values. Then have it change the text of the Create Expense button to Save Expense. (Don’t cheat and have it say Save Expense all the time!) Then change the event that the form fires to update the existing expense instead of creating a new one.</p>
<p class="p">And, with that, we’ll leave you for today. Congratulations again, and we hope you’ll find
            fame, fortune, and excitement in your Lightning Components app development
            adventure!</p>
</div>
</div>
</body></div><h1>Introduction to Salesforce Connect</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_introduction_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_introduction_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Explain what Salesforce Connect is.</li>
<li class="li">Describe two typical use cases for Salesforce Connect.</li>
<li class="li">Explain how Salesforce Connect differs from extract, transform, and load (ETL) tools.</li>
<li class="li">Explain how external objects differ from standard and custom objects.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_overview" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_overview"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Overview of Salesforce Connect</span></h2>
<div class="body">
<p class="p">Salesforce Connect is a framework that enables you to view, search, and modify data that’s
                        stored outside your Salesforce
                        org. For example, perhaps you have data that’s
                    stored on premises in an enterprise resource planning (ERP) system. Instead of
                    copying the data into your org, you can use external objects to access the data
                    in real time via web service callouts.</p>
<p class="p">Salesforce Connect lets your Salesforce org
                        access data from a wide variety of external systems. You can integrate
                        tables from SAP® NetWeaver Gateway, Microsoft Dynamics® NAV, and
                        many other data sources in real time without writing a single line of code.
                        Previously, the only way to integrate external data with Salesforce was
                        to use extract, transform, and load (ETL) tools. That process is time
                        consuming and requires you to copy data into your org that you might never
                        use or quickly becomes stale. In contrast, Salesforce Connect maps data tables in external systems to external objects in your org. </p>
<p class="p">External objects are similar to custom objects, except that they map to data
                        located outside your Salesforce
                        org. External object data is always up to date. Salesforce Connect provides a live connection to external data rather than a copy that
                        consumes storage and must be regularly synced. Accessing an external object
                        fetches the data from the external system in real time.</p>
<div class="p">We recommend that you use Salesforce Connect if most of these conditions apply.<ul class="ul bulletList">
<li class="li">You have a large amount of data that you don’t want to copy into
                                        your Salesforce org.</li>
<li class="li">You need small amounts of data at any one time. </li>
<li class="li">You need real-time access to the latest data.</li>
<li class="li">You store your data in the cloud or in a back-office system, but
                                        want to display or process that data in your Salesforce org.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_external_objects" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_external_objects"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>External Objects vs. Custom Objects</span></h2>
<div class="body">
<p class="p">External objects share much of the same functionality as custom objects. For
                        example, you can:</p>
<ul class="ul bulletList">
<li class="li">Access external objects via list views, detail pages, record feeds,
                                custom tabs, and page layouts.</li>
<li class="li">Define relationships between external objects and standard or custom
                                objects to integrate data from different sources.</li>
<li class="li">Enable Chatter feeds on external object pages for collaboration.</li>
<li class="li">Enable create, edit, and delete operations on external objects.</li>
</ul>
<p class="p">If you need frequent access to large amounts of external data, ETL might still be
                        your best option for optimal performance. External objects are not a
                        replacement for ETL. They are a complementary approach for accessing
                        external data that provide great benefits, including seamless integration
                        with the Salesforce Platform, including our APIs, mobile, Chatter, and more.
                        For example, external objects are available to standard Salesforce tools
                        such as the Salesforce1 mobile app, global search, SOSL and SOQL queries,
                        Apex, Visualforce, APIs, change sets, and packages. </p>
<p class="p">Here is a quick comparison of the features supported in external objects and
                        custom objects.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader vertical-align-top " id="d299835e213">Feature</th>
<th class="featureTableHeader vertical-align-top " id="d299835e216">Custom Objects </th>
<th class="featureTableHeader vertical-align-top " id="d299835e219">External Objects</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Data is stored in your Salesforce org</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">No</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Read</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Write</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes (limited)</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Tabs, layouts</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Visualforce</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Field-level security</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Sharing</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">No</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">REST and SOAP API</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">SOQL</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes (limited)</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Search and SOSL</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes (pass-through)</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Formula fields</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Not Yet</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Workflow, triggers</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Not Yet</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Reports and analytics</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes (limited)</td>
</tr>
<tr>
<td class="entry" data-title="Feature" headers="d299835e213">Chatter</td>
<td class="entry" data-title="Custom Objects" headers="d299835e216">Yes</td>
<td class="entry" data-title="External Objects" headers="d299835e219">Yes (no field tracking)</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>A Salesforce Connect Example</span></h2>
<div class="body">
<p class="p">Suppose you have product order information stored in an external database, and
                        you want to view those orders as a related list on each account record in
                        Salesforce. Salesforce Connect enables you to set up a relationship between the parent account object
                        and the child external object for orders. Then you can set up the page
                        layouts for the parent object to include a related list that displays child
                        records.</p>
<div class="p">The figure below shows how Salesforce Connect can provide a seamless view of data across system boundaries. A record
                        detail page for the Business_Partner external object includes two related
                        lists of child objects. <ul class="ul bulletList">
<li class="li">Account standard object (1)</li>
<li class="li">Sales_Order external object (2)</li>
</ul>
</div>
<span class="image image-block"><img alt="External objects example" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3d3b0bfbd5e24573958ae0e37f000dda.png"/></span>
<p class="p">In this example, external lookup relationships and page layouts enable users to
                        view related data that’s stored both inside and outside the Salesforce org on a
                        single page.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Types of External Connections</span></h2>
<div class="body">
<p class="p">To connect to data that’s stored on an external system, Salesforce Connect uses one of these specially designed adapters.</p>
<ul class="ul bulletList">
<li class="li"><strong class="ph b">OData 2.0 adapter</strong> or <strong class="ph b">OData 4.0 adapter</strong>—Connects to
                                data exposed by any <a class="xref" href="http://www.odata.org" target="_blank">OData 2.0 or 4.0</a> producer on the
                                Internet. OData (Open Data Protocol) is a modern, REST-based
                                protocol for integrating data. Vendors such as SAP and Microsoft
                                have already implemented OData support, so products such as
                                NetWeaver and SharePoint are directly accessible. Integration
                                products from Salesforce
                                partners extend the reach of Salesforce Connect to a much wider range of back-office systems.</li>
<li class="li"><strong class="ph b">Cross-org adapter</strong>—Connects to data that’s stored in
                                another Salesforce org. The Cross-org adapter uses the standard Force.com
                                REST API.
                                It directly connects to the other org without the need of an
                                intermediary web service, as is the case with OData.</li>
<li class="li"><strong class="ph b">Custom adapter created via Apex</strong>—If the OData and cross-org adapters aren’t suitable for your needs, develop your own adapter
                                with the Apex Connector Framework.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="lightning_connect_introduction_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_introduction_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/events/webinars/Lightning-Connect" target="_blank" title="HTML (New Window)">Salesforce Connect Webinar</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2015/02/access-salesforce-data-external-sources-lightning-connect.html" target="_blank" title="HTML (New Window)">Salesforce Connect Blog Post</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_considerations.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Considerations for Salesforce Connect</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=odata_reference.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">OData Reference for
                                                Salesforce Connect</a></li>
</ul>
</div>
</div>
</body></div><h1>Set up Salesforce Connect</h1><div class="unit-content">
<body id="lightning_connect_setup_objectives"><a name="lightning_connect_setup_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Create an external data source in your Salesforce org to specify
                    how to connect to an external system.</li>
<li class="li">Validate the connection to the external system.</li>
<li class="li">Sync to create external objects that map to the external system’s schema.</li>
<li class="li">View the external objects.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_setup_overview" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_setup_overview"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Overview of Setup</span></h2>
<div class="body">
<p class="p">Setting up external data integration with Salesforce Connect involves these high-level steps.</p>
<ol class="ol enumList">
<li class="li"><strong class="ph b">Create the external data source.</strong> If your external system hosts
                                multiple services, create an external data source for each service
                                that’s required to access the data.</li>
<li class="li"><strong class="ph b">Create the external objects and their fields.</strong> Create an external
                                object in your Salesforce
                                org for each external data table that you want to access. On each
                                external object, create a custom field for each external table
                                column that you want to access from your Salesforce
                                                org.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If the
                                        external system allows it, we recommend that you <a class="xref" href="https://help.salesforce.com/articleView?id=ext_data_sync_database.htm&amp;language=en_US">sync</a> the external data source
                                        to automatically create related external objects. You can
                                        instead choose to manually define external objects to
                                        customize the external object names and manually create the
                                        custom fields.</p></div></div></div></div></div>
</li>
<li class="li"><strong class="ph b">Define relationships for the external objects.</strong> Create lookup,
                                external lookup, and indirect lookup relationship fields to provide
                                seamless views of data across system boundaries.</li>
<li class="li"><strong class="ph b">Enable user access to external objects and their fields.</strong> Grant
                                object and field permissions through permissions sets or
                                profiles.</li>
<li class="li"><strong class="ph b">Set up user authentication.</strong> For each external data source that
                                uses per-user authentication, do both of the following.<ol class="ol enumList" type="a">
<li class="li"><strong class="ph b">Enable users to authenticate to the external data
                                                  source.</strong> Grant users access through permission
                                                sets or profiles.</li>
<li class="li"><strong class="ph b">Set up each user’s authentication settings.</strong> Tell
                                                your users how to set up and manage their own
                                                authentication settings for external systems in
                                                their personal settings. Alternatively, you can
                                                perform this task for each user.</li>
</ol>
</li>
</ol>
<p class="p">As part of this module, you integrate sample order data with the existing account
                        data in your Salesforce
                        Developer Edition. To go through the steps, you need to install a test
                        package that configures the necessary schema on the account object, creates
                        a Customer ID field, and assigns a value for Customer ID to each
                        account.</p>
<p class="p">Follow these steps to install the package.</p>
<ol class="ol enumList">
<li class="li">Open a browser, and <a class="xref" href="https://login.salesforce.com/packaging/installPackage.apexp?p0=04tE00000001aqG" target="_blank">click here</a> to start
                                the installation.</li>
<li class="li">Select <strong class="ph uicontrol">Install for Admins Only</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Install</strong>.<span class="image image-block"><img alt="Installer for the Salesforce Connect Quickstart package" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us38e7bc6be5594369973c3f3b2b1cc3e8.png"/></span></li>
<li class="li">Click the app menu (top right), then select <strong class="ph uicontrol">External
                                        Orders</strong>.<span class="image image-block"><img alt="External Orders app in app menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc718eb8f3f1019e0a27b5853d2ec344e.png"/></span></li>
<li class="li">Click <strong class="ph uicontrol">Set Customer IDs</strong> to assign customer ID
                                numbers to the sample account records in your Developer
                                        Edition.<span class="image image-block"><img alt="Assign Customer IDs to sample account records" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us073eb63ba6dad1db992cc1a6763aa363.png"/></span></li>
</ol>
<p class="p">Your Salesforce Developer
                        Edition is now set up for the main section of the tutorial. It’s time to
                        integrate some data!</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_add_data_source" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_add_data_source"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Connect an External Data Source</span></h2>
<div class="body">
<p class="p">As an exercise, let’s connect an existing OData 2.0 data source that’s publicly
                        accessible.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">External Data Sources</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">External Data Sources</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">New External Data Source</strong>.</li>
<li class="li">Enter <kbd class="ph userinput">OrderDB</kbd> as the label. As you click or tab
                                away from the label field, the name field defaults to OrderDB.</li>
<li class="li">Select <strong class="ph uicontrol">Salesforce Connect: OData
                                            2.0</strong> as the type.</li>
<li class="li">Enter <samp>https://orderdb.herokuapp.com/orders.svc/</samp> as the URL.<div class="fig fignone">
</div>
</li>
<li class="li">Leave the remaining settings with their default values and click
                                        <strong class="ph uicontrol">Save</strong>.</li>
</ol>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Because this is a sample, read-only database, no authentication is required. A
                        real external system would likely require some credentials. You can
                        configure Salesforce Connect to use the same set of credentials for all access to the data source or
                        separate credentials for each user.</p></div></div></div></div></div>
<p class="p">Now that you’ve configured an external data source, you can select the tables you
                        wish to integrate into your Salesforce org.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_create_external_objects" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_create_external_objects"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Create External Objects</span></h2>
<div class="body">
<p class="p">You can create or modify an external object.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">External Data Sources </kbd> in the
                                        <span class="keyword parmname">Quick Find</span> box, then select
                                        <strong class="ph uicontrol">External Data Sources </strong> and then click
                                the OrderDB external data source.</li>
<li class="li">Click <strong class="ph uicontrol">Validate and Sync</strong>.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>
<p class="p">Salesforce Connect retrieves OData 2.0 metadata from the sample
                                                database and lists the available tables. <a class="xref" href="https://orderdb.herokuapp.com/orders.svc/$metadata" target="_blank">Click here</a>
                                                for a look at the metadata XML.</p>
</p></div></div></div></div></div>
</li>
<li class="li">Select both Orders and OrderDetails.<div class="fig fignone">
<span class="image image-block"><img alt="Validate External Data Source dialog" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa133f92b2a7fb6412ea43b53a17cd74f.png"/></span>
</div>
</li>
<li class="li">Click <strong class="ph uicontrol">Sync</strong>.</li>
</ol>
<p class="p">Syncing creates the external objects corresponding to the tables that you
                        selected. Syncing does not store any data in Salesforce. Syncing
                        only defines mappings to external tables or repositories that contain the
                        data. These mappings enable Salesforce to access
                        and search the external data.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>You can choose to manually create the external objects. Doing so enables you
                        to customize the external object names, decide which table columns to create
                        custom fields for, and customize the custom field names. From Setup, enter
                                <kbd class="ph userinput">External Objects</kbd> in the <span class="keyword parmname">Quick
                                Find</span> box, then select <strong class="ph uicontrol">External
                                Objects</strong>.</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_view_external_data" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_view_external_data"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>View External Data</span></h2>
<div class="body">
<p class="p">After you’ve connected the external data source and defined the external objects,
                        you can view the external data directly in your Salesforce org.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">External Data Sources</kbd> in the
                                        <span class="keyword parmname">Quick Find</span> box, then select
                                        <strong class="ph uicontrol">External Data Sources</strong>.</li>
<li class="li">Click the OrderDB external data source.</li>
<li class="li">Scroll down to External Objects and click
                                        <strong class="ph uicontrol">Orders</strong>.<span class="image image-block"><img alt="View external objects page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd17b41a3002bac6d2c9365c1cdd0a235.png"/></span></li>
</ol>
<div class="p">Salesforce Connect’s sync process created this external object from the external system’s
                        schema. If you’re familiar with custom objects, you notice that external
                        objects look similar. The sync process also created a set of custom fields
                        just as you create them for a custom object. The key differences between
                        external object and custom object definitions are:<ul class="ul bulletList">
<li class="li"> External object API names have the suffix __x rather than
                                        __c.</li>
<li class="li"> External objects have a reference to their external data source
                                        and a table within that source.</li>
<li class="li"> External objects have different standard fields.
                                                <strong class="ph uicontrol">Display URL</strong> is the OData 2.0
                                        URL representing a record in the external database, while
                                                <strong class="ph uicontrol">External ID</strong> is the primary
                                        key value for each record.</li>
</ul>
<span class="image image-block"><img alt="External objects details page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us421ee7c8bb0fe95fdd71d6ab96b14e1f.png"/></span></div>
<p class="p">Let’s create a custom tab to easily access the order records.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">Tabs</kbd> in the <span class="keyword parmname">Quick
                                        Find</span> box, then select
                                <strong class="ph uicontrol">Tabs</strong>.</li>
<li class="li">Click the <strong class="ph uicontrol">New</strong> button next to Custom Object
                                Tabs.</li>
<li class="li">Select <strong class="ph uicontrol">Orders</strong> as the Object.</li>
<li class="li">Click the selector next to Tab Style and choose whichever style you
                                like.</li>
<li class="li">Click <strong class="ph uicontrol">Next</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Next</strong> to accept the default tab visibility
                                settings.</li>
<li class="li">Click the checkbox next to Include Tab to deselect all the apps.</li>
<li class="li">Click the checkbox next to External Orders to select it.</li>
<li class="li">Click <strong class="ph uicontrol">Save</strong>.</li>
</ol>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Because there’s also a standard object named Order, you now have two tabs with
                        the label of Orders. You can change the tab name for your external object by
                        changing the label in the object definition.</p></div></div></div></div></div>
<p class="p">You can now view the external order data as if it was stored in custom objects in
                        your Salesforce org.</p>
<ol class="ol enumList">
<li class="li">If the app menu (top right) is not already showing External Orders,
                                click the app menu and select it.</li>
<li class="li">Click the <strong class="ph uicontrol">Orders</strong> tab.</li>
<li class="li">Click the <strong class="ph uicontrol">Go!</strong> button next to View: All. <span class="image image-block"><img alt="View list of external orders" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us61390d5ce75cdee3179e3db30ead9d78.png"/></span>Salesforce Connect retrieved order IDs for the first 25 order records from the
                                sample order database. You can configure the fields you want
                                displayed, as in any other list view. </li>
<li class="li">Click one of the order External ID values. <span class="image image-block"><img alt="View details of external order" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6e882d532aff0ec26d4580c06d306d92.png"/></span>Salesforce Connect retrieved all the field values for the order you selected.</li>
</ol>
<p class="p">It’s important to remember that external data is never duplicated in your Salesforce org. Salesforce Connect always fetches current data from the external system in real time.</p>
<p class="p">Now that you can see external data in your org, you can also link it to existing
                        data by creating lookup relationships. You’ll see how to do that in a later
                        unit.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_user_authentication" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_user_authentication"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Set Up User Authentication</span></h2>
<div class="body">
<div class="p">The sample database used in this unit did not require authentication. However, a real
            external system is likely to require login credentials. You have two options for setting
            up user authentication for an external data source.<ul class="ul bulletList">
<li class="li"><strong class="ph b">Named
                                            Principal</strong>—Your entire Salesforce org shares one
                    login account on the external system.</li>
<li class="li"><strong class="ph b">Per User</strong>—Your org uses multiple login accounts on the external system. You or
                    your users can set up their personal authentication settings for the external
                    system.</li>
</ul>
</div>
<p class="p">For more information, see <a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=platform_connect_identity_type.htm&amp;language=en_US" target="_blank">Identity Type for External Data Sources</a> in the Salesforce
            Help.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_setup_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_setup_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_add_external_data_source.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Define an External
                                        Data Source for Salesforce Connect</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=external_object_define.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Define External Objects</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=ext_data_sync_database.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Validate and Sync an External Data
                    Source</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_considerations_sync.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Sync Considerations
                                        for Salesforce Connect</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Integrate External Data</h1><div class="unit-content">
<body id="lightning_connect_integrate_objectives"><a name="lightning_connect_integrate_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Configure an external lookup relationship.</li>
<li class="li">Configure an indirect lookup relationship.</li>
<li class="li">Customize the display of external data.</li>
<li class="li">Enable record feeds for an external object.</li>
<li class="li">Show external data in the Salesforce1 app.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="lightning_connect_create_relationships" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_create_relationships"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Define Relationships for the External Objects</span></h2>
<div class="body">
<p class="p">After you’ve configured an external data source and defined external objects, you
                        can integrate the external data into Salesforce using
                        relationship fields. You can define three types of relationships for
                        external objects.</p>
<ul class="ul bulletList">
<li class="li"><strong class="ph b">Lookup relationship</strong>—Links a child standard, custom, or
                                external object to a parent standard or custom object. You can only
                                use this type of relationship if the external data includes a column
                                that identifies related Salesforce
                                records by their 18-character IDs. If that’s not the case, use one
                                of the following two types of relationships, which are unique to
                                external objects.</li>
<li class="li"><strong class="ph b">External lookup relationship</strong>—Links a child standard,
                                custom, or external object to a parent external object. The values
                                of the standard External ID field on the parent external object are
                                matched against the values of the external lookup relationship
                                field. For a child external object, the values of the external
                                lookup relationship field come from the specified External Column
                                Name.</li>
<li class="li"><strong class="ph b">Indirect lookup relationship</strong>—Links a child external object
                                to a parent standard or custom object. You select a custom unique,
                                external ID field on the parent object to match against the child’s
                                indirect lookup relationship field, whose values are determined by
                                the specified External Column Name. </li>
</ul>
<p class="p">This table summarizes the different types of external object relationships.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader vertical-align-top " id="d298538e97">Type of Relationship</th>
<th class="featureTableHeader vertical-align-top " id="d298538e100">Child Object</th>
<th class="featureTableHeader vertical-align-top " id="d298538e103">Parent Object</th>
<th class="featureTableHeader " id="d298538e106">Must External Data Contain Salesforce IDs?</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Type of Relationship" headers="d298538e97"><strong class="ph b">Lookup</strong>
</td>
<td class="entry" data-title="Child Object" headers="d298538e100">Standard, Custom, or External</td>
<td class="entry" data-title="Parent Object" headers="d298538e103">Standard or Custom</td>
<td class="entry" data-title="Must External Data Contain Salesforce IDs?" headers="d298538e106">Yes</td>
</tr>
<tr>
<td class="entry" data-title="Type of Relationship" headers="d298538e97"><strong class="ph b">External Lookup</strong></td>
<td class="entry" data-title="Child Object" headers="d298538e100">Standard, Custom, or External</td>
<td class="entry" data-title="Parent Object" headers="d298538e103">External</td>
<td class="entry" data-title="Must External Data Contain Salesforce IDs?" headers="d298538e106">No</td>
</tr>
<tr>
<td class="entry" data-title="Type of Relationship" headers="d298538e97"><strong class="ph b">Indirect Lookup</strong></td>
<td class="entry" data-title="Child Object" headers="d298538e100">External</td>
<td class="entry" data-title="Parent Object" headers="d298538e103">Standard or Custom</td>
<td class="entry" data-title="Must External Data Contain Salesforce IDs?" headers="d298538e106">No</td>
</tr>
</tbody>
</table></div>
<p class="p">As an example, let’s see how you can configure lookup relationships to link
                        orders to their line items and to accounts in your Salesforce org.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_external_lookup_relationship" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_external_lookup_relationship"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Configure an External Lookup Relationship</span></h2>
<div class="body">
<p class="p">In the previous unit, you were able to view external order data in your Salesforce org.
                        Recall that when you selected the Orders table for syncing, you also
                        selected the OrderDetails table, which contains line items for each order.
                        By creating an external lookup relationship from OrderDetails to Orders, you
                        can see the line items on an order’s page in your org. In effect, you’re
                        telling Salesforce that
                        a field on one object (OrderId on OrderDetails) corresponds to the external
                        ID field on an external object (Orders).</p>
<ol class="ol enumList">
<li class="li">Log in to your Salesforce
                                Developer Edition.</li>
<li class="li">From Setup, enter <kbd class="ph userinput">External Objects</kbd> in the
                                        <span class="keyword parmname">Quick Find</span> box, then select
                                        <strong class="ph uicontrol">External Objects</strong>.</li>
<li class="li">Click the <strong class="ph uicontrol">OrderDetails</strong> external object.<span class="image image-block"><img alt="Order details screen" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-used4b24061f3fdd16169474e85c55205c.png"/></span></li>
<li class="li">Click the <strong class="ph uicontrol">Edit</strong> link next to Order ID.<span class="image image-block"><img alt="Edit Order ID" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6845ef7a6cf4499b45f94394a942fc97.png"/></span></li>
<li class="li">Click the <strong class="ph uicontrol">Change Field Type</strong> button.<span class="image image-block"><img alt="Edit Order ID details" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2a8af4f09d15c48456ef67abb893f501.png"/></span></li>
<li class="li">Select <strong class="ph uicontrol">External Lookup Relationship</strong> and click
                                        <strong class="ph uicontrol">Next</strong>. An external lookup relationship
                                can link any object to an external object.</li>
<li class="li">Select <strong class="ph uicontrol">Orders</strong> as the related object and click
                                        <strong class="ph uicontrol">Next</strong>.<span class="image image-block"><img alt="Choose related external object" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2ad0b9324cd936140a9b8674603762d4.png"/></span></li>
<li class="li">Enter <kbd class="ph userinput">18</kbd> as the length and click
                                        <strong class="ph uicontrol">Next</strong>.</li>
<li class="li">To make the relationship visible to all profiles, select the
                                        <strong class="ph uicontrol">Visible</strong> option and click
                                        <strong class="ph uicontrol">Next</strong>. <span class="image image-block"><img alt="Specify FLS for external lookup relationship" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4f5656d7cafa7e3ef0da5ce0834de8eb.png"/></span>In a real production deployment, you
                                would carefully analyze which profiles should have access to order
                                line items.</li>
<li class="li">Click <strong class="ph uicontrol">Save</strong> to accept the defaults—you
                                definitely want an OrderDetails related list on the Orders page
                                layout!</li>
<li class="li">If the app menu (top right) is not already showing External Orders,
                                click the app menu and select it.</li>
<li class="li">Click the <strong class="ph uicontrol">Orders</strong> tab.</li>
<li class="li">Click the External ID of an order in the Recent Orders list.<span class="image image-block"><img alt="View External ID of order" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0aa583dbb15eccdc91501cca70c90805.png"/></span></li>
<li class="li">Confirm that you see a list of line items for the order.<span class="image image-block"><img alt="View line items for order" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us848fd17cc84d47a07e4c6cbac58dfad9.png"/></span></li>
<li class="li">You can click a line item’s External ID to view its details, but let's
                                show line item details right here on the related list. Select the
                                Force.com Quick Access Menu by clicking the gray triangle on the
                                right of the page.<span class="image image-block"><img alt="View details or order line item" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9af530b6fdb5c904bba04e8f504b4408.png"/></span></li>
<li class="li">Click <strong class="ph uicontrol">Edit Layout</strong>.<span class="image image-block"><img alt="Force.com Quick Access Menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4d83ed5ba0898788329f5c1936a1e513.png"/></span></li>
<li class="li">Scroll down to the OrderDetails related list, and click the wrench
                                        icon.<span class="image image-block"><img alt="Edit layout for order details" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-useb15f3b70f9d56694091425a34da82aa.png"/></span></li>
<li class="li">Remove Display URL from the Selected Fields, add product, quantity, and
                                unitPrice, and click <strong class="ph uicontrol">OK</strong>.<span class="image image-block"><img alt="Related list properties dialog" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-uscb34177923e193f47742c0fcf092c74b.png"/></span></li>
<li class="li">Click <strong class="ph uicontrol">Save</strong> at the top of the page. You then see
                                order line item details in the related list.</li>
</ol>
</div>
</div>
<div class="topic nested0" id="lightning_connect_indirect_lookup_relationship" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_indirect_lookup_relationship"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Configure an Indirect Lookup Relationship</span></h2>
<div class="body">
<p class="p">Now that you can see the line items on the order page, the next step is to
                        configure an indirect lookup relationship between orders and accounts. This
                        relationship enables your users to see which account a given order is
                        associated with and all the orders for a given account.</p>
<p class="p">An indirect lookup relationship models a foreign key relationship between an
                        external object and a custom or standard object. This time you’re telling
                                Salesforce that
                        a field on an external object (<span class="keyword parmname">customerId</span> on Orders)
                        corresponds to a unique, external ID field on a custom or standard object
                                (<span class="keyword parmname">Customer_ID__c</span> on Account). It’s an indirect
                        lookup because it references a field other than the standard ID field.</p>
<ol class="ol enumList">
<li class="li">If you’re not already on the order page, select the <strong class="ph uicontrol">External
                                        Orders</strong> app (top right), click the
                                        <strong class="ph uicontrol">Orders</strong> tab, and click an order’s
                                External ID in the Recent Orders list.</li>
<li class="li">Select the Force.com Quick Access Menu by clicking the gray triangle on
                                the right of the page.</li>
<li class="li">Select <strong class="ph uicontrol">View Fields</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Edit</strong> next to Customer ID.<span class="image image-block"><img alt="Edit customer ID screen" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4f09293672418df7a859399c0ea0b15c.png"/></span></li>
<li class="li">Click the <strong class="ph uicontrol">Change Field Type</strong> button.</li>
<li class="li">Select <strong class="ph uicontrol">Indirect Lookup Relationship</strong> and click
                                        <strong class="ph uicontrol">Next</strong>. An indirect lookup relationship
                                links an external object, such as orders, to a standard object, such
                                as account, or even a custom object.</li>
<li class="li">Select <strong class="ph uicontrol">Account</strong> as the related object and click
                                        <strong class="ph uicontrol">Next</strong>.<span class="image image-block"><img alt="Select account" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us1c51e3695918b1567f48ce74dac0d1ff.png"/></span></li>
<li class="li">Select <strong class="ph uicontrol">Customer_ID__c</strong> as the value of Target
                                Field and click <strong class="ph uicontrol">Next</strong>.<span class="image image-block"><img alt="Select customer ID" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usedd5ddd8ae41d57e773a79f3af3ad3d5.png"/></span></li>
<li class="li">Enter <kbd class="ph userinput">18</kbd> as the length and click
                                        <strong class="ph uicontrol">Next</strong>.</li>
<li class="li">To make the relationship visible to all profiles, select the
                                        <strong class="ph uicontrol">Visible</strong> option and click
                                        <strong class="ph uicontrol">Next</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Save</strong> to accept the defaults—you want
                                the Orders related list on the Account page layout!</li>
<li class="li">If the app menu (top right) is not already showing External Orders,
                                click the app menu and select it.</li>
<li class="li">Click the <strong class="ph uicontrol">Orders</strong> tab.</li>
<li class="li">Click the External ID of an order in the Recent Orders list.</li>
<li class="li">Confirm that the order shows a link in the customerID field.</li>
<li class="li">Click the customerID link. You’re taken to the corresponding account
                                page. Scroll to the bottom to see a list of orders.<span class="image image-block"><img alt="Orders related list" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us645505774cf416fafdf7a0f9b7fbc7c7.png"/></span></li>
<li class="li">Again, you can customize the UI to show more useful information in the
                                related list. Select the Force.com Quick Access Menu by clicking the
                                gray triangle on the right of the page.</li>
<li class="li">Select <strong class="ph uicontrol">Edit Layout</strong>.</li>
<li class="li">Scroll down to the Orders related list, and click the wrench icon.</li>
<li class="li">Remove Display URL from the Selected Fields, add orderDate and
                                shippedDate. For Sort By, click orderDate and select Descending so
                                that you see the most recent orders first. Click
                                        <strong class="ph uicontrol">OK</strong>.<span class="image image-block"><img alt="Orders related list properties" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usabaecb4e6a12edeec1e7ef6cf2f4d641.png"/></span></li>
<li class="li">Click <strong class="ph uicontrol">Save</strong> at the top of the page, scroll down,
                                and see the order dates in the related list.<span class="image image-block"><img alt="Account with edited list" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us907852dd963aa084152958b1bad7452c.png"/></span></li>
</ol>
<p class="p">Now your external order data is integrated seamlessly with accounts.</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_enable_chatter" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_enable_chatter"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Enable Chatter for External Data</span></h2>
<div class="body">
<p class="p">To integrate the external data further into your Salesforce org,
                        let’s see how to enable Chatter
                        feeds on order records. In the current release, field tracking is not
                        available for external objects; that is, we cannot configure Salesforce to post
                        to a record's Chatter feed
                        as its field values change, but we can still enable the Chatter
                        feed.</p>
<ol class="ol enumList">
<li class="li">Log in to your Salesforce
                                Developer Edition.</li>
<li class="li">From Setup, enter <kbd class="ph userinput">Feed Tracking</kbd> in the
                                        <span class="keyword parmname">Quick Find</span> box, then select
                                        <strong class="ph uicontrol">Feed Tracking</strong>.</li>
<li class="li">Select <strong class="ph uicontrol">Orders</strong> (note the plural; the singular
                                Order is a standard object), click <strong class="ph uicontrol">Enable Feed
                                        Tracking</strong> and click
                                        <strong class="ph uicontrol">Save</strong>.<span class="image image-block"><img alt="Enable Feed Tracking checkbox" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usaec5093b360f2ae50d188f7a059944b4.png"/></span></li>
<li class="li">If the app menu (top right) is not already showing External Orders,
                                click the app menu and select it.</li>
<li class="li">Click the <strong class="ph uicontrol">Orders</strong> tab.</li>
<li class="li">Click the External ID of an order in the Recent Orders list.</li>
<li class="li">Now the order has a Chatter feed. Post some text to the record feed.<span class="image image-block"><img alt="Record feed on an external object detail page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us5318f795cbcb462fb6fa5772d87f9cd1.png"/></span></li>
</ol>
</div>
</div>
<div class="topic nested0" id="lightning_connect_view_data_salesforce1" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_view_data_salesforce1"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>View External Data in Salesforce1</span></h2>
<div class="body">
<p class="p">When your external data is available in your Salesforce org, you
                        can view it in the Salesforce1
                        app.</p>
<ol class="ol enumList">
<li class="li">Start the Salesforce1 app. You can run Salesforce1
                                on your mobile device (<a class="xref" href="http://www.salesforce.com/mobile" target="_blank">get the app</a>) or in the
                                        <a class="xref" href="https://chrome.google.com/webstore/detail/salesforce1-simulator/cknbjckicenodbiaejbmkjhldffonggp" target="_blank">Salesforce1 Simulator Chrome
                                        App</a>. Log in with your Developer Edition username and
                                password, if necessary.</li>
<li class="li">Tap <img alt="Salesforce1 App Nav" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2c11bf7f5af512bcee91e06100f3981b.png"/>
                                to open the navigation menu. Accounts and Orders appear at the top
                                of the Recent list. If they’re not at the top, tap
                                        <strong class="ph uicontrol">More</strong> to show all the objects in the
                                Recent list.<span class="image image-block"><img alt="Navigation menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us75d41ec0b7bf238a066ac341d3102018.png"/></span></li>
<li class="li">Tap <strong class="ph uicontrol">Orders</strong> to see a list of recent orders. In
                                addition to the external object that you have configured, a standard
                                object with the same name, Orders, is listed. If you tap Orders and
                                see no recent records, look for the other Orders object.<span class="image image-block"><img alt="Recent orders" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usda16e024a36077f6803c847c0d8e69b2.png"/></span></li>
<li class="li">The order you were viewing in the previous step appears at top of the
                                list. Tap it to view its details.<span class="image image-block"><img alt="Order details" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us069f0c1b4457bd23fce180e93c168377.png"/></span></li>
<li class="li">Tap <strong class="ph uicontrol">Feed</strong> to view the order record’s feed and your
                                feed post.<span class="image image-block"><img alt="Record feed" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us87045965ef073ab066176f0d512600e0.png"/></span></li>
<li class="li">Tap <strong class="ph uicontrol">Related</strong>, then tap
                                        <strong class="ph uicontrol">OrderDetails</strong> to see the order’s line
                                        items.<span class="image image-block"><img alt="Related order line items" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2399eefc130add85c092711d3deabefe.png"/></span></li>
<li class="li">Tap <img alt="Salesforce1 app's back arrow" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us1317f6c87934bc685413193964308272.png"/> twice, then tap <img alt="Salesforce1 App Nav" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2c11bf7f5af512bcee91e06100f3981b.png"/>. Tap <strong class="ph uicontrol">Accounts</strong> to see a list of recent
                                accounts.</li>
<li class="li">Tap the top account in the list, then tap
                                <strong class="ph uicontrol">Related</strong>. Scroll down the related lists, then
                                tap <strong class="ph uicontrol">Orders</strong> to see the orders for that
                                        account.<span class="image image-block"><img alt="Orders related to the account" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9830c8a76b230be3f0568e5026750a85.png"/></span></li>
</ol>
<p class="p">As you can see, your external data is available in Salesforce1 just as
                        it is in the full Salesforce site,
                        with zero extra configuration!</p>
</div>
</div>
<div class="topic nested0" id="lightning_connect_integrate_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="lightning_connect_integrate_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=external_object_relationships.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">External Object Relationships</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_considerations_relationships.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Relationship Considerations for Salesforce Connect—All Adapters</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_considerations_chatter.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Record Feed Considerations for Salesforce Connect—All Adapters</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=platform_connect_considerations_salesforce1.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Salesforce1 Considerations
      for Salesforce Connect—All Adapters</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Introduction to Application Lifecycle Management</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="alm_intro_learning_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_learning_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Explain what you can develop in production and when to use a sandbox. </li>
<li class="li">Explain the key benefits of application lifecycle management.</li>
<li class="li">Assign roles and responsibilities for the development team.</li>
<li class="li">Identify the elements of a governance framework.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_intro_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Application Lifecycle Management</span></h2>
<div class="body">
<p class="p">If you’ve done some of the challenges in Trailhead already, you know it’s easy to build
            and customize apps. For example, the Contact standard object doesn't have a field for
            Contact Type. You could easily add that custom field in your production org and make the
            Contact Type field immediately available to all users. But should you?</p>
<div class="p">Asking this question prompts additional questions. For example: <ul class="ul bulletList">
<li class="li">Will your users know how to use the new field, or will training be needed? </li>
<li class="li">If the field is required, are there any integrations or import processes which
                    require updating? </li>
<li class="li">Should the field appear on all page layouts, list views, or in any reports or
                    dashboards?</li>
<li class="li">Should the field be on the Lead object as well, and if so, does the Lead
                    conversion process require updating?</li>
<li class="li">Will this field be required for integrations with other systems? This action
                    might require changes to middleware, field mappings, endpoints, and so on.</li>
</ul>
</div>
<p class="p">Non-configuration changes, such as creating views, reports, and dashboards, can be made
            safely in production. But other changes, such as this hypothetical new Contact Type
            field, are potential pitfalls of confusion and productivity. Understanding the
            downstream impact of a change, whether it’s preparing for a new user experience or
            updating an existing integration, are vital steps to minimize disruption and increase
            feature adoption. But how do you know when to make a change in production versus using
            sandbox (a separate environment for development and testing)?</p>
<p class="p">The answer depends on your change management strategy. Some companies need the
            flexibility to make emergency changes in an ad hoc fashion, rather than as part of a
            scheduled upgrade. Other companies find this disruptive to users, administrators, and
            developers and opt to roll out their changes with a formalized release process. And some
            companies do a mixture of both.</p>
<div class="p">In this unit, you learn about the effects of making changes in production, and why at
            some point you need to separate development from production using a sandbox. You learn
            what kind of challenges occur in a multi-org environment, and how to create a
            development strategy to manage those changes. <div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>This module does not apply to those
                creating managed packages for the AppExchange. That
                development scenario has different best practices. </p></div></div></div></div></div>
</div>
<p class="p">This Trailhead module is different from the <a class="xref" href="https://trailhead.salesforce.com/module/app_deployment" target="_blank">Change Management module</a>. Here’s how they're
            different: If your use cases are simple and you are comfortable with change sets, you
            might prefer the Change Management module. If you have more complex needs, are an
            enterprise customer, or need more robust functionality than change sets provide, you
            might prefer this module. When in doubt, get both badges and decide for yourself!</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">What Is Application Lifecycle Management?</h3>
<p class="p">Application lifecycle management is the process of managing an app’s development,
                from design to final release, and establishing a framework for managing changes. The
                typical application lifecycle starts with the design of a new app or feature. The
                app is planned based on requirements analysis and specifications. Next, the app is
                implemented per the specifications and then tested. The new app is staged for final
                testing before it gets deployed to production. This cycle repeats for every new app
                or feature. It’s also used for app maintenance, such as when features are enhanced
                or bugs are fixed. A governance and change management framework directs the
                development process.</p>
<div class="fig fignone"><span class="figcap">Salesforce Application
                    Lifecycle Management</span>
<div class="imagecenter"><span class="image image-block"><img alt="Salesforce application lifecycle management" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us147eb632233e08de821e667393f9b847.png"/></span></div>
</div>
<dl class="dl detailList">
<dt class="dt dlterm">Step 1: Plan</dt>
<dd class="dd">An app starts with planning. This step includes requirements gathering and
                        analysis. The product manager creates design specifications and shares them
                        with the development team for implementation.</dd>
<dt class="dt dlterm">Step 2: Build</dt>
<dd class="dd">Administrators and software engineers write the app per the design
                        specifications. The development is done on the Salesforce platform
                        using declarative tools—the tools available in the user
                        interface—and programmatic tools, such as Apex, Visualforce, and Lightning
                        Components.</dd>
<dt class="dt dlterm">Step 3: Test</dt>
<dd class="dd">The app is tested to verify that the changes behave as expected and don’t
                        cause undesired side-effects. The quality assurance team first performs unit
                        and functional testing. A small set of experienced people then provide
                        feedback (user acceptance testing). Staging the changes enables final
                        testing before deploying to production.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>In Salesforce,
                            development and test environments are represented by sandboxes. A
                            sandbox is essentially a clone of your production org—its
                            features, functionality, user licenses, and setup configuration.
                            Sandboxes are usually used for development, testing, training, and
                            merging changes from other sandboxes.</p></div></div></div></div></div>
</dd>
<dt class="dt dlterm">Step 4: Deploy</dt>
<dd class="dd">When testing is successfully completed and the quality benchmarks have been
                        met, the app can be deployed to production. The release manager manages
                        releases to production. Training employees and partners about the changes is
                        a best practice.</dd>
</dl>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Development Lifecycle Roles</h3>
<div class="p">In a smaller company, one person can wear many hats, but in a larger company,
                specialized roles define what each person is responsible for. Logical roles include
                the following. <ul class="ul bulletList">
<li class="li"><strong class="ph b">Release manager</strong>—Manages the release schedule and coordinates releases
                        with the business. The release manager could be in charge of pulling changes
                        from version control. </li>
<li class="li"><strong class="ph b">Product manager</strong>—Provides the business requirements of apps and
                        features, and works with the development team to implement those
                        requirements. The product manager also performs user acceptance testing to
                        ensure that requirements have been implemented.</li>
<li class="li"><strong class="ph b">Software developer</strong>—Develops new functionality in sandbox, including
                        both declarative point-and-click development and code. </li>
<li class="li"><strong class="ph b">Quality engineer</strong>—Tests new functionality in sandbox.</li>
<li class="li"><strong class="ph b">Administrator</strong>—Performs administrative tasks in the production org,
                        and tracks all changes made in production. </li>
<li class="li"><strong class="ph b">Trainer</strong>—Conducts training of company employees for new applications
                        and features.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="topic nested0" id="alm_intro_governance" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_governance"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Use Governance to Manage Change</span></h2>
<div class="body">
<p class="p">You’ve learned how to keep your organization lean and clean using
            the tools that Salesforce
            provides. However, governance, a method of management, is about more than tools.
            Governance improves agility by ensuring all members of your team are working together to
            achieve goals that are aligned with overall business goals.</p>
<div class="fig fignone">
<img alt="word cloud of governance words" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us998c7476d1a7fb8aa6524795d582f694.jpg"/>
</div>
<p class="p">Three elements of a responsive, adaptable framework for
            governance are:</p>
<dl class="dl detailList">
<dt class="dt dlterm">Center of Excellence</dt>
<dd class="dd">A few stakeholders from different functional groups work together to ensure that
                    changes support business goals and follow IT best practices and processes.</dd>
<dt class="dt dlterm">Release Management</dt>
<dd class="dd">You’ve already learned how to use tools like change sets and a sandbox to manage
                    changes. If you use a backlog list to manage priorities, you can work on the
                    most important changes first. And if you design and document a complete release
                    management process as you learn more about your organization, everyone who works
                    with Salesforce
                    will be able to know how to do so safely. </dd>
<dt class="dt dlterm">Design Standards</dt>
<dd class="dd">Follow key standards for coding, testing, integration, large data volumes, and
                    other areas that affect the services you share with other Salesforce
                    customers. </dd>
</dl>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Create a Release Management Process</h3>
<p class="p">By using sandbox and permission sets, you’ve already created a simple release
                management process. Add structure by setting up a release schedule and defining
                criteria for major versus minor releases.</p>
<div class="p">Releases typically fall into one of the following categories:<dl class="dl detailList">
<dt class="dt dlterm">Daily</dt>
<dd class="dd">Bug fixes and simple changes that do not require formal release
                            management, including reports, dashboards, list views, email templates,
                            and user administration.</dd>
<dt class="dt dlterm">Minor</dt>
<dd class="dd">Changes with limited impact, such as a new workflow rule or trigger
                            impacting a single business process. These releases typically require
                            testing, but limited training and change management, and are delivered
                            within a few weeks.</dd>
<dt class="dt dlterm">Major</dt>
<dd class="dd">Changes with significant impact, including configuration and code
                            changes with one or more dependencies. Because these releases greatly
                            affect the user experience and data quality, they require thorough
                            testing, training, and careful change management. Major releases
                            typically occur once a quarter (or like Salesforce, three times a year).
                            Releasing on the same day of the week for minor and major releases is a
                            best practice. This allows for company-wide planning and sets
                            expectations with your business users. In addition, don’t schedule
                            releases near holidays or other major events.</dd>
</dl>
 Your release management strategy evolves over time. Add checks and balances as
                you discover frequent points of failure or common root causes. The CoE shares these
                best practices so that everyone who modifies or extends Salesforce knows how to do
                so safely. </div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading9">Design Standards</h3>
<p class="p">
            Salesforce is configurable,
            extendable, and supports integration with other applications and services. By following
            the same design standards, anyone who modifies your organization can ensure that their
            changes aren’t in conflict with another group’s changes. In addition, with Salesforce’s multi-tenant
            architecture, employing design standards helps ensure your changes stay within set
            governor limits.</p>
<p class="p">Some examples of design standards include:</p>
<ul class="ul bulletList">
<li class="li">Standard naming conventions</li>
<li class="li">Consistently using the Description field</li>
<li class="li">Bulkified code</li>
<li class="li">Standard methods for deprecating classes and fields</li>
<li class="li">Consistent data architecture across all projects</li>
</ul>
<div class="p">It’s important to have design standards for the following areas:<ul class="ul bulletList">
<li class="li">Coding</li>
<li class="li">Testing</li>
<li class="li">Integration</li>
<li class="li">Handling large data volumes</li>
<li class="li">Documentation</li>
</ul>
</div>
<p class="p">The architect or architecture team in your center of excellence
            defines your company’s design standards. Publish your design standards, and communicate
            them to all teams that work on Salesforce projects, and the
            rest of IT. </p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_intro_lifecycle_environments" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_lifecycle_environments"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Development Lifecycle Environments</span></h2>
<div class="body">
<p class="p">Let’s take a look at how to implement a software development cycle in Salesforce, starting with an easy
            example using a single development and testing environment. Each development and testing
            environment is represented in Salesforce by a sandbox. You learn
            more about sandboxes in a later unit.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading11">Single Development and Test Environment</h3>
<p class="p">For small or quick projects, it’s possible to simplify the development lifecycle by
                using a single environment for development and testing. If you’re just getting
                started developing in a sandbox, using a single environment is a good way to begin. </p>
<p class="p">
<a name="image_mw5_yv5_mr"></a><span class="image image-block"><img alt="Typical code migration path." class="image image-block" id="image_mw5_yv5_mr" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us59842d91da3f760c2079907b8f2c3ea9.jpg"/></span>
</p>
<div class="p">This simple development scenario is suitable for small and fast projects, such as: <ul class="ul bulletList">
<li class="li">New custom objects, tabs, and applications</li>
<li class="li">Integrations with other systems</li>
<li class="li">Apps involving Visualforce, workflow, or new validation rules</li>
</ul>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading12">Multiple Development and Test Environments</h3>
<div class="p">
<p class="p">As your development process matures, you’ll find that having multiple sandboxes
                allows greater flexibility. Even adding a single sandbox for testing frees up the
                developer sandbox for new features while testing proceeds. </p>
<a name="image_c1z_bw5_mr"></a><span class="image image-block"><img alt="Typical code migration path." class="image image-block" id="image_c1z_bw5_mr" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9352d608e21e3d221733bbc48c81f1c1.jpg"/></span>
<p class="p">This scenario starts to show its limitations when you have more than one developer
                working in the sandbox. In short, you can count on conflicts and overwriting
                changes. In this case, it can be better to have each developer work in their own
                Developer Edition org and deploy to the sandbox as a means of integration. </p>
<p class="p">When you have multiple developers in multiple sandboxes, you need to merge changes
                between the sandboxes before you deploy, which requires an integration sandbox. As
                you add more sandboxes to separate development projects, testing, and deployment,
                the picture becomes more complete. This next diagram shows the environments used for
                a development project slightly more complex than the previous one. The team has two
                developers, each with a sandbox. The changes from the developers are merged into a
                single testing environment (QA). After testing is completed, the changes are pushed
                to an environment where staff other than engineers can perform user acceptance
                testing (UAT). For example, product managers can use the UAT environment to ensure
                that the features work as expected and demo them. Finally, to ensure a smooth
                release to production, the changes are first staged in the staging environment and
                then released.</p>
<p class="p">
<a name="image_y1z_bw5_mr"></a><span class="image image-block"><img alt="Typical code migration path." class="image image-block" id="image_y1z_bw5_mr" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0e263c5fb37fbe6ee87f9ff3d360ba25.jpg"/></span>
</p>
<p class="p">Alternatively, changes from multiple developers can be merged in an external source
                control system. The source control system hosts the metadata (which includes source
                code) of projects in development in separate branches. When the app is deployed to
                production, it’s deployed from the source control system. The following diagram
                shows a comprehensive release cycle with all the intermediate development, testing,
                and staging environments. This release cycle uses a source control system.</p>
</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading13">Use a Central Source Control Repository with Multiple Environments</h3>
<p class="p">Use a source control repository, such as git, for team development. Using an external
                source control repository enables merging changes from multiple developers. Also,
                the repository allows isolation of projects that are in development. The source
                control repository is the source for all customizations deployed to all other
                environments. After the changes have been tested and validated in the various
                environments, a test deployment is made to the staging environment. If the
                deployment succeeds, the changes are migrated to production. This next diagram shows
                the various environments used in a team development project. The diagram is broken
                up in the different phases of the development lifecycle for releasing an app.</p>
<div class="fig fignone">
<span class="image image-block"><img alt="Full application lifecycle diagram for feature releases" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4aa8286827cbc31ae7a6df9be669cb03.png"/></span>
</div>
</div>
</div>
</div>
<div class="topic nested0" id="alm_intro_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading14">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=afK95S3UeyU" target="_blank">From Sandbox to Production: An Introduction to Release Management</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.dev_lifecycle.meta/dev_lifecycle/" target="_blank">Development Lifecycle Guide</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2014/12/salesforce1-enterprise-environment-management.html" target="_blank">Salesforce1 Platform Enterprise Environment
               Managment</a></li>
</ul>
</div>
</div>
</body></div><h1>Learn More About Sandboxes</h1><div class="unit-content">
<body id="alm_sandbox_learning_objectives"><a name="alm_sandbox_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Choose the appropriate sandbox for different scenarios.</li>
<li class="li">Know when to use sandbox templates and when to import data.</li>
<li class="li">Manage users and licenses in sandbox.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_sandbox_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_sandbox_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Sandboxes</span></h2>
<div class="body">
<p class="p"><dfn class="term">Sandboxes</dfn> create copies of your Salesforce org in separate environments. Use
            them for development, testing, and training, without compromising the data and
            applications in your production org. Sandboxes are isolated from your production org, so
      operations that you perform in your sandboxes don’t affect your production
    org.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p><strong class="ph b">Where’s my sandbox?</strong> Your Trailhead Developer Edition
            org doesn’t contain a sandbox because sandboxes aren’t available in Developer Edition
            orgs. Sandboxes are available in some editions, including Professional, Enterprise, and
            Unlimited. The following sections help you understand sandboxes so that you can learn
            how to use them in a supported edition.</p></div></div></div></div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Types of Sandboxes</h3>
<div class="p">There are four kinds of sandboxes. <dl class="dl detailList">
<dt class="dt dlterm">Developer</dt>
<dd class="dd">Developer sandboxes copy only the org’s configuration, no data. You can create
                            or load up to 200 MB of data, which is enough for many development and
                            testing tasks. You can refresh a Developer sandbox once per day.</dd>
<dt class="dt dlterm">Developer
                Pro</dt>
<dd class="dd">A Developer
                Pro sandbox can store up to 1 GB of data (about 500,000 records). It’s
                            otherwise similar to a Developer sandbox.</dd>
<dt class="dt dlterm">Partial
                Copy</dt>
<dd class="dd">A Partial
                Copy is a Developer sandbox, plus a sampling of data that you define in a sandbox
                            template. You have limited control over the data that is copied. You can
                            choose the objects, but not the records to pull. The sandbox can include
                            up to 5 GB of data, which is about 2.5 million records, with a maximum
                            of 10,000 records per object. You can refresh a Partial
                Copy sandbox every five days.</dd>
<dt class="dt dlterm">Full</dt>
<dd class="dd">A copy of your production organization and all its data. Because the Full sandbox is an exact copy, the amount of data in the sandbox is the
                            same as your production org. You can refresh a Full sandbox every 29 days.</dd>
</dl>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Refresh Sandboxes</h3>
<p class="p">Refresh your sandbox periodically to update it with data and metadata components from
                production. Refreshing sandboxes ensures that your sandbox doesn’t miss any changes
                that were deployed to production by another sandbox or manually introduced in
                production. When you refresh a sandbox, Salesforce rebuilds your
                environment and erases its old contents. The content in your new sandbox is replaced
                with a copy of the production org. Beware that it’s possible to overwrite all the
                development you’ve done in your sandbox. Therefore, it’s a good practice for each
                developer to have their own sandbox and make their own backups. Establish a process
                with the rest of the team for refreshing sandboxes.</p>
<div class="p">How often you can refresh your sandbox depends on the sandbox type. The following
                table lists the refresh cycle per sandbox type, along with some other statistics.
                    
<div class="data colSort"><table class="featureTable sort_table" summary=""><caption><span class="tablecap">Table 1. Sandbox Comparison</span></caption>
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader text-left" id="d15385e167"></th>
<th class="featureTableHeader text-center" id="d15385e169">Developer</th>
<th class="featureTableHeader text-center" id="d15385e173">Developer
                Pro</th>
<th class="featureTableHeader text-center" id="d15385e177">Partial
                Copy</th>
<th class="featureTableHeader text-center" id="d15385e181">Full</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class=" text-left" data-title="" headers="d15385e167">Refresh Interval</td>
<td class=" text-center" data-title="Developer" headers="d15385e169">1 day</td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e173">1 day</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e177">5 days</td>
<td class=" text-center" data-title="Full" headers="d15385e181">29 days</td>
</tr>
<tr>
<td class=" text-left" data-title="" headers="d15385e167">Copies Data</td>
<td class=" text-center" data-title="Developer" headers="d15385e169">No</td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e173">No</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e177">Yes</td>
<td class=" text-center" data-title="Full" headers="d15385e181">Yes</td>
</tr>
<tr>
<td class=" text-left" data-title="" headers="d15385e167">Size</td>
<td class=" text-center" data-title="Developer" headers="d15385e169">200 MB</td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e173">1 GB</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e177">5 GB</td>
<td class=" text-center" data-title="Full" headers="d15385e181">Same as production</td>
</tr>
<tr>
<td class=" text-left" data-title="" headers="d15385e167">Templates and Sampling</td>
<td class=" text-center" data-title="Developer" headers="d15385e169">No &amp; No</td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e173">No &amp; No</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e177">Yes &amp; Yes</td>
<td class=" text-center" data-title="Full" headers="d15385e181">Yes &amp; No</td>
</tr>
<tr>
<td class=" text-left" data-title="" headers="d15385e167">Bundled Developer Sandboxes</td>
<td class=" text-center" data-title="Developer" headers="d15385e169">N/A</td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e173">5</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e177">10</td>
<td class=" text-center" data-title="Full" headers="d15385e181">15</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Sandbox Uses</h3>
<p class="p">Full sandboxes are required only for performance and scalability testing, as well as
                for staging before final deployment. You might also need a Full sandbox to test triggers that make non-selective queries. For all other use
                cases, a partial copy of data is enough. For testing, it’s often better not to copy
                data at all, but rather load the same set of data every time. Data is time consuming
                to copy, and a large volume of data can take days to complete. </p>
<div class="p">The following table compares sandboxes and their ideal use. 
<div class="data colSort"><table class="featureTable sort_table" summary=""><caption><span class="tablecap">Table 2. Sandbox Uses</span></caption>
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d15385e322">Use Case</th>
<th class="featureTableHeader text-center" id="d15385e325">Developer</th>
<th class="featureTableHeader text-center" id="d15385e329">Developer
                Pro</th>
<th class="featureTableHeader text-center" id="d15385e333">Partial
                Copy</th>
<th class="featureTableHeader text-center" id="d15385e337">Full</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Develop</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/>
</td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">QA</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Integration Test</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Batch Data Test</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Training</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">UAT</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Performance and Load Testing</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
<tr>
<td class="entry" data-title="Use Case" headers="d15385e322">Staging</td>
<td class=" text-center" data-title="Developer" headers="d15385e325"></td>
<td class=" text-center" data-title="Developer Pro" headers="d15385e329"></td>
<td class=" text-center" data-title="Partial Copy" headers="d15385e333"></td>
<td class=" text-center" data-title="Full" headers="d15385e337"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
</tr>
</tbody>
</table></div>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Creating or refreshing a sandbox doesn’t happen via the Metadata API, so the components
                copied aren’t restricted to objects that have XML representations. Therefore, you
                get a true and complete copy of everything in the production org. After initial
                creation, you can refresh the sandbox, creating a new sandbox in place of the old
                one.</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic nested0" id="alm_sandbox_load_data" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_sandbox_load_data"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Use Data in Sandbox</span></h2>
<div class="body">
<div class="p">You can supply data for testing in sandbox in several ways.<ul class="ul bulletList">
<li class="li">Use sandbox templates to provide real-world data that makes your testing
                    environment more closely resemble your production instance. Sandbox templates
                    are available only in a Partial
                Copy or Full sandbox.</li>
<li class="li">Import external data into your sandbox to make repeatable testing easier because
                    the data set is static and can be relied on not to change.</li>
</ul>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading9">Copy Production Data with Sandbox Templates</h3>
<p class="p">If you have a Partial
                Copy or Full sandbox, you can pick which standard and custom objects to copy over from
                production by using sandbox templates. Sandbox templates help you limit the size of
                your sandbox by limiting the data that is copied over. Generally, you need only a
                representative set of data for testing in sandbox, not all the data from production.
                Reducing the amount of data that is copied to sandbox can significantly reduce the
                sandbox copy time.</p>
<p class="p">The sandbox template editor understands the object relationships defined in your
                org’s schema. Some objects are always included because they’re required in any org.
                As you select objects to copy, the editor ensures that the associated required
                objects are added.</p>
<div class="p">To access sandbox templates:<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">Sandboxes</kbd> in the
                            <span class="keyword parmname">Quick Find</span> box, select
                            <strong class="ph uicontrol">Sandboxes</strong>, then click the <strong class="ph uicontrol">Sandbox
                            Templates</strong> tab.</li>
<li class="li">Click <strong class="ph uicontrol">New Sandbox
                            Template</strong> or click <strong class="ph uicontrol">Edit</strong> next to an
                        existing template you want to modify.</li>
</ol>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading10">Import Test Data</h3>
<p class="p">You might think it’s more convenient to use a Partial
                Copy or Full sandbox, and simply avoid having to load data, but that’s not necessarily better
                than loading test data. Data on the production org changes all the time, so anything
                you’re repetitively testing can give you unexpected results. Static data provides
                consistency. </p>
<p class="p">Generally, it’s better to load a small, representative set of test data into your Developer and Developer
                Pro sandboxes. When functionality changes unexpectedly, it’s easier to pinpoint where
                the problem occurred when the data is static. Developer and Developer
                Pro sandboxes also have a shorter refresh cycle. </p>
<div class="p">Most people load data using CSV files and the data loader. For more information, see
                    <a class="xref" href="https://developer.salesforce.com/page/Data_Loader" target="_blank">Data Loader</a>. <div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>There are other data loaders
                    available on the AppExchange. Some
                    add more functionality and usability over the standard Salesforce
                    Data Loader, and you are
                    encouraged to try them out.</p></div></div></div></div></div>
</div>
<p class="p">If you’re loading large sets of data, you can use the Force.com
                Bulk API. The Bulk API and supporting web
                interface allows you to upload and create import jobs, monitor and manage jobs, and
                receive notifications when the jobs complete. For more information, see <a class="xref" href="https://developer.salesforce.com/page/Loading_Large_Data_Sets_with_the_Force.com_Bulk_API" target="_blank">Loading Large Data Sets with the Force.com Bulk
                    API</a>.</p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_sandbox_users" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_sandbox_users"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Manage Sandbox Users and Logins</span></h2>
<div class="body">
<p class="p">Anyone with a production login can log in to a sandbox. Although most users in the
            production org probably aren’t aware of the existence of a sandbox, you probably don’t
            want them poking around your development environment either. To manage access, you can
            deactivate production users in sandbox. That works out well, because the deactivated
            production users make room for developers, who usually don’t have a login to the
            production system, but need a login to sandbox. This user license trading is necessary,
            because you have a finite number of licenses.</p>
<p class="p">The easiest way to give developers a login to sandbox is to create them as users in
            production, but don’t activate them until needed. After creating or refreshing a
            sandbox, deactivate production users who don’t need access and then  activate the
            developer users. Just make sure that the user you deactivate in sandbox isn’t someone
            who logs in to that environment. </p>
<p class="p">All licenses are copied from production to sandbox. If a new license is applied in
            production and you want to apply it to sandbox, you must refresh with the sync tool (see
                <a class="xref" href="http://releasenotes.docs.salesforce.com/en-us/summer14/release-notes/rn_forcecom_sandbox_copy_licenses.htm" target="_blank"> Match Production Licenses to Sandbox without a
                Refresh</a>). If you don’t refresh, you can lose your work.</p>
<p class="p">When you create a sandbox, all email addresses, except the sandbox creator, are modified
            so that people don’t receive emails from sandbox testing. Note that email delivery
            defaults to off, so if you need to test automated emails from Apex or workflow rules,
            you must turn this setting on. Not only are emails not sent, but unit tests fail
                when<samp> Messaging.sendEmail</samp> throws exceptions.</p>
</div>
</div>
<div class="topic nested0" id="alm_sandbox_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_sandbox_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading12">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Videos"><span class="ph doc_video"><a class="xref doc_video_link" href="http://salesforce.vidyard.com/watch/ztQE-qJseZsWPUOYg7krfg" onclick="javascript:window.open('http://salesforce.vidyard.com/watch/ztQE-qJseZsWPUOYg7krfg', '_blank', 'width=800,height=475,resizable=yes,toolbar=no,status=no,scrollable=no,menubar=no,directories=no,location=no,dependant=no'); return false;" target="_blank" title="video (New Window)"><span class="image doc_video_play_button"><img alt="Watch Video Demo" class="image doc_video_play_button" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7abbbed3c9243ffb298fcc3c7dba3bf4.png"/></span>
<span class="ph doc_video_title">Release Management: Developing and Testing on
                      Sandbox</span>
                    (Salesforce Classic)</a></span> (Video)</li>
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=afK95S3UeyU" target="_blank">From Sandbox to Production: An Introduction to
               Salesforce Release Management</a> (Video)</li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=data_sandbox_environments.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Sandbox Licenses and Storage by Type</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/page/An_Introduction_to_Environments" target="_blank" title="HTML (New Window)">An
               Introduction to Environments </a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=data_sandbox_implementation_tips.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Sandbox
      Setup Considerations</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=data_sandbox_licenses.htm&amp;language=en_US" target="_blank" title="HTML (New Window)">Unlock a Sandbox</a></li>
<li class="li Documentation"><a class="xref" href="https://help.salesforce.com/apex/HTViewSolution?urlname=Inactive-Sandboxes-Subject-to-Deletion" target="_blank" title="HTML (New Window)">Inactive Sandbox
               Deletion</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2014/12/salesforce1-enterprise-environment-management.html" target="_blank" title="HTML (New Window)">Salesforce1 Platform
               Enterprise Environment Management blog post</a></li>
</ul>
</div>
</div>
</body></div><h1>Plan Your Production Deployment</h1><div class="unit-content">
<body id="alm_deploy_learning_objectives"><a name="alm_deploy_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Schedule a release to production using a formalized process.</li>
<li class="li">Use profiles to limit user access during a release window.</li>
<li class="li">Describe which best practices to follow when changes are made in production instead
                of sandbox.</li>
<li class="li">Explain what a metadata type is.</li>
<li class="li">Describe how to track changes manually when changes are not supported in Metadata
                API.</li>
<li class="li">Choose the right tool to move changes when sandbox and production are on different
                releases.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_deploy_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_deploy_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Plan Your Production Deployment</span></h2>
<div class="body">
<p class="p">Any time you deploy changes to a production environment, your users are directly affected.
            It’s a good idea to have guidelines for rolling out new functionality. </p>
<ol class="ol enumList">
<li class="li">Don’t break anything. <ol class="ol enumList" type="a">
<li class="li">Release your production functionality in a test environment first. If you
                        successfully deploy and test in a full-copy sandbox, you can be fairly
                        confident that your deployment to production will succeed.</li>
<li class="li">Back up all your metadata.</li>
<li class="li">Have a backup plan, just in case. One method is to create another sandbox as
                        a backup. The backup sandbox contains change sets and scripts to revert as
                        many changes as possible, plus the manual steps required.</li>
</ol>
</li>
<li class="li">Schedule the release. <ol class="ol enumList" type="a">
<li class="li">Create and announce a maintenance window during which your organization is
                        unavailable to most users. Try to make this time during off hours or in
                        periods of low activity.</li>
<li class="li">Use profiles to control maintenance updates.</li>
</ol>
</li>
<li class="li">Inform users of every change. <ol class="ol enumList" type="a">
<li class="li">Create detailed release notes that document the new functionality and
                        behavior changes.</li>
<li class="li">Send an email announcing the main features with a link to the release
                        notes.</li>
<li class="li">Create webinars and training sessions to educate users.</li>
</ol>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="alm_deploy_profiles" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_deploy_profiles"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Use Profiles to Limit User Access </span></h2>
<div class="body">
<p class="p">During a deployment window, you can use profiles to limit end-user access to the
            production organization.</p>
<ol class="ol enumList">
<li class="li">Alert all active users about the maintenance window using the email wizard. From Setup, enter <kbd class="ph userinput">Mass Email Users</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Mass Email Users</strong>.  </li>
<li class="li">Create a profile to lock users out during the maintenance window by editing the
                login hours. Be sure that system administrators or integration users have access if
                they need it. </li>
<li class="li">Roll out objects, tabs, and apps to different user profiles if you want to allow
                some users access for acceptance testing.</li>
</ol>
<p class="p">If your organization includes many profiles, use the following strategy for setting up a
            maintenance window.</p>
<ol class="ol enumList">
<li class="li">Create a profile named Maintenance with all login hours locked out.</li>
<li class="li">Use the Data Loader to extract and save a mapping of users and their user
                profiles.</li>
<li class="li">At the beginning of the maintenance window, use the Data Loader to change all user
                profiles, except the administrator’s, to the Maintenance profile. It is important to
                leave login access with the administrator. Otherwise, all users could be locked out
                of the system indefinitely. If integrations are going to run during the maintenance
                window, also don’t lock out the integration user.</li>
<li class="li">At the end of the maintenance window, use the Data Loader to reload the users with
                their original profiles.</li>
</ol>
</div>
</div>
<div class="topic nested0" id="alm_change_process_establishing" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_change_process_establishing"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Establish a Process for Changes in Production</span></h2>
<div class="body">
<p class="p">Ease of development is one of the many strengths of the Force.com platform. However, when
            it comes to developing enterprise applications, this ease of development can lead to
            changes occurring on the production organization while applications are being developed
            in sandbox. </p>
<p class="p">To guarantee a successful deployment to your production organization, it is necessary to
            move changes from production to development, so that your development environments have
            the same changes that occurred on production. This may seem like a backwards thing to
            do, to move modifications from your production organization to your development
            environments, but it’s necessary because migrating from development to production can
            overwrite the changes already made on production. </p>
<p class="p">When modifications occur on the production organization, you need to create or refresh a
            sandbox to get the latest changes. Note that you can’t refresh the sandbox used by the
            development team - the sandbox refresh would wipe out their changes! Therefore, tracking
            changes between the production and development environments, and then merging those
            differences from production to development, can be a necessary process.</p>
<p class="p">To make these tasks easier, it’s a good idea to establish a change process for your
            production organization. A change process determines what kinds of modifications can
            take place on your production organization, when they can occur, and who is responsible
            for making the changes. The change process you adopt depends on the kinds of
            modifications you require in your production environment. The following list suggests
            some options for change processes, some of which can be used in conjunction.</p>
<ul class="ul bulletList">
<li class="li"><strong class="ph b">Allow no changes on production</strong>—This is the simplest and most draconian
                measure you can enforce. In effect, you are sacrificing immediate setup changes for
                easier deployment. If you choose this process, all development happens in sandbox.
                All enhancements would go through a formal request process and would be rolled out
                simultaneously. You can still carry out ad hoc changes with this policy, but they
                have to follow the same process as larger scheduled changes.</li>
<li class="li"><strong class="ph b">Modify only components that have XML representations</strong>—Manually tracking and
                deploying changes is far more complicated than using diff/merge tools. If you can
                limit production changes to components that are accessible through the Metadata API,
                you can simplify change tracking, merging, and deployment.</li>
<li class="li"><strong class="ph b">Allow only one administrator to make setup changes</strong>—Some organizations find it
                useful to assign a single administrator who is responsible for all setup changes on
                production. This process makes it easier to track changes on the production
                organization and replicate those changes back into development environments between
                sandbox refreshes. This approach is flexible because it allows changes in production
                and project-based development at the same time. However, it also adds a single point
                of failure, and that administrator needs to understand the impact of changes to any
                aspect of the system. The single-administrator approach might be difficult to scale
                in an enterprise environment.</li>
<li class="li"><strong class="ph b">Schedule production changes</strong>—If your organization requires frequent changes to
                the production environment, you can schedule a time to migrate those changes to your
                development environments. Depending on the number of organizations you have, this
                could be an easy migration done frequently (weekly, perhaps), or a more elaborate
                process performed less often (once per quarter). A regular deployment schedule also
                helps users’ expectations for new functionality and training. </li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_intro_metadata_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_intro_metadata_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Metadata Types</span></h2>
<div class="body">
<p class="p">Customizations and feature settings, such as custom objects or account settings, Apex code, and Visualforce pages, are represented
            as metadata components. You can retrieve or deploy each metadata component as an XML
            file with the Metadata API or by using
            deployment tools, such as the Force.com Migration Tool. The category of a
            metadata component is a metadata type. For example, three custom object components are
            represented each as an XML file. The type of each component corresponds to the
            CustomObject metadata type.</p>
<p class="p">The following XML is a basic representation of a custom object named <samp>Book</samp>. <samp>Book</samp> is the
            name of the metadata component and its corresponding metadata type is <samp>CustomObject</samp>.</p>
<div class="codeblock"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;CustomObject xmlns="http://soap.sforce.com/2006/04/metadata"&gt;
    &lt;deploymentStatus&gt;Deployed&lt;/deploymentStatus&gt;
    &lt;label&gt;Book&lt;/label&gt;
    &lt;nameField&gt;
        &lt;label&gt;Book Name&lt;/label&gt;
        &lt;type&gt;Text&lt;/type&gt;
    &lt;/nameField&gt;
    &lt;pluralLabel&gt;Books&lt;/pluralLabel&gt;
    &lt;sharingModel&gt;ReadWrite&lt;/sharingModel&gt;
&lt;/CustomObject&gt;</pre></div>
<p class="p">You can check in your XML files in a version control system, and you can track changes
            using the version control system’s built-in functionality. Most customizations that you
            develop in Salesforce, such as
            custom fields and objects, workflow rules, reports, Visualforce pages, Apex classes, are
            available through the Metadata API as
            XML files. You can download the files and work with them in a local file system, which
            allows you to do many useful things, such as:</p>
<ul class="ul bulletList">
<li class="li">Develop using an integrated development environment, such as the Force.com IDE</li>
<li class="li">Store and version the metadata files in a source control system</li>
<li class="li">Copy and paste to create or edit components</li>
<li class="li">Use tools that implement the Metadata API, such as the Force.com Migration Tool, to send changes from
                one environment to another</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_change_process_manual" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_change_process_manual"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Best Practices for Managing Unsupported Metadata Types</span></h2>
<div class="body">
<p class="p">Most customizations and feature settings in Salesforce, such as custom objects
            or account settings, are available through Metadata API. However, some
            customizations aren’t represented in Metadata API as metadata components.
            You can’t deploy those changes from one environment to another. Instead, you have to
            manually recreate the changes in each environment. </p>
<p class="p">For example, let’s say you are developing an app that uses Opportunity Big Deal Alert,
            which isn’t available as a metadata component. You’ve developed an Apex class that also
            depends on this metadata type. Before you can deploy the Apex class, you must
            create the Opportunity Big Deal Alert functionality in each sandbox and in production.
            Making manual changes can quickly get complicated with large deployments of many
            dependent types.</p>
<p class="p">With every release of Salesforce, we
            support more and more metadata types, and in time, we hope to have everything supported.
            Although it’s not a best practice, the easiest practice is to develop functionality that
            is represented in the Metadata API
            whenever possible. As you get more experienced with application lifecycle management,
            you can introduce more complexity, such as using unsupported types.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Track Changes Manually</h3>
<p class="p">You track every change that occurs through the Salesforce user interface.
                Changes made in the user interface don’t appear in your other development
                environments or version control systems, so a process to refresh these environments
                is necessary. Concurrent changes between the user interface tools and the Metadata API often create
                dependencies and are a common source of deployment problems or overwriting changes
                unintentionally. For this reason, manually track all changes made through the user
                interface and then have a process for replicating those changes in other
                environments. </p>
<div class="p">It is important to have a method for tracking all changes, and especially important if
                those changes require manual migration. A useful tool is a change request form that
                users and administrators fill out for every enhancement requested or change
                performed. You could also use a spreadsheet or create a custom application within
                    Salesforce to record change
                requests and the actual changes made. The tool used is less important than making
                sure that developers and administrators understand that absolutely every change must
                be tracked. <div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The AppExchange includes
                    custom apps that you can install to manage this process, such as the free Change
                    Control app.</p></div></div></div></div></div>
</div>
<div class="p">Whatever way you use to track changes, list every change that occurred, including: <ul class="ul bulletList">
<li class="li">Who made the change</li>
<li class="li">The organization where the change occurred</li>
<li class="li">Date and time</li>
<li class="li">Which component was changed</li>
<li class="li">The deployment order</li>
</ul>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Use the Setup Audit Trail</h3>
<p class="p">Changes made in the Salesforce user
                interface are logged in the setup audit trail. Using the audit trail in conjunction
                with your manual change tracking tool is the best way to ensure that you do not miss
                any changes. How you manage this process is up to you. But it’s a good idea to
                regularly transfer all changes in the audit trail to your change list (once a week,
                for example) or use the audit trail to cross-check changes on your change list.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading9">Run Tests</h3>
<p class="p">Changes made in the user interface can break tests, which then block deployments until those
                tests are fixed. To avoid delays, run all unit tests frequently in your org.</p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_deploy_saleforce_releases" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_deploy_saleforce_releases"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>How Salesforce
            Releases Affect Your Release Schedule</span></h2>
<div class="body">
<p class="p">Salesforce usually upgrades to a new
            version three times per year. A sandbox preview window occurs right before the upgrade
            so that you can try out new features before your production organization is upgraded.
            For a brief time, your sandbox and production organizations could be running different
            versions of Salesforce.</p>
<p class="p">This preview window can affect your environment in the following ways.</p>
<ul class="ul bulletList">
<li class="li">If your sandbox is on a newer release than production, you can’t use change sets to
                migrate changes. You can use other options to move changes between a preview sandbox
                and production. For example, you can use the Force.com IDE and Force.com Migration Tool, as long as they are
                set to an API version that the production org supports. </li>
<li class="li">If Full or Partial
                Copy sandboxes have a refresh interval that coincides with a preview window, the
                sandbox could be in the previous API version. You then need to wait for the refresh
                interval before you can run the same version as production. </li>
</ul>
<p class="p">Sandboxes are usually upgraded earlier than the production organization, but it could be
            later, depending on the instance. The sandbox copy date determines the schedule. You can
            view the upcoming maintenance schedule at our <a class="xref" href="http://trust.salesforce.com/trust/status" target="_blank">trust
                site</a> by clicking the <strong class="ph uicontrol">View Upcoming Maintenance
                Schedule</strong> link. </p>
<p class="p">Typically, you create a sandbox to get the latest changes from production. You can deploy
            and test new features in the sandbox. If everything works as expected, the new features
            are deployed to production and then to other development environments.</p>
<p class="p">Salesforce upgrades are scheduled
            during off-peak hours and rarely affect users. However, IT departments often schedule
            their own batch processes during these same hours, so it’s important to avoid conflicts.
            Things that happen during an upgrade are:</p>
<ul class="ul bulletList">
<li class="li"><strong class="ph b">New logo</strong>—The Salesforce
                logo is a quick way to verify which version you’re using. Sandboxes can upgrade
                before or after your production organization. To see if the sandbox has been
                upgraded, check the logo in the upper left corner of your sandbox home page around
                the time of a Salesforce release
                .</li>
<li class="li"><strong class="ph b">New features</strong>—Every release contains new features, and consequently, new
                components available through the Metadata API. Click the What's New
                link in the Help and Training window to view the release notes.</li>
<li class="li"><strong class="ph b">Incremented API version</strong>—The API version increments every release. Access to
                new features requires connecting to the new version of the API. Having different API
                versions running in different environments can cause problems if you aren’t
                expecting them.</li>
<li class="li"><strong class="ph b">Staggered upgrades</strong>—If your production and sandbox organizations aren’t
                running the same version during the upgrade window, wait to deploy components that
                are new or have additional metadata. If you migrate changes that have newer
                components to an organization that hasn’t been upgraded to support them, the
                deployment fails.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_deploy_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_deploy_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation">
<cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.dev_lifecycle.meta/dev_lifecycle/" target="_blank" title="HTML (New Window)">Development Lifecycle Guide</a></cite>
</li>
<li class="li"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/" target="_blank" title="HTML (New Window)">Metadata API Developer’s
                  Guide</a></cite></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/meta_unsupported_types.htm" target="_blank" title="HTML (New Window)">Unsupported Metadata
               Types</a> in the <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/" target="_blank" title="HTML (New Window)">Metadata API Developer’s
                  Guide</a></cite></li>
<li class="li"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=admin_monitorsetup.htm&amp;language=en_US" target="_blank">Monitor Setup Changes</a> in the
               <cite class="cite">Salesforce Help</cite></li>
</ul>
</div>
</div>
</body></div><h1>Deployment Tool Options</h1><div class="unit-content">
<body id="alm_tools_learning_objectives"><a name="alm_tools_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Choose the appropriate deployment tool depending on your scenario.</li>
<li class="li">Know when to use managed and unmanaged packages in your organization.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_tools_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_tools_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Deployment Tools</span></h2>
<div class="body">
<p class="p">You can use various tools to move metadata from one organization to another. It’s beyond
            the scope of this unit to teach how to set up and use each tool. However, at the end of
            this unit, you’ll have an understanding of the available tools, including the
            recommended tools to use. The Resources section at the end of this unit contains links
            to videos and documentation that provide more information about setting up and using
            those tools.</p>
<p class="p">Change Sets and the Force.com Migration Tool are the
            recommended tools for migration. Change Sets is accessible through the Salesforce user interface and allows
            migrations between sandbox and production. The Force.com Migration Tool is a command-line tool and
            migrates data between two environments, including Developer Editions orgs.</p>
<p class="p">The easiest way to move changes between a sandbox and a production environment is with a
            change set. For small deployments, the UI is easy to use, allowing you to select
            components and find dependencies. Because everything happens in the cloud, you don’t
            need to bring files to a local file system. You can also reuse a change set. After a
            change set is locked, you can deploy to all connected environments, secure in the
            knowledge that nothing can change. You can also clone a change set and make minor
            changes. </p>
<div class="box message confirm"><div class="inner"><div class="bd"><div class="media"><img alt="Tip" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6da477d97c76333bb64f0d69f440dc0d.gif"/><div class="mediaBd"><h4 class="mbs">Tip</h4><p>The <a class="xref" href="https://trailhead.salesforce.com/module/app_deployment" target="_blank">Change Management module</a>
            covers Change Sets.</p></div></div></div></div></div>
<p class="p">The Force.com Migration Tool is
    a Java/Ant-based command-line utility for moving metadata between a local directory and a Salesforce org. Use the Force.com Migration Tool to perform
            repetitive deployments that can be scripted and that use the same components (the same
                <span class="ph filepath">package.xml</span> file). For example, let’s say you make the same
            deployment to dev, test, and user acceptance testing (UAT) sandboxes and production. You
            want to be certain that the same components are deployed each time. The reliability of
            this tool makes it ideal for enterprise customers who are developing complex projects. </p>
<p class="p">The following table compares both tools and provides examples of when it’s best to use
            each tool.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d17873e102">Tool</th>
<th class="featureTableHeader " id="d17873e105">Point &amp; Click</th>
<th class="featureTableHeader " id="d17873e108">Scriptable</th>
<th class="featureTableHeader " id="d17873e111">Best for</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Tool" headers="d17873e102">Change Sets</td>
<td class="entry" data-title="Point &amp; Click" headers="d17873e105"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class="entry" data-title="Scriptable" headers="d17873e108"></td>
<td class="entry" data-title="Best for" headers="d17873e111">
<ul class="ul bulletList">
<li class="li">Straight sandbox to production migrations</li>
<li class="li">Change management without using a local file system</li>
<li class="li">Auditing previously deployed changes</li>
<li class="li">Enforcing code migration paths</li>
<li class="li">Deploying the same components to multiple orgs</li>
</ul>
</td>
</tr>
<tr>
<td class="entry" data-title="Tool" headers="d17873e102">Force.com Migration Tool</td>
<td class="entry" data-title="Point &amp; Click" headers="d17873e105"></td>
<td class="entry" data-title="Scriptable" headers="d17873e108"><img alt="Check mark indicating true" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us68cdc42b112b13f66432c742b3b95266.png"/></td>
<td class="entry" data-title="Best for" headers="d17873e111">
<ul class="ul bulletList">
<li class="li">Development projects for which you need to populate a test environment with a lot of setup
     changes—Making these changes using a web interface can take a long time.</li>
<li class="li">Multistage release processes—A typical development process requires iterative
     building, testing, and staging before releasing to a production environment. Scripted retrieval
     and deployment of components can make this process much more efficient. </li>
<li class="li">Repetitive deployment using the same parameters—You can retrieve all the metadata in
     your organization, make changes, and deploy a subset of components. If you need to repeat this
     process, it’s as simple as calling the same deployment target again.</li>
<li class="li">When migrating from stage to production is done by IT—Anyone that prefers deploying
     in a scripting environment will find the Force.com Migration Tool a familiar process.</li>
<li class="li">Scheduling batch deployments—You can schedule a deployment for midnight to not
     disrupt users. Or you can pull down changes to your Developer Edition org every day.</li>
</ul>
</td>
</tr>
</tbody>
</table></div>
<p class="p">Learn about each tool’s considerations to better determine which tool is best suited for
            your needs.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Change Set Considerations</h3>
<ul class="ul bulletList">
<li class="li">You can move metadata only between the production org and its sandboxes. You
                    can’t move changes between two production orgs or Developer Editions.</li>
<li class="li">You can add components with a change set, but you can’t delete them. You must
                    use another method to delete components, typically manually.</li>
<li class="li">Because change sets are cloud-based, they’re not ideal when used with a source
                    control system. </li>
</ul>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Force.com Migration Tool
                Considerations</h3>
<ul class="ul bulletList">
<li class="li">Requires a more developer-oriented skill set, with experience of Ant and
                    scripting tools</li>
<li class="li">Requires storing the username and password on disk, which some security policies
                    don’t permit </li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="alm_tools_other" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_tools_other"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Other Deployment Tools and Artifacts</span></h2>
<div class="body">
<p class="p">Besides Change Sets and the Force.com Migration Tool, you can use various tools for deployment. The following table compares some of the
            tools.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d17873e261">Tool</th>
<th class="featureTableHeader " id="d17873e264">Best For</th>
<th class="featureTableHeader " id="d17873e267">Limitations</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Tool" headers="d17873e261">Force.com IDE<p class="p"><em class="ph i">Description:</em></p>
<p class="p">Plug-in to Eclipse used for both
                                development and deployment</p>
</td>
<td class="entry" data-title="Best For" headers="d17873e264">
<ul class="ul bulletList">
<li class="li">Project-based development</li>
<li class="li">Deployment to any org</li>
<li class="li">Synchronizing changes</li>
<li class="li">Selecting only the components you need</li>
</ul>
</td>
<td class="entry" data-title="Limitations" headers="d17873e267">
<ul class="ul bulletList">
<li class="li">Some setup required</li>
<li class="li">Not always upgraded at the same time as other Salesforce
                                    products</li>
<li class="li">Repeatable deployments require re-selecting components, which
                                    can be time consuming and introduce errors</li>
</ul>
</td>
</tr>
<tr>
<td class="entry" data-title="Tool" headers="d17873e261">Force.com Workbench<p class="p"><em class="ph i">Description:</em></p>
<p class="p">Lightweight web-based
                                tool that uses your local file system</p>
</td>
<td class="entry" data-title="Best For" headers="d17873e264">
<ul class="ul bulletList">
<li class="li">Ad hoc queries</li>
<li class="li">Deploy or retrieve components with a package.xml file</li>
<li class="li">Metadata describes</li>
<li class="li">Lightweight data loads</li>
</ul>
</td>
<td class="entry" data-title="Limitations" headers="d17873e267">
<ul class="ul bulletList">
<li class="li">Not an officially supported product</li>
<li class="li">No project management features</li>
</ul>
</td>
</tr>
<tr>
<td class="entry" data-title="Tool" headers="d17873e261">Force.com CLI<p class="p"><em class="ph i">Description:</em></p>
<p class="p">Command-line interface for
                                Force.com APIs</p>
</td>
<td class="entry" data-title="Best For" headers="d17873e264">
<ul class="ul bulletList">
<li class="li">Scripted commands and automated tasks</li>
<li class="li">When your security policies dictate that passwords must not be
                                    stored on disk; forces interactive login</li>
</ul>
</td>
<td class="entry" data-title="Limitations" headers="d17873e267">
<ul class="ul bulletList">
<li class="li">Logging in can be difficult behind a firewall</li>
</ul>
</td>
</tr>
</tbody>
</table></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Deployment Artifacts</h3>
</div>
<p class="p">In addition to deployment tools, packages are another way to move metadata components
            from one org to another. However, packages are deployment artifacts and not deployment
            tools. The main use case of packages is for ISV developers to distribute apps to
            subscribers. But they can be used also for moving changes between Developer Edition
            orgs.</p>
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d17873e418">Artifact</th>
<th class="featureTableHeader " id="d17873e421">Best For</th>
<th class="featureTableHeader " id="d17873e424">Limitations</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Artifact" headers="d17873e418">Unmanaged Packages<p class="p"><em class="ph i">Description:</em></p>
<p class="p">A collection of
                                application components that can be distributed and installed in
                                other orgs.</p>
</td>
<td class="entry" data-title="Best For" headers="d17873e421">
<ul class="ul bulletList">
<li class="li">One-time setup of a development environment</li>
<li class="li">A starting point configuration that can be customized</li>
</ul>
</td>
<td class="entry" data-title="Limitations" headers="d17873e424">
<ul class="ul bulletList">
<li class="li">You cant’t make further changes to packaged components using
                                    subsequent packages</li>
<li class="li">Requires a Developer Edition org</li>
</ul>
</td>
</tr>
<tr>
<td class="entry" data-title="Artifact" headers="d17873e418">Managed Packages<p class="p"><em class="ph i">Description:</em></p>
<p class="p">A collection of
                                application components with a namespace that can be distributed and
                                installed in other orgs. Managed packages can be listed on the
                                AppExchange and are upgradeable.</p>
</td>
<td class="entry" data-title="Best For" headers="d17873e421">
<ul class="ul bulletList">
<li class="li">Commercial applications</li>
<li class="li">Functionality you want to add in multiple, possibly non-related
                                    orgs</li>
</ul>
</td>
<td class="entry" data-title="Limitations" headers="d17873e424">
<ul class="ul bulletList">
<li class="li">Access to code is limited or hidden</li>
<li class="li">Unique namespace can be bothersome or a blocker</li>
<li class="li">Difficult to modify or delete components</li>
<li class="li">Requires a Developer Edition org</li>
</ul>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="topic nested0" id="alm_tools_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_tools_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation">
<a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=changesets.htm&amp;language=en_US" target="_blank" title="HTML (New Window)"> Change Sets Overview </a>
</li>
<li class="li Documentation">
<a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=changesets_implementation_notes.htm&amp;language=en_US" target="_blank" title="HTML (New Window)"> Change Sets Implementation Tips </a>
</li>
<li class="li Documentation">
<a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=changesets_best_practices.htm&amp;language=en_US" target="_blank" title="HTML (New Window)"> Change Sets Best Practices </a></li>
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=JUMD3YB_Xu0" target="_blank">Get Started with the Force.com IDE for Admins</a>
                        (Video)</li>
<li class="li"><a class="xref" href="http://www.slideshare.net/asagarwal/step-bystep-guide-to-configure-forcecom-ide-with-eclipse" target="_blank">Step-by-Step Guide to Install and
                              Configure Force.com IDE on Eclipse</a> (Slides)</li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool</a></li>
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=YW9aPrxvK3A" target="_blank">Deploying Metadata with the Force.com Migration Tool</a>
                        (Video)</li>
<li class="li Documentation">
<a class="xref" href="https://developer.salesforce.com/page/Workbench" target="_blank">Workbench</a></li>
<li class="li"><a class="xref" href="https://force-cli.heroku.com/" target="_blank">Force.com Command-line Interface (CLI)</a></li>
<li class="li"><a class="xref" href="http://github.com/heroku/force" target="_blank">Force.com Command-Line Interface (CLI) GitHub Project</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/An_Introduction_to_Packaging" target="_blank">An Introduction to
                        Packaging</a></li>
</ul>
</div>
</div>
</body></div><h1>Move Changes Between Environments with the Force.com Migration Tool</h1><div class="unit-content">
<body id="alm_migrate_learning_objectives"><a name="alm_migrate_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Describe the structure and use of the <span class="ph filepath">package.xml</span> file.</li>
<li class="li">Describe the process of deleting components.</li>
<li class="li">View the status of a deployment on the Deployment Status page.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_migrate_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Move Changes Between Environments</span></h2>
<div class="body">
<div class="p">The process of moving metadata components from sandbox to production is often referred to
            as deployment. However, the term <dfn class="term">deployment</dfn> is also used for a number of
            similar things, such as: <ul class="ul bulletList">
<li class="li">Installing an app from the AppExchange and
                    making it available to users</li>
<li class="li">Changing the operational status of new business logic (such as a workflow rule)
                    from a state of in development to deployed </li>
<li class="li">Executing the contents of an inbound change set</li>
<li class="li">Sending metadata from one org to another</li>
</ul>
</div>
<p class="p">For this unit, we’re concerned only with the last deployment definition and focus on
            using the Force.com Migration Tool. With the Force.com Migration Tool, you can move changes
            between sandboxes, or from sandbox to production.</p>
<div class="box message confirm"><div class="inner"><div class="bd"><div class="media"><img alt="Tip" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6da477d97c76333bb64f0d69f440dc0d.gif"/><div class="mediaBd"><h4 class="mbs">Tip</h4><p>You can move metadata components by using other tools, such as Change Sets.
            Change Sets is covered in <a class="xref" href="https://trailhead.salesforce.com/module/app_deployment" target="_blank">Change Management
            module</a>.</p></div></div></div></div></div>
<p class="p">A deployment profile consists of a zip file containing metadata components and a
                <span class="ph filepath">package.xml</span> file. The <span class="ph filepath">package.xml</span> file is
            a manifest that lists everything being sent from the source org to the destination org.
            There are many metadata types, and you can have many components of a type, so the
                <span class="ph filepath">package.xml</span> file can be long. But the good news is that you
            rarely have to create the file yourself. Most of the time the
                <span class="ph filepath">package.xml</span> file is created for you. For example, if you’re
            using the Force.com IDE,
                the<span class="ph filepath"> package.xml</span> is assembled from the components you select
            when you create a project. </p>
<p class="p">The exception is if you use the Force.com Migration Tool or Workbench. In this
            case, you create <span class="ph filepath">package.xml</span> files for retrieval (the files you
            bring to a local file system) and deployment (the files you send back to the server).
            It’s often easier to create a project in the Force.com IDE and then copy
                <span class="ph filepath">package.xml</span> and use the copy for the Force.com Migration Tool.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>When using change sets, you don’t see the <span class="ph filepath">package.xml</span> file. It
            all happens behind the scenes. When you deploy change sets, the zip file of components
            and the manifest are handled seamlessly behind the scenes. </p></div></div></div></div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Force.com Migration Tool Video</h3>
<p class="p">Check out this video to get a quick overview of how to use the Force.com Migration Tool for migrating
                changes.</p>
<p class="p"><iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//www.youtube.com/embed/YW9aPrxvK3A" webkitallowfullscreen="1" width="640"></iframe></p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_migrate_manifest" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_manifest"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Use a Manifest with the Force.com Migration Tool</span></h2>
<div class="body">
<p class="p">The Force.com Migration Tool uses a project
            manifest, a file that’s named <span class="ph filepath">package.xml</span>. The manifest is an XML
            file that defines the components you’re migrating and specifies the version of the Metadata API to use. Types that are
            newly supported in the Metadata API can
            be migrated only in the API version that they were introduced in or a newer version.</p>
<p class="p">Take a look at the following <span class="ph filepath">package.xml</span> file. The <samp>&lt;name&gt;</samp> specifies a metadata type, in this case,
                <samp>CustomObject</samp>. The <samp>&lt;members&gt;</samp> is a list of one or more components of that type. In this
            case, it lists two custom objects, <samp>Invoice__c</samp> and
                <samp>Line_Item__c</samp>.</p>
<div class="codeblock"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Package xmlns="http://soap.sforce.com/2006/04/metadata"&gt;
    &lt;types&gt;
        &lt;members&gt;Invoice__c&lt;/members&gt;
        &lt;members&gt;Line_Item__c&lt;/members&gt;
        &lt;name&gt;CustomObject&lt;/name&gt;
    &lt;/types&gt;
    &lt;version&gt;39.0&lt;/version&gt;
&lt;/Package&gt;</pre></div>
<div class="p">To retrieve all members of a type, you use the wildcard (<samp>*</samp>) character instead.
            <div class="codeblock"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Package xmlns="http://soap.sforce.com/2006/04/metadata"&gt;
    &lt;types&gt;
        &lt;members&gt;*&lt;/members&gt;
        &lt;name&gt;CustomObject&lt;/name&gt;
    &lt;/types&gt;
    &lt;version&gt;39.0&lt;/version&gt;
&lt;/Package&gt;</pre></div>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>You can’t use a wildcard character with some metadata types. For more information, see
                <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/meta_types_list.htm" target="_blank">Metadata Types</a>.</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="alm_migrate_files" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_files"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Migrate Metadata Components</span></h2>
<div class="body">
<p class="p">Migrating files between environments requires first copying metadata from one org to a
            local file system. You then transfer the metadata from the local files to another org.
            Several factors determine how long this operation can take. </p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">How Metadata Files Are Migrated</h3>
<div class="p">
<p class="p">Migrating changes from one org to another using metadata files requires an
                intermediate tool that interacts with both environments using the Metadata API. The following figure
                shows how changes are migrated from sandbox to production.</p>
<span class="image image-block"><img alt="Migration happens through a local directory" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us60e4588d529ae0996866715cf886fc0a.jpg"/></span>
<p class="p">You might be wondering why you need to store files to a local system to migrate files
                that are stored in the cloud. The Metadata API supports traditional
                software development tools that operate on source files, such as text editors,
                diff/merge utilities, and version control systems, all of which require a local file
                system. After you retrieve the metadata components locally, you can deploy them
                directly to any other org, including production. You don’t need to retrieve
                the components again for each deployment, unless when you want to get a fresh copy
                of the metadata.</p>
</div></div>
</div>
<div class="topic nested1" id="trailhead_alm_migrate_monitor" lang="en-us" xml:lang="en-us"><a name="trailhead_alm_migrate_monitor"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading7">Monitor the Status of Your Deployments</h3>
<div class="body">
<p class="p">The size and complexity of the metadata components affect the deployment time. To
   track the status of deployments that are in progress or have completed in the last 30 days, from
   Setup, enter <kbd class="ph userinput">Deployment</kbd> in the <span class="keyword parmname">Quick Find</span> box, then
   select <strong class="ph uicontrol">Deployment Status</strong>. Deployments are listed in different sections
   depending on their status.</p>
<p class="p">This page lists all deployments—change sets, Metadata API-based deployments, including deployments
   started from the Force.com IDE and the Force.com Migration Tool, and package installations.</p>
<p class="p">When running a deployment, the Deployment Status page shows you the
    real-time progress of your current deployment. This page contains charts that provide a visual
    representation of the overall deployment progress. The first chart shows how many components
    have already been deployed out of the total and includes the number of components with errors.
    For example, the following chart indicates that 302 components were processed successfully out
    of 450 and there were 45 components with errors.<span class="image image-block"><img alt="Chart for processed components" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us10f7381221fd256edc9001ed6a827d45.png"/></span></p>
<p class="p">After all components have been deployed without errors, Apex tests
    start executing, if required or enabled. A second chart shows how many Apex tests have run out
    of the total number of tests and the number of errors returned. In addition, the chart shows the
    name of the currently running test. For example, in the following chart, 77 tests have completed
    execution out of a total of 120, and 1 test failed.<span class="image image-block"><img alt="Chart for processed components" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usde7ef6eec47b19ade1b82338f0ef92db.png"/></span></p>
<p class="p"><strong class="ph b">Pending Deployments</strong></p>
<p class="p">You can initiate multiple deployments. Only one deployment can
    run at a time. The other deployments will remain in the queue waiting to be executed after the
    current deployment finishes. Queued deployments are listed under Pending Deployments in the
    order they will be executed.</p>
<p class="p"><strong class="ph b">Deployment Validations</strong></p>
<p class="p">A deployment validation is a deployment that is used only
    to check the results of deploying components and is rolled back. A validation doesn't save any
    deployed components or change the Salesforce org in any way. You can determine whether a
    deployment is a validation only (Validate) or an actual deployment (Deploy) by inspecting the
    information for pending deployments or the <span class="keyword parmname">Status</span> column of deployments in
    the Failed and Succeeded sections.</p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_migrate_delete" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_delete"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Delete Components</span></h2>
<div class="body">
<p class="p">Administrators can’t delete components using change sets. As a result, they might resort
            to such tactics as deploying empty Apex classes to remove old
            functionality. This isn’t a particularly elegant solution, but it works well enough for
            admins that don’t have other means at their disposal. </p>
<p class="p">To delete components, use the same procedure as for deploying components, but also
            include a delete manifest file named <span class="ph filepath">destructiveChanges.xml</span> listing
            the components to delete. The file format is the same as
                <span class="ph filepath">package.xml</span>, except that wildcards aren’t supported. </p>
<p class="p">You can perform a deployment that only deletes components, or a deployment that deletes
            and adds components. In API version 33.0 and later, you can specify components to delete
            before and after other components are added or updated by naming the files
                <span class="ph filepath">destructiveChangesPre.xml</span> and
                <span class="ph filepath">destructiveChangesPost.xml</span>.</p>
<p class="p">The ability to specify when deletions are processed is useful when you’re deleting
            components with dependencies. For example, let’s say a custom object is referenced in an
                Apex class. You can’t
            delete it unless you modify the Apex class first to remove
            the dependency on the custom object. You can perform a single deployment that updates
            the Apex class to clear the dependency and then deletes the custom object by using
                <span class="ph filepath">destructiveChangesPost.xml</span>. </p>
<div class="p">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>In API version 32.0 and earlier, if you specify deletions and additions for the
                same deployment, the <samp>deploy()</samp> call performs the
                deletions first. </p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic nested0" id="alm_migrate_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation">
<a class="xref" href="https://www.youtube.com/watch?v=afK95S3UeyU" onclick="javascript:window.open('https://www.youtube.com/watch?v=afK95S3UeyU', '_blank', 'width=800,height=475,resizable=yes,toolbar=no,status=no,scrollable=no,menubar=no,directories=no,location=no,dependant=no'); return false;" target="_blank" title="video (New Window)">
               From Sandbox To Production: An Introduction to Salesforce Release Management
            </a>
</li>
<li class="li Documentation">
<a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/" target="_blank" title="HTML (New Window)"> Metadata
               API Developer’s Guide </a>
</li>
<li class="li Documentation">
<a class="xref" href="https://developer.salesforce.com/page/An_Introduction_to_Force.com_Metadata" target="_blank" title="HTML (New Window)">
               An Introduction to Force.com Metadata
            </a>
</li>
<li class="li Documentation">
<a class="xref" href="https://developer.salesforce.com/blogs/tech-pubs/2014/02/monitoring-your-deployments-in-salesforce-just-got-easier.html" target="_blank" title="HTML (New Window)">
               Monitoring Your Deployments in Salesforce Just Got Easier
            </a>
</li>
</ul>
</div>
</div>
</body></div><h1>Efficient Deployments</h1><div class="unit-content">
<body id="alm_migrate_testing_learning_objectives"><a name="alm_migrate_testing_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<a name="lo_migrate_testing"></a><ul class="ul bulletList" id="lo_migrate_testing">
<li class="li">Explain the benefits of reducing deployment times.</li>
<li class="li">Perform a validation and a quick deployment to reduce deployment time to
                production.</li>
<li class="li">Describe the benefits of test levels and know which test level to use when deploying
                components.</li>
<li class="li">Explain what happens when a Salesforce service update
                interrupts a deployment.</li>
</ul>
</div>
</div>
<div class="topic concept nested0" id="alm_migrate_quickdeploy" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_quickdeploy"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Efficient Deployments</span></h2>
<div class="body conbody" id="efficient_deploy_intro"><a name="efficient_deploy_intro"></a>
<p class="p">When you deploy customizations with Apex code to production, local Apex tests are run as part of the
      deployment. Local Apex tests
      consist of all tests in the target org that don’t originate from managed packages. Testing in
      deployments helps ensure that the deployed components don’t alter or break existing
      customizations in production. Testing lets you catch and fix issues before the customizations
      are rolled out to production. </p>
<p class="p">However, if you’ve been developing many custom apps and your Salesforce org contains thousands of Apex tests, testing can slow down a
   deployment. Testing constitutes the largest part of total deployment time, and a long deployment
   slows down your software development lifecycle. When you multiply the deployment time by the
   number of iterative deployments performed in test environments, the delay becomes even longer.
   Another disadvantage of long deployments is that they could occasionally be interrupted by Salesforce service updates. </p>
<p class="p">For these reasons, Salesforce provides
   deployment features that make deployments more efficient. Quick deployments cut down on
   deployment time by running tests as part of validations. Test levels give you the power to decide
   how many tests to run in the target org.</p>
</div>
</div>
<div class="topic concept nested0" id="alm_migrate_quickdeploy_details" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_quickdeploy_details"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Quick Deployments</span></h2>
<div class="body conbody" id="quickdeploy_details"><a name="quickdeploy_details"></a>
<p class="p">Roll out your customizations to production faster by running tests as part of validations
            and skipping tests in your deployments. Because quick deployments don’t run tests,
            they’re faster than regular deployments. A quick deployment enables you to schedule
            deployments to production with more confidence because you know the deployment will
            succeed and requires a shorter window of time. A Salesforce service update is also
            less likely to interrupt a quick deployment because it takes less time. </p>
<p class="p">Suppose that your team updates many apps and settings and has developed a complex supply
            management app. Your team decides to have all local tests in the org run to ensure the
            quality of the deployment. In this scenario, we recommend that you first run a
            validation in production to verify the results of your tests and fix test failures. A
            validation is a deployment that’s used only to check the results of deploying
            components. It doesn’t save any components in the org. You can view the success and
            failure messages that you would receive with an actual deployment. After you fix test
            failures, and all tests pass as part of the validation, you can run a quick deployment,
            which skips tests and saves time. </p>
<p class="p">You can run a quick deployment when the following requirements are met.</p>
<ul class="ul bulletList">
<li class="li">The components have been validated successfully for the target environment within the last
      10 days.</li>
<li class="li">As part of the validation, Apex tests in the target org have passed.</li>
<li class="li">Code coverage requirements are met.<ul class="ul bulletList">
<li class="li">If all tests in the org or all local tests are run, overall code coverage is at least
        75%, and Apex triggers have some coverage.</li>
<li class="li">If specific tests are run with the <strong class="ph uicontrol">Run specified tests</strong> test level,
        each class and trigger that was deployed is covered by at least 75% individually.</li>
</ul>
</li>
</ul>
<p class="p">We recommend
            starting a validation during off-peak usage time and limiting changes to your org while
            the validation is in progress. The validation process locks the resources that are being
            deployed. Changes you make to locked resources or items related to those resources while
            the validation is in progress can result in errors.</p>
<p class="p">To perform a quick deployment, first run a validation (a check-only deployment) with Apex test execution on the
            set of components to deploy. If your validation succeeds and qualifies for a quick
            deployment, you can start a quick deployment. </p>
<div class="imagecenter"><span class="image image-block"><img alt="Validation steps" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7ce7ab7697c1bf813dac412f57b3a03a.png"/></span></div>
</div>
</div>
<div class="topic concept nested0" id="alm_migrate_quickdeploy_migration_tool" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_quickdeploy_migration_tool"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Perform a Quick Deployment with the Force.com Migration Tool</span></h2>
<div class="body conbody">
<p class="p">You can perform a quick deployment in version 34.0 (Summer ’15) or later of the Force.com Migration Tool. To download the latest version,
      go to the <a class="xref" href="https://developer.salesforce.com/page/Force.com_Migration_Tool" target="_blank">Force.com Migration Tool</a> page in <a class="xref" href="https://developer.salesforce.com/" target="_blank">Salesforce
        Developers</a>. To learn how to set up the tool, see the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool Guide</a>. </p>
<p class="p">The prerequisite for a quick deployment is a recent validation with passing tests. The
      following Ant target in build.xml includes the <samp>checkOnly=true</samp> parameter to indicate that the deployment is a validation. </p>
<div class="codeblock"><pre>&lt;target name="deployCodeCheckOnly"&gt;
      &lt;sf:deploy username="${sf.username}" password="${sf.password}"
                        sessionId="${sf.sessionId}" serverurl="${sf.serverurl}" 
                        maxPoll="${sf.maxPoll}" deployRoot="codepkg"  
                        testLevel="RunLocalTests"  checkOnly="true"/&gt;
&lt;/target&gt;</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The validation target given in this example contains the <samp>testLevel="RunLocalTests"</samp> parameter, which causes local tests to execute. You’ll
      learn more about test levels in the next section.</p></div></div></div></div></div>
<p class="p">After you run this validation (for example, by using the command <samp>ant deployCodeCheckOnly</samp>) and verified that the tests passed, you can run a quick
      deployment. The output of the validation command displays the ID of the validation. Copy this
      ID, and use it for the quick deployment. </p>
<p class="p">In <samp>build.properties</samp>, replace the following line with the
      validation ID you copied.</p>
<div class="codeblock"><pre>sf.​recentValidationId = &lt;Deployment ID of the validation&gt;</pre></div>
<p class="p">For example:</p>
<div class="codeblock"><pre>sf.recentValidationId = 0AfD0000000oLp0KAE</pre></div>
<p class="p">The following Ant target in <samp>build.xml</samp> performs a quick
      deployment and references the <samp>sf.​recentValidationId</samp>
      property that you’ve just set.</p>
<div class="codeblock"><pre>&lt;target name="quickDeploy"&gt;
  &lt;sf:deployRecentValidation username="${sf.username}"    
                             password="${sf.password}" 
                             sessionId="${sf.sessionId}" 
                             serverurl="${sf.serverurl}"
                             maxPoll="${sf.maxPoll}"
                             recentValidationId="${sf.​recentValidationId}"/&gt;
&lt;/target&gt;</pre></div>
<p class="p">Perform a deployment using this target (for example, <samp>ant
        quickDeploy</samp>).</p>
<div class="imagecenter"><span class="image image-block"><img alt="Quick deployment steps" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd2b9f14009537233b831756d94255866.png"/></span></div>
</div>
</div>
<div class="topic concept nested0" id="alm_migrate_test_levels" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_test_levels"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Test Levels</span></h2>
<div class="body conbody" id="test_levels_body"><a name="test_levels_body"></a>
<p class="p">Test levels enable you to choose which tests are run in a validation or deployment. The
   following test levels are available.</p>
<div class="section"><div class="p">
<dl class="dl detailList">
<dt class="dt dlterm">RunSpecifiedTests</dt>
<dd class="dd">Only the tests that you specify are run. Choose the test classes that provide sufficient
      coverage for the classes and triggers being deployed.</dd>
<dd class="dd">Code coverage requirements differ from the default coverage requirements when using this
      level in production. The executed tests must cover the deployed class or trigger with a
      minimum of 75% code coverage. This coverage is computed for each class or trigger individually
      and is different from the overall coverage percentage.</dd>
<dt class="dt dlterm">RunLocalTests</dt>
<dd class="dd">All tests in your org are run, except the ones that originate from installed managed
      packages. This test level is the default for production deployments that include Apex classes or triggers.</dd>
<dt class="dt dlterm">RunAllTestsInOrg</dt>
<dd class="dd">All tests in your org are run, including tests of managed packages.</dd>
<dt class="dt dlterm">Default (no test level set)</dt>
<dd class="dd">In production, all local tests are executed if your change set contains Apex classes or triggers. If your
      package doesn’t contain Apex
      components, no tests are run. In development environments, such as sandbox, Developer Edition,
      or trial orgs, no tests are run by default. </dd>
</dl>
<div class="imagecenter"><span class="image image-block"><img alt="Pyramid of test levels" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb64baf244b025cf1bb84423c8d5322ff.png"/></span></div>
<p class="p">These are some useful scenarios for test levels.</p>
</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Run a Subset of Tests</h3>
<p class="p">Suppose your development team created an app to display all accounts on a map. The app
    contains two Apex classes and two
    test classes. By default, all local tests in the target org are run if you’re deploying Apex code. To deploy this app to
    production, you don’t want to run the hundreds or thousands of preexisting test classes in
    production. Instead, you want to run only the two test classes in your app that provide
    sufficient test coverage for your app’s Apex classes. In this case, you use
    the RunSpecifiedTests test level to indicate the two test classes to run.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Enable Testing When Not Required by Default</h3>
<p class="p">You can explicitly enable testing when it is turned off by default. For example, when you
    deploy a custom object and no Apex
    code, tests are turned off by default. But if an Apex class uses this custom object,
    you might want to run some test classes. In this case, turn on testing when deploying non-Apex components.</p>
<p class="p">In non-production environments, such as sandboxes or Developer Edition orgs, Apex tests aren’t run in deployments
    if a test level isn’t set. You can enable testing by setting a test level. That way, you can fix
    test failures early before deploying to production. </p>
</div>
</div>
</div>
<div class="topic concept nested0" id="alm_migrate_test_levels_runspecifiedtests" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_test_levels_runspecifiedtests"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Run a Subset of Tests with the Force.com Migration Tool</span></h2>
<div class="body conbody">
<p class="p">You can use test levels in version 34.0 (Summer ’15) or later of the Force.com Migration Tool. To download the latest version, go to
   the <a class="xref" href="https://developer.salesforce.com/page/Force.com_Migration_Tool" target="_blank">Force.com Migration Tool</a> page in <a class="xref" href="https://developer.salesforce.com/" target="_blank">Salesforce Developers</a>. To learn how to set up the tool, see the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool Guide</a>. </p>
<p class="p">Ant targets for the Migration Tool are specified in the build.xml file. The following target
   specifies three test classes to run and uses the RunSpecifiedTests test level. Choose tests that
   provide sufficient code coverage for each Apex class and trigger that you’re
   deploying.</p>
<div class="codeblock"><pre>&lt;target name="deployCode"&gt;
      &lt;!-- Upload the contents of the "codepkg" directory, --&gt;
      &lt;!-- and run the three test classes. --&gt;
      &lt;sf:deploy username="${sf.username}" password="${sf.password}" 
                 sessionId="${sf.sessionId}" serverurl="${sf.serverurl}"
                 maxPoll="${sf.maxPoll}" deployRoot="codepkg"
                 testLevel="RunSpecifiedTests" rollbackOnError="true"&gt;
          &lt;runTest&gt;TestClass1&lt;/runTest&gt;
          &lt;runTest&gt;TestClass2&lt;/runTest&gt;
          &lt;runTest&gt;TestClass3&lt;/runTest&gt;
      &lt;/sf:deploy&gt;
&lt;/target&gt;</pre></div>
<div class="box message info" id="namespace_tests_note"><a name="namespace_tests_note"></a><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If your org has a namespace defined, prepend the namespace name to
   your test class names. For example, <samp>MyNamespace.TestClass1</samp>.
   In the previous example, the list of test classes would be <samp>MyNamespace.TestClass1</samp>, <samp>MyNamespace.TestClass2</samp>,
   and <samp>MyNamespace.TestClass3</samp>.</p></div></div></div></div></div>
<div class="section" id="test_resumption_section"><a name="test_resumption_section"></a><h3 class="helpHead3" id="Tdxn4tBK-heading9">Test Resumption in Deployments</h3>
<p class="p">When a Salesforce service update
    interrupts a deployment, Salesforce resumes
    the deployment after the service has been restored. To avoid lost time, Salesforce resumes the deployment by running
    the tests that haven’t yet been run. A small number of tests might be rerun if their results
    weren’t saved. Salesforce saves the results
    of executed tests in chunks. Therefore, a small portion of tests might not have their results
    saved because they weren’t part of the last saved chunk. </p>
<p class="p">The majority of deployment time is spent in test execution, so resuming tests saves you a lot
    of time. This enhancement has been applied for Metadata API–based deployments starting in Winter
    ’16 and for change sets in Spring ’16.</p>
</div>
</div>
</div>
<div class="topic nested0" id="alm_migrate_testing_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_migrate_testing_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/forcemigrationtool_deploy.htm#ant_deploy_testLevel" target="_blank">Test Levels</a> in the <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/meta_deploy_running_tests.htm" target="_blank">Running Tests in a Deployment</a> in the
                  <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/meta_deploy.htm#deploy_options" target="_blank">DeployOptions for the deploy() call</a> in the
                  <cite class="cite"><a class="xref" href="http://www.salesforce.com/us/developer/docs/api_meta/" target="_blank">Metadata API Developer Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/forcemigrationtool_deploy_validation.htm" target="_blank">deployRecentValidation Task</a> in the <cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.daas.meta/daas/" target="_blank">Force.com Migration Tool Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/meta_deployRecentValidation.htm" target="_blank">deployRecentValidation() Metadata API Call</a> in
            the <cite class="cite"><a class="xref" href="http://www.salesforce.com/us/developer/docs/api_meta/" target="_blank">Metadata API Developer Guide</a></cite></li>
</ul>
</div>
</div>
</body></div><h1>Use Version Control</h1><div class="unit-content">
<body id="alm_source_control_learning_objectives"><a name="alm_source_control_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p" id="p1"><a name="p1"></a>After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Explain when it’s important to use version control.</li>
<li class="li">Retrieve and deploy files to and from version control.</li>
<li class="li">Implement a continuous integration process.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="alm_source_control_topic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_source_control_topic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Version Control </span></h2>
<div class="body">
<p class="p">In traditional software development you have a code stack that represents the “source of
            truth”. This source resides in a version control system, and is iteratively developed
            and succeeded by new versions, or rolled back to previous versions. Sometimes new
            features are branched, meaning one code line forks off for more isolation from the main
            code line, and then oftentimes the branches are merged back into to the main line when
            that feature is ready. For most developers, this is business as usual.</p>
<p class="p">In cloud computing, the source of truth is what’s on the production org. Whatever is
            running on the server is the main line. When you retrieve code or metadata to a version
            control system, you’re receiving a metadata representation of what’s on the server. If
            someone were to change what’s on the server (making a change in the production org),
            then the source of truth has changed, regardless of what’s in your repository. This
            could lead to overwriting the changes on production, and/or a difficulty deploying
            changes. </p>
<p class="p">In addition, your version control repository only copies the code and metadata types that
            are exposed in the Metadata API. This means you can create things in a development
            environment (sandbox, developer org) that can’t be stored in source control.</p>
<div class="p"><strong class="ph b">When Is Version Control Not Necessary? </strong><ul class="ul bulletList">
<li class="li">Small-scale development - If you have only one or two developers, version
                    control may be additional overhead, without much benefit. </li>
<li class="li">Change sets - If you’re using change sets, then you already have cloud-based
                    storage for metadata. It isn’t version control, but every time you create an
                    outbound change set, you are saving the metadata from your org at a point in
                    time. You can go back and inspect or revert to those versions any time. Note
                    that as your organization and number of sandboxes grows, you will need version
                    control. </li>
</ul>
</div>
<div class="p"><strong class="ph b">When Should You Use Version Control? </strong><ul class="ul bulletList">
<li class="li">No sandbox - For organizations that can’t use change sets (partners using
                    Developer Edition, or other orgs that don’t have a sandbox available), some
                    means of saving metadata is necessary, and this usually means a version control
                    system.</li>
<li class="li">Regulatory reasons - Some highly regulated industries, such as banking,
                    healthcare, and legal, require version control for regulatory reasons.</li>
<li class="li">Backup copies - Perhaps you want a copy of your org settings, so that you can
                    revert to older versions if necessary, or populate a new org with the same
                    settings.</li>
<li class="li">Personal preference - Perhaps you or your company believes that having local
                    copies of files is safer than leaving your metadata on the server. </li>
<li class="li">Convention - Using version control is considered to be a general best practice
                    for software development and you may already be using a version control system
                    for other development needs.</li>
<li class="li">Large-scale development - If you have many developers and features, then version
                    control becomes more and more important as people overwrite each other’s changes
                    and rollbacks become more common. </li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="alm_source_control_systems" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_source_control_systems"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Source Control Systems</span></h2>
<div class="body">
<p class="p">A source control system ensures a quality development process by maintaining a separate
            branch for each project without overwriting changes made as part of other projects. Team
            members and developers on other teams can add changes to the source control repository.
            The repository integrates the changes implemented by concurrent development and
            separates the different versions of an application.</p>
<p class="p">Your repository can contain multiple branches, with each branch containing changes
            developed by a separate team. For example, one team can work on a feature that’s going
            live in February, while another team works on a feature that’s going live in March.
            These teams need separate developer organizations and integration test sandboxes. You
            can use a separate branch for a patch release, because it contains bug fixes and
            different customization metadata and Apex code than the new feature.</p>
<p class="p">The Force.com IDE has integrated source control (such as subclipse) that allows you to
            instantly see changes you made from the branch and revert if necessary. However, most
            enterprise development teams use the Force.com Migration Tool to retrieve and deploy
            between sandbox and source control. Moving the files to a local file system is
            necessary, as depicted in the following image. </p>
<span class="image image-block"><img alt="Typical code migration path." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0da9aa2a002d256679fcd311453732a6.png"/></span>
<p class="p">Giving each developer a sandbox provides more control. Each developer can decide when to
            refresh their sandbox with the latest changes from the repository or when to commit
            changes.</p>
<p class="p">The following diagram illustrates a layout of sandbox environments for development and
            testing.</p>
<span class="image image-block"><img alt="Typical code migration path." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us259d26d09c4203665c32bfff3722e34b.png"/></span>
</div>
</div>
<div class="topic nested0" id="alm_source_control_continuous_integration" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_source_control_continuous_integration"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Continuous Integration System</span></h2>
<div class="body">
<p class="p">For a robust quality assurance process, use a continuous integration system to run test
            deployments and Apex tests for each change to the source control repository. You can
            perform these deployments in a dedicated sandbox for continuous integrations. </p>
<p class="p">You can use a continuous integration system to automate deployments. For example, you can
            use Jenkins to automate deployments to the user acceptance testing (UAT) sandbox. The
            following diagram shows the relationship between the continuous integration server,
            sandbox, and source control.<span class="image image-block"><img alt="Typical code migration path." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use59ff8b04373aea7b8828922b121e920.png"/></span></p>
<p class="p">Enterprise development with source control is a complex topic. It requires
            experimentation and learning to refine the process. For more information, see the
            resources listed in this unit, especially the Advanced Development Lifecycle Scenario in
            the Development Lifecycle Guide.</p>
<p class="p">To configure the Force.com Migration Tool to enable tests, see <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.dev_lifecycle.meta/dev_lifecycle/lifecycle_adv_ant_tool_configuration.htm" target="_blank">Tips for Configuring the Force.com Migration Tool to
                Run Tests</a>.</p>
</div>
</div>
<div class="topic nested0" id="alm_source_control_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="alm_source_control_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation">
<a class="xref" href="https://resources.docs.salesforce.com/206/latest/en-us/sfdc/pdf/salesforce_development_lifecycle.pdf" target="_blank" title="Adobe Acrobat PDF (New Window)">Development Lifecycle Guide</a></li>
<li class="li Documentation">
<a class="xref" href="https://developer.atlassian.com/display/SFDC/The+Salesforce+Development+Workflow" target="_blank">The Salesforce Development Workflow</a></li>
<li class="li Documentation">
<a class="xref" href="http://www.soliantconsulting.com/blog/2013/03/working-forcecom-ide-and-subversion-svn" target="_blank">Working with the Force.com IDE and
                              Subversion (SVN)</a></li>
<li class="li"><a class="xref" href="http://jessealtman.com/2014/02/version-control-versioning-salesforce/" target="_blank">Version Control: Versioning Salesforce</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2013/03/setting-up-jenkins-for-force-com-continuous-integration.html" target="_blank">Setting Up Jenkins for Force.com Continuous
               Integration</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/Bestpractices:Continuous_Integration_Techniques" target="_blank">Best Practices: Continuous Integration
               Techniques</a></li>
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=_eJn2qNDLHQ&amp;index=20&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank">Automating Deployments Between Orgs Using Git and
               Continuous Integration</a></li>
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=hvomhBeGUCM" target="_blank">Manage Org Changes Using the Force.com Migration Tool and Git</a></li>
<li class="li"><a class="xref" href="https://www.youtube.com/watch?v=a0u1CBUsj_I" target="_blank">How to Setup Continuous Integration with Git, Jenkins, and Force.com</a></li>
</ul>
</div>
</div>
</body></div><h1>Get Started with Platform Cache</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe what platform cache is and what it’s used for.</li>
<li class="li">List the two types of platform cache and give examples of each.</li>
<li class="li">Describe partitions and how to use them.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_cache" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_cache"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>What Is a Cache?</span></h2>
<div class="body">
<p class="p">A cache is temporary storage. In the computer world, cache is temporary storage for
            frequently accessed data from a database. Here’s an analogy. Suppose you’re a chipmunk
            looking for nuts and acorns for dinner. It’s 5:00 and you’re ready to eat. Are you going
            to use the nuts and acorns stored in your cheeks (cache), or are you going back to the
            forest to gather more from trees (database)? If you access the temporary cache of food
            in your cheeks, your dinner is closer and you get to eat it faster! Also, you accomplish
            your goal more efficiently. A data cache has similar advantages, but for people, not
            chipmunks.</p>
<div class="imagecenter"><span class="image image-block"><img alt="A chipmunk with nuts in its cheeks" class="image image-block" height="327" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa8753734f4ca7cdb16d057a95cf14ad0.png" width="400"/></span></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">What Is Platform Cache?</h3>
<p class="p">Platform Cache is a memory layer that stores Salesforce session and org data for
                later access. When you use Platform Cache, your applications can run faster because
                they store reusable data in memory. Applications can quickly access this data; they
                don’t need to duplicate calculations and requests to the database on subsequent
                transactions. In short, think of Platform Cache as RAM for your cloud
                application.</p>
<p class="p">With Platform Cache, you can also allocate cache space so that some apps or
                operations don’t steal capacity from others. You use partitions to distribute space.
                We’ll get to partitions later.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_before" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_before"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Before We Go Any
            Further</span></h2>
<div class="body">
<p class="p">Let’s pause for a moment for you to request a trial of Platform Cache. By default, your
            Developer org has 0 MB cache capacity. You can request a trial cache of 10 MB.</p>
<p class="p">To request a trial, go to Setup in your Developer  org. In the <span class="keyword parmname">Quick
                Find</span> box, enter <kbd class="ph userinput">cache</kbd>, and then click
                <strong class="ph uicontrol">Platform Cache</strong>. Click <strong class="ph uicontrol">Request Trial
                Capacity</strong> and wait for the email notifying you that your Platform Cache
            trial is active. Salesforce approves trial requests immediately, but it can take a few minutes for you to receive
            the email.</p>
<div class="imagecenter"><span class="image image-block"><img alt="Request Trial Capacity button on the Platform Cache page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us531edd2c48d2e23fdf821e1068f5b933.png"/></span></div>
<p class="p">If you don’t have a cache trial, you can still execute cache operations to learn how to
            use the cache. However, cache storage is bypassed, and retrieved values are null (cache
            misses).</p>
<p class="p">Okay, now that you’ve requested a Platform Cache trial, let’s learn some more concepts.
        </p>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_when" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_when"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>When Can I Use Platform Cache?</span></h2>
<div class="body">
<p class="p">You can use Platform Cache in your code almost anywhere you access the same data over and
            over. Using cached data improves the performance of your app and is faster than
            performing SOQL queries repetitively, making multiple API calls, or computing complex
            calculations.</p>
<p class="p">The best data to cache is:</p>
<div class="p">
<ul class="ul bulletList">
<li class="li">Reused throughout a session, or reused across all users and
                    requests</li>
<li class="li">Static (not rapidly changing)</li>
<li class="li">Expensive to compute or retrieve</li>
</ul>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Store Data That Doesn’t Change Often</h3>
<p class="p">Use the cache to store static data or data that doesn’t change often. This data is
                initially retrieved through API calls from a third party or locally through SOQL
                queries. If the data changes, cache this data if the values don’t have to be highly
                accurate at all times.</p>
<p class="p">Examples of such static data are:</p>
<ul class="ul bulletList">
<li class="li">Public transit schedule</li>
<li class="li">Company shuttle bus schedule</li>
<li class="li">Tab headers that all users see</li>
<li class="li">A static navigation bar that appears on every page of your app</li>
<li class="li">A user’s shopping cart that you want to persist during a session</li>
<li class="li">Daily snapshots of exchange rates (rates fluctuate during a day)</li>
</ul>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Store Data Obtained from Complex Calculations</h3>
<p class="p">Values that are a result of complex calculations or long queries are good candidates
                for cache storage. Examples of such data are:</p>
<div class="p">
<ul class="ul bulletList">
<li class="li">Total sales over the past week</li>
<li class="li">Total volunteering hours company employees did as a whole</li>
<li class="li">Top sales ranking</li>
</ul>
</div>
</div>
<div class="section">
<p class="p">For clues on where to use Platform Cache, inspect your code. Do you currently store
                app data by using custom objects and custom settings, or by overloading a
                Visualforce view state? These storage values are all candidates for Platform
                Cache.</p>
<p class="p">Not every use case is a Platform Cache use case. For example, data that changes often
                and that is real-time, such as stock quotes, isn’t a good candidate for caching.
                Also, ensure you familiarize yourself with Platform Cache limitations. For example,
                if your data is accessed by asynchronous Apex, it can’t be stored in a cache that is
                based on the user’s session.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_allocations" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_allocations"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Cache Allocations by Edition</span></h2>
<div class="body">
<p class="p">Platform Cache is available to customers with Enterprise Edition orgs and above. The
            following editions come with some default cache space, but often, adding more cache
            gives even greater performance enhancements.</p>
<ul class="ul bulletList">
<li class="li">Enterprise Edition (10 MB by default)</li>
<li class="li">Unlimited Edition (30 MB by default)</li>
<li class="li">Performance Edition (30 MB by default)</li>
</ul>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading10">Experiment with Trial Cache</h3>
<p class="p">You can purchase additional cache for your org. To determine how much extra cache
                would be beneficial for your applications, you can request trial cache and try it
                out. Also, request trial cache for Professional Edition before purchasing cache. Use
                trial cache in your Developer Edition org to develop and test your applications with
                Platform Cache. When your request is approved, you receive 30 MB of trial cache
                space (10 MB for Developer Edition). If you need more trial cache space, contact Salesforce.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>What Are the Types of Platform Cache?</span></h2>
<div class="body">
<p class="p">There are two types of Platform Cache: org cache and session cache. </p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading12">Org Cache</h3>
<p class="p">Org cache stores org-wide data that anyone in the org can use. Org cache is
                accessible across sessions, requests, and org users and profiles.</p>
<p class="p">For example, weather data can be cached and displayed for contacts based on their
                location. Or daily snapshots of currency exchange rates can be cached for use in an
                app.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading13">Session Cache</h3>
<p class="p">Session cache stores data for an individual user and is tied to that user’s session.
                The maximum life of a session is 8 hours.</p>
<p class="p">For example, suppose that your app calculates the distance from a user’s location to
                all customers the user wishes to visit on the same day. The location and the
                calculated distances can be stored in the session cache. That way, if the user wants
                to get this information again, the distances don’t need to be recalculated. Or, you
                might have an app that enables users to customize their navigation tab order and
                reuse that order as they visit other pages in the app.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_perf" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_perf"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading14"><span class="ph" id="topic-title"><a name="topic-title"></a>What Are the Performance Gains When Using the Cache?</span></h2>
<div class="body">
<p class="p">You might be wondering how much performance your app gains by using Platform Cache.
            Retrieving data from the cache is much faster than through an API call. When comparing
            SOQL to cache retrieval times, the cache is also much faster than SOQL queries.</p>
<p class="p">The following chart shows the retrieval times, in milliseconds, of data through an API
            call and the cache. It is easy to notice the huge performance gain when fetching data
            locally through the cache, especially when retrieving data in multiple transactions. In
            the sample used for the graph, the cache is hundreds of times faster than API calls. In
            this graph, cache retrieval times are just a few milliseconds but appear as almost zero
            due to the scale used for the time value. Keep in mind that this chart is a sample test,
            and actual numbers might vary for other apps.</p>
<div class="fig fignone"><span class="figcap">Making API Calls to External Services Is Slower (1) Than Getting Data from the
                Cache (2).</span>
<div class="imagecenter"><span class="image image-block"><img alt="Graph compares processing time of API calls with the cache" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us18d562726fc7bf8c8239350f32b1269c.png"/></span></div>
</div>
<p class="p">This next graph compares SOQL with org and session cache retrieval times. As you can see,
            SOQL is slower than the cache. In this example, the cache is two or more times faster
            than SOQL for data retrieval in a single transaction. When performing retrievals in
            multiple transactions, the difference is even larger. (Note that this graph is a sample
            and actual numbers might vary for other apps.)</p>
<div class="fig fignone"><span class="figcap">Getting Data Through SOQL Queries (1) Is Slower Than Getting Data from the Org
                and Session Cache (2).</span>
<div class="imagecenter"><span class="image image-block"><img alt="Graph compares processing time of SOQL queries with the cache" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc6de85b626927761a83d973979904f60.png"/></span></div>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_partitions" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_partitions"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading17"><span class="ph" id="topic-title"><a name="topic-title"></a>What Are Cache Partitions?</span></h2>
<div class="body">
<p class="p">Remember when we mentioned earlier that with Platform Cache you can allocate space using
            partitions? Let’s talk now about partitions. Partitions let you allocate cache space to
            balance usage and performance across apps. Caching data to designated partitions ensures
            that the cache space isn’t overwritten by other apps or by less critical data.</p>
<p class="p">Before you can use cache space in your org, you must create partitions to define how much
            capacity you want for your apps. Each partition capacity is broken down between org
            cache and session cache. Session and org cache allocations can be zero, 5 MB, or
            greater, and must be whole numbers. The minimum size of a partition, including its org
            and session cache allocations, is 5 MB. For example, say your org has a total of 10-MB
            cache space and you created a partition with a total of 5 MB, 5 MB of which is for
            session cache and 0 MB for org cache. Or you can create a partition of 10-MB space, with
            5 MB for org cache and 5 MB for session cache. The sum of all partitions, including the
            default partition, equals the Platform Cache total allocation.</p>
<p class="p">The following image shows charts of cache capacity and partition allocation. In this
            example, we haven’t used the cache yet as evidenced by the 0% cache usage (1) and two
            partitions have been created with equal allocations (2).</p>
<div class="imagecenter"><span class="image image-block"><img alt="Cache capacity charts" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us44b0a6697db86b96317cf41173ee43f7.png"/></span></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading18">Default Partition</h3>
<p class="p">You can define any partition as the default partition, but you can have only one
                default partition. The default partition enables you to use shorthand syntax to
                perform cache operations on that partition. This means that you don’t have to fully
                qualify the key name with the namespace and partition name when adding a key-value
                pair. For example, instead of calling <samp>Cache.Org.put('namespace.partition.key', 0);</samp> you can just call <samp> Cache.Org.put('key', 0);</samp></p>
<p class="p">In the next unit, you’ll create a partition in Setup to get started using Platform
                Cache!</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_get_started_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_get_started_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading19">
<span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<div class="p">Resources in the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_intro.htm" target="_blank">Apex Developer Guide</a>:<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_cache_namespace_overview.htm" target="_blank">Platform Cache</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_platform_cache_limits.htm" target="_blank">Platform Cache Limits</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_platform_cache_limitations.htm" target="_blank">Platform Cache Considerations</a></li>
</ul>
</div>
<div class="p">Resources in the <a class="xref" href="https://help.salesforce.com/articleView?id=salesforce_help_map.htm&amp;language=en_US" target="_blank">Salesforce Help</a>:<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://help.salesforce.com/articleView?id=data_platform_cache_trial.htm&amp;language=en_US" target="_blank">Request a Platform Cache Trial</a></li>
<li class="li"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=data_platform_cache_purchase.htm&amp;language=en_US" target="_blank">Purchase Platform Cache</a></li>
</ul>
</div>
</div>
</div>
</body></div><h1>Use Org &amp; Session Cache</h1><div class="unit-content">
<body id="platform_cache_use_objectives"><a name="platform_cache_use_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Create a partition.</li>
<li class="li">Store and retrieve values in the org and session cache.</li>
<li class="li">Describe how long values last in the cache.</li>
<li class="li">Handle cache misses.</li>
<li class="li">Read session cache from a Visualforce page.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_create_partition" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_create_partition"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Partition</span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p><strong class="ph b">Don’t have a cache trial yet?</strong> This unit requires an active Platform Cache
            trial. Request a trial using the instructions in the previous unit. If you don’t have a
            cache trial, you can still carry out the steps in this unit, but your data won’t be
            found in the cache.</p></div></div></div></div></div>
<p class="p">To use Platform Cache, first set up at least one partition. Once you’ve set up
            partitions, you can add, access, and remove data from them using the Platform Cache Apex
            API.</p>
<p class="p">Each partition has one session cache and one org cache segment. You can allocate separate
            capacity to each segment. Usually, you allocate at least 5 MB to your partition. For
            this example, we aren’t allocating any space to ensure that your code correctly handles
            cache misses. When no space is allocated, the cache miss rate is 100%, which means that
            cache values aren’t found in the cache, and the <samp>get()</samp> method returns <samp>null</samp>. Consider
            using this technique to test cache misses. We cover how to handle cache misses in a
            later section.</p>
<p class="p">To get started, let’s create one partition from the Platform Cache page (available in
            Salesforce Classic only).</p>
<ol class="ol enumList">
<li class="li">In Setup, enter <kbd class="ph userinput">Platform Cache</kbd> in the <span class="keyword parmname">Quick
                    Find</span> box, then select <strong class="ph uicontrol">Platform Cache</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">New Platform Cache Partition</strong>.</li>
<li class="li">Give the partition a name (such as the name of your application).</li>
<li class="li">Check <strong class="ph uicontrol">Default Partition</strong>.</li>
<li class="li">Enter <kbd class="ph userinput">0</kbd> for session cache and <kbd class="ph userinput">0</kbd> for
                org cache, and then click <strong class="ph uicontrol">Save</strong>.<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Create a partition" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf46f9dc151432ceb07386f3a27a67ceb.png"/></span></div>
</p>
</li>
</ol>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_key_format" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_key_format"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Cache Key Name Format</span></h2>
<div class="body">
<p class="p">Each cache key has the following format:</p>
<div class="codeblock"><pre>Namespace.Partition.Key</pre></div>
<p class="p"><var class="keyword varname">Namespace</var> is the namespace name of the org where the app is running,
            which can also be set to the special name “local”. The “local” name refers to the
            namespace of your org whether a namespace is defined in the org or not.</p>
<p class="p"><var class="keyword varname">Partition</var> is the name of the partition you created. In this example,
            it is CurrencyCache.</p>
<p class="p"><var class="keyword varname">Key</var> is the name of the key you used to store a value. The key name
            uniquely represents your cached value.</p>
<p class="p">Let’s say we’d like to store the currency exchange rate from US Dollar to Euro. We can
            create a key named <span class="keyword parmname">DollarToEuroRate</span>. For the partition we’ve just
            created, the full name of the key is:</p>
<div class="codeblock"><pre>local.CurrencyCache.DollarToEuroRate</pre></div>
<p class="p">For example, this snippet stores a value in the org cache for the DollarToEuroRate
            key.</p>
<div class="codeblock"><pre>Cache.Org.put('local.CurrencyCache.DollarToEuroRate', '0.91');</pre></div>
<p class="p">The partition we created is a default partition, so you can omit the namespace and
            partition name and just specify the key name.</p>
<div class="codeblock"><pre>DollarToEuroRate</pre></div>
<p class="p">When using a default partition, you can shorten the put() call to the following.</p>
<div class="codeblock"><pre>Cache.Org.put('DollarToEuroRate', '0.91');</pre></div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_org_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_org_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Store and Retrieve Data in Org Cache</span></h2>
<div class="body">
<p class="p">You’ve finished setting up partitions, which is the only step you do in the user
            interface. Now we’ll switch to Apex to manage the
            cache. Use org cache to store data that is available to anyone in the org. Either use
            the <samp>Cache.Org</samp> class methods, or use the <samp>Cache.OrgPartition</samp> class to reference a specific
            partition. Then call the cache methods on that partition.</p>
<p class="p">The following Apex
            snippet shows how to access a partition using the <samp>Cache.OrgPartition</samp> class to store and retrieve a cache value for a
            currency exchange application. It obtains the partition named CurrencyCache in the local
            namespace. A new value is added with key <span class="keyword parmname">DollarToEuroRate</span> and
            today’s currency exchange rate. Next, the value for key
                <span class="keyword parmname">DollarToEuroRate</span> is retrieved from the cache.</p>
<div class="codeblock"><pre>// Get partition
Cache.OrgPartition orgPart = Cache.Org.getPartition('local.CurrencyCache');

// Add cache value to the partition. Usually, the value is obtained from a 
// callout, but hardcoding it in this example for simplicity.
orgPart.put('DollarToEuroRate', '0.91');

// Retrieve cache value from the partition
String cachedRate = (String)orgPart.get('DollarToEuroRate');</pre></div>
<p class="p">If you’re managing cache values in just one partition, use the <samp>Cache.OrgPartition</samp> methods. The <samp>Cache.OrgPartition</samp> methods are easier to use than
            the <samp>Cache.Org</samp> methods because you specify the
            namespace and partition prefix only once when you create the partition object.</p>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_duration" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_duration"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Do Cached Values Last Forever?</span></h2>
<div class="body">
<p class="p">The previous example assumes that everything goes correctly, namely that:</p>
<ul class="ul bulletList">
<li class="li">Platform Cache is enabled and has a partition with available space</li>
<li class="li">The cached value is found in the cache</li>
<li class="li">The value is successfully stored in the cache</li>
</ul>
<p class="p">But in real life, cached data is not always guaranteed. Platform Cache is intended as a
            temporary space. For example, the cache might have expired. Even if the cache is still
            alive, it is possible that your cached data might be evicted from the cache. Just like
            chipmunks clean out their cheeks to make space for more acorns, Platform Cache also
            clears some space for more data! When the partition limit is exceeded, Salesforce evicts
            cached data based on a least recently used (LRU) algorithm. The cache eviction takes
            place until usage is reduced to less than or equal to 100% capacity. Also, if you exceed
            the local cache limit, items can be evicted from the local cache before the request has
            been committed.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Cached Data Duration and Expiration</h3>
<p class="p">The amount of time during which data is kept in the cache is called the time-to-live
                value (ttlsecs). You specify the time-to-live value when you store a key-value pair
                in the cache using Apex methods.
                For session cache, your data can live up to 8 hours in the cache. For org cache,
                your data can live up to 48 hours in the cache. By default, the time-to-live value
                for org cache is 24 hours.</p>
<p class="p">Session cache expires when its specified time-to-live value is reached or when the
                user session expires, whichever comes first. Org cache expires when its specified
                time-to-live value is reached.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_best_practices" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_best_practices"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Best Practice for Handling Cache Misses</span></h2>
<div class="body">
<p class="p">As a best practice, your code should anticipate and accommodate points of failure. In
            other words, always assume that a cache miss can happen. A cache miss is when you
            request a value for a key from the cache but the value is not found. The value that your
                <samp>get()</samp> call returns is null. Check the result
            of the <samp>get()</samp> call for null and handle it
            accordingly. For example, if the result is <samp>null</samp>,
            get the value from the database or an API call.</p>
<p class="p">The following Apex
            snippet shows how to handle a cache miss by checking whether the returned value from the
            cache is not <samp>null</samp> (<samp>if (cachedRate != null)</samp>). If the value is not
                <samp>null</samp>, you can use the value, for example, to
            display it on a page. Otherwise, fetch this value from another source, such as an API
            call or from Salesforce.</p>
<div class="codeblock"><pre>Cache.OrgPartition orgPart = Cache.Org.getPartition('local.CurrencyCache');
String cachedRate = (String)orgPart.get('DollarToEuroRate');
// Check the cache value that the get() call returned.
if (cachedRate != null) {
    // Display this exchange rate   
} else {
    // We have a cache miss, so fetch the value from the source.
    // Call an API to get the exchange rate.
}</pre></div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_session_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_session_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Store and Retrieve Data in Session Cache</span></h2>
<div class="body">
<p class="p">Remember what session cache does? That’s right, it stores data that is tied to individual
            user sessions. For example, you might use session cache in an app to store the user’s
            favorite currency or a user’s custom navigation tab order. With session cache, you can
            manage cache values in Apex and read cached values with a Visualforce global
            variable.</p>
<p class="p">When using Apex,
            managing the session cache is similar to the way you manage the org cache, except the
            class names are different. Use the <samp>Cache.Session</samp>
            and <samp>Cache.SessionPartition</samp> classes to access
            values stored in the session cache. To manage values in any partition, use the methods
            in the <samp>Cache.Session </samp>class. If you’re managing
            cache values in only one partition, use the <samp>Cache.SessionPartition</samp> methods instead. The <samp>Cache.SessionPartition</samp> methods are easier to use than the <samp>Cache.Session</samp> methods because you specify the
            namespace and partition prefix only once when you create the partition object.</p>
<p class="p">The following snippet of Apex code shows how
            to access a partition to store and retrieve a cache value. It obtains the partition
            named CurrencyCache in the local namespace. A new value is added with key
                <span class="keyword parmname">FavoriteCurrency</span>. The value for the
                <span class="keyword parmname">FavoriteCurrency</span> key is retrieved. The
                <span class="keyword parmname">FavoriteCurrency</span> key stores the user’s favorite currency, so
            this value is different for each user and hence a good candidate for session cache.</p>
<div class="codeblock"><pre>// Get partition
Cache.SessionPartition sessionPart = Cache.Session.getPartition('local.CurrencyCache');

// Add cache value to the partition
sessionPart.put('FavoriteCurrency', 'JPY');

// Retrieve cache value from the partition
String cachedRate = (String)sessionPart.get('FavoriteCurrency');</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Session cache doesn’t support Anonymous Apex blocks. For
            example, if you execute the previous snippet of session cache methods in the Developer
            Console, you’ll get an error. However, you can execute org cache methods through
            Anonymous Apex.</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_session_visualforce" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_session_visualforce"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Access Session Cache with Visualforce Global
            Variables</span></h2>
<div class="body">
<p class="p">Access cached values stored in the session cache from a Visualforce page by using the
                <samp>$Cache.Session</samp> global variable. By using this
            global variable, you can read cached values that were stored with Apex directly from
            your Visualforce page.</p>
<p class="p">When using the <samp>$Cache.Session</samp> global variable, fully
            qualify the key name with the namespace and partition name. This example is an output
            text component that retrieves a cached value from the namespace <samp>ExPro</samp>, partition <samp>CurrencyCache</samp>, and key <samp>FavoriteCurrencyRate</samp>.</p>
<div class="codeblock"><pre>&lt;apex:outputText value="{!$Cache.Session.ExPro.CurrencyCache.FavoriteCurrencyRate}"/&gt;</pre></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The Visualforce global
            variable is available only for session cache and not for org cache.</p></div></div></div></div></div>
<p class="p">Unlike with Apex
            methods, you can’t omit the <samp>namespace.partition</samp>
            prefix to reference the default partition in the org. If a namespace isn’t defined for
            the org, use <samp>local</samp> to refer to the namespace of the
            current org where the code is running.</p>
<div class="codeblock"><pre>&lt;apex:outputText value="{!$Cache.Session.local.MyPartition.Key}"/&gt;</pre></div>
<p class="p">If the cached value is a data structure that has properties or methods, like an Apex List or a
            custom class, access those properties in the <samp>$Cache.Session</samp> expression using dot notation. For example, this markup
            invokes the <samp>List.size()</samp>
            Apex method if the
            value of <samp>numbersList</samp> is declared as a List.</p>
<div class="codeblock"><pre>&lt;apex:outputText value="{!$Cache.Session.local.MyPartition.numbersList.size}"/&gt;</pre></div>
<p class="p">This example accesses the value property on the <samp>myData</samp> cache value that is declared as a custom class.</p>
<div class="codeblock"><pre>&lt;apex:outputText value="{!$Cache.Session.local.MyPartition.myData.value}"/&gt;</pre></div>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_isv_apps" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_isv_apps"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Protected Cache Allocation for ISV Apps</span></h2>
<div class="body">
<p class="p">By using platform cache, ISV apps run faster and have better performance. If you’re an
            ISV developer, you can guarantee cache space for your apps by purchasing cache space for
            your own namespace. That way, when your app is installed in a subscriber org, the space
            for your app’s cache is not affected by the usage of the cache in the subscriber’s org.
            Only Apex code
            running from your app’s namespace can access and use your namespace’s cache. No other
            code in the subscriber org can use this cache. You can test your app against your
            namespace’s cache and be assured that the cache allocation is going to be protected in
            every subscriber org.</p>
<p class="p">Cache partitions are distributed to subscribers as part of the app’s package. Add one or
            more cache partitions for your namespace to your package as components in the same way
            as you add other components. Cache partitions aren’t automatically added as dependent
            components.</p>
<div class="imagecenter"><span class="image image-block"><img alt="A list of package components that include a cache partition" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us85bdf15d1d17d0011c6ded9b297aae98.jpg"/></span></div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>See the following about packaged partitions.<ul class="ul bulletList">
<li class="li">The partitions you add to the package must be nondefault partitions.</li>
<li class="li">When a subscriber installs your package, the cache partitions get installed in
                    their org enabling your app to access the installed cache partitions for your
                    namespace.</li>
<li class="li">Subscribers must have an Enterprise Edition or Unlimited Edition org, or must
                    have purchased Platform Cache.</li>
</ul>
</p></div></div></div></div></div>
<p class="p">The following diagram shows an example cache capacity for an Enterprise Edition
            subscriber org in which a package was installed with packaged cache. The subscriber’s
            total cache capacity of 30 MB is divided into three partitions consisting of
            combinations of session and org cache. The packaged cache capacity originates from the
            installed package in the subscriber’s org and contains two partitions. The packaged
            cache consists of 20 MB of cache that the ISV purchased. (Remember, only Apex code from
            the package can access the packaged cache and code in the subscriber’s org can’t use
            this cache.)</p>
<div class="imagecenter"><span class="image image-block"><img alt="Cache capacity of packaged partitions and org partitions are separate" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us165f4e07c7d4a976a35eed626bb592bf.png"/></span></div>
<p class="p">Purchase your namespace cache from the Channel Order App. You can purchase cache in 10-MB
            blocks. To determine how much cache space your apps need, test your apps with your cache
            partitions. Use trial cache to increase the capacity of cache in your org. As we
            mentioned in the first unit, certain editions of subscriber orgs get cache allocation by
            default. For your Developer Edition org in which you develop apps, you can request 10 MB
            of trial cache. You can request to increase the amount of trial cache given to your org
            by contacting Salesforce. By
            experimenting with different cache sizes, you’ll have a better idea of how much cache to
            purchase for your own namespace.</p>
<p class="p">Now that you’ve seen how to get and store values in Platform Cache, try it on your own!
            Complete the following challenge to test your knowledge.</p>
</div>
</div>
<div class="topic nested0" id="platform_cache_use_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_use_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<p class="p">Resources in the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_intro.htm" target="_blank">Apex Developer Guide</a>:</p>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_cache_partition_setup.htm" target="_blank">Platform Cache Partitions</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_namespace_cache.htm" target="_blank">Apex
                    Cache Namespace</a></li>
</ul>
<p class="p">Resources in the <a class="xref" href="https://help.salesforce.com/articleView?id=salesforce_help_map.htm&amp;language=en_US" target="_blank">Salesforce Help</a>: <a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=data_platform_cache.htm&amp;language=en_US" target="_blank">Cache Force.com Data</a></p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Walk Through a Sample Application and Discover Cache Diagnostics</h1><div class="unit-content">
<body id="platform_cache_walkthrough_objectives"><a name="platform_cache_walkthrough_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<p class="p">After completing this unit, you’ll be able to:</p>
<ul class="ul bulletList">
<li class="li">Explain a pattern for storing and refreshing cached data.</li>
<li class="li">Decide on the data structure to use for the cached value.</li>
<li class="li">Diagnose your cache usage.</li>
</ul>
</div>
</div>
<div class="topic nested0" id="platform_cache_walkthrough_sample" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_walkthrough_sample"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Sample Application Walkthrough</span></h2>
<div class="body">
<p class="p">Let's take a look at a sample application that demonstrates how to use the org cache for
            storing and retrieving currency exchange rates. Exchange rates fluctuate during a day so
            this sample app doesn’t return real-time rates. The app just provides a daily snapshot
            of exchange rates. Because we’re not interested in accurate real-time values but only in
            daily values, caching the currency exchange rates is a good choice. When exchange rates
            are retrieved repeatedly, getting them from the cache saves a lot of time and improves
            the performance of the app.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading3">Sample Application Overview</h3>
<div class="p">
<p class="p">We based our exchange rates sample application on a Visualforce page and an
                    Apex
                controller that contains the logic for fetching exchange rates. The first time this
                page is accessed, the rates are obtained through an API call to an external web
                service. Subsequent executions of this page return the rates from the cache as long
                as the rates are less than a day old. For each exchange rate, this page displays the
                base currency, the target currency for conversion, and the conversion rate. For
                illustration purposes, a small set of currencies is returned.</p>
<div class="imagecenter"><span class="image image-block"><img alt="Visualforce page displays currency exchange rates" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2fabf5b7990c8c143ad1150ab60e07bf.jpg"/></span></div>
<p class="p">This example is the markup of the Visualforce page. This
                page is associated with the <samp>Rates</samp>
                Apex
                controller.</p>
<div class="codeblock"><pre>&lt;apex:page controller="ExchangeRates" action="{!init}"&gt;
    
   &lt;apex:pageBlock title="Rates"&gt;
      &lt;apex:pageBlockTable value="{!Rates}" var="rate"&gt;
         &lt;apex:column value="{!rate.Base_Currency__c}"/&gt;
         &lt;apex:column value="{!rate.To_Currency__c}"/&gt;
         &lt;apex:column value="{!rate.Rate__c }"/&gt;
      &lt;/apex:pageBlockTable&gt;
   &lt;/apex:pageBlock&gt;
   
&lt;/apex:page&gt;</pre></div>
</div></div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Sample Apex
                Controller</h3>
<p class="p">Our sample Apex
                controller does the heavy lifting. It fetches exchange rates, stores them in Salesforce and in the cache,
                and retrieves rates from the cache. Here is a breakdown of the operations that the
                sample controller does, followed by the source code.</p>
<p class="p">The first time the sample is run, the following operations occur.</p>
<ul class="ul bulletList">
<li class="li">The exchange rates are obtained from an API call to an external endpoint. </li>
<li class="li">The result (in JSON format) returned from the API call is parsed and saved in
                    Exchange_Rate__c sObjects in Salesforce. </li>
<li class="li">The <samp>getCachedRates()</samp> method stores the
                    array of Exchange_Rate__c sObjects in the org cache.</li>
</ul>
<p class="p">On subsequent executions of the sample:</p>
<ul class="ul bulletList">
<li class="li">The sample checks how fresh the stored data is. To this end, it performs a SOQL
                    query to fetch the <span class="keyword parmname">createdDate</span> value of the first returned
                    Exchange_Rate__c record. </li>
<li class="li">If the date is older than one day, the exchange rates are obtained
                    from the API call, as in the first execution.</li>
<li class="li">If the date is newer than one day, the rates are taken from the org
                    cache. If there is a cache miss, the rates are queried from Exchange_Rate__c
                    sObjects and stored in the org cache.</li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>The Apex
                controller uses a helper Apex class
                called <samp>RateLib</samp>, which is not shown here.
                This helper class contains methods to make the outgoing API call to an exchange rate
                service, parse the JSON result from the API call, and store Exchange_Rate__c
                records.</p></div></div></div></div></div>
<div class="codeblock"><pre>public class ExchangeRates {
    private String currencies = 'EUR,GBP,CAD,PLN,INR,AUD,SGD,CHF,MYR,JPY,CNY';
    public String getCurrencies() { return currencies;}
    public Exchange_Rate__c[] rates {get; set;}

    //                                                                          
    // Checks if the data is old and gets new data from an external web service 
    // through a callout. Calls getCachedRates() to manage the cache.           
    // 
    public void init() {
        // Let's query the latest data from Salesforce
        Exchange_Rate__c[] latestRecords = ([SELECT CreatedDate FROM Exchange_Rate__c 
                        WHERE Base_Currency__c =:RateLib.baseCurrencies 
                              AND forList__c = true 
                        ORDER BY CreatedDate DESC
                        LIMIT 1]);
        
        // If what we have in Salesforce is old, get fresh data from the API
        if ( latestRecords == null  
            || latestRecords.size() == 0 
            || latestRecords[0].CreatedDate.date() &lt; Datetime.now().date()) {
            // Do API request and parse value out
            String tempString = RateLib.getLoadRate(currencies);
            Map&lt;String, String&gt; apiStrings = RateLib.getParseValues(
                tempString, currencies);
            
            // Let's store the data in Salesforce
            RateLib.saveRates(apiStrings);

            // Remove the cache key so it gets refreshed in getCachedRates()
            Cache.Org.remove('Rates');
        }
        // Call method to manage the cache
        rates = getCachedRates();
    }

    //                                                                          
    // Main method for managing the org cache.                                  
    // - Returns exchange rates (Rates key) from the org cache.                 
    // - Checks for a cache miss.                                               
    // - If there is a cache miss, returns exchange rates from Salesforce       
    //    through a SOQL query, and updates the cached value.                   
    //
    public Exchange_Rate__c[] getCachedRates() {
        // Get the cached value for key named Rates
        Exchange_Rate__c[] rates = (Exchange_Rate__c[])Cache.Org.get(
            RateLib.cacheName+'Rates');
        
        // Is it a cache miss? 
        if(rates == null) {
            // There was a cache miss so get the data via SOQL
            rates = [SELECT Id, Base_Currency__c, To_Currency__c, Rate__c 
                        FROM Exchange_Rate__c 
                        WHERE Base_Currency__c =:RateLib.baseCurrencies 
                              AND forList__c = true
                              AND CreatedDate = TODAY];
            // Reload the cache
            Cache.Org.put(RateLib.cacheName+'Rates', rates);
        }
        return rates;
    }
}</pre></div>
<p class="p">To download the source of the Exchange Rates sample and play with it in your
                Developer org, see the Resources section.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_walkthroug_best_practices" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_walkthroug_best_practices"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Best Practices for Cache Management</span></h2>
<div class="body">
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Pattern for Cache Storage</h3>
<p class="p">The <samp>ExchangeRates</samp>
                Apex class
                contains methods that encapsulate the logic of initializing and refreshing the
                cache. If the data is stale or is not found, the <samp>init()</samp> method retrieves new exchange rates through an API call, and
                then stores them in Salesforce. The <samp>getCachedRates()</samp> method manages the
                cache internally. If the cached value is not found, this method retrieves an array
                of rates from Salesforce and
                stores it in the cache.</p>
<p class="p">Because our app uses external data, it fetches data from a web service through API
                calls. It also stores the data as Salesforce records as a
                backup for refreshing the cache. Apps that don’t use external data retrieve Salesforce records by using
                SOQL and cache it. In this case, the process of cache management is simpler and the
                cache method implementation is shorter. For example, if your app just uses local
                data from SOQL, you wouldn’t need the <samp>init()</samp>
                method but only the <samp>getCachedRates()</samp>
                method.</p>
<p class="p">We recommend that you include all the logic for managing the cache in one method.
                That way, the cache is manipulated in only one place in your app. The central
                management of the cache reduces the chance of errors from accessing invalid cache
                (cache misses) or accidentally overwriting cached values.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Deciding What to Cache</h3>
<p class="p">This sample stores an array of sObjects in the cache. Is this approach the best
                choice of data structure to store? There are tradeoffs with every choice you make.
                Storing smaller pieces of data, like field values instead of entire sObjects or
                sObject arrays, reduces your cache usage size. But if you store less data in each
                key, you might need complex logic to rebuild the data and sObjects, which requires
                more processing time. Also, caching smaller items instead of a list of items worsens
                cache performance because of the overhead of serialization and cache commit time.
                For example, instead of storing a list of rates (referenced by the rates variable in
                this snippet):</p>
<div class="codeblock"><pre>Cache.Org.put('Rates', rates);</pre></div>
<p class="p">You can store the individual rates, each as a field with its own cache key, as
                follows.</p>
<div class="codeblock"><pre>Cache.Org.put('DollarToEuroRate', rateEUR);
Cache.Org.put('DollarToChineseYuan', rateCNY);
Cache.Org.put('DollarToJapaneseYen', rateJPY);
// etc.</pre></div>
<p class="p">The decision of what data structure to cache depends on what your app does with the
                data. For example, if the app converts currencies for the same base currency, store
                at least the exchange rate for each target currency. You could store each currency
                rate as an individual key. But to make it easier to display the rates on a
                Visualforce page, cache the data as a list of sObjects. sObjects increase storage
                space because they contain system fields, such as the created date, but they reduce
                logic processing time and increase app and cache performance. Remember that when
                using the cache, the main goal is to reduce the app’s execution time.</p>
</div>
</div>
</div>
<div class="topic nested0" id="platform_cache_walkthroug_diagnostics_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_walkthroug_diagnostics_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Diagnose Cache Usage</span></h2>
<div class="body">
<p class="p">So, you’ve done all this work to implement Platform Cache. How do you know if you’re
            making the best use of the cache? There are a couple ways you can check performance
            data. One way is to view the diagnostics information in Setup (available in Salesforce
            Classic only).</p>
<p class="p">Before you access the diagnostics page, enable the cache diagnostics permission for your
            user.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">users</kbd> in the <span class="keyword parmname">Quick
                    Find</span> box, then select <strong class="ph uicontrol">Users</strong>. </li>
<li class="li">Click your user’s name, and then click <strong class="ph uicontrol">Edit</strong>.</li>
<li class="li">Select <strong class="ph uicontrol">Cache Diagnostics</strong>, and then click
                    <strong class="ph uicontrol">Save</strong>.</li>
</ol>
<p class="p">Next, access the diagnostics page for a specific cache type in a partition.</p>
<ol class="ol enumList">
<li class="li">From Setup, enter <kbd class="ph userinput">cache</kbd> in the <span class="keyword parmname">Quick
                    Find</span> box, then select <strong class="ph uicontrol">Platform Cache</strong>.</li>
<li class="li">Click the partition for which you want to check diagnostics information.</li>
<li class="li">Under session cache or org cache, click <strong class="ph uicontrol">Diagnostics</strong>.<p class="p">
<div class="imagecenter"><span class="image image-block"><img alt="Partition page contains links to the diagnostics pages for each cache type" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd16e88071d8c4c94795fab869008098e.png"/></span></div>
</p>
</li>
</ol>
<p class="p">If you click <strong class="ph uicontrol">Diagnostics</strong> for the org cache, the Org Cache
            Diagnostics page opens in a new tab. This page shows two charts. The first chart (Usage
            Against Limit) shows your cache usage limit. In our case, we’re way below the limit at
            0.12%. The second chart (By Content Distribution) is a donut chart that shows cache
            distribution by key.</p>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Because our sample uses the org cache, we’re inspecting the diagnostics page for only
            the org cache. A similar diagnostics page is also provided for the session cache for
            apps that use the session cache.</p></div></div></div></div></div>
<p class="p">The following image shows a content distribution chart with three cache keys. One of the
            cache keys, <span class="keyword parmname">Rates</span>, is used in our exchange rates sample. The
                <span class="keyword parmname">Rates</span> key uses up the most space.</p>
<div class="imagecenter"><span class="image image-block"><img alt="Diagnostics page for org cache" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us69773cd6ff0d57177937429dea03fb59.png"/></span></div>
<p class="p">After the charts, details of cache keys are listed. This list provides the size of each
            cached value corresponding to a key and the number of times the cache was accessed. You
            can delete a cache manually from this list as an alternative to calling the <samp>remove()</samp> method in Apex. The
                <strong class="ph uicontrol">Delete</strong> button lets admins manage the cache without modifying
            any code.</p>
<p class="p">The <span class="keyword parmname">DollarToEuroRate</span> key uses much less space than the
                <span class="keyword parmname">Rates</span> key. That’s to be expected because the
                <span class="keyword parmname">DollarToEuroRate</span> stores only one value while
                <span class="keyword parmname">Rates</span> stores an array of sObjects. Our sample app stores
            exchange rates for 11 currencies. If the currencies were stored individually as fields,
            the total size of 11 fields would be:</p>
<div class="codeblock"><pre>572 bytes = 52 bytes * 11 fields</pre></div>
<p class="p">The <span class="keyword parmname">Rates</span> key is a list of Exchange_Rate__c custom objects
            representing each a rate. Not surprisingly the list of all 11 sObjects is larger than
            572 bytes (it is 1,073 bytes) because our sObject contains more fields. The additional
            fields include the base currency, target currency, and system date fields.</p>
<p class="p">Use the information on the diagnostics page to determine whether to adjust your cache
            usage. For example, if a cache value has a low access count, indicating that it’s rarely
            used, consider whether it’s really needed, especially if it’s large. Or if you’re
            getting close to the cache usage limit, reconsider what to cache. You might want to
            remove unnecessary cache values or purchase more cache capacity.</p>
<p class="p">Congratulations! You’ve learned how to use Platform Cache to cache your app’s data for
            fast retrieval. You’ve also learned about caching best practices and how to diagnose
            cache usage. You’re now ready to join the adventures of the chipmunk and cache precious
            resources!</p>
</div>
</div>
<div class="topic nested0" id="platform_cache_walkthrough_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="platform_cache_walkthrough_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span>
</h2>
<div class="body">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_platform_cache_best_practices.htm" target="_blank">Platform Cache Best Practices</a> in the <a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_intro.htm" target="_blank">Apex Developer Guide</a>.</li>
<li class="li"><a class="xref" href="https://github.com/developerforce/ExchangeRates" target="_blank">Exchange Rates Sample on GitHub</a></li>
</ul>
</div>
</div>
</body></div><h1>Get Started with Event Monitoring</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="event_monitoring_intro_learning_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="event_monitoring_intro_learning_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Name several event types supported by event monitoring.</li>
<li class="li">Define event log files.</li>
<li class="li">State at least three use cases for event monitoring.</li>
<li class="li">Describe the API-first approach to development.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="elf_overview_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_overview_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>What Is Event Monitoring?</span></h2>
<div class="body">
<p class="p">Everyone knows that being a detective is one of the coolest jobs you can have. Well, hold
            on to your magnifying glass because your job as a Salesforce administrator is
            about to get a whole lot cooler. With event monitoring, you can be the investigator your
            organization always needed.</p>
<p class="p">Event monitoring is one of many tools that Salesforce provides to help keep
            your data secure. It lets you see the granular details of user activity in your
            organization. We refer to these user activities as <em class="ph i">events</em>. You can view
            information about individual events or track trends in events to swiftly identify
            abnormal behavior and safeguard your company’s data.</p>
<div class="p">So what are some of the events that you can track? Event monitoring provides tracking for
            more than 30 different types of events, including:<ul class="ul bulletList">
<li class="li">Logins</li>
<li class="li">Logouts</li>
<li class="li">URI (web clicks)</li>
<li class="li">UITracking (mobile clicks)</li>
<li class="li">Visualforce page loads</li>
<li class="li">API calls</li>
<li class="li">Apex
                    executions</li>
<li class="li">Report exports</li>
</ul>
</div>
<div class="p">All these events are stored in <em class="ph i">event log files</em>. An event log file is generated
            when an event occurs in your organization and is available to view and download after 24
            hours. The event types you can access and how long the files remain available depends on
            your edition.<ul class="ul bulletList">
<li class="li">Developer Edition (DE) organizations have free access to all 30+ log types with
                    one-day data retention.</li>
<li class="li">Enterprise, Unlimited, and Performance Edition organizations have free access to
                    the login and logout log files with one-day data retention. For an extra cost,
                    you can access all log file types with 30-day data retention.</li>
</ul>
</div>
<p class="p">So how can you use event log files to become an all-knowing Salesforce super-sleuth? Let’s
            take login activity as an example. We’ll talk about accessing, downloading, and
            visualizing event log files later on. For now, assume that we did these steps and
            produced this graph of login activity. <div class="imagecenter"><span class="image image-block"><img alt="Chart of the organization's login activity." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us0f03b6b07760f7b163cdd69ecab3f01f.png"/></span></div>You can see that an unusually
            high number of logins to the organization occurred between May 4 and May 5. But how do
            you figure out exactly what happened during that time period? Luckily, event monitoring
            provides several ways for you to dig into this data. In this case, you might want to
            break down the number of logins by user. <div class="imagecenter"><span class="image image-block"><img alt="Chart of the organization's login activity and login activity by user." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us44105839952a08ac4a4d39c6c135b122.png"/></span></div></p>
<p class="p">Adam Admin logged in 103 times! Something is definitely fishy. You can continue to break
            this data down to see things like how many distinct IP addresses a user logged in from.
            This information helps you pinpoint whether an outside party compromised a user’s
            account or whether a user is up to no good.</p>
<div class="p">You’re probably beginning to see the power of event monitoring, but let’s consider some
            other uses.<ul class="ul bulletList">
<li class="li"><strong class="ph b">Monitor data loss</strong>—Imagine that a sales representative leaves your company
                    and joins a major competitor. Later, you find out that your organization is
                    losing deal after deal to this other company. You suspect that your former
                    employee downloaded a report containing leads and shared it with the
                    competition. If you’d been using event monitoring, you could have caught this
                    bad behavior before it cost your company sales.</li>
<li class="li"><strong class="ph b">Increase adoption</strong>—Event monitoring isn’t just for catching your users’
                    bad behavior. It can also alert you to parts of your organization that aren’t
                    performing well. For example, you just rolled out a new Visualforce page in your
                    organization that combines accounts and contacts and allows end users to add
                    custom fields. Without any metrics, it’s difficult to tell how users are
                    interacting with this page—if at all. Event monitoring helps you figure out
                    which parts of your organization need increased adoption efforts and even helps
                    you identify areas that need redevelopment.</li>
<li class="li"><strong class="ph b">Optimize performance</strong>—Sometimes it’s hard to determine the cause of slow
                    page performance in your organization. Imagine that your company has an office
                    in San Francisco and one in London. The users in London tell you that their
                    reports are running slowly or even timing out. You can use event monitoring to
                    determine whether the cause is related to a network issue in London or with the
                    way your app is configured.</li>
</ul>
</div>
<p class="p">These cases are just a few ways that you can use event monitoring to keep your
            organization secure and running smoothly. Check out all the event types to discover what
            else you can do.</p>
</div>
</div>
<div class="topic nested0" id="elf_overview_api" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_overview_api"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>A Quick Note About the API</span></h2>
<div class="body">
<div class="p">If you’re an administrator, working with the API can be daunting. We won’t
            go over all the nitty-gritty details in this module, but let’s take a minute to review
            some basics. API stands for
                <em class="ph i">Application Programming Interface</em>. You can think of it as a bridge between an
            application (in our case, Salesforce) and the database.
            Two important terms to remember when working with the API are:<ul class="ul bulletList">
<li class="li"><strong class="ph b">Objects</strong>—Almost every object in the user interface is also an object in
                    the API (for example,
                    Account or Case). The API also has several
                    objects that you can’t use in the user interface.</li>
<li class="li"><strong class="ph b">Fields</strong>—The fields you’re used to seeing in the user interface are also
                    fields in the API (for
                    example, the <span class="keyword parmname">Account Name</span> field in the user interface
                    becomes the <span class="keyword parmname">Name</span> field in the API).</li>
</ul>
</div>
<p class="p">Sometimes, the user interface doesn’t provide you with every possible access point to
            your data. That’s why the API
            is so important. Salesforce
            encourages what’s called an <em class="ph i">API first</em> approach to
            development. API first means
            that, before you develop an application’s user experience, you want to pay attention to
            the underlying API. The API lets you use your data in ways that aren’t possible in the
            user interface. Considering the API in the initial planning
            stages lets you develop a more robust application.</p>
<p class="p">Event monitoring is an API-only
            feature. It isn’t anywhere in the Setup area. Instead, each organization’s event log
            files are stored in an API
            object called EventLogFile. Salesforce provides an API tool called Workbench that
            lets you access your EventLogFile objects. If all this information sounds a little confusing, don’t worry. We’ll go
            through everything step-by-step during this module.</p>
</div>
</div>
<div class="topic nested0" id="event_monitoring_intro_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="event_monitoring_intro_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api.meta/api/sforce_api_objects_eventlogfile.htm" target="_blank">EventLogFile Object
                        Reference</a></p>
<p class="p"><a class="xref" href="http://www.salesforcehacker.com/2015/01/api-first-for-administrators.html" target="_blank">API First for
                        Administrators</a></p>
</div>
</div>
</body></div><h1>Query Event Log Files</h1><div class="unit-content">
<body id="event_monitoring_query_learning_objectives"><a name="event_monitoring_query_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Ensure that you have the correct permissions to use event monitoring.</li>
<li class="li">Log in to and navigate to several tools in Workbench.</li>
<li class="li">Query an EventLogFile object using the SOQL query
                    editor and REST Explorer.</li>
<li class="li">Compare and contrast the SOAP and REST APIs for querying event log files.</li>
<li class="li">Describe the data type used to store the underlying log data.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="elf_querying_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_querying_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Query Event Log Files in Workbench</span></h2>
<div class="body">
<p class="p">Let’s consider one of the example cases from earlier. A sales representative named Rob
            Burgle left your company a few weeks ago and joined a major competitor. All of a sudden,
            you start losing deals to this other company. You suspect that Mr. Burgle downloaded a
            report containing confidential lead information and shared it with his new employer.
            Normally, you wouldn’t be able to confirm your suspicions. But with event monitoring,
            you can gather all the evidence you need to set the story straight. Let’s look at how
            this process works.</p>
<div class="p">Before we get started, double-check that you have the correct permissions to query event
            log files. Event monitoring requires the “API Enabled” and “View
            Event Log File” permissions.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Shield Event Monitoring is available for free in
                Developer Edition orgs. All other editions require you to purchase a
            license.</p></div></div></div></div></div>
</div>
<div class="p">Now we’re ready to go. The first step in our investigation is to log in to Workbench.<ol class="ol enumList">
<li class="li">Log in to your Trailhead DE organization and navigate to <a class="xref" href="https://workbench.developerforce.com" target="_blank">Workbench</a>.</li>
<li class="li">For Environment, select <strong class="ph uicontrol">Production</strong>. For API Version,
                    select the highest available number. Make sure that you check <strong class="ph uicontrol">I agree
                        to the terms of service</strong>.</li>
<li class="li">Click <strong class="ph uicontrol">Login with Salesforce</strong>.</li>
</ol>
</div>
<div class="p">You’ve arrived at the Workbench home page. We don’t cover all the tool’s features in this
            module, but we go through the pieces that are useful for event monitoring. Let’s start
            by using the SOQL query
            editor to make sure that you have some data to work with.<ol class="ol enumList">
<li class="li">In the top menu, select <span class="ph menucascade"><strong class="ph uicontrol">queries</strong> | <strong class="ph uicontrol">SOQL
                            Query</strong></span>.</li>
<li class="li">Under Object, choose <strong class="ph uicontrol">EventLogFile</strong>. Under Fields, select
                        <strong class="ph uicontrol">count()</strong>. Notice that the editor populates with some
                    query text.</li>
<li class="li">Click <strong class="ph uicontrol">Query</strong>.</li>
</ol>
</div>
<p class="p">You should see something like this: <div class="imagecenter"><span class="image image-block"><img alt="The count() function in the SOQL Query Editor." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use7b97432a62ffb2f5af9056f101b4422.png"/></span></div></p>
<p class="p">The <samp>count()</samp> function returns how many EventLogFile records exist in your organization. If the response tells you “Query would return 0
            records,” it means that you don’t have any stored events. Remember that it takes 24
            hours for events to surface and the log files are only stored for 24 hours in DE
            organizations. If you don’t get any results back, you can retry tomorrow.</p>
<div class="p">So what exactly does the EventLogFile object store? To find out, we can do what’s called an object <em class="ph i">describe</em>:<ol class="ol enumList">
<li class="li">In the top menu, select <span class="ph menucascade"><strong class="ph uicontrol">info</strong> | <strong class="ph uicontrol">Standard &amp; Custom Objects</strong></span>.</li>
<li class="li">Select <strong class="ph uicontrol">EventLogFile</strong> from the dropdown menu.</li>
<li class="li">Expand the <strong class="ph uicontrol">Attributes</strong> menu to view the object’s
                    properties. EventLogFile is queryable, which means that you can request information about the object
                    from the database. It’s also retrievable, so you can find an EventLogFile record by its ID.</li>
<li class="li">Expand the <strong class="ph uicontrol">Fields</strong> menu. There are 15 fields here, but
                    let’s pay particular attention to two of them: <span class="keyword parmname">EventType</span>
                    and <span class="keyword parmname">LogFile</span>.<ul class="ul bulletList">
<li class="li"><span class="keyword parmname">EventType</span>: This field displays which of the more
                            than 30 event types a record represents. If you expand <span class="ph menucascade"><strong class="ph uicontrol">EventType</strong> | <strong class="ph uicontrol">Picklist Values</strong></span>, you can see the different types of events. In our case,
                            we’re interested in records with an EventType of Report Export.</li>
<li class="li"><span class="keyword parmname">LogFile</span>: This field is where the actual information
                            you’re looking for is stored. The contents of a log file depend on the
                                <span class="keyword parmname">EventType</span>. For Report Export, this field stores
                            everything from the ID of the user that exported the report to the
                            browser and operating system that they used to do it.</li>
</ul>
</li>
</ol>
</div>
<p class="p">We’re getting closer to finding our culprit! Let’s keep collecting evidence by using
            another tool in Workbench: the REST Explorer.</p>
</div>
</div>
<div class="topic nested0" id="elf_querying_rest" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_querying_rest"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>View Events in the REST Explorer</span></h2>
<div class="body">
<p class="p">The REST Explorer gives you access to the Salesforce
            REST API, a web service that
            lets you retrieve data from your organization.</p>
<div class="p">To get more information about your organization’s Report Export events in Workbench:<ol class="ol enumList">
<li class="li">In the top menu, select <span class="ph menucascade"><strong class="ph uicontrol">utilities</strong> | <strong class="ph uicontrol">REST Explorer</strong></span>.</li>
<li class="li">Replace the existing text with <kbd class="ph userinput">/services/data/v &lt;API version&gt;
                        .0/query?q=SELECT+Id+,+EventType+,+LogDate+,+LogFileLength+,+LogFile+FROM+EventLogFile+WHERE+EventType+=+'ReportExport'</kbd>.</li>
<li class="li">Click <strong class="ph uicontrol">Execute</strong>.</li>
</ol>
</div>
<p class="p">If no reports have been exported from your organization in the past 24 hours, the
                <span class="keyword parmname">totalSize</span> field has a value of zero. Remember that it takes 24
            hours for events to become available. You can export a report from your organization and
            try again tomorrow. Alternatively, you can replace <span class="keyword parmname">ReportExport</span>
            with a different event type in your REST query (for example,
            <span class="keyword parmname">Login</span>).</p>
<p class="p">If you have some report export events, your execution returns something like this: <div class="imagecenter"><span class="image image-block"><img alt="The records the REST query returned." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-use6aca731bbc159b6ff505caeb3aecfd4.png"/></span></div></p>
<p class="p">Expand one of the records and click the <strong class="ph uicontrol">LogFile</strong> link. The log
            contents look something like this: <div class="imagecenter"><span class="image image-block"><img alt="The event log file from one of the returned records." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us717e9e6a139da997b494f3cfa3aa9c0e.png"/></span></div></p>
<p class="p">Yikes! How are we supposed to learn anything from this? Don’t worry, we’re not done
            yet.</p>
</div>
</div>
<div class="topic nested0" id="elf_querying_adv" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_querying_adv"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Compare Query Methods for Event Monitoring</span></h2>
<div class="body">
<p class="p">You’ve used a couple of tools in Workbench. First, you used the SOQL Query Editor to
            determine whether you had any events stored in your organization. You also performed an
            object describe to learn about the EventLogFile object. Finally, you used the REST
            Explorer to view your EventLogFile records. All these tools retrieve information from
            your organization, so what’s the difference between them?</p>
<p class="p">The answer isn’t too surprising: The difference is in the underlying API.</p>
<p class="p">The SOQL Query Editor and the
            object describe use what’s called the SOAP API. It’s a little different
            than the REST API that you used
            in the REST Explorer. One difference is that writing a query in the SOQL Query Editor is more
            straightforward than writing one in the REST Explorer. Let’s say we wanted to retrieve
            one of our log files.</p>
<p class="p">In SOAP, it looks like: <div class="imagecenter"><span class="image image-block"><img alt="A simple query in the SOQL Query Editor using the SOAP API." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2186fe53217c57c664fa6c95dbe6dec6.png"/></span></div></p>
<p class="p">In REST, we use: <div class="imagecenter"><span class="image image-block"><img alt="A more complex query in the REST Explorer using the REST API." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us413511de7d693b324c06d1b378263b7b.png"/></span></div></p>
<p class="p">The SOQL query is easier to
            understand and remember. So why did we decide to use REST instead? Let’s look at what
            happens when we execute these queries and view one of our log files.</p>
<p class="p">In SOAP, the query returns something like this: <div class="imagecenter"><span class="image image-block"><img alt="The unintelligible log file from the SOQL query." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us5d0cb99871f95fb313a0edd3c02351b7.png"/></span></div></p>
<p class="p">The REST query returns this: <div class="imagecenter"><span class="image image-block"><img alt="The slightly less unintelligible log file from the REST query." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us9748645a9b6e2a185f4a6d73f281d477.png"/></span></div></p>
<p class="p">Here, we see the other major difference between SOAP and REST when it comes to querying
            event log files. The returned log files are the same, but they’re presented in different
            formats. When you retrieve your event log files using SOAP, the result is a serialized,
            Base64 string. If your organization plans on using tools like Informatica to work with
            event log files, you want to use SOAP to retrieve your data. REST, on the other hand,
            deserializes the log file. It’s still not pretty, but as you’ll see in the upcoming
            section, other tools can transform the REST results into an easy-to-read format.</p>
</div>
</div>
<div class="topic nested0" id="event_monitoring_query_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="event_monitoring_query_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api.meta/api/sforce_api_objects_eventlogfile.htm" target="_blank">EventLogFile Object Reference</a></p>
<p class="p"><a class="xref" href="https://workbench.developerforce.com" target="_blank">Workbench</a></p>
</div>
</div>
</body></div><h1>Download and Visualize Event Log Files</h1><div class="unit-content">
<body id="event_monitoring_download_learning_objectives"><a name="event_monitoring_download_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Download an event log file.</li>
<li class="li">Describe the structure of event log files.</li>
<li class="li">Identify an application for downloading event log files without writing
                    code.</li>
<li class="li">Define a role that could use a cURL or Python script for downloading data.</li>
<li class="li">Identify some options for visualizing event log file data.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="elf_download_visualize_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_download_visualize_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Download Event Log Files</span></h2>
<div class="body">
<p class="p">You can use Workbench to quickly check your organization’s recent events and filter the
            events using certain criteria. But because you’re accessing the data through the API, you can also use other
            tools that make it even easier to work with event log files. To maximize the benefits of
            event monitoring, you want to download your event log files from Salesforce so that you can track
            them over time.</p>
<div class="p">You can download event log files in several ways, including:<ul class="ul bulletList">
<li class="li">Direct download via the Event Log File browser application</li>
<li class="li">cURL script</li>
<li class="li">Python script</li>
</ul>
</div>
<p class="p">Let’s look at each approach.</p>
</div>
</div>
<div class="topic nested0" id="elf_download_visualize_browser" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_download_visualize_browser"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Download Logs from Your Browser</span></h2>
<div class="body">
<div class="p">Using the event log file browser application is the most straightforward approach to
            downloading your organization’s event monitoring data. Let’s check it out.<ol class="ol enumList">
<li class="li">Log in to your Trailhead DE organization.</li>
<li class="li">Navigate to the <a class="xref" href="https://salesforce-elf.herokuapp.com/" target="_blank">event log file browser application</a>.</li>
<li class="li">Click <strong class="ph uicontrol">Production Login</strong>.</li>
<li class="li">Enter a date range for your search.</li>
<li class="li">Enter an event type for your search.</li>
<li class="li">Click <strong class="ph uicontrol">Apply</strong>.</li>
</ol>
</div>
<div class="p">You’ll see something like this: <div class="imagecenter"><span class="image image-block"><img alt="The event log file browser page." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us632c88373a76826e034814defe3d3d2b.png"/></span></div><div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If your organization doesn’t have any
                events in the specified date range or type, the page displays an error.</p></div></div></div></div></div>
</div>
<p class="p">The list shows the same event log files that you see when you query the EventLogFile
            object using the REST Explorer in Workbench. You can’t open the files in the browser
            application, but you can directly download them or use a script. Let’s look at the
            direct download method.</p>
<p class="p">Click the <img alt="The direct download button." class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb2a67a40d01f9334c5046260c157ba61.png"/> button to download a log to a comma-separated
            value (<span class="ph filepath">.csv</span>) file. The ugly string of text that you saw in the REST
            Explorer is transformed into a format that’s easily readable in a spreadsheet
            application, like Microsoft Excel or Google Sheets. Each file contains all the events of
            a particular type that occurred in your organization in the past 24 hours.</p>
<div class="p">Download the ReportExport log file. Open it in a spreadsheet, and let’s see what we can
                find.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If you don’t have any report export events, download another type of
                event log file or export a report and try this step again tomorrow. Events do not appear in the log file until 24 hours after they occur.</p></div></div></div></div></div>
<div class="imagecenter"><span class="image image-block"><img alt="The directly downloaded .csv format of the event log file." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usaca34088e1d35ef9ee9180fe4e6a4787.png"/></span></div></div>
<p class="p">That looks much better! Now we can finally figure out how that confidential information
            got leaked. Let’s say that our lead report’s ID is 00O30000008a3De. The
                <span class="keyword parmname">URI</span> field contains the ID of the report that was exported, and
            the <span class="keyword parmname">USER_ID</span> field contains the ID of the user who exported that
            report. All this information helps you pinpoint the culprit.<div class="imagecenter"><span class="image image-block"><img alt="The user ID and report ID from the event log file match that of our suspect and report, respectively." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc668fdb4c219eb49db4a4578df1fac55.png"/></span></div></p>
<p class="p">The user ID and the report ID are a match! You now have enough evidence to confirm that
            Rob Burgle exported the report. Now it’s time for justice to be served!</p>
</div>
</div>
<div class="topic nested0" id="elf_download_visualize_curl" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_download_visualize_curl"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Download Event Log Files Using cURL</span></h2>
<div class="body">
<p class="p">We know that you’re excited about cracking your first case, but this victory is only the
            beginning of your illustrious career as a Salesforce
            administrator/detective. Each event type also has a <img alt="The script download button." class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us25072094a7260c655125a1799825d0ea.png"/> button
            that downloads a cURL script that you can run in your computer’s command line. cURL is
            one of many command-line tools that you can use to download data from your organization.
            The script downloads a <span class="ph filepath">.csv</span> file exactly like the one you
            downloaded in the previous step. So why use cURL instead of the direct download
            tool?</p>
<div class="p">Although using cURL is more complicated than the first method, it provides additional
            flexibility in working with event log files. Rather than manually downloading log files,
            you can schedule when to run the script so that you always have the most recent event
            log files for your organization. You can also transform your data so that it’s in a
            format that you want. If your organization has an integration specialist you can pass
            off these scripts to kickstart automation efforts.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>cURL is best-suited for Mac and
                Linux users. It’s possible to use it on Windows, but it requires additional
                configuration.</p></div></div></div></div></div>
</div>
<div class="p">Using a cURL script to download your event log files requires the following:<ol class="ol enumList">
<li class="li">Providing your Salesforce credentials</li>
<li class="li">Logging in using oAuth and getting an access token</li>
<li class="li">Using a REST query to specify which logs you’re looking for <div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>If you’re
                        scheduling a recurring download, this step is important. You can use
                        something like this query to filter events by the current
                        day.<div class="codeblock"><pre>https://${instance}.salesforce.com/services/data/v34.0/query?q=Select+Id+,+EventType+,+LogDate+From+EventLogFile+Where+LogDate+=+${day}</pre></div>
</p></div></div></div></div></div>
</li>
<li class="li">Parsing the results of the query so that you can do things like create a
                    date-based file structure—you can perform any transformations on your data that
                    you want</li>
</ol>
</div>
<p class="p">For more information on using cURL with event log files, see <a class="xref" href="http://www.salesforcehacker.com/2014/11/downloading-event-log-files-using-script.html" target="_blank">this post</a>.</p>
</div>
</div>
<div class="topic nested0" id="elf_download_visualize_python" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_download_visualize_python"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Download Event Log Files Using Python</span></h2>
<div class="body">
<p class="p">If you need a more programmatic way of downloading your organization’s event log files,
            you can use Python scripts. One advantage of using a Python script over a cURL script is
            that it’s easier for Windows users to work with, but it’s also suitable for Mac and
            Linux users.</p>
<p class="p">Python is easy to understand, even if you’re not an experienced programmer. Some setup
            is
            required, but after that you can easily run your download script. For
            more information and to download the code, see <a class="xref" href="http://www.salesforcehacker.com/2015/03/elfpy-tasty-little-script-for.html" target="_blank">this post</a>.</p>
</div>
</div>
<div class="topic nested0" id="elf_download_visualize_tools" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="elf_download_visualize_tools"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Visualize Event Log File Data</span></h2>
<div class="body">
<p class="p">Now that you’ve taken the time to learn about event log files and how to download them
            from Salesforce, it’s time to
            talk about visualization. Searching for a specific piece of information in thousands of
            rows in a spreadsheet is like searching for a needle in a haystack. Most of the time,
            it’s not useful to look for a single instance of a report export or user login. You’re
            probably more interested in noticing behavior that’s out of the ordinary. To get
            immediate insights into your organization’s inner workings, you can regularly download
            your event log files and create visual representations of your data.</p>
<div class="p">Event monitoring doesn’t come with a visualization tool, but several existing tools are
            available to beautify your data. Some provide specific support for event log files,
            while others require more setup. We won’t go into the details of each platform, but
            check out this list for some ideas.<ul class="ul bulletList">
<li class="li"><strong class="ph b">Event Monitoring Wave App</strong>—The Event Monitoring Wave app for the Wave
                    platform is a way to get insights into your event monitoring data without ever
                    leaving the platform. Your data is automatically loaded from Salesforce to the app so
                    you always get the most recent (and most stunning) visualization of what’s going
                    on in your org. The app provides a collection of dashboards that use
                    pre-integrated event data, so it’s a great way to get started with event
                        monitoring.<div class="imagecenter"><span class="image image-block"><img alt="A dashboard displaying Login event data." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us99d126748eb913ccc46b06e381b880f4.png"/></span></div><div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>As part
                        of Event Monitoring, you also get the Event Monitoring Wave App. Use this
                        app to upload and access only the data provided to you as part of your
                        subscription. Please prevent your users from using the app to upload or
                        access any other data. Salesforce sometimes monitors such usage. The Event
                        Monitoring Wave App is available in English only.</p></div></div></div></div></div>
</li>
<li class="li"><strong class="ph b">Splunk App for Salesforce</strong>—The
                    app lets you analyze and visualize your organization’s use of Salesforce and gain
                    insights into security, performance, and user behavior.</li>
<li class="li"><strong class="ph b">CloudLock and CloudLock Viewer</strong>—CloudLock, a cloud security provider,
                    offers CloudLock for Force.com and the free
                    CloudLock Event Monitoring Viewer. These tools give security professionals and
                    internal auditors insight into event log files. <div class="imagecenter"><span class="image image-block"><img alt="CloudLock Viewer for event monitoring." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us20eb5dce0826ba54f4b2f86cbf6cd864.png"/></span></div></li>
<li class="li"><strong class="ph b">ezCloudAudit</strong>—Transforms event log files into easy-to-read tables and
                    presents aggregated data in dynamic charts and graphs. ezCloudAudit tracks
                    everything a user views in Salesforce, enabling you
                    to drive user adoption, identify employee transgressions, and streamline
                    auditing and compliance.</li>
<li class="li"><strong class="ph b">SkyHigh Networks</strong>—Provides a network proxy solution for cloud discovery
                    and integrates with event log files to enrich user activity tracking for
                    security and compliance concerns.</li>
<li class="li"><strong class="ph b">FairWarning</strong>—Protects sensitive information held in Salesforce by centrally
                    applying security and governance policies across all your Salesforce
                    organizations. FairWarning installation takes 30 minutes from the AppExchange.</li>
<li class="li"><strong class="ph b">New Relic Insights</strong>—This solution for Salesforce makes it
                    simple to understand newly available rich data about your organization’s
                    activity. Automatically import your event monitoring data into Insights to power
                    your easy-to-build dashboards and instantly query your data in the user
                    interface.</li>
<li class="li"><strong class="ph b">Palerra</strong>—The LORIC platform from Palerra secures data within Salesforce using machine
                    learning and data science to analyze event log files and recognize anomalous
                    user behavior. It enables administrators to manage auditing and compliance while
                    increasing operational efficiency.</li>
</ul>
</div>
<p class="p">You now have an idea of what event monitoring can do for your organization. You’ve used
            event log files to solve a case and seen the many possibilities for downloading and
            visualizing your organization’s events. Now you have the tools you need to investigate,
            secure, and improve your organization. Good luck, detective.</p>
</div>
</div>
<div class="topic nested0" id="event_monitoring_download_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="event_monitoring_download_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<p class="p"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_rest.meta/api_rest/dome_event_log_file_download.htm" target="_blank">Download Large Event Log Files Using cURL with
                REST</a></p>
<p class="p"><a class="xref" href="http://www.salesforcehacker.com/2014/11/downloading-event-log-files-using-script.html" target="_blank">Downloading Event Log Files Using a Script</a></p>
<p class="p"><a class="xref" href="http://www.salesforcehacker.com/2015/03/elfpy-tasty-little-script-for.html" target="_blank">ElfPy—A Tasty Little Script for Downloading Event Log
                Files on Multiple Platforms</a></p>
<p class="p"><a class="xref" href="https://salesforce-elf.herokuapp.com" target="_blank">Event
                Log File Browser Application</a></p>
<p class="p"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=bi_app_admin_wave.htm&amp;language=en_US" target="_blank">The Admin Analytics App</a></p>
</div>
</div>
</body></div><h1>Getting Started with Custom Metadata Types</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_overview_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_overview_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body conbody">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Define custom metadata types.</li>
<li class="li">Identify several use cases for custom metadata types.</li>
<li class="li">Describe the structure of a custom metadata type.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_overview_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_overview_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Getting Started with Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">Hey, there. You look like the adventurous type. You live for the thrill, constantly seeking
   that ever-elusive adrenaline rush. That’s how you landed this sweet job as a Salesforce developer for Relaxation
   Gauntlet, the world’s premier adventure vacation provider.</p>
<p class="p">But your work there isn’t all about rappelling down cliffs and chasing cheetahs through the
   grasslands. In the past year alone, you’ve dedicated hundreds of development hours to one thing:
   migrating app configuration records between Salesforce orgs.</p>
<p class="p">What do we mean by app configuration records? Basically, these records don’t store business
   data. Instead, they customize your app’s behavior. For example, when you create a workflow rule,
   you’re really creating a record in Salesforce that tells your app to behave a
   certain way. Workflow rules are a standard Salesforce configuration offering, but you
   can also create your own custom objects with configuration records that define behavior.</p>
<p class="p">Some companies don’t rely
   heavily
   on custom configuration records. They can get away with using custom settings
   or a limited number of custom object records. But for most Salesforce developers, using lots of custom
   object records for app configuration is a standard practice. If you’ve taken this approach
   before, you’re probably familiar with the process.<div class="imagecenter"><span class="image image-block"><img alt="The typical deployment process for an app configuration includes dev orgs, integration testing, user acceptance testing, and staging." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4b1231961ba8d3a4a972d6f43b4989cf.png"/></span></div></p>
<p class="p">This
   process involves creating configuration records in one or more development orgs
   and then sending them through integration and user acceptance testing. Finally,
   you
   deploy them to at least one production org. Throughout all these steps, you’re
   stuck doing a tedious manual transfer of your records. And for someone who thirsts for
   excitement, this situation isn’t ideal.<div class="imagecenter"><span class="image image-block"><img alt="Custom settings only migrate definitions, not records." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usfce09801e48b33235a556d6beb251bd4.gif"/></span></div></p>
<p class="p">Well buckle up and get ready for something crazy: <em class="ph i">custom metadata types</em>.</p>
<p class="p">That’s right. You didn’t think it was possible, but your life at Relaxation Gauntlet is about
   to get even wilder. With custom metadata types, you can customize, deploy, package, and upgrade
   application metadata that you design yourself.</p>
<p class="p">Put more simply, custom metadata types let you use records to configure your app without
   worrying about migrating those records to other orgs. You can deploy the records of custom
   metadata types from a sandbox with change sets or packaged in managed packages instead of
   transferring them manually. More time to try out that new underwater jet pack!<div class="imagecenter"><span class="image image-block"><img alt="Custom metadata types are simiar to custom settings, but they allow you to migrate both metadata definitions and records." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us1a7a065f4e286df97b78b73d1ee2990e.gif"/></span></div></p>
<p class="p">We know you’re starting to feel that adrenaline pump. After all these years of using the same
   old Salesforce metadata types, you
   finally get to spice things up with some of your own.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_overview_using" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_overview_using"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Using Custom Metadata Types</span></h2>
<div class="body conbody">
<div class="p">Custom metadata types are very, well, meta. So before we dive in any deeper, let’s take a
      look at some concrete examples of what you can do with custom metadata types.<ul class="ul bulletList">
<li class="li"><strong class="ph b">Mappings</strong>—You can use custom metadata types to create associations between
          different objects. For example, you can create a custom metadata type that assigns cities,
          states, or provinces to particular regions in a country.</li>
<li class="li"><strong class="ph b">Business rules</strong>—Salesforce has lots of ways to
          define business rules. One way is to combine configuration records with custom
          functionality. For example, you can use custom metadata types along with some Apex code to route payments to
          the correct endpoint.</li>
<li class="li"><strong class="ph b">Master data</strong>—Say that your org uses a standard accounting app. You can
          create a custom metadata type that defines custom charges, like duties and VAT rates. If
          you include this type as part of an extension package, subscriber orgs can reference this
          master data.</li>
</ul>
</div>
<p class="p">Sweet! So we know some things that custom metadata types are used for, but how do they
      actually work?</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_overview_more" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_overview_more"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>More About Custom Metadata Types</span></h2>
<div class="body conbody">
<div class="p">When you create a custom metadata type, you also create custom fields on that type. Let’s
   consider a simple master data scenario: You want records that store the name of each country
   where your company sells vacation packages and their associated country codes. First, you create
   a custom metadata type called Country Code Data. Next, you add fields to that type. Custom
   metadata types support most standard field types, including:<ul class="ul bulletList">
<li class="li">Metadata Relationship</li>
<li class="li">Checkbox</li>
<li class="li">Date and Date/Time</li>
<li class="li">Email and Phone</li>
<li class="li">Number</li>
<li class="li">Percent</li>
<li class="li">Picklist</li>
<li class="li">Text and Text
     Area</li>
<li class="li">URL</li>
</ul>
</div>
<p class="p">For our scenario, we want to create two custom text fields on our type: <span class="keyword parmname">Country
    Name</span> and <span class="keyword parmname">Country Code</span>.</p>
<div class="p">After you’ve created the type with all its fields, you want to create custom metadata records
   that are defined by that type. These records store the actual configuration data. For our country
   code example, you’d create a record for each country that’s relevant to your org.
<div class="data colSort"><table class="featureTable sort_table" summary=""><caption><span class="tablecap">Table 1. Country Code Data (Custom Metadata Type)</span></caption>
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d93986e282">Master Label</th>
<th class="featureTableHeader " id="d93986e285">Country Name (Custom Field)</th>
<th class="featureTableHeader " id="d93986e288">Country Code (Custom Field)</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Master Label" headers="d93986e282">Austria</td>
<td class="entry" data-title="Country Name (Custom Field)" headers="d93986e285">Austria</td>
<td class="entry" data-title="Country Code (Custom Field)" headers="d93986e288">AT</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d93986e282">Belgium</td>
<td class="entry" data-title="Country Name (Custom Field)" headers="d93986e285">Belgium</td>
<td class="entry" data-title="Country Code (Custom Field)" headers="d93986e288">BE</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d93986e282">Denmark</td>
<td class="entry" data-title="Country Name (Custom Field)" headers="d93986e285">Denmark</td>
<td class="entry" data-title="Country Code (Custom Field)" headers="d93986e288">DK</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d93986e282">...</td>
<td class="entry" data-title="Country Name (Custom Field)" headers="d93986e285">...</td>
<td class="entry" data-title="Country Code (Custom Field)" headers="d93986e288">...</td>
</tr>
</tbody>
</table></div>
</div>
<p class="p">You can also define reusable functionality that determines your application’s behavior based on
   the configuration defined in your custom metadata type. For example, you could write an Apex method that automatically
   replaces the country name with the country code in a Contact’s address field.</p>
<p class="p">You can then package up and install all these components, including your records, in other
   orgs. If you need to include more country codes later on, you can add the new records to your
   package.</p>
<p class="p">Look at you, just hanging around reading instead of jumping into the action where you belong.
   All that’s about to change. Let’s journey onward and start creating some types of our own!</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_overview_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_overview_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body conbody">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://help.salesforce.com/HTViewHelpDoc?id=custommetadatatypes_overview.htm&amp;language=en_US" target="_blank">Custom Metadata Types Documentation</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/engineering/2015/04/custom-metadata-types-ga.html" target="_blank">Introducing Custom Metadata Types—Salesforce
          Developers Blog</a></li>
</ul>
</div>
</div>
</body></div><h1>Creating and Managing Custom Metadata Types</h1><div class="unit-content">
<body id="custom_metadata_types_creating_objectives"><a name="custom_metadata_types_creating_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body conbody">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Declaratively define custom metadata types.</li>
<li class="li">Add and edit metadata records.</li>
<li class="li">Access custom metadata types with code.</li>
<li class="li">Test your custom metadata types.</li>
</ul>
</div>
</div>
</div>
<div class="topic task nested0" id="custom_metadata_types_creating_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_creating_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Creating Custom Metadata Types</span></h2>
<div class="body taskbody">
<div class="section context">
<p class="p">Relaxation Gauntlet offers a wide variety of adventure vacations, all with varying degrees of
        danger. When sales reps open a new account, they give that account a tier (Bronze, Silver,
        or Gold) based on the customer’s past experiences with adventure. After all, you don’t want
        to send a first-time thrill-seeker out to dive into shark-infested waters or wrestle rodents
        of unusual sizes.</p>
<p class="p">As the Salesforce developer, you’ve
        been charged with creating an app configuration that defines which vacations are available
        for each account tier. You also need to deploy this app to Relaxation Gauntlet’s production
        org with all its configurations. Sounds like a job for custom metadata types.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Search Setup for <kbd class="ph userinput">Custom Metadata Types</kbd>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">New Custom Metadata Type</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Call your new type Threat Tier.</span>
</li>
</ol>
<div class="section postreq">
<p class="p">After you save, you land on the Threat Tier detail page where you can do things like add
        custom fields and edit page layouts. We want our custom metadata type to associate each
        vacation with an account tier, so we need two custom fields.</p>
<p class="p">Adding a custom field to a custom metadata type is just like adding a custom field to a
        standard or custom object. Simply click <strong class="ph uicontrol">New</strong>, select
          <strong class="ph uicontrol">Text</strong>, and then add a label. Create an Account Tier field with a
        10-character limit, and add a Vacation field with a 40-character limit. You can leave the
        rest of the default options.<div class="imagecenter"><span class="image image-block"><img alt="You should have two custom fields: Account Tier and Vacation." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us28e0f4d38b4ffe6e6b291b52255c848b.png"/></span></div></p>
<p class="p">Believe it or not, you finished creating your custom metadata type. Let’s keep up the pace and
        start learning about custom metadata records.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="custom_metadata_types_create_records" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_create_records"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Creating Custom Metadata Records</span></h2>
<div class="body taskbody">
<div class="section context">
<p class="p">By itself, a custom metadata type isn’t that useful. The whole point of custom metadata types
    is that you can create records that are defined by a type. So enough waiting around. Let’s do
    it!</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">On the Threat Tier detail page, click <strong class="ph uicontrol">Manage Threat Tiers</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">New</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Call your record Bronze Option A.</span>
</li>
<li class="li step">
<span class="ph cmd">For Account Tier, enter <kbd class="ph userinput">Bronze</kbd> . For Vacation, enter <kbd class="ph userinput">Deep
      Sea Beta Fishing</kbd>.</span>
</li>
</ol>
<div class="section postreq">
<div class="p">Repeat this process until you have all these values.
     
<div class="data colSort"><table class="featureTable sort_table" summary=""><caption><span class="tablecap">Table 1. Threat Tier</span></caption>
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d92359e187">Master Label</th>
<th class="featureTableHeader " id="d92359e190">Account Tier (Custom Field)</th>
<th class="featureTableHeader " id="d92359e193">Vacation (Custom Field)</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Bronze Option A</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Bronze</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Deep Sea Beta Fishing</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Bronze Option B</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Bronze</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Base-two Jumping</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Silver Option A</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Silver</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Ziplining Over the Great Seg Fault</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Silver Option B</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Silver</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Scaling Mt. PaaS</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Gold Option A</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Gold</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Bug Bounty Hunting</td>
</tr>
<tr>
<td class="entry" data-title="Master Label" headers="d92359e187">Gold Option B</td>
<td class="entry" data-title="Account Tier (Custom Field)" headers="d92359e190">Gold</td>
<td class="entry" data-title="Vacation (Custom Field)" headers="d92359e193">Hiking the App-alachian Mountains</td>
</tr>
</tbody>
</table></div>
</div>
<p class="p">You can create these individual records and build some custom functionality using SOQL and Apex to get your app working the way
    you need it to.</p>
<p class="p">Let’s be honest: If you’re like most adrenaline junkies, all this one-by-one record creation
    isn’t sounding very extreme. Lucky for you, we built a tool that lets you kick things up a
    notch. If you’re interested in creating a bunch of records at once, the
     <a class="xref" href="https://github.com/forcedotcom/CustomMetadataLoader" target="_blank">Custom Metadata Loader</a> is for you. You can upload up to 200 custom metadata records to
    your org from a CSV file
    or update up to 200 existing records. We won’t do this right now, but check it
    out if you’re working with a large number of configuration records.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_create_develop" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_create_develop"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Developing with Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">In the next unit, we’ll talk about the specifics of who and what can modify your custom
   metadata types and records. But before we do that, let’s talk about something simple: using SOQL and Apex to access your types and
   records.</p>
<div class="p">Throughout your many wondrous adventures into Salesforce development, you’ve probably
   defined a lot of custom object records in Apex. Lucky for you, a similar
   convention applies to custom metadata types. You can declare an Apex variable of a custom metadata
   type like so.<div class="codeblock"><pre>Threat_Tier__mdt Bronze_Option_A;</pre></div>
</div>
<div class="p">Think you can make the jump to getting the values of a custom field from all the custom
   metadata records of a certain type? Notice that even though the suffix for the custom metadata
   type is <samp>__mdt</samp>, the suffix for the custom field stays as
    <samp>__c</samp>.<div class="codeblock"><pre>Threat_Tier__mdt [] vacationNames = [SELECT Vacation__c FROM Threat_Tier__mdt];</pre></div>
</div>
<p class="p">See, you’re already a master. You can use custom metadata types in Apex the same way you use any standard
    Salesforce configuration object. But you
   have the added bonus that you can quickly transport records from development to subscriber
   orgs!</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_create_test" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_create_test"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Testing Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">Typically, Apex tests don’t
   depend on the existence of particular records. Because your org’s functionality doesn’t rely on
   specific accounts or opportunities, you don’t need to write tests for them. But when you’re
   dealing with records that affect the way an org behaves, you want to ensure that everything’s
   working as expected.</p>
<p class="p">If you’ve tested apps that use custom objects to hold app configuration records in the past,
   you might be familiar with the <samp>@IsTest(SeeAllData=true)</samp>
   annotation in Apex. This dangerous
   line of test code lets your Apex
   tests see all the records in your org, including data records like accounts and contacts. You
   might be wondering whether you need to take advantage of this bad practice to test your custom
   metadata types.</p>
<p class="p">Luckily, that’s not the case. Custom metadata types are set up the same way as things like
   workflow and validation rules. Your Apex test classes can see them and
   access their fields and records. Ultimately, your test cases look more or less like any other Apex test. For more advanced cases,
   check out the blog post in the resources.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_create_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_create_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body conbody">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.api_meta.meta/api_meta/meta_custommetadatatypes.htm" target="_blank">Metadata API Developer's Guide: Custom Metadata
     Types</a></li>
<li class="li"><a class="xref" href="https://github.com/haripriyamurthy/CustomMetadataLoader" target="_blank">Custom Metadata Loader</a></li>
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/module/apex_testing" target="_blank">Apex Testing Module</a></li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/engineering/2015/05/testing-custom-metadata-types.html" target="_blank">Testing Custom Metadata Types—Salesforce Developers
          Blog</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Protecting Custom Metadata Types and Records</h1><div class="unit-content">
<body id="custom_metadata_types_protect_objectives"><a name="custom_metadata_types_protect_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body conbody">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Protect custom metadata types.</li>
<li class="li">Control the editability of a field.</li>
<li class="li">Protect custom metadata records.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_protect_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_protect_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Protecting Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">All good adventurers know that safety is a top priority. The same goes for your custom metadata
   types and records—you need to control access to keep your apps functioning as
   intended.</p>
<p class="p">When we created our Threat Tier type, you might have noticed that we skipped over a section of
   the interface.<div class="imagecenter"><span class="image image-block"><img alt="The visibility option is available on the create and edit page for custom metadata types." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6b61000f88fe0d0f1c5681f1e66c25f4.png"/></span></div></p>
<p class="p">When you create a type, you can choose whether the type is public or protected. All Apex code in an org can use public
   types, while the use of protected types is restricted to code inside the package itself.</p>
<p class="p">That’s pretty simple. It gets a little rockier when we start to talk about controlling edit
   access to custom metadata fields and records.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_protect_records" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_protect_records"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Protecting Custom Metadata Records</span></h2>
<div class="body conbody">
<p class="p">Instead of protecting the entire metadata type, you can leave the type public and protect
   individual records. A protected record is only accessible to code in the same namespace as the
   record or its associated custom metadata type. But because the type is public, a subscriber org
   or extension package can add its own records to that type.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_protect_fields" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_protect_fields"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Field Manageability</span></h2>
<div class="body conbody">
<p class="p">When it comes to protecting fields on custom metadata types, you have three options.<div class="imagecenter"><span class="image image-block"><img alt="The field manageability options are accessible in the create and edit custom fields page." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us37720d2282fa9e374c4746abc0b42d74.png"/></span></div></p>
<div class="p">
<ul class="ul bulletList">
<li class="li">The
     package developer can edit the field after release via package upgrades. Subscriber orgs can’t
     change the field.</li>
<li class="li">The
     subscriber org can edit the field after installing the package. Package upgrades don’t override
     the subscriber’s changes.</li>
<li class="li">The
     package developer nor the subscriber can edit the field after the package is released.</li>
</ul>
</div>
<p class="p">All these options might not seem that complicated, but let’s take some time to dig in to how
   everything works together.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_protect_all" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_protect_all"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Putting It All Together</span></h2>
<div class="body conbody">
<p class="p">Let’s say we’re putting our Threat Tier type in a managed package.</p>
<p class="p">For legal reasons, we don’t want package subscribers to change the Account Tier field. As the
   package developer, you still want to be able to change it in later package releases in case the
   legal requirements change. So, you want the Account Tier field to be upgradeable.</p>
<p class="p">On the other hand, the values on the Vacation field vary depending on the org. Sometimes orgs
   change the names of the vacations depending on their location. To account for this need, make the
   Vacation field subscriber editable.</p>
<div class="p">Take a look at this table to see who can edit the various fields on both public and protected
   records in a managed package.
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d93174e156"> </th>
<th class="featureTableHeader " id="d93174e159">Developer Name</th>
<th class="featureTableHeader " id="d93174e162">Label</th>
<th class="featureTableHeader " id="d93174e165">Account Tier (upgradeable)</th>
<th class="featureTableHeader " id="d93174e168">Vacation (subscriber editable)</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="" headers="d93174e156"><strong class="ph b">Public record</strong></td>
<td class="entry" data-title="Developer Name" headers="d93174e159">—</td>
<td class="entry" data-title="Label" headers="d93174e162">Developer</td>
<td class="entry" data-title="Account Tier (upgradeable)" headers="d93174e165">Developer</td>
<td class="entry" data-title="Vacation (subscriber editable)" headers="d93174e168">Subscriber</td>
</tr>
<tr>
<td class="entry" data-title="" headers="d93174e156"><strong class="ph b">Protected record</strong></td>
<td class="entry" data-title="Developer Name" headers="d93174e159">—</td>
<td class="entry" data-title="Label" headers="d93174e162">Developer</td>
<td class="entry" data-title="Account Tier (upgradeable)" headers="d93174e165">Developer</td>
<td class="entry" data-title="Vacation (subscriber editable)" headers="d93174e168">—</td>
</tr>
</tbody>
</table></div>
</div>
<p class="p">In a managed package, the package developer can always edit upgradeable fields. Subscribers can
   edit subscriber editable fields on public records but not on protected ones. In fact, subscriber
   editable fields on protected records are essentially locked after release.</p>
<div class="p">If we look at the same custom metadata type and its associated records in an unmanaged package,
   it’s easier to keep track of who can edit what.
<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead align="left" class="thead sorted">
<tr>
<th class="featureTableHeader " id="d93174e247"></th>
<th class="featureTableHeader " id="d93174e249">Developer Name</th>
<th class="featureTableHeader " id="d93174e252">Label</th>
<th class="featureTableHeader " id="d93174e255">Account Tier (upgradeable)</th>
<th class="featureTableHeader " id="d93174e258">Vacation (subscriber editable)</th>
</tr>
</thead>
<tbody class="tbody">
<tr>
<td class="entry" data-title="" headers="d93174e247"><strong class="ph b">Public record</strong></td>
<td class="entry" data-title="Developer Name" headers="d93174e249">Subscriber</td>
<td class="entry" data-title="Label" headers="d93174e252">Subscriber</td>
<td class="entry" data-title="Account Tier (upgradeable)" headers="d93174e255">Subscriber</td>
<td class="entry" data-title="Vacation (subscriber editable)" headers="d93174e258">Subscriber</td>
</tr>
<tr>
<td class="entry" data-title="" headers="d93174e247"><strong class="ph b">Protected record</strong></td>
<td class="entry" data-title="Developer Name" headers="d93174e249">Subscriber</td>
<td class="entry" data-title="Label" headers="d93174e252">Subscriber</td>
<td class="entry" data-title="Account Tier (upgradeable)" headers="d93174e255">Subscriber</td>
<td class="entry" data-title="Vacation (subscriber editable)" headers="d93174e258">Subscriber</td>
</tr>
</tbody>
</table></div>
</div>
<p class="p">An unmanaged package gives the subscriber free rein over editing records and fields on custom
   metadata types.</p>
<p class="p">The moral of this adventure is that field manageability can get complicated very quickly. It’s
   important to plan how you’re going to manage your custom metadata types, fields, and records
   before you package your app and release it to the wild.</p>
<p class="p">Speaking of packaging, we’ll start that adventure next!</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_protect_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_protect_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body conbody">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="http://resources.docs.salesforce.com/200/9/en-us/sfdc/pdf/custom_metadata_types_impl_guide.pdf" target="_blank">Custom Metadata Types Implementation Guide</a></li>
</ul>
</div>
</div>
</body></div><h1>Packaging Custom Metadata Types</h1><div class="unit-content">
<body id="custom_metadata_types_package_objectives"><a name="custom_metadata_types_package_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body conbody">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Package your custom metadata types.</li>
<li class="li">Package your types’ associated records.</li>
<li class="li">Upload your package.</li>
<li class="li">Install your package in a subscriber org.</li>
<li class="li">Upgrade your package.</li>
</ul>
</div>
</div>
</div>
<div class="topic task nested0" id="custom_metadata_types_package_types" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_types"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Packaging Custom Metadata Types</span></h2>
<div class="body taskbody">
<div class="section context">
<p class="p">When you’re ready to package up your custom metadata types and records, you can choose your
    own adventure. Managed packages, unmanaged packages, and managed package extensions are all
    compatible with custom metadata types. And change sets let you deploy your types and records
    from a sandbox.</p>
<div class="p">You’re itching to get your Threat Tier type out to your other orgs, so let’s do it. From
    Setup, search for <kbd class="ph userinput">Packages</kbd> and then click a package name (or create a
    package if you haven’t yet). You can use either a managed or an unmanaged package.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>You can
     have only one managed package per Developer Edition org. To create a managed package, your org
     must be namespaced. If you aren’t familiar with namespaces or don’t want to add a namespace,
     use an unmanaged package.</p></div></div></div></div></div>
</div>
<p class="p">Next, add your custom metadata type to the package.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Add</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the component type, select <strong class="ph uicontrol">Custom Metadata Type</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Select <strong class="ph uicontrol">Threat Tier</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Add to Package</strong>.</span>
</li>
</ol>
<div class="section postreq">
<p class="p">Easy! Notice that your custom metadata type and its fields were added to the package, but your
    records are missing. Let’s take care of that next.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="custom_metadata_types_package_records" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_records"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Packaging Custom Metadata Records</span></h2>
<div class="body taskbody">
<div class="section context">
<p class="p">The process for adding custom metadata records to a package is almost the same as it is for
        packaging types. The only difference is that instead of selecting a standard option from the
        list of component types, you select your specific type. Let’s give it a try, starting from
        the package detail page.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Add</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">For the component type, select <strong class="ph uicontrol">Threat Tier</strong>.</span>
</li>
<li class="li step">
<span class="ph cmd">Select all your custom metadata records.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Add to Package</strong>.</span>
</li>
</ol>
<div class="section postreq">
<p class="p"><div class="imagecenter"><span class="image image-block"><img alt="The package detail page displays all the components you added to the package, including your custom metadata types and records." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa253e075b2be00710e6a39fd7a20e88c.png"/></span></div>You don’t have to add a custom metadata type’s records to the package. However, if you add
        records of that type to a package, your type is added to that package automatically.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_package_upload" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_upload"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Uploading Packages</span></h2>
<div class="body conbody">
<p class="p">After you’ve added all your custom metadata types, records, and any other components your app
   needs, you’re ready to rock and roll. Uploading a package that contains custom metadata types and
   records isn’t any different from uploading other types of packages.</p>
<p class="p">Click <strong class="ph uicontrol">Upload</strong> on the package detail page to kick off the process. Set the
   version name to <kbd class="ph userinput">Spring 2016</kbd>, and leave the Version Number as is.</p>
<p class="p">Typically if you’re using a managed package, you want your first release to be beta. But we’re
   all about diving in, so let’s go straight for the big time. Select <strong class="ph uicontrol">Managed -
    Released</strong> for the release type. If you’re using an unmanaged package, don’t worry
   about this part.</p>
<p class="p">For more complex packages, you’ll probably have to spend some time fiddling with the other
   options on this page. But for now, just click <strong class="ph uicontrol">Upload</strong> and wait for the
   process to complete.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_package_install" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_install"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Installing Packages</span></h2>
<div class="body conbody">
<p class="p">When your upload is finished, you’ll receive an email with an installation link for your
   package. If you have another Developer Edition org, you can see for yourself the results of your
   fearless adventure into the world of meta. If not, you just have to take our word for it.</p>
<p class="p">Make sure that you’re logged out of the org where you developed the package. Follow the link in
   the email, and log in to your alternate account. When prompted, install the app for admins only.
   When the installation completes, your app appears on the Installed Packages page.</p>
<p class="p">But how do we know whether we successfully completed our journey?</p>
<p class="p">In the Quick Find box, search for <kbd class="ph userinput">Custom Metadata Types</kbd>. If all went as
   planned, you see your Threat Tier custom metadata type. That’s all well and good, but what you’re
   really interested in is whether your <em class="ph i">records</em> migrated over.</p>
<p class="p">Click <strong class="ph uicontrol">Manage Records</strong> to see the magic for yourself.<div class="imagecenter"><span class="image image-block"><img alt="If installed correctly, all the custom metadata records are visible in the subscriber org's custom metadata view." class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6e67483b159e5ab9b3fe2b9ed6d8f318.png"/></span></div></p>
<p class="p">Looks like the gang’s all here! You’ve successfully moved your app configuration records from
   one org to another in just a few easy steps.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_package_upgrade" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_upgrade"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Upgrading Packages with Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">Of course, our adventure isn’t over yet. App development is rarely a one-and-done process. Down
   the line, you’ll want to make improvements and fix your app.</p>
<p class="p">Upgrading managed packages is where our earlier discussion about field manageability is
   especially important.</p>
<p class="p">For example, we made our Account Tier field upgradeable. So as the package developer, you can
   change the Account Tier field and the values of this field on records in future iterations of the
   app. On the other hand, your subscriber orgs can’t make changes. They can create Threat Tier
   records, but not edit existing values.</p>
<p class="p">Vacation is a subscriber editable field, so the subscriber org can change the field based on
   its own needs. Subscriber editable also means that you can’t overwrite your subscriber’s values
   through a package upgrade.</p>
<p class="p">If you created a managed package, you can deploy an upgrade to see how this works. In your
   development org, make some changes to both the Account Tier and Vacation fields. Using the same
   process as before, upload your package and reinstall it in your subscriber org using the email
   link. Check the fields and records on the upgraded package. You can see the changes you made to
   the Account Tier field, but the Vacation field looks the same as it did before the upgrade.</p>
<p class="p">You’ve made it to the last leg of the journey. Only one question remains: What do you do with
   all your existing app configurations now that you’ve found a better way?</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_package_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_package_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body conbody">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/module/isv_app_development" target="_blank">ISV App Development Module</a></li>
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/module/alm_deployment" target="_blank">Application Lifecycle Management Module</a></li>
<li class="li"><a class="xref" href="https://trailhead.salesforce.com/module/app_deployment" target="_blank">Change Management Module</a></li>
</ul>
</div>
</div>
</body></div><h1>Converting Custom Settings</h1><div class="unit-content">
<body id="custom_metadata_types_convert_objectives"><a name="custom_metadata_types_convert_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body conbody">
<div class="p">After completing this unit, you’ll be able to:<ul class="ul bulletList">
<li class="li">Convert list custom settings to custom metadata types.</li>
<li class="li">Refactor your org’s Apex
          code to support custom metadata types.</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Making the Switch</span></h2>
<div class="body conbody">
<p class="p">One person, three days.</p>
<div class="p">Yep, you heard it right. In less than a week, you and you alone can learn all about custom
   metadata types. You’re already halfway there! You can convert up to 10 custom settings objects
   and refactor up to 200,000 lines of Apex code.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>Converting list custom
    settings into custom metadata types is easy. We don’t recommend converting hierarchy custom
    settings into custom metadata types.</p></div></div></div></div></div>
</div>
<p class="p">Follow these three steps to convert your configurations.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_one" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_one"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Step 1: Convert Custom Objects to Custom Metadata Types</span></h2>
<div class="body conbody">
<p class="p">The first part of this step is to retrieve your app metadata, including the custom objects
   you’re using for configuration. Create corresponding custom metadata types for each object. You
   can do this step by hand or by transforming the objects’ XML using something like XSLT.</p>
<p class="p">Regardless of the method you use to convert your objects, make sure that you use the same field
   names on your custom metadata types. This way you don’t have to change them in your Apex code later on.</p>
<p class="p">When you’re finished creating your types, you can package all your metadata and deploy it to
   your org.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_two" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_two"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Step 2: Replace <span class="titlecodeph">__c</span> with <span class="titlecodeph">__mdt</span></span></h2>
<div class="body conbody">
<p class="p">By now you’re comfortable with the idea that custom metadata types use the <samp>__mdt</samp> suffix instead of the classic <samp>__c</samp>.</p>
<p class="p">For each custom metadata type that you created in the previous step, change the object
      reference in all your Apex
      classes and triggers. The easiest approach to this task is using the Find/Replace tool in
      Eclipse.</p>
<p class="p">As a reminder, the <samp>__mdt</samp> suffix is only for the
        <em class="ph i">type</em>, not for its fields. You can leave the custom fields with the <samp>__c</samp> suffix.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_three" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_three"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Step 3: Replace Apex with SOQL</span></h2>
<div class="body conbody">
<p class="p">After your metadata is deployed and your references are renamed, it’s time to get in the thick
            of your Apex
            refactoring.</p>
<p class="p">The first thing you need to do is replace your Apex methods, like <samp>seeAll()</samp>, with SOQL queries, such as <samp>SELECT CustomField__c FROM MyMetadata__mdt</samp>.</p>
<p class="p">Now you can delete your deprecated custom objects and code that supports those objects. Make
            sure that you’re getting rid of things like test code that creates mock records and post
            install scripts that install records.</p>
<p class="p">With that, you’re ready to deploy your new code to production to finish up the conversion! It’s
            really that easy.</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_the_end" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_the_end"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>The Journey’s End</span></h2>
<div class="body conbody">
<p class="p">Congratulations, adventurer. You’ve learned what custom metadata types are, how to create them,
   and how to package them up and migrate them to other orgs. You’re ready to ditch your old app
   configuration methods and make more time in your life for things you <em class="ph i">actually</em> want to
   do.</p>
<p class="p">We’re only scratching the surface of the power of custom metadata types. And with your
   fearlessness and sense of adventure, you’ll become an expert in no time. Happy adventuring,
   Trailblazer!</p>
</div>
</div>
<div class="topic concept nested0" id="custom_metadata_types_convert_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="custom_metadata_types_convert_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body conbody">
<div class="p">
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://help.salesforce.com/apex/HTViewHelpDoc?id=cs_about.htm&amp;language=en_US" target="_blank">Custom Settings Help</a></li>
</ul>
</div>
</div>
</div>
</body></div><h1>Get Started with Visualforce in Salesforce1</h1><div class="unit-content">
<body id="blank_ref_classic"><a name="blank_ref_classic"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a> </span></h2>
<div class="body">
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>
<p class="p"><strong class="ph b">Attention Trailblazer!</strong></p>
<p class="p">Salesforce has two different user interfaces: Lightning Experience and Salesforce
                Classic. It’s easy to switch between the two. You can learn about <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank" title="html (New Window)">switching between interfaces</a>, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_enable_intro.htm&amp;language=en_US" target="_blank" title="html (New Window)">enabling Lightning Experience</a>, and more in the <a class="xref" href="https://trailhead.salesforce.com/module/lex_migration_introduction" target="_blank" title="html (New Window)">Lightning Experience Basics</a> module here on Trailhead.</p>
<p class="p">This module is designed for <strong class="ph b">Salesforce Classic</strong>.</p>
</p></div></div></div></div></div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_intro_learning_objectives" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_intro_learning_objectives"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe three places where Visualforce pages can be used in Salesforce1.</li>
<li class="li">Describe when it makes sense to build Salesforce1 apps with Visualforce.</li>
<li class="li">List at least three declarative tools you can use instead of
                                        creating Salesforce1 customizations with code.</li>
<li class="li">List at least three reasons to develop mobile apps in Salesforce1 instead of using the Mobile SDK.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_intro_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_intro_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Get Started with Visualforce in Salesforce1</span></h2>
<div class="body"><div class="shortdesc">You can use Visualforce pages
                to extend Salesforce1 and
                provide mobile users with the functionality and the user experience they
                need.</div>
<p class="p">Salesforce1 provides a lot
                        of functionality built right into the mobile application. Often, you can
                        extend Salesforce1 for
                        your organization’s needs without writing a single line of code. But when
                        you want to build more customized applications, you can do it with Visualforce.</p>
</div>
</div>
<div class="topic concept nested0" id="vf_pages_where_accessible_from" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="vf_pages_where_accessible_from"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Where Visualforce Pages Can
                  Appear in Salesforce1</span></h2>
<div class="body conbody"><div class="shortdesc">When you create a Visualforce page, you can
            make it available from a number of places in the Salesforce1 user
            interface.</div>
<div class="p">
<ul class="ul bulletList">
<li class="li">Navigation menu—available when you tap <img alt="Salesforce1 App Nav" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2c11bf7f5af512bcee91e06100f3981b.png"/> from the Salesforce1 mobile app<div class="imagecenter"><span class="image image-block"><img alt="Find warehouses navigation menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6ea41a8fb0c112578c8d01502758cf33.png" width="250"/></span></div></li>
<li class="li">Action bar and action menu—available from the bottom of any page
                              in the Salesforce1 app that supports actions<div class="imagecenter"><span class="image image-block"><img alt="Create Quick Order action in the action menu" class="image image-block" height="267" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc74ba3ba06eac8b9db9f3c1a606a52ea.png" width="250"/></span></div></li>
<li class="li">Record related information page (as a mobile card)—available when
                              you navigate to a record</li>
</ul>
</div>
</div>
</div>
<div class="topic concept nested0" id="dev_salesforce1_clicks_vs_code" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="dev_salesforce1_clicks_vs_code"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>When to Use Declarative vs. Programmatic Tools to Create Salesforce1 Apps</span></h2>
<div class="body conbody"><div class="shortdesc">When developing functionality for your Salesforce mobile users, you can use declarative
    features (clicks) or programmatic tools (code). Here are some points to consider before you
    start coding.</div>
<div class="p">Salesforce1 features built with
      declarative tools:<ul class="ul bulletList">
<li class="li">Are usually faster and cheaper to build.</li>
<li class="li">Generally require less maintenance.</li>
<li class="li">Receive automatic upgrades when the tools are improved.</li>
<li class="li">Aren’t subject to governor limits.</li>
</ul>
</div>
<div class="p">Common declarative tools you can use in your Salesforce1 apps include:<ul class="ul bulletList">
<li class="li">Quick Actions</li>
<li class="li">Page layout customization</li>
<li class="li">Formula fields and roll-up summary fields</li>
<li class="li">Validation rules</li>
<li class="li">Workflows and approval processes</li>
<li class="li">Custom fields and objects</li>
</ul>
Before you commit to developing a new feature using programmatic tools such as Visualforce, consider whether you can
      implement your feature with declarative tools instead.</div>
<div class="p">Of course, some apps can’t be built with declarative tools. Programmatic tools are often
      required for features that:<ul class="ul bulletList">
<li class="li">Support specialized or complex business processes.</li>
<li class="li">Provide highly customized user interfaces or customized click-through paths.</li>
<li class="li">Connect to or integrate with third-party systems.</li>
</ul>
There’s no hard-and-fast rule for when to choose clicks over code. When choosing,
      consider the problems you’re trying to solve and resources available to solve them.</div>
</div>
</div>
<div class="topic concept nested0" id="dev_S1_vs_custom_apps" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="dev_S1_vs_custom_apps"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>When to Use the Salesforce App Cloud vs. Creating Custom
   Apps</span></h2>
<div class="body conbody"><div class="shortdesc">When it comes to developing functionality for your Salesforce mobile users, you have
  options. Here are some differences between extending the Salesforce1 app and creating custom
  apps using the Mobile SDK or other tools.</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading7">Salesforce App Cloud</h3>
<div class="p">
<ul class="ul bulletList">
<li class="li">Has a defined user interface.</li>
<li class="li">Has full access to Salesforce
      data.</li>
<li class="li">Can be used to create an integrated experience in the Salesforce1 app.</li>
<li class="li">Gives you a way to include your own apps/functionality with quick actions.</li>
<li class="li">Lets you customize Salesforce1 with point-and-click
      or programmatic customizations.</li>
<li class="li">Lets you add functionality programmatically through Visualforce pages, Force.com Canvas apps, and
              <span class="ph">the Lightning
                            Component Framework</span>.</li>
<li class="li">Has defined navigation points. Salesforce1 customizations or
      apps adhere to the Salesforce1
      navigation. So, for example, a Visualforce page can be called from the
      navigation menu or from a custom action in the action bar.</li>
<li class="li">Enables you to leverage existing Salesforce development experience,
      both point-and-click and programmatic.</li>
<li class="li">Is included in all Salesforce
      editions and supported by Salesforce.</li>
</ul>
</div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading8">Custom Apps</h3>
<div class="p">Custom apps can be either free-standing apps you create with Salesforce Mobile SDK or browser apps using
        plain HTML5 and jQuery Mobile / Ajax. With custom apps, you can:<ul class="ul bulletList">
<li class="li">Define a custom user experience.</li>
<li class="li">Access Salesforce data using
              REST APIs in native and
            hybrid local apps, or with Visualforce in hybrid apps using
              JavaScript Remoting. In
            HTML5 apps, do the same using jQuery Mobile and Ajax.</li>
<li class="li">Brand your user interface, including having a custom app icon,  for increased exposure
            in apps that are customer-facing.</li>
<li class="li">Create standalone mobile apps, either with native APIs using Java for Android or
            Objective-C for iOS, or through a hybrid container using JavaScript and HTML5 (Mobile SDK only).</li>
<li class="li">Distribute apps through mobile industry channels, such as the Apple App Store or
            Google Play (Mobile SDK
            only).</li>
<li class="li">Configure and control complex offline behavior (Mobile SDK only).</li>
<li class="li">Use push notifications (available for Mobile SDK native apps
            only).</li>
<li class="li">Design a custom security container using your own OAuth module (Mobile SDK only).</li>
</ul>
</div>
<div class="p">Other important Mobile SDK considerations:<ul class="ul bulletList">
<li class="li">Open-source SDK, downloadable for free through npm installers as well as from GitHub.
            No licensing required.</li>
<li class="li">Requires you to develop and compile your apps in an external development environment
            (Xcode for iOS, Eclipse or similar for Android).</li>
</ul>
</div>
</div>
</div>
</div>
<div class="topic concept nested0" id="dev_best_practices_development_process" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="dev_best_practices_development_process"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Salesforce App Cloud Development Process</span></h2>
<div class="body conbody"><div class="shortdesc">The Salesforce1 app is
    designed to run on a mobile device, like a phone or tablet, but that doesn’t mean you have to
    develop on one. Especially when you’re working with Visualforce pages that will apper in
    both the Salesforce1 app and the
    full Salesforce site, it’s
    convenient to develop on your desktop. By accessing the Salesforce1 app in a device
    emulator, you can develop iteratively on your desktop, without having to pick up your device to
    test each change.</div>
<div class="box message confirm"><div class="inner"><div class="bd"><div class="media"><img alt="Important" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa1b68275bb2e1d6b7c064cb423d787e5.gif"/><div class="mediaBd"><h4 class="mbs">Important</h4><p>Running the Salesforce1 app in an emulator
      isn’t supported for normal use, and it’s not a substitute for full testing of your custom apps
      and pages on your organization’s supported mobile devices. During development you should
      regularly test your app on <em class="ph i">every</em> device and platform on which you intend to
      deploy.</p></div></div></div></div></div>
<p class="p">To view your Salesforce1
      custom pages and apps on a device emulator, download and install the appropriate SDK for your
      supported devices.</p>
<ul class="ul bulletList">
<li class="li">Apple iOS Simulator for iPhone and iPad<p class="p"><a class="xref" href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/" target="_blank" title="HTML (New Window)"><span class="ph filepath">developer.apple.com/library/ios/documentation/IDEs/
              Conceptual/iOS_Simulator_Guide/</span></a></p>
</li>
<li class="li">Android Virtual Device Emulator for Phone and Tablet<p class="p"><a class="xref" href="http://developer.android.com/tools/devices/emulator.html" target="_blank" title="HTML (New Window)"><span class="ph filepath">developer.android.com/tools/devices/emulator.html</span></a></p>
</li>
</ul>
<p class="p">You can’t use the standard
          <span class="ph filepath">https://<var class="keyword varname">&lt;Salesforce_instance&gt;</var>/apex/<var class="keyword varname">yourPageName</var></span>
      URL to test Visualforce in Salesforce1. You can only do
      that by accessing the page within Salesforce1.</p>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_intro_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_intro_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/dev_best_practices_development_process.htm" target="_blank" title="html (New Window)">Salesforce App Cloud Development Process</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App Developer Guide</a></cite></li>
</ul>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="http://www.slideshare.net/developerforce/visualforce-in-salesforce1-1-1" target="_blank" title="html (New Window)">Using Visualforce in
               Salesforce1</a> (SlideShare)</li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/engineering/2014/12/forcedotcom-declarative-development.html" target="_blank" title="html (New Window)">Visual Development – When to
               Click Instead of Write Code</a> (blog post)</li>
<li class="li"><a class="xref" href="https://developer.salesforce.com/page/Developing_Cloud_Apps_for_Non-Developers" target="_blank" title="html (New Window)">Developing Cloud Apps — Coding
               Optional</a> (article)</li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce
                              session: Intro to Salesforce1 Mobile App Development with
                              Visualforce</a></li>
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=R_Ir4bq4px0" target="_blank" title="html (New Window)">Dreamforce session: Clicks or
               Code: When to Use Configuration or Custom Development</a></li>
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=q0RYzwNpqfY" target="_blank" title="html (New Window)">Dreamforce session: Developing
               on the Salesforce Platform With Clicks, Not Code</a></li>
</ul>
</div>
</div>
</body></div><h1>Add Visualforce Pages to the Navigation Menu</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_nav_menu_learning_objectives"><a name="visualforce_mobile_salesforce1_nav_menu_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Add a Visualforce page to the navigation menu.</li>
<li class="li">Add CSS styling to a page to make it mobile-friendly.</li>
<li class="li">Reference the <samp>sforce.one</samp> navigation library on a Salesforce1 page.</li>
<li class="li">Describe at least four different navigation actions that can be
                                        performed using the <samp>sforce.one</samp> navigation library.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_nav_menu_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Add Visualforce Pages to
                        the Salesforce1
                        Navigation Menu</span></h2>
<div class="body"><div class="shortdesc">The Salesforce1 navigation
                menu enables users to move around your app, access objects you’ve created, and
                modify data. The navigation menu is generally used for self-contained processes or
                whole apps that don’t operate in the context of a specific record. You can add any
                mobile-ready Visualforce page to
                the menu.</div>
<div class="p">As an example, let’s create a menu item that provides quick access to the 10 last
                        modified accounts.<div class="fig fignone">
<span class="image image-block"><img alt="Latest Accounts page in the Salesforce1 navigation menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us95dd0db78d62974e787654036c387f79.png"/></span>
</div>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>While you can create this simple feature without writing any code, it’s a
                        great starting point for learning, and then exploring on your own
                        afterward.</p></div></div></div></div></div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_nav_menu_create_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_create_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Create the Visualforce Page</span></h2>
<div class="body taskbody"><div class="shortdesc">Create a Visualforce page to use
        as the destination of your navigation menu item.</div>
<div class="section context">
<p class="p">Before you create a navigation menu item that leads to a page, you need to create the
                page itself. </p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">LatestAccounts</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page docType="html-5.0" title="Latest Accounts"&gt;
    
&lt;apex:remoteObjects&gt;
    &lt;apex:remoteObjectModel name="Account" fields="Id,Name,LastModifiedDate"/&gt;
&lt;/apex:remoteObjects&gt;
    
&lt;div class="mypage"&gt;
    &lt;h2&gt;Latest Accounts&lt;/h2&gt;
    &lt;ul id="accountList"/&gt;
&lt;/div&gt;    
    
&lt;script&gt;
var ul = document.getElementById("accountList");
var account = new SObjectModel.Account();
account.retrieve(
    {orderby: [{LastModifiedDate: 'DESC'}], limit: 10}, 
    function(error, records) {
        if (error) {
            alert(error.message);
        } else {
            var html = "";
            records.forEach(function(record) {
                html = html + "&lt;li&gt;&lt;a data-id=" + record.get("Id") + "&gt;" + 
                               record.get("Name") + "&lt;/a&gt;&lt;/li&gt;";
            });
            ul.innerHTML = html;
        }
    }
);
&lt;/script&gt;
    
&lt;/apex:page&gt;</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Save</strong></span>.</span>
<div class="itemgroup info">We’ll leave out the save instruction in the future, but be sure to save your
                    pages between steps.</div>
</li>
</ol>
<div class="section result">
<div class="p">If you click the <strong class="ph uicontrol">Preview</strong> button to look at your page, the Developer Console opens a new window and
                shows the page. But it simply shows the standard Salesforce user interface, not
                    Salesforce1. <div class="fig fignone">
<span class="image image-block"><img alt="Latest Accounts page in Salesforce Desktop" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us801f0c658934857bcf7e23d5c5a50fca.png"/></span>
</div>
</div>
<p class="p">To see Salesforce1 in a
                browser during development, you need to access the <span class="ph filepath">/one/one.app</span>
                page with a browser that supports device emulation. Otherwise, use a mobile device
                emulator for <a class="xref" href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/iOS_Simulator_Guide/" target="_blank" title="HTML (New Window)">iOS</a> or <a class="xref" href="https://developer.android.com/studio/run/emulator-commandline.html" target="_blank" title="HTML (New Window)">Android</a>. But first,
                you have to actually add the page to Salesforce1. We’ll do
                that in the next step.</p>
<div class="p">For now, notice these characteristics of this code.<ul class="ul bulletList">
<li class="li">If you completed the <a class="xref" href="https://trailhead.salesforce.com/module/visualforce_fundamentals" target="_blank" title="html (New Window)">Visualforce Basics
                            module</a>, this page doesn’t look a lot like the Visualforce code you saw
                        there. There are few Visualforce tags, and
                        the page is mostly HTML and JavaScript. We’ll explain why in another unit,
                        but for now take note of it.</li>
<li class="li">The standard controller—or <em class="ph i">any</em> controller—is missing! Instead, the
                        page uses Visualforce
                        Remote Objects to retrieve account records. Remote Objects is one of many ways you can access your organization’s data. It’s a good
                        one, and we’ll use it for the duration of this module.</li>
</ul>
</div>
<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>Why is Remote Objects “a good one?” And why would we choose it over other data access methods? We’ll
                talk about that more later, but for now, let’s step back and look at the three ways
                    Visualforce provides for you
                to access and modify your Salesforce data.<dl class="dl detailList">
<dt class="dt dlterm">Standard Visualforce</dt>
<dd class="dd">This is the Visualforce
                            described in the Visualforce Basics
                            Trailhead module. Using built-in components and the Standard Controller,
                            it’s incredibly easy to create custom web apps in minutes.<p class="p">Standard
                                    Visualforce
                                works very well for apps that will be used on your organization’s
                                internal network, where bandwidth and latency are usually very good.
                                On mobile devices, especially when they’re on less reliable
                                connections, there’s some overhead in standard Visualforce that
                                can make mobile apps perform more slowly. The technical details are
                                interesting, but unimportant here. The takeaway is that we recommend
                                one of the other approaches for your Salesforce1
                                apps.</p>
</dd>
<dt class="dt dlterm">Remote Objects</dt>
<dd class="dd">Remote Objects, which we’re using throughout this module, is a relatively recent
                            addition to Visualforce. It’s
                            built to be almost as simple to use as standard Visualforce, but
                            optimized for other use cases such as mobile apps.</dd>
<dd class="dd">Remote Objects has two characteristics that make it great for use with Salesforce1. First,
                            it does away with the <dfn class="term">view state</dfn> that’s part of standard
                                Visualforce.
                            View state is extra data that’s passed back and forth between the client
                            browser and the server for every request. It’s part of what makes
                            standard Visualforce
                            simple to implement, but the extra data and requests can be a burden on
                            mobile connections.<p class="p">Second, Remote Objects is JavaScript-based. This makes it natural to use with a variety
                                of mobile frameworks that use JavaScript themselves. We’ll talk more
                                about that in the last unit in this module.</p>
</dd>
<dt class="dt dlterm">JavaScript Remoting</dt>
<dd class="dd">JavaScript Remoting is, as you might guess from the name, also based in
                            JavaScript. However, where Remote Objects is simple, JavaScript Remoting is flexible and powerful. JavaScript
                            Remoting gives you the most capability to create exactly the app
                            experience you want to deliver, and to provide the best performance for
                            those apps. But to do so, you’ll write more code yourself, and you’ll
                            need to master some complex concepts. (If that sounds exciting, great
                            news: a forthcoming Trailhead module will dive right into JavaScript
                            Remoting.)</dd>
</dl>
<p class="p">For now, we’ll work with Remote Objects. It’s simpler than JavaScript Remoting, but that doesn’t mean it’s not
                    capable. There’s a lot of runway available for apps built with Remote Objects, and it’s a great option for all but the most demanding apps.</p>
</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_nav_menu_add_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_add_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Add the Page to the Salesforce1 Navigation
        Menu</span></h2>
<div class="body taskbody"><div class="shortdesc">To add a Visualforce page to the
            Salesforce1 navigation menu, first
        enable the page for mobile apps. Then create a tab for the page, and add the tab to the Salesforce1 menu.</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Enable the Visualforce page
                    for Salesforce1 mobile
                    access.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Visualforce Pages</kbd> in the
                                <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Visualforce
                                Pages</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Edit</strong> next to the
                                <kbd class="ph userinput">LatestAccounts</kbd>
                            Visualforce page in
                            the list.</span>
</li>
<li class="li substep">
<span class="ph cmd">Select <strong class="ph uicontrol">Available for Salesforce mobile apps and Lightning Pages</strong>.</span>
<div class="itemgroup info">
<div class="fig fignone">
<span class="image image-block"><img alt="Enable a Visualforce page for mobile apps" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usf87be1540488996f5b1b8790bc74018c.png"/></span>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
<div class="itemgroup stepresult">You’ll need to complete these steps for every page you use in Salesforce1. From here on,
                    we’ll simply say “enable the page for mobile apps.”</div>
</li>
<li class="li step">
<span class="ph cmd">Create a tab for the Visualforce page.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Tabs</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Tabs</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Visualforce
                            Tabs section, click <strong class="ph uicontrol">New</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Visualforce
                            Page drop-down list, select LatestAccounts.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the <span class="keyword parmname">Tab Label</span> field, enter <kbd class="ph userinput">Latest
                                Accounts</kbd>.</span>
<div class="itemgroup info">Notice that the <span class="keyword parmname">Tab Name</span> field is filled in
                            automatically.</div>
</li>
<li class="li substep">
<span class="ph cmd">Click in the <span class="keyword parmname">Tab Style</span> field and select the
                            Building style.</span>
<div class="itemgroup info">The icon for this style appears as the icon for the page in the Salesforce1
                            navigation menu.<div class="fig fignone">
<span class="image image-block"><img alt="Create a Visualforce tab" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc96d6369917202c9f1d324b1d3ab2c84.png"/></span>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Next</strong>, then <strong class="ph uicontrol">Next</strong>,
                            then <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
<div class="itemgroup stepresult">You now have a new tab that displays the Latest Accounts Visualforce page. You can
                    add any tab to the standard Salesforce Web interface or
                    to Salesforce1 separately.
                    Let’s do it!</div>
</li>
<li class="li step">
<span class="ph cmd">Add the tab to the Salesforce1 navigation
                    menu.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Mobile Navigation</kbd> in the
                                <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Salesforce1
                                Navigation</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Select the Latest Accounts tab and click
                            <strong class="ph uicontrol">Add</strong>.</span>
<div class="itemgroup stepresult">The Latest Accounts item is added at the bottom of the Selected
                            list.</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
</ol>
<div class="section result">
<p class="p">Your page is now available in Salesforce1. Woohoo! Let’s
                check it out.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_nav_menu_test_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_test_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Test the New Navigation Item and Page</span></h2>
<div class="body taskbody"><div class="shortdesc">Test your page and changes to the navigation menu by viewing them in Salesforce1.</div>
<div class="section context">
<p class="p">The best way to test your Salesforce1 apps is to view
                them on your mobile device in Salesforce1.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Salesforce1 app
                    on your mobile device. Refresh the app by pulling down.</span>
</li>
<li class="li step">
<span class="ph cmd">Tap <img alt="Navigation Menu" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us2c11bf7f5af512bcee91e06100f3981b.png"/> to access the navigation
                    menu.</span>
<div class="itemgroup stepresult">You should see <strong class="ph uicontrol">Latest Accounts</strong> under the Apps section.<div class="fig fignone">
<span class="image image-block"><img alt="Latest Accounts in Salesforce1 navigation menu" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us95dd0db78d62974e787654036c387f79.png"/></span>
</div>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>
<ul class="ul bulletList">
<li class="li">If you’re using the <span class="ph filepath">/one/one.app</span> browser
                                version, you might need to refresh the browser to see the page in
                                the navigation menu.</li>
<li class="li">If you’re using the mobile app, you might need to log out and log in
                                again to see the change.</li>
</ul>
</p></div></div></div></div></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Tap <strong class="ph uicontrol">Latest Accounts</strong>.</span>
<div class="itemgroup stepresult">Your page loads!<div class="fig fignone">
<span class="image image-block"><img alt="The Latest Accounts page in Salesforce1" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us8db9c21c609f31afd345c1292c79ef20.png"/></span>
</div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">That’s it! You can see how easy it is to make your pages and tabs available to your
                mobile users.</p>
<p class="p">Except…well…how should we put this…it’s kind of…plain?</p>
<p class="p">You’ll fix that next!</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_nav_menu_styling" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_styling"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Style Your Page for Mobile Devices</span></h2>
<div class="body taskbody"><div class="shortdesc">To optimize Visualforce pages for
        mobile devices and match the Salesforce1 look and feel, use CSS to style the pages.</div>
<div class="section context">
<p class="p">For example, you probably want larger text, and to provide large tap targets for
                buttons and other clickable items. You can use all the same CSS techniques that you
                would use for any mobile Web development.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong></span>, then open your page.</span>
</li>
<li class="li step">
<span class="ph cmd">Below the opening <samp>&lt;apex:page&gt;</samp> tag,
                    add the following code.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;style&gt;
.mypage {
    font-family: "ProximaNovaSoft-Regular", Calibri; 
    font-size: 110%;
    padding-top: 12px;
}
.mypage h2 {
    margin-left: 10px;
    font-weight: normal;
    font-size: 24px;
}
.mypage ul {
    list-style-type: none;
    padding: 0;
}
.mypage a {
    display: block;
    padding: 10px;
}
.mypage li {
    border-bottom: solid 1px #dddddd;
    margin: 0;
}
.mypage a:hover {
    background-color: #dddddd;
    text-decoration: none;
    color: #000000;
}
&lt;/style&gt;</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Reload the app and view your changes.</span>
<div class="itemgroup stepresult">
<div class="fig fignone">
<span class="image image-block"><img alt="The Latest Accounts page after mobile styling" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb3e16634801fb4fa83421bd4326336e3.png"/></span>
</div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">That’s much better! It’s easier to read, and looks more like Salesforce1. More importantly,
                the list of account names is spaced, making it easy for users to tap the
                accounts.</p>
<p class="p">Tap the accounts? Yes! It’s the next step, and you won’t believe how easy it is with
                this one weird trick.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_nav_menu_navigation" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_navigation"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Add Navigation Controls Using <span class="titlecodeph">sforce.one</span></span></h2>
<div class="body taskbody"><div class="shortdesc">Connect your page to the Salesforce1 navigation system by using
            <samp>sforce.one</samp> navigation functions.</div>
<div class="section context">
<p class="p">Visualforce pages running in Salesforce1 often have to
                interact with or link to other pages in the application. Common navigation functions
                are available through the <samp>sforce.one</samp>
                object, a JavaScript utility library automatically made available when running in
                    Salesforce1.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong></span>, then open your page.</span>
</li>
<li class="li step">
<span class="ph cmd">At the bottom of the script block, before the closing <samp>&lt;/script&gt;</samp> tag, add the following code to
                    your page.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>ul.addEventListener("click", function(e) {
    sforce.one.navigateToSObject(e.target.getAttribute("data-id"));
});</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Reload the app and view your changes.</span>
</li>
</ol>
<div class="section result">
<div class="p">Your mini app doesn’t look different at first. But try tapping an account. You’ll
                navigate to the account’s detail page, where you can view the account, the account
                feed, and so on. What’s more, by using <samp>sforce.one</samp> to navigate forward, you can also use the Salesforce1 back arrow to
                navigate back to where you started—your Latest Accounts page. Cool!<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>The navigation functions provided by <samp>sforce.one</samp> let you tie your custom app
                    functionality into the overall Salesforce1 navigation
                    system. This lets your pages behave just like built-in functionality when it
                    comes to navigation. You can use different <samp>sforce.one</samp> functions to navigate to individual records, to
                    specific feeds or feed items, to lists and related lists, and even to general
                    URLs. See this unit’s resources for more details on this useful
                library.</p></div></div></div></div></div>
</div>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_nav_menu_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_nav_menu_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://trailhead.salesforce.com/salesforce1_mobile_app/salesforce1_mobile_app_navigation" target="_blank" title="html (New Window)">Trailhead: Salesforce1 Mobile
               Basics: Customizing Navigation</a></li>
<li class="li Documentation"><a class="xref" href="https://trailhead.salesforce.com/module/visualforce_fundamentals" target="_blank" title="html (New Window)">Trailhead: Visualforce
               Basics</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/vf_dev_best_practices_design_considerations.htm" target="_blank" title="html (New Window)">Visual Design Considerations</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/salesforce1_dev_jsapi_sforce_one.htm" target="_blank" title="html (New Window)">Navigation with the <samp>sforce.one</samp> Object</a></li>
<li class="li Documentation"><cite class="cite">Visualforce Developer’s Guide:</cite>
<a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_remote_objects.htm" target="_blank" title="html (New Window)">Remote Objects</a></li>
<li class="li Documentation"><cite class="cite">Visualforce Developer’s Guide:</cite>
<a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_js_remoting.htm" target="_blank" title="html (New Window)">JavaScript Remoting</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App
                  Developer Guide</a></cite></li>
</ul>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="http://sfdc-styleguide.herokuapp.com/" target="_blank" title="html (New Window)">Salesforce1 Style Guide</a></li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce session: Intro to
               Salesforce1 Mobile App Development with Visualforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Implement Global Actions with Visualforce Pages</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_actions_global_learning_objectives"><a name="visualforce_mobile_salesforce1_actions_global_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe two differences between global actions and
                                        object-specific actions.</li>
<li class="li">Implement a Salesforce1 global action using a Visualforce page.</li>
<li class="li">Describe the Publisher SDK and list two ways to interact with
                                        publisher dialogs.</li>
<li class="li">Add CSS styling to a page that improves the usability of forms
                                        in a mobile user interface.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_global_actions_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_global_actions_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Implement Global Actions with Visualforce
                        Pages</span></h2>
<div class="body"><div class="shortdesc">Actions enable users
                to do more in Salesforce and in Salesforce1. For example, you can let
                users create or update records and log calls directly in their Chatter feed or from their
                mobile device.</div>
<p class="p">Actions, which appear in the action bar and action menu in Salesforce1, offer
                        a quick way for mobile users to access commonly used tasks and
                        functionality. Tapping the More icon (<img alt="Action Menu icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3ce7965c3c77b9e3908746005eb54e33.png"/>) opens the
                        action menu, which contains the complete list of available actions.</p>
<div class="p">
<div class="fig fignone"><span class="figcap">Salesforce1 Actions in the
     Action Bar and Action Menu</span>
<div class="imagecenter"><span class="image image-block"><img alt="Action bar and menu" class="image image-block" height="330" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us053de2c81b4716f222c8b3b00195edad.png"/></span></div>
</div>
</div>
<div class="p" dir="ltr">Actions can be global or specific to an object.<ul class="ul bulletList">
<li class="li" dir="ltr">Global actions don’t operate in the context of a
                                        specific object.</li>
<li class="li" dir="ltr">Object-specific actions operate on a specific
                                        record.</li>
</ul>
</div>
<p class="p" dir="ltr">Like navigation menu items, global actions don’t operate in the context
                        of a specific record. But unlike navigation menu items, global actions are
                        typically used to implement micro-tasks. Generally, use navigation items to
                        implement more complex processes or whole apps, and use global actions to
                        implement micro-tasks. For example, a quick entry form where you fill in a
                        few fields and save to a new record.</p>
<p class="p">You can create both custom global and object-specific actions using Visualforce. This
                        unit focuses on global actions, while the next unit covers object-specific
                        actions.</p>
</div>
</div>
<div class="topic task nested0" id="visualforce_salesforce1_actions_global_create_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_salesforce1_actions_global_create_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Visualforce Page for the Global
            Action</span></h2>
<div class="body taskbody"><div class="shortdesc">Global actions open a Visualforce
        page, which can in turn invoke additional pages. You need to define the first page before
        you create the action that launches it.</div>
<div class="section context">
<div class="p">Let’s create a global action that allows users to quickly create an account by
                capturing only the account name.<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>As before, this example is simple for the
                    purposes of clarity. We hope you find it informative, and extend it as you build
                    your own Salesforce1
                    apps.</p></div></div></div></div></div>
</div>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">QuickAccount</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page docType="html-5.0" title="Create Account"&gt;
    
    &lt;apex:remoteObjects &gt;
        &lt;apex:remoteObjectModel name="Account" fields="Id,Name"/&gt;
    &lt;/apex:remoteObjects&gt;
    
    &lt;div class="mypage"&gt;
        Account Name:
        &lt;input type="text" id="accountName"/&gt;
        &lt;button onclick="createAccount()"&gt;Create Account&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;script&gt;
        function createAccount() {
            var accountName = document.getElementById("accountName").value;
            var account = new SObjectModel.Account();
            account.create({Name: accountName}, function(error, records) {
                if (error) {
                    alert(error.message);
                } else {
                   sforce.one.navigateToSObject(records[0]);
                }
            });
        }
    &lt;/script&gt;
    
&lt;/apex:page&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">As before, if you click the <strong class="ph uicontrol">Preview</strong> button to see your page,
                you’ll see it in the standard desktop view, not the Salesforce1 version. As with
                our Latest Accounts page, you have to add it to Salesforce1 before you can see
                it inside Salesforce1. We’ll
                get to that in a minute.</p>
<p class="p">Also like Latest Accounts, Quick Account doesn’t use a standard controller, and
                instead relies on Remote Objects for its behavior. Where Recent Accounts used Remote Objects just to load existing data, the Quick Account page uses Remote Objects to actually <em class="ph i">create</em> a record in Salesforce. Remote Objects can also be used to update and even delete data where appropriate. It’s an
                extremely versatile tool that’s well-suited for use in Salesforce1 apps.</p>
<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>While we’re not learning about Remote Objects specifically, it’s worth noting how Remote Objects uses <samp>sforce.one</samp> to navigate to the
                Account details page upon successful creation of the account. The
                magic happens in this call to <samp>create</samp>.<div class="codeblock"><pre>account.create({Name: accountName}, function(error, records) {
    if (error) {
        alert(error.message);
    } else {
       sforce.one.navigateToSObject(records[0]);
    }
});</pre></div>
<p class="p">The
                        <samp>create</samp> function accepts two
                    arguments. The first is probably fairly obvious: it’s a block containing
                    name-value pairs that provide values for fields for the new account. If our
                    Quick Account form had more fields, you could simply add appropriate name-value
                    pairs to this block to create the account record with the additional field
                    values. The second argument is a <dfn class="term">callback function</dfn>. This function
                    is called with the results of the Remote Objects operation once it completes.</p>
<p class="p">Callback functions are a standard technique
            in JavaScript for handling events and asynchronous operations. Remote Objects uses this pattern to handle the response of its asynchronous operations. When you
            invoke a Remote Objects operation, you provide the parameters of the operation and, optionally, a callback
            function. Your JavaScript code continues uninterrupted after you invoke the operation.
            When the remote operation is completed and results are returned, your callback function
            is invoked and receives the results of the operation.</p>
<p class="p">Here our callback function is extremely simple. It receives two values when
                    called, an error object, and an array containing the records that were affected
                    by the operation. If there’s an error, the callback displays it in an alert.
                    (That’s not ideal for production use, but it works while we’re exploring.) If
                    the record was created successfully, we use the <samp>sforce.one.navigateToSObject</samp> function to navigate to the first
                    item of the array of affected records. This just so happens to be the account
                    that was created. Neat!</p>
</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_salesforce1_actions_global_create_action" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_salesforce1_actions_global_create_action"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Global Action with the Visualforce Page</span></h2>
<div class="body taskbody"><div class="shortdesc">Global actions aren’t associated with any specific object, so they’re created in
        their own section in Setup.</div>
<div class="section context">
<p class="p">To use the QuickAccount page as a global action:</p>
</div>
<ol class="ol steps enumList">
<li class="li step" id="vf_mobile_sf1_enable_page_for_mobile_app_step"><a name="vf_mobile_sf1_enable_page_for_mobile_app_step"></a>
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Visualforce Pages</kbd> in the
                        <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Visualforce
                        Pages</strong>, and then enable the page for mobile apps.</span>
<div class="itemgroup info">You learned how to enable a page for mobile apps in a previous unit.</div>
</li>
<li class="li step">
<span class="ph cmd">Define the global action.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Actions</kbd> in the <span class="keyword parmname">Quick
                                Find</span> box, then select <strong class="ph uicontrol">Global
                                Actions</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">New Action</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Action Type drop-down list, select Custom Visualforce.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Visualforce
                            Page drop-down list, select QuickAccount.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the <span class="keyword parmname">Label</span> field, enter <kbd class="ph userinput">Quick
                                Account</kbd>.</span>
<div class="itemgroup info">The other default values are fine.<div class="fig fignone">
<span class="image image-block"><img alt="Create a global action with the new page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us6338043bc92aa7b0e587b85a09edc47f.png"/></span>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
<li class="li step">
<span class="ph cmd">Add the global action to the publisher layout.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Publisher Layouts</kbd> in the <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Publisher Layouts</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Edit</strong> to the left of <strong class="ph uicontrol">Global
                                Layout</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Salesforce1 and
                        Lightning Experience Actions,
                            click to <strong class="ph uicontrol">override the predefined actions</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">From the Salesforce1
                    &amp; Lightning Actions
                            category in the palette, drag the Quick Account action to the Salesforce1 and
                        Lightning Experience Actions section.
                            Put it in the first position.</span>
<div class="itemgroup info">
<div class="fig fignone">
<div class="imagecenter"><span class="image image-block"><img alt="Add the Quick Account action to the global publisher layout" class="image image-block" height="388" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-uscbb1bfaa89d9fdf3a517edcb69c58b0f.png" width="800"/></span></div>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
</ol>
<div class="section result">
<p class="p">You’re ready to test the new action. In a prior unit, we led you through the
                individual steps one-by-one. From here, we’ll go more quickly. </p>
<div class="p">To test your new global action, force a reload of your Salesforce1 app. Then, anywhere
                in Salesforce1, tap <img alt="Action Menu icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3ce7965c3c77b9e3908746005eb54e33.png"/>
                to access the action menu, and tap the <strong class="ph uicontrol">Quick Account</strong> action.
                You should see your page presented, ready to create an account.<div class="fig fignone">
<span class="image image-block"><img alt="View the Quick Account action page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us1d9b3318dd822680899349651c2a0bd4.png"/></span>
</div>
</div>
<p class="p">Give it a whirl! You should be able to create an account and then go to that
                account’s detail page in Salesforce1. Overall, pretty
                good for a quick effort.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_actions_global_styling" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_global_styling"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Style the Action Page for Mobile Devices</span></h2>
<div class="body taskbody"><div class="shortdesc">Use CSS to style the action’s Visualforce page. Styling the page
        optimizes it for mobile devices and matches Salesforce1.</div>
<div class="section context">
<p class="p">Once again it’s time to optimize the look and feel of the page.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong></span> to open your page.</span>
</li>
<li class="li step">
<span class="ph cmd">Below the opening <samp>&lt;apex:page&gt;</samp> tag in
                    your page, add the following code.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;style&gt;
    .mypage {
        font-family: "ProximaNovaSoft-Regular", Calibri; 
        font-size: 110%;
        padding-top: 12px;
        width: 100%;
    }
    .mypage input[type=text] {
        width: 100%;
        height: 35px;
        -webkit-appearance: none;
        padding: 0 8px;
        margin: 4px 0;
        line-height: 21px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 3px;
        outline: none;
    }
    .mypage button {
        -webkit-appearance: button;
        border-radius: 3px;
        display: block;
        padding: 12px;
        margin: 4px 0;
        width: 100%;
        background: #eee;
        border: solid 1px #ccc;
    }
&lt;/style&gt;</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Reload the app and view your changes.</span>
<div class="itemgroup stepresult">
<div class="fig fignone">
<span class="image image-block"><img alt="The Latest Accounts page after mobile styling" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usd8273f68a091c0d0a42c0cc1c9916066.png"/></span>
</div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">As before, text, entry fields, and tap targets are larger and more suitable for
                touch-based devices.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_actions_global_navigation" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_global_navigation"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Improve Navigation with the Publisher SDK</span></h2>
<div class="body taskbody"><div class="shortdesc">Use the default <strong class="ph uicontrol">Submit</strong> button that’s part of the publisher
        dialog, instead of your own button, to provide a consistent user interface.</div>
<div class="section context">
<div class="p">
<div class="fig fignone">
<span class="image image-block"><img alt="Use the built in navigation controls, instead of creating your own" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc22a6d9b26e7413b4334ad17b27954ef.png"/></span>
</div>
</div>
<p class="p" dir="ltr">Global actions appear within the <dfn class="term">publisher</dfn>, which gives them
                access to extra capabilities. The Publisher SDK provides a publish/subscribe API
                that allows you to send messages to the publisher and subscribe to publisher events.
                For example, you can send a <samp>publisher.close</samp>
                message to the publisher to close the publisher dialog.  You can also subscribe to
                the <samp>publisher.showPanel</samp> and <samp>publisher.post</samp> events to be notified when the
                publisher dialog is displayed and when the submit button is clicked
                respectively.</p>
<p class="p">Use the Publisher SDK to connect your custom features with standard publisher
                behavior and blend seamlessly with built-in Salesforce1 features. For example,
                to use the publisher submit button instead of your custom Create Account button in
                the QuickAccount page:</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong></span> to open your page.</span>
</li>
<li class="li step">
<span class="ph cmd">Above the existing <samp>&lt;script&gt;</samp> block,
                    add the following code to your page.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;script src='/canvas/sdk/js/publisher.js'&gt;&lt;/script&gt;</pre></div>
</div>
<div class="itemgroup stepresult">This code imports the Publisher SDK into your page.</div>
</li>
<li class="li step">
<span class="ph cmd">Delete the <samp>&lt;button&gt;</samp> for the Create
                    Account button.</span>
</li>
<li class="li step">
<span class="ph cmd">Replace the <samp>createAccount()</samp> function
                    with the following code.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>// When the panel is displayed, enable the submit button
Sfdc.canvas.publisher.subscribe({name: "publisher.showPanel", onData:function(e) {
    Sfdc.canvas.publisher.publish(
        {name: "publisher.setValidForSubmit", payload: "true"});
}});

// When the submit button is pressed, create an account, and close the panel
Sfdc.canvas.publisher.subscribe({ name: "publisher.post", onData: function(e) {
    // Create the account using the Remote Object
    var accountName = document.getElementById("accountName").value;
    var account = new SObjectModel.Account();
    account.create({Name: accountName}, function(error, records) {
        if (error) {
            alert(error.message);
        } else {
            //  Close the publisher panel
            Sfdc.canvas.publisher.publish(
                { name: "publisher.close", payload:{refresh:"true"}});
        }
    });
}});</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">When you reactivate the global action, your action panel uses the built-in Salesforce1 navigation
                elements, giving your users a consistent experience across the entire Salesforce1 app.</p>
<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>The Publisher SDK is part of a larger toolkit, the
                    Force.com Canvas SDK. The Force.com Canvas SDK is a suite of
                JavaScript libraries that provide simple ways to use existing Salesforce1 APIs (REST API, SOAP API, Chatter REST API) to build better user
                experiences for your mobile users. The Force.com Canvas SDK gives you
                capabilities that go beyond the simple navigation we’re using here. When you’re
                ready to take the next step in your mobile apps, be sure to check it out.</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_actions_global_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_global_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://trailhead.salesforce.com/salesforce1_mobile_app/salesforce1_mobile_app_actions_global" target="_blank" title="html (New Window)">Trailhead:
                              Salesforce1 Mobile Basics: Creating Global Quick Actions</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App
                  Developer Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_remote_objects.htm" target="_blank" title="html (New Window)">Visualforce Remote
               Objects</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.platform_connect.meta/platform_connect/canvas_framework_using_sdk.htm" target="_blank" title="html (New Window)">Force.com Canvas SDK</a>
            (Publisher SDK)</li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce
                              session: Intro to Salesforce1 Mobile App Development with
                              Visualforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Implement Object-Specific Actions with Visualforce Pages</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_actions_object_learning_objectives"><a name="visualforce_mobile_salesforce1_actions_object_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe the two most significant requirements of an object
                                        action, as compared to a global action.</li>
<li class="li">Implement a Salesforce1 object action using a Visualforce page.</li>
<li class="li">Use the Publisher SDK to close the publisher and refresh the
                                        object page.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_actions_object_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_object_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Implement Object-Specific Actions with Visualforce
                        Pages</span></h2>
<div class="body"><div class="shortdesc">When you create an object-specific action using a Visualforce page, that page
                is executed with the current object. In other words, a specific record ID is
                associated with the Visualforce
                page.</div>
<p class="p" dir="ltr">Visualforce pages
                        used to implement object-specific actions must use the standard controller
                        for that object. The standard controller automatically loads the record for
                        the record ID. </p>
<p class="p" dir="ltr">Generally, when the action completes, users are redirected to a page
                        related to the originating record.</p>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_actions_object_create_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_object_create_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Visualforce Page for the
            Object-Specific Action</span></h2>
<div class="body taskbody"><div class="shortdesc">Object-specific actions open a Visualforce page, which can in turn
        invoke more pages. You must define the first page before you can create the action that
        launches it.</div>
<div class="section context">
<p class="p">As an example, let’s create an object-specific action that provides a simple
                two-button widget to close an opportunity as either won or lost.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">CloseOpportunity</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page docType="html-5.0" standardController="Opportunity" title="Close Opportunity"&gt;

    &lt;script src='/canvas/sdk/js/publisher.js'&gt;&lt;/script&gt;

    &lt;apex:remoteObjects&gt;
        &lt;apex:remoteObjectModel name="Opportunity" fields="Id,Name"/&gt;
    &lt;/apex:remoteObjects&gt;
    
    &lt;div class="mypage"&gt;
        &lt;button onclick="closeOpportunity('Closed Won')"&gt;Won&lt;/button&gt;
        &lt;button onclick="closeOpportunity('Closed Lost')"&gt;Lost&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;script&gt;
        var opportunityId = "{!Opportunity.Id}";

        function closeOpportunity(stageName) {
            var opportunity = new SObjectModel.Opportunity();
            opportunity.update([opportunityId], {StageName: stageName}, function(error, records) {
                if (error) {
                    alert(error.message);
                } else {
                    Sfdc.canvas.publisher.publish({ name: "publisher.close", payload: {refresh:"true"}});
                }
            });
    }
    &lt;/script&gt;
    
&lt;/apex:page&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">This page couldn’t be more simple, but it illustrates a number of details about
                writing your own object actions. First, the page uses the standard controller for
                opportunities, as required. But notice something interesting: it only uses the
                standard controller to <em class="ph i">load</em> the details for the opportunity. Once again, the
                page uses Remote Objects, this time to update an existing record. So the page loads data using the
                standard controller, but updates it with Remote Objects, combining two different data access methods on the same page. </p>
<div class="btb callout box guidedTour"><div class="inner"><div class="bd"><div class="media"><div class="mediaBd"><h4 class="mbs">Beyond the Basics</h4><p>Why not use the standard controller to update the
                record, too? The simple answer is, Remote Objects fits better with the page interaction model used by Salesforce1. You <em class="ph i">can</em> use
                standard Visualforce in Salesforce1, but to optimize
                your pages for the mobile environment, you’re better off using Visualforce tools like Remote Objects or JavaScript remoting. They
                connect better with JavaScript-based Salesforce1 features like
                    <samp>sforce.one</samp> and the Publisher SDK. They
                also perform fewer requests with smaller data payloads, which can improve
                performance quite a bit for mobile devices.</p></div></div></div></div></div>
<p class="p">Finally, we handle a successful update of the opportunity using a callback function
                similar to the one defined in the Quick Account page. Except this time, instead of
                using a <samp>sforce.one</samp> navigation function, we
                use the Publisher SDK to close the publisher and refresh the opportunity we were
                on.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_actions_object_create_action" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_object_create_action"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Create an Object-Specific Action with the Visualforce Page</span></h2>
<div class="body taskbody"><div class="shortdesc">Object-specific actions are associated with a particular object, so they’re created
        on the object in Setup.</div>
<div class="section context">
<p class="p">To create an action for Opportunities with the CloseOpportunity page, do the
                following.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Visualforce Pages</kbd> in the
                        <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Visualforce
                        Pages</strong>, and then enable the page for mobile apps.</span>
<div class="itemgroup info">You learned how to enable a page for mobile apps in a previous unit.</div>
</li>
<li class="li step">
<span class="ph cmd">Define the action for the object.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, click <span class="ph menucascade"><strong class="ph uicontrol">Customize</strong> | <strong class="ph uicontrol">Opportunities</strong> | <strong class="ph uicontrol">Buttons, Links, and Actions</strong></span>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">New Action</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the <span class="keyword parmname">Action Type</span> drop-down list, select Custom
                                Visualforce.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Visualforce
                            Page drop-down list, select CloseOpportunity.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the <span class="keyword parmname">Label</span> field, enter <kbd class="ph userinput">Close
                                Opportunity</kbd>.</span>
<div class="itemgroup info">The other default values are fine.<div class="fig fignone">
<span class="image image-block"><img alt="Create an object-specific action" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa4bacd12c40de61127e5f9ab41108a69.png"/></span>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
<li class="li step">
<span class="ph cmd">Add the action to the publisher layout.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, click <span class="ph menucascade"><strong class="ph uicontrol">Customize</strong> | <strong class="ph uicontrol">Opportunities</strong> | <strong class="ph uicontrol">Page Layouts</strong></span>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click the <strong class="ph uicontrol">Edit</strong> link to the left of Opportunity
                            Layout.</span>
</li>
<li class="li substep">
<span class="ph cmd">In the Salesforce1 and
                        Lightning Experience Actions,
                            click to <strong class="ph uicontrol">override the predefined actions</strong>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Salesforce1
                    &amp; Lightning Actions</strong> in the palette and then drag the Close Opportunity
                            action to the Salesforce1 and
                        Lightning Experience Actions
                            section.</span>
<div class="itemgroup info">
<div class="fig fignone">
<div class="imagecenter"><span class="image image-block"><img alt="Add the action to the Opportunity layout" class="image image-block" height="437" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us7f16be71b27c144f5b603e83078ee569.png" width="800"/></span></div>
</div>
</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
</ol>
<div class="section result">
<div class="p">To test your new global action, force a reload of your Salesforce1 app. Then navigate
                to an opportunity record, tap <img alt="Action Menu icon" class="image" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3ce7965c3c77b9e3908746005eb54e33.png"/>
                to access the action menu, and tap the <strong class="ph uicontrol">Close Opportunity</strong>
                action. You should see your page, ready to close the opportunity. <div class="fig fignone">
<span class="image image-block"><img alt="The Close Opportunity action page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us4a53551e4d6afadcb1e0470966e1d6c3.png"/></span>
</div>
</div>
<p class="p">Naturally, you’re a sales rock star, so go ahead and close that opportunity as won.
                But before we start spending that commission check, there’s some additional work to
                do.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_actions_object_styling" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_object_styling"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Style the Action Page for Mobile Devices</span></h2>
<div class="body taskbody"><div class="shortdesc">Use CSS to style the action’s Visualforce page to optimize it for
        mobile devices, and to match Salesforce1.</div>
<div class="section context">
<p class="p">Once again it’s time to optimize the look and feel of the page.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">Open</strong></span> to open your page.</span>
</li>
<li class="li step">
<span class="ph cmd">Below the opening <samp>&lt;apex:page&gt;</samp> tag,
                    add the following code to your page.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;style&gt;
    .mypage {
        font-family: "ProximaNovaSoft-Regular", Calibri; 
        font-size: 110%;
        padding-top: 12px;
    }
    .mypage button {
        -webkit-appearance: button;
        border-radius: 3px;
        display: block;
        padding: 12px;
        margin: 8px 0;
        width: 100%;
        background: #eee;
        border: solid 1px #ccc;
      }
&lt;/style&gt;</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">Reload the app and view your changes.</span>
<div class="itemgroup stepresult">
<div class="fig fignone">
<span class="image image-block"><img alt="The Latest Accounts page after mobile styling" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-uscdc421c764b65eaab8929ac2a89955eb.png"/></span>
</div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">We might sound like a broken record by now, but the styling changes you’ve
                implemented significantly improve the usability of the action you’re creating, with
                little effort. Great work!</p>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_actions_object_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_actions_object_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://trailhead.salesforce.com/salesforce1_mobile_app/salesforce1_mobile_app_actions_objectspecific" target="_blank" title="html (New Window)">Trailhead:
                              Salesforce1 Mobile Basics: Creating Object-Specific Quick
                              Actions</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App
                  Developer Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_remote_objects.htm" target="_blank" title="html (New Window)">Visualforce Remote
               Objects</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.platform_connect.meta/platform_connect/canvas_framework_using_sdk.htm" target="_blank" title="html (New Window)">Force.com Canvas SDK</a>
            (Publisher SDK)</li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce
                              session: Intro to Salesforce1 Mobile App Development with
                              Visualforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Use Visualforce Pages in Page Layouts and Mobile Cards</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_layouts_cards_learning_objectives"><a name="visualforce_mobile_salesforce1_layouts_cards_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">Describe two differences between adding a Visualforce page to a page layout section or a mobile card.</li>
<li class="li">Create Visualforce pages to use in Salesforce1 page layouts.</li>
<li class="li">Create Visualforce pages for mobile cards in Salesforce1.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_layouts_cards_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_layouts_cards_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Use Visualforce Pages in
                        Page Layouts and Mobile Cards</span></h2>
<div class="body"><div class="shortdesc">Customize record detail pages by embedding Visualforce pages in your
                page layouts, or by adding them as mobile cards on a page layout.</div>
<p class="p">Customizing page layouts by embedding Visualforce in a
                        section on the page has long been a feature of Salesforce. This
                        feature works as well with Salesforce1 as it
                        does with regular Salesforce. Pages
                        added to a layout this way appear in both the standard desktop version of
                                Salesforce and
                        in Salesforce1.</p>
<p class="p">Mobile cards, however, allow you to add a Visualforce page to
                        a layout for mobile users only. Mobile cards are a great way to add small
                        pieces of information and to format them specifically for mobile use.</p>
<p class="p" dir="ltr">A Visualforce page
                        used in a page layout or as a mobile card runs in the context of a specific
                        record. As with object-specific actions, a specific record ID is associated
                        with the page and it must use the standard controller for that object.</p>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_layouts_cards_create_page" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_layouts_cards_create_page"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Create a Visualforce Page to Use on Page
            Layouts</span></h2>
<div class="body taskbody"><div class="shortdesc">Design embeddable Visualforce
        pages by using the standard controller and keep the page focused, ideally on a single task
        or kind of information.</div>
<div class="section context">
<p class="p">As an example, let’s create a Visualforce page that provides a
                stock quote for the selected account.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">StockQuote</kbd> for the page name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page docType="html-5.0" standardController="Account"&gt;
    &lt;style&gt;
        .mypage .quote {
            margin: 12px 0;
            font-size: 64px;
            text-align: center;
        }
        .mypage .delta {
            font-size: 24px;
            text-align: center;
            color: green;
        }
    &lt;/style&gt;
    
    &lt;div class="mypage"&gt;
        Stock:
        &lt;div class="quote"&gt;$42.00&lt;/div&gt;
        &lt;div class="delta"&gt;+1.32%&lt;/div&gt;
    &lt;/div&gt;
    
&lt;/apex:page&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p" dir="ltr">Well, this page isn’t hard to understand! Indeed, this page is almost
                entirely static, simple HTML. Note the use of the standard controller for Account,
                which lets you add this page on an Account layout as an embedded page or mobile
                card.</p>
<p class="p">What’s important here isn’t any specific programmatic technique, so much as
                understanding the best uses for embedded pages and mobile cards. Especially in a
                mobile environment, keep your Visualforce focused on the
                essential information a user needs to accomplish a specific task. Simple mobile apps
                perform better, and users can stay focused on the job they’re doing.</p>
<p class="p">Keep in mind the context where your app will be used—in the car, while walking into
                an appointment, while waiting in line, and so on. You might be tempted to add extra
                fields or information, “just in case.” Don’t. <em class="ph i">Focus</em>. If users need details,
                they can zoom into them on another page.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_layouts_cards_using" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_layouts_cards_using"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Use the Page on a Page Layout or Mobile Card</span></h2>
<div class="body taskbody"><div class="shortdesc">Add a Visualforce page to a
        section on a page layout to add it for all users. Add it as a mobile card on a page layout
        to add it only to Salesforce1.</div>
<div class="section context">
<p class="p">The steps are similar whether you’re adding the page as a section on a page layout or
                as a mobile card.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">From Setup, enter <kbd class="ph userinput">Visualforce Pages</kbd> in the
                        <span class="keyword parmname">Quick Find</span> box, then select <strong class="ph uicontrol">Visualforce
                        Pages</strong>, and then enable the page for mobile apps.</span>
<div class="itemgroup info">You learned how to enable a page for mobile apps in a previous unit.</div>
</li>
<li class="li step">
<span class="ph cmd">Add the Visualforce page to
                    a page layout.</span>
<ol class="ol substeps enumList" type="a">
<li class="li substep">
<span class="ph cmd">From Setup, click <span class="ph menucascade"><strong class="ph uicontrol">Customize</strong> | <strong class="ph uicontrol">Accounts</strong> | <strong class="ph uicontrol">Page Layouts</strong></span>.</span>
</li>
<li class="li substep">
<span class="ph cmd">Click the <strong class="ph uicontrol">Edit</strong> link to the left of Account
                            Layout.</span>
</li>
<li class="li substep">
<span class="ph cmd">Select <strong class="ph uicontrol">Visualforce Pages</strong> and drag the
                                <strong class="ph uicontrol">StockQuote</strong> page to where you want it
                            displayed on the page.</span>
<div class="itemgroup info"><div class="fig fignone">
<span class="image image-block"><img alt="Add the action to the Opportunity layout" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usa03c00831a0dcae3d90a0f837b285b0b.png"/></span>
</div>
Pages added to the <strong class="ph uicontrol">Mobile Cards</strong> section
                            only appear in Salesforce1. Pages
                            added to another section on the page layout are visible to both mobile
                            and desktop clients.</div>
</li>
<li class="li substep">
<span class="ph cmd">Click <strong class="ph uicontrol">Save</strong>.</span>
</li>
</ol>
</li>
</ol>
<div class="section result">
<div class="p">To test your new mobile card, force a reload of your Salesforce1 app. Then navigate
                to an account record and swipe to the Related panel. You should see something like
                the following. <div class="fig fignone">
<span class="image image-block"><img alt="The Close Opportunity action page" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us5dcf2b1a9349df92cbc38e183f304ea6.png"/></span>
</div>
</div>
<p class="p">Although this stock widget is hard-coded, you could easily connect it to a stock
                quotation lookup service you write in Apex, or a Web
                Services callout, or any of various other data sources. You can add multiple mobile
                cards to a layout, and they’ll all appear in the Related panel.</p>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_layouts_cards_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_layouts_cards_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://trailhead.salesforce.com/salesforce1_mobile_app/salesforce1_mobile_app_compact_layouts" target="_blank" title="html (New Window)">Trailhead: Salesforce1 Mobile
               Basics: Customizing Compact Layouts</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/page_layouts_how_they_work_in_s1.htm" target="_blank" title="html (New Window)">How Page Layouts Work in Salesforce1</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App
                  Developer Guide</a></cite></li>
</ul>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://developer.salesforce.com/blogs/developer-relations/2013/12/extend-your-salesforce1-app-with-mobile-cards.html" target="_blank" title="html (New Window)">Extend your Salesforce1 App
               with Mobile Cards</a> (blog post)</li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce session: Intro to
               Salesforce1 Mobile App Development with Visualforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div><h1>Adopt User Interface Guidelines</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_ui_guidelines_learning_objectives"><a name="visualforce_mobile_salesforce1_ui_guidelines_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">List at least six user interface guidelines for building Visualforce pages running in Salesforce1.</li>
<li class="li">Explain two characteristics of responsive design and its
                                        importance in mobile development.</li>
<li class="li">Build a simple responsive user interface using CSS.</li>
<li class="li">List at least six Visualforce components you shouldn’t use when building Visualforce pages for Salesforce1.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_ui_guidelines_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_ui_guidelines_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>User Interface Guidelines</span></h2>
<div class="body"><div class="shortdesc">Visualforce pages running in
                        Salesforce1 aren’t
                automatically optimized for mobile devices. As the developer, you’re responsible for
                implementing the appropriate best practices to deliver a great user experience to
                your mobile users.</div>
<div class="p">Here are some guiding principles for building Visualforce pages
                        running in Salesforce1.<ul class="ul bulletList">
<li class="li" dir="ltr">Design for small screens. On a mobile device, less is
                                        more. Limit the amount of data you show or capture to what
                                        is strictly necessary. Mobile pages don’t have to support
                                        all the bells and whistles.</li>
<li class="li" dir="ltr">Use responsive design to automatically adapt the page
                                        layout to different screen sizes.</li>
<li class="li" dir="ltr">Design for touch interactions. Avoid keyboard or
                                        mouse-centric user interface components and metaphors.
                                        Provide large tap areas.</li>
<li class="li" dir="ltr">Limit keyboard input.</li>
<li class="li" dir="ltr">Use available device sensors—for example, geolocation
                                        and camera—when applicable.</li>
<li class="li" dir="ltr">Avoid Visualforce components that mimic the full Salesforce site. In general, prefer plain HTML components.</li>
<li class="li" dir="ltr">Prefer the JavaScript single-page application pattern
                                        over multi-page processes. A single-page application is an
                                        app that fits in a single page and provides a more fluid
                                        user experience akin to a native app. Views are created
                                        dynamically in JavaScript and injected into the DOM as users
                                        navigate through the app’s features.</li>
<li class="li" dir="ltr">Use a JavaScript framework. Building single-page
                                        applications is challenging, and existing JavaScript
                                        frameworks handle most of that complexity.</li>
<li class="li" dir="ltr">Use a CSS framework. Styling HTML components for an
                                        optimized mobile experience isn’t trivial, and existing user
                                        interface frameworks can help a lot.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_ui_guidelines_salesforce1_look_and_feel_ui_guidelines_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_ui_guidelines_salesforce1_look_and_feel_ui_guidelines_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Match the Salesforce1 Visual
                        Design</span></h2>
<div class="body"><div class="shortdesc">Visualforce pages running in
                        Salesforce1 by default
                have minimal styling and don’t match the Salesforce1 visual
                design.</div>
<p class="p">Create Visualforce pages that
                        more closely match the look of Salesforce1 by
                        using CSS styling and minimal HTML.</p>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading4">Fonts and Styles</h3>
<div class="p">The visual design for Salesforce1 uses
                Proxima Nova, a sans-serif typeface licensed specially for Salesforce1. People
                in your organization might not have the font installed on their devices, but the
                following CSS font stack will use the closest matching font available:
                <div class="codeblock"><pre>p { 
    font-family: "ProximaNovaSoft-Regular", Calibri, 
        "Gill Sans", "Gill Sans MT", Candara, Segoe, "Segoe UI", 
         Arial, sans-serif; 
}</pre></div>
Change
                the selectors to match the appropriate text blocks and styles on your pages.</div>
<div class="p">We also recommend slightly increasing the size of the font used for normal text and
                form elements. This makes them easier to read and, for form elements, to tap into.
                Here’s a complete style block to get you
                started:<div class="codeblock"><pre>&lt;style&gt;
    html, body, p { 
        font-family: "ProximaNovaSoft-Regular", Calibri, 
            "Gill Sans", "Gill Sans MT", Candara, Segoe, 
            "Segoe UI", Arial, sans-serif; 
        font-size: 110%;
    }
    input { font-size: 95%; }
&lt;/style&gt;
</pre></div>
</div>
<div class="box message warn"><div class="inner"><div class="bd"><div class="media"><img alt="Warning" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us3904e9bce1cd5b37d5729d5567a6b1a2.gif"/><div class="mediaBd"><h4 class="mbs">Warning</h4><p>Directly referencing Salesforce1 style
                sheets in your pages, or depending on styles found in them, isn’t supported. As Salesforce1 evolves,
                the styles will change in ways that you won’t expect. Pages that depend on
                unsupported styles might eventually break.</p></div></div></div></div></div>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading5">HTML Markup</h3>
<p class="p">If your organization’s Visualforce pages match
                the full Salesforce
                site’s look and feel, it’s probably by using the Salesforce header,
                sidebar, styling, and <samp>&lt;apex:pageBlock&gt;</samp>
                and child components. Don’t explicitly disable these elements, by setting <samp>&lt;apex:page showHeader="false"
                    standardStylesheets="false" ...&gt;</samp>; Salesforce1
                automatically disables these elements when the page runs inside it.</p>
<p class="p">However, you might want to reconsider using <samp>&lt;apex:pageBlock&gt;</samp> and child components, because they explicitly
                match the full Salesforce site look
                and feel, and even with standard stylesheets turned off, the markup they generate
                carries over into Salesforce1. This
                makes your markup more complex, and it’s harder to apply styling that matches Salesforce1.</p>
<p class="p">Instead, use simple, static HTML markup, or the markup required by your chosen Mobile
                Toolkit. Sample markup is included the next section.</p>
</div>
<div class="section"><h3 class="helpHead3" id="Tdxn4tBK-heading6">Style Guides and Toolkits</h3>
<p class="p">These practices alone will make your pages look somewhat like Salesforce1, but won’t fully match the app’s look-and-feel. For more detailed
                                style matching guidelines, see the Salesforce1
                                Style Guide. You can also adopt one of several toolkits available
                                that attempt to provide complete solutions to matching Salesforce1’s visual design. See this unit’s resources for the names of and
                                links to a number of good options.</p>
</div>
</div>
</div>
<div class="topic task nested0" id="visualforce_mobile_salesforce1_ui_guidelines_responsive_design" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_ui_guidelines_responsive_design"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Use Responsive Design</span></h2>
<div class="body taskbody"><div class="shortdesc">Responsive design is a Web-design method aimed at creating Web user interfaces that
        provide an optimal viewing experience, including easy reading and navigation, on various
        screen sizes.</div>
<div class="section context">
<p class="p" dir="ltr">A responsive user interface adapts the layout to the screen size by using
                fluid, proportion-based grids, flexible images, and CSS3 media queries. Using
                responsive design, you can create Visualforce pages that look and
                work great on phones and tablets.</p>
<div class="p" dir="ltr">Standard Salesforce1
                pages use responsive design techniques to provide device-optimized layouts. The
                primary technique used is a stacked single-column layout for phones, and a
                side-by-side, two-column layout for tablets. The page is the same for all devices,
                and adapts to the actual screen size it’s displayed on. <div class="fig fignone">
<span class="image image-block"><img alt="Responsive design visual example" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc631bf01a003d7fedb756b6bc1e80713.gif"/></span>
</div>
You can use a similar technique for your Visualforce pages in Salesforce1.</div>
<p class="p">Let’s examine a simple responsive layout implementation.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">ResponsivePage</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;style&gt;
/* Default CSS: 2 columns */
.content-block {
    width: 50%;
    float: left;
}

&lt;!-- add more styles here --&gt;

&lt;/style&gt;</pre></div>
</div>
<div class="itemgroup stepresult">This code establishes the default layout, which places two equal-sized
                    content blocks—for example, two <samp>&lt;div
                        class="content-block"&gt;</samp> elements—side-by-side on the
                    page.</div>
</li>
<li class="li step">
<span class="ph cmd">In the editor, above <samp>&lt;!-- add more styles here
                        --&gt;</samp>, add the following to the <samp>&lt;style&gt;</samp> block.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>/* CSS phone */
@media screen and (max-width: 767px) {
    .content-block {
        width: 100%;
        float: none;
    }
}</pre></div>
</div>
<div class="itemgroup stepresult">The CSS styling associated with the media query and size restriction
                    overrides the default style when the screen size is small (phone-sized). It also
                    changes the width of the content blocks to 100%. When viewed on a phone the
                    content blocks stack on top of each other, rather than sit
                    side-by-side.</div>
</li>
<li class="li step">
<span class="ph cmd">In the editor, below the <samp>&lt;style&gt;</samp> block of
                    the previous code, add the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;!-- HTML for two blocks of content
     On a phone they position one on top of the other 
     On larger screens they position next to each other --&gt;

&lt;div class="content-block"&gt;
    This block is on top on the phone, and on the left on larger screens.
&lt;/div&gt;

&lt;div class="content-block"&gt;
    This block is on the bottom on the phone, but on the right on larger screens.
&lt;/div&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">View the Visualforce page in a
                browser, and then drag the corners of your browser window to observe the responsive
                layout.</p>
</div>
</div>
</div>
<div class="topic concept nested0" id="vf_dev_best_practices_components_to_avoid" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="vf_dev_best_practices_components_to_avoid"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Visualforce Components and Features to Avoid in Salesforce1</span></h2>
<div class="body conbody"><div class="shortdesc">Most core Visualforce
        components (those components in the <samp>apex</samp> namespace)
        function normally within Salesforce1. Unfortunately,
        that doesn’t mean they’re optimized for mobile, or that every feature works with Salesforce1. You can improve
        the Salesforce1 user
        experience of your Visualforce
        pages by following some straightforward rules.</div>
<p class="p">In general, avoid structural components, like <samp>&lt;apex:pageBlock&gt;</samp> and child components, and other components that mimic
            the Salesforce look and
            feel, such as <samp>&lt;apex:pageBlockTable&gt;</samp>. If you
            must use these components, set them to one column, using <samp>&lt;apex:pageBlockSection columns="1"&gt;</samp>, instead of the default of two
            columns.</p>
<p class="p">Avoid wide, non-wrapping components, especially <samp>&lt;apex:detail&gt;</samp>, <samp>&lt;apex:enhancedList&gt;</samp>, <samp>&lt;apex:listViews&gt;</samp>, and <samp>&lt;apex:relatedList&gt;</samp>, which are all unsupported. Keep device width in
            mind when creating tables with <samp>&lt;apex:dataTable&gt;</samp>.</p>
<p class="p">Avoid using <samp>&lt;apex:inlineEditSupport&gt;</samp>. Inline
            editing is a user interface pattern that works well for mouse-based desktop apps, but
            it’s difficult to use on a touch-based device, especially on phones where the screen is
            small.</p>
<p class="p">Using <samp>&lt;apex:inputField&gt;</samp> is fine for fields
            that display as a basic input field, like text, email, and phone numbers, but avoid
            using it for field types that use an input widget, such as date and lookup fields.</p>
<p class="p">PDF rendering, by setting <samp>renderAs="PDF"</samp> on
                <samp>&lt;apex:page&gt;</samp>, isn’t supported for pages in
                Salesforce1.</p>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_ui_guidelines_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_ui_guidelines_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/mobile_ui_design_intro.htm" target="_blank" title="html (New Window)">Designing Mobile-First User Interfaces</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/vf_dev_best_practices_page_layout.htm" target="_blank" title="html (New Window)">Choosing an Effective Page Layout</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/vf_dev_best_practices_design_considerations.htm" target="_blank" title="html (New Window)">Visual Design Considerations</a></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/vf_dev_best_practices_components_unsupported.htm" target="_blank" title="html (New Window)">Unsupported Visualforce Components</a></li>
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App Developer Guide</a></cite></li>
</ul>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="http://sfdc-styleguide.herokuapp.com/" target="_blank" title="html (New Window)">Salesforce1 Style Guide</a></li>
<li class="li"><a class="xref" href="http://developer.salesforcefoundation.org/bootstrap-sf1/" target="_blank" title="html (New Window)">Bootstrap SF1: A
                              Salesforce1 styled theme for Bootstrap</a></li>
<li class="li"><a class="xref" href="https://github.com/joshbirk/onestarter" target="_blank" title="html (New Window)">OneStarter: Salesforce1 Styling for
                              jQuery</a></li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=TueLWBckAFU&amp;index=87&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce
                              session: Intro to Salesforce1 Mobile App Development with
                              Visualforce</a></li>
<li class="li Videos"><a class="xref" href="https://developer.salesforce.com/events/webinars/visualforce-in-salesforce1" target="_blank" title="html (New Window)">Webinar
                              recording: Visualforce in Salesforce1: Optimizing your User Interface
                              for Mobile</a></li>
</ul>
</div>
</div>
</body></div><h1>Use CSS and JavaScript Mobile Frameworks</h1><div class="unit-content">
<body id="visualforce_mobile_salesforce1_mobile_frameworks_learning_objectives"><a name="visualforce_mobile_salesforce1_mobile_frameworks_learning_objectives"></a>
<div class="nested0">
<h2 class="helpHead2" id="Tdxn4tBK-heading1"><span class="ph" id="topic-title"><a name="topic-title"></a>Learning Objectives</span></h2>
<div class="body">
<div class="p" id="p2"><a name="p2"></a>After completing this unit, you’ll be able to: <ul class="ul bulletList">
<li class="li">List at least three CSS frameworks you can use to style your Visualforce pages.</li>
<li class="li">List at least three JavaScript frameworks you can use to build
                                                Visualforce pages using the single page application pattern.</li>
<li class="li">Describe two technical challenges frameworks can simplify in
                                        your Salesforce1 development efforts.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_intro" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_intro"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading2"><span class="ph" id="topic-title"><a name="topic-title"></a>Using Mobile Frameworks</span></h2>
<div class="body"><div class="shortdesc">A mobile Web framework makes it easy to support the single-page application
                pattern when writing Visualforce
                pages for Salesforce1.</div>
<div class="p">Getting apps to render perfectly on different screen sizes can be tedious.
                        Styling every user interface component to provide an optimized mobile
                        experience is hard as well. Use existing CSS frameworks that have already
                        done the hard work for you. To build mobile-optimized user interfaces you
                        can use, for example, the following user interface frameworks.<ul class="ul bulletList">
<li class="li"><a class="xref" href="http://getbootstrap.com/" target="_blank" title="html (New Window)">Bootstrap</a></li>
<li class="li"><a class="xref" href="http://ionicframework.com/" target="_blank" title="html (New Window)">Ionic</a></li>
<li class="li"><a class="xref" href="http://goratchet.com/" target="_blank" title="html (New Window)">Ratchet</a></li>
</ul>
</div>
<div class="p" dir="ltr">Writing single-page apps from scratch is complex. Fortunately, you can
                        use existing JavaScript frameworks that abstract and manage most of that
                        complexity. To build Visualforce pages
                        using the single-page application architecture, you can use, for example,
                        the following JavaScript frameworks.<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://angularjs.org/" target="_blank" title="html (New Window)">AngularJS</a></li>
<li class="li"><a class="xref" href="http://backbonejs.org/" target="_blank" title="html (New Window)">Backbone</a></li>
<li class="li"><a class="xref" href="http://knockoutjs.com/" target="_blank" title="html (New Window)">Knockout</a></li>
<li class="li"><a class="xref" href="http://facebook.github.io/react/" target="_blank" title="html (New Window)">React</a></li>
</ul>
</div>
<p class="p">These frameworks are just a few of the options available. Take a look at a few
                        different options and decide which one matches the skills and preferences of
                        your organization. To get you started, we’ll take a brief look at a couple
                        of them. We don’t provide a recommendation—we’re simply showing you the
                        first few steps along a path. You’re in charge of your journey! Use one of
                        the options presented here, or blaze your own trail. The principles you
                        learn here will prove useful along the way.</p>
</div>
</div>
<div class="topic concept nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_bootstrap" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_bootstrap"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading3"><span class="ph" id="topic-title"><a name="topic-title"></a>Bootstrap</span></h2>
<div class="body conbody"><div class="shortdesc">Bootstrap is a popular user interface framework for developing responsive Web
  apps.</div>
<p class="p">Using the <a class="xref" href="http://getbootstrap.com/" target="_blank" title="html (New Window)">Bootstrap</a> responsive grid, it’s easy to build Visualforce pages with a responsive layout, that
   is, Visualforce pages with a layout that
   adapts to different screen sizes.</p>
<p class="p">Watch this video for an introduction on using Bootstrap in Visualforce pages.</p>
<p class="p"><iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//www.youtube.com/embed/sIWchyCqDa4" webkitallowfullscreen="1" width="640"></iframe></p>
<p class="p">Watch this video for an introduction to building Salesforce1 apps with Visualforce, AngularJS, and Bootstrap.</p>
<p class="p"><iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//www.youtube.com/embed/Q1XyZlzt4N8" webkitallowfullscreen="1" width="640"></iframe></p>
</div>
</div>
<div class="topic concept nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_ratchet" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ratchet"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading4"><span class="ph" id="topic-title"><a name="topic-title"></a>Ratchet</span></h2>
<div class="body conbody"><div class="shortdesc">Ratchet is a simple CSS library that provides CSS styles for mobile
  components.</div>
<p class="p" dir="ltr"><a class="xref" href="http://coenraets.org/blog/2014/03/building-mobile-apps-for-salesforce-com-with-ratchet-2-0/" target="_blank" title="html (New Window)">Building Mobile Apps for Salesforce.com
    with Ratchet 2.0</a> demonstrates how to build a Salesforce mobile app with <a class="xref" href="http://goratchet.com/" target="_blank" title="html (New Window)">Ratchet</a> CSS.</p>
</div>
</div>
<div class="topic concept nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading5"><span class="ph" id="topic-title"><a name="topic-title"></a>Ionic</span></h2>
<div class="body conbody"><div class="shortdesc">Ionic is a user interface library that provides mobile-optimized UI components to build
  native-feeling mobile Web apps.</div>
<p class="p">Unlike Bootstrap and Ratchet, <a class="xref" href="http://ionicframework.com/" target="_blank" title="html (New Window)">Ionic</a> isn’t agnostic in terms of the underlying
   architectural framework you use: Ionic is built on top of <a class="xref" href="https://angularjs.org/" target="_blank" title="html (New Window)">AngularJS</a> to provide a complete
   solution for developing apps that are both well architected and native-feeling.</p>
<p class="p">Watch this video for an introduction to building Salesforce1 apps with Ionic and AngularJS.</p>
<p class="p"><iframe allowfullscreen="1" class="doc_embedded_video" frameborder="0" height="360" mozallowfullscreen="1" src="//www.youtube.com/embed/HI4PnM9kEtc" webkitallowfullscreen="1" width="640"></iframe></p>
<p class="p"><a class="xref" href="http://coenraets.org/blog/2014/02/sample-force-com-mobile-application-with-ionic-and-angularjs/" target="_blank" title="html (New Window)">Sample Force.com Mobile Application with
    Ionic and AngularJS</a> demonstrates how to build a Salesforce mobile app with the Ionic framework
   and the <a class="xref" href="https://developer.salesforce.com/page/Mobile_SDK" target="_blank" title="html (New Window)">Salesforce Mobile SDK</a>.</p>
</div>
</div>
<div class="topic concept nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic_example" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic_example"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading6"><span class="ph" id="topic-title"><a name="topic-title"></a>Build a Salesforce1 App with the Ionic Mobile Framework</span></h2>
<div class="body conbody"><div class="shortdesc">For the rest of this unit, we’ll explore using Ionic and AngularJS to create another
  simple Salesforce1 app to display a list of
  contacts.</div>
<p class="p">As in other units, this app is simple, but offers many opportunities for you to extend on your
   own. We can’t provide a complete tutorial for learning Ionic and AngularJS, but this lesson will
   give you a feel for developing apps using a mobile framework.</p>
</div>
<div class="topic task nested1" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_page" lang="en-us" xml:lang="en-us"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_page"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading7"><span class="ph" id="topic-title"><a name="topic-title"></a>Create the App’s Visualforce Page</span></h3>
<div class="body taskbody"><div class="shortdesc">This page is a container for the app’s resources and functionality.</div>
<div class="section context">
<p class="p">This Visualforce page defines the
                app’s URL and provides a
                “shell”
                in which the app runs.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">IonicContacts</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page showHeader="false" sidebar="false" standardStylesheets="false"
    docType="html-5.0" applyHtmlTag="false" applyBodyTag="false"&gt;

&lt;html&gt;

&lt;head&gt;
    &lt;link href="https://code.ionicframework.com/1.0.0-beta.14/css/ionic.css" rel="stylesheet"/&gt;
    &lt;script src="https://code.ionicframework.com/1.0.0-beta.14/js/ionic.bundle.js"&gt;&lt;/script&gt;
    &lt;!-- script src="{!URLFOR($Resource.IonicContactsApp)}"&gt;&lt;/script --&gt;
&lt;/head&gt;    

&lt;body ng-app="starter"&gt;

    &lt;apex:remoteObjects&gt;
        &lt;apex:remoteObjectModel name="Contact" fields="Id, Name, Title"/&gt;
    &lt;/apex:remoteObjects&gt;
    
    &lt;ion-nav-bar class="bar-positive"&gt;
        &lt;ion-nav-back-button/&gt;
    &lt;/ion-nav-bar&gt;

    &lt;ion-nav-view/&gt;

&lt;/body&gt;

&lt;/html&gt;

&lt;/apex:page&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">At first glance, this code looks similar to pages created in other units in this
                module. But when you look at it more closely, you’ll see some interesting
                differences. The only thing that <em class="ph i">isn’t</em> new is the Remote Objects definition, in this case, to work with contacts.</p>
<p class="p">First, the <samp>&lt;apex:page&gt;</samp> tag has a new set
                of attributes. This combination of attributes, all set to <samp>false</samp>, is something you normally use when building
                single-page apps. This combination is the way to (mostly) control the HTML that’s
                generated by Visualforce. Visualforce sets the document
                type to HTML5 (<samp>docType="html-5.0"</samp>), and
                doesn’t add its own <samp>&lt;html&gt;</samp>, <samp>&lt;head&gt;</samp>, or <samp>&lt;body&gt;</samp> tags to the page (<samp>applyHtmlTag="false"</samp> and <samp>applyBodyTag="false"</samp>). Combine these with the familiar attributes to
                suppress the standard Salesforce
                header, sidebar, and stylesheets to set your Visualforce for modern,
                full-screen HTML development.</p>
<p class="p">The flip side of taking control from Visualforce is that, with these
                settings, <em class="ph i">you’re</em> responsible for adding these elements to the page. So,
                notice the static HTML tags for <samp>&lt;html&gt;</samp>,
                    <samp>&lt;head&gt;</samp>, and <samp>&lt;body&gt;</samp>.</p>
<p class="p">Notice also the new attribute on the <samp>&lt;body&gt;</samp>:
                    <samp>ng-app="starter"</samp>. This attribute is an
                    <dfn class="term">annotation</dfn> that AngularJS uses to indicate the name of the app to
                run when the page is loaded. This is how an AngularJS app gets launched. You’ll
                create the definition for this app in the next step. (The line referencing <samp>$Resource.IonicContactsApp</samp> is commented out
                because the definition isn’t created yet. You’ll fix that in the next step too.)</p>
<div class="p">Finally, these not-quite-HTML tags are unique to the Ionic framework.<ul class="ul bulletList">
<li class="li" dir="ltr"><samp>&lt;ion-nav-bar&gt;</samp> is an Ionic
                        user interface component that displays the application header and
                        navigation.</li>
<li class="li" dir="ltr"><samp>&lt;ion-nav-view&gt;</samp> is an Ionic
                        container for the views of your application. It serves as a placeholder for
                        content that’s generated as the app runs.</li>
</ul>
</div>
<div class="box message info" dir="ltr"><div class="inner"><div class="bd"><div class="media"><img alt="Note" class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif"/><div class="mediaBd"><h4 class="mbs">Note</h4><p>JavaScript frameworks evolve rapidly. The URLs included here were
                current during writing. To ensure that you include the latest version of the Ionic
                stylesheet and JavaScript library, visit <a class="xref" href="http://code.ionicframework.com/" target="_blank">code.ionicframework.com</a>.</p></div></div></div></div></div>
</div>
</div>
</div>
<div class="topic task nested1" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_app" lang="en-us" xml:lang="en-us"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_app"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading8"><span class="ph" id="topic-title"><a name="topic-title"></a>Create the Application Resource</span></h3>
<div class="body taskbody"><div class="shortdesc">Add shared JavaScript code to your app using a static resource.</div>
<div class="section context">
<p class="p">You can add JavaScript within <samp>&lt;script&gt;</samp> tags on
                a Visualforce page. But if the
                code is shared across pages, it’s better to put it in a static resource that can be
                cached across requests for better performance. When building single-page apps,
                you’ll often want to isolate your JavaScript code into its own resource.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">To create a static resource for the main app code, open the Developer Console and click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Static Resource</strong></span>. Enter <kbd class="ph userinput">IonicContactsApp</kbd> as the name and
                        <kbd class="ph userinput">text/javascript</kbd> as the MIME type for the
                    resource.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace the contents with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>angular.module('starter', ['ionic'])

    .config(function($stateProvider) {

        $stateProvider
            .state('contactlist', {
                url: '',
                templateUrl: '/apex/IonicContactsList_Tpl',
                controller : "ContactListCtrl"
            })

    })

    .controller('ContactListCtrl', function($scope) {

        var contactsRemote = new SObjectModel.Contact();
            
        contactsRemote.retrieve({ limit: 10 }, function(err, records, event){
            if (err) {
                alert(err.message);
            } else {
                var contacts = [];
                for (var i = 0; i &lt; records.length; i++) {
                    var contact = records[i];
                    contacts.push({id: contact.get("Id"), name: contact.get("Name"), title: contact.get("Title")});
                }
                $scope.$apply(function() {
                    $scope.contacts = contacts;
                });
            }
        });
        
    })</pre></div>
</div>
</li>
<li class="li step">
<span class="ph cmd">In the Developer Console, switch
                    back to the IonicContacts page and remove the comment tags from the second
                        <samp>&lt;script&gt;</samp> tag, so that it reads as
                    follows.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;script src="{!URLFOR($Resource.IonicContactsApp)}"&gt;&lt;/script&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">This JavaScript file is the heart of the app. It defines an AngularJS module,
                “starter”, which is referenced in the <samp>&lt;body
                    ng-app="starter"&gt; </samp> element of the page created in the prior step.
                AngularJS launches using this code when the page is loaded.</p>
<p class="p">So what is the code? An Ionic app can have different screens represented by
                    <dfn class="term">states</dfn>. You can think of each state as a different type of screen
                which represents “list,” “detail,” and “edit,” for example. Each state matches a
                specific URL fragment.</p>
<p class="p">This specific app has a single state, named <samp>contactlist</samp>, which shows a list of contacts. The <samp>contactlist</samp> state definition specifies that  the
                IonicContactsList_Tpl template (which we’ll create in the next step) provides the
                user interface. The  ContactListCtrl controller provides the user interface
                logic.</p>
<p class="p">The ContactListCtrl controller isn’t the usual Visualforce controller. Instead,
                it’s a client-side AngularJS controller, defined here in the JavaScript, in the
                block that begins with <samp>.controller('ContactListCtrl'
                    ...)</samp>. This controller uses a Remote Objects call to retrieve a list of contacts. It then makes that list available in an
                AngularJS scope so that the IonicContactsList_Tpl template can render it.</p>
<p class="p">This example code might not make complete sense until you’re more familiar with
                AngularJS and Ionic. And it might look complicated for such a simple list. The power
                of using Ionic (and AngularJS behind it) becomes apparent as you extend this example
                to add, for example, a contact details screen and search functionality.</p>
</div>
</div>
</div>
<div class="topic task nested1" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_template" lang="en-us" xml:lang="en-us"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic_create_template"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading9"><span class="ph" id="topic-title"><a name="topic-title"></a>Create the List Template</span></h3>
<div class="body taskbody"><div class="shortdesc">Create a template file for each state, or screen, in the app.</div>
<div class="section context">
<p class="p">Here you only need to create one template, for the contacts list screen. The template
                is just another Visualforce
                page.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">Open the Developer Console and
                    click <span class="ph menucascade"><strong class="ph uicontrol">File</strong> | <strong class="ph uicontrol">New</strong> | <strong class="ph uicontrol">Visualforce
                            Page</strong></span>. Enter <kbd class="ph userinput">IonicContactsList_Tpl</kbd> for the page
                    name.</span>
</li>
<li class="li step">
<span class="ph cmd">In the editor, replace any markup with the following.</span>
<div class="itemgroup info">
<div class="codeblock"><pre>&lt;apex:page showHeader="false" sidebar="false" standardStylesheets="false"
    applyHtmlTag="false" applyBodyTag="false"&gt;

&lt;ion-view view-title="Contacts"&gt;

    &lt;ion-content id="content" class="has-header"&gt;

        &lt;ion-list&gt;
            &lt;ion-item ng-repeat="contact in contacts"&gt;
                {{ contact.name }}
                &lt;p&gt;{{ contact.title }}&lt;/p&gt;
            &lt;/ion-item&gt;
        &lt;/ion-list&gt;

    &lt;/ion-content&gt;

&lt;/ion-view&gt;

&lt;/apex:page&gt;</pre></div>
</div>
</li>
</ol>
<div class="section result">
<p class="p">The template uses Ionic user interface directives like <samp>ion-content</samp> and <samp>ion-list</samp>. These
                directives are part of the standard complement of Ionic UI elements.</p>
<p class="p">The template’s real work happens in the <samp>ion-list</samp>. There, an AngularJS <samp>ng-repeat</samp> iterates through the list of contacts that the controller
                made available in the scope, in the app’s JavaScript resource created in the
                previous step. For each contact, the contact’s name and title are displayed, using
                the AngularJS data binding notation, for example, <samp>{{
                    contact.name }}</samp>. The <samp>{{</samp> double
                braces <samp>}}</samp> tell AngularJS to evaluate the
                contents.</p>
<p class="p">By breaking each state’s screen definition into its own template file, Ionic makes it
                easy to create a complex single-page app, while still working in individual screens
                when you’re designing the user interface.</p>
</div>
</div>
</div>
<div class="topic task nested1" id="visualforce_mobile_salesforce1_mobile_frameworks_ionic_test_app" lang="en-us" xml:lang="en-us"><a name="visualforce_mobile_salesforce1_mobile_frameworks_ionic_test_app"></a>
<h3 class="helpHead3" id="Tdxn4tBK-heading10"><span class="ph" id="topic-title"><a name="topic-title"></a>Test the App!</span></h3>
<div class="body taskbody"><div class="shortdesc">You can now test the app in a browser or in Salesforce1.</div>
<div class="section context">
<p class="p">Because this app isn’t using any Salesforce1-specific features,
                such as the <samp>sforce.one</samp> navigation utility
                or the Publisher SDK, you can try it right in your browser.</p>
</div>
<ol class="ol steps enumList">
<li class="li step">
<span class="ph cmd">In the Developer Console, return to
                    the IonicContacts page.</span>
</li>
<li class="li step">
<span class="ph cmd">Click <strong class="ph uicontrol">Preview</strong>.</span>
</li>
</ol>
<div class="section result">
<div class="p">You should see the contacts list in the browser.<div class="fig fignone">
<span class="image image-block"><img alt="Contacts list app built with Ionic" class="image image-block" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-us084bf03975c7346ef7e38e1c883d044c.png"/></span>
</div>
</div>
<p class="p">Of course, there’s nothing like testing it in Salesforce1 on an actual
                device. Where would you add this page to Salesforce1? How would you add
                it? Take five minutes right now and test your memory. Can you add this page to Salesforce1 without referring
                to a prior lesson?</p>
</div>
</div>
</div>
</div>
<div class="topic nested0" id="visualforce_mobile_salesforce1_mobile_frameworks_resources" lang="en-us" xml:lang="en-us" xmlns:xml="http://www.w3.org/XML/1998/namespace"><a name="visualforce_mobile_salesforce1_mobile_frameworks_resources"></a>
<h2 class="helpHead2" id="Tdxn4tBK-heading11"><span class="ph" id="topic-title"><a name="topic-title"></a>Resources</span></h2>
<div class="body">
<ul class="ul bulletList">
<li class="li Documentation"><cite class="cite"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.salesforce1.meta/salesforce1/" target="_blank" title="html (New Window)">Salesforce1 Mobile App
                  Developer Guide</a></cite></li>
<li class="li Documentation"><a class="xref" href="https://developer.salesforce.com/docs/atlas.en-us.206.0.pages.meta/pages/pages_javascript_intro.htm" target="_blank" title="html (New Window)">Using JavaScript in Visualforce Pages</a></li>
</ul>
<ul class="ul bulletList">
<li class="li"><a class="xref" href="https://github.com/Avinava/VisualStrap" target="_blank" title="html (New Window)">VisualStrap: Bootstrap for Visualforce</a> (community
            developed)</li>
<li class="li"><a class="xref" href="http://developer.salesforcefoundation.org/bootstrap-sf1/" target="_blank" title="html (New Window)">Bootstrap SF1: A Salesforce1 styled theme for
               Bootstrap</a></li>
<li class="li"><a class="xref" href="https://github.com/joshbirk/onestarter" target="_blank" title="html (New Window)">OneStarter: Salesforce1 Styling for jQuery</a></li>
</ul>
<ul class="ul bulletList">
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=HI4PnM9kEtc&amp;index=49&amp;list=PLFSi-6JPTf9ghCYhGY8Q6pwK-iQcUcMhZ" target="_blank" title="html (New Window)">Dreamforce session: Building
               Rich Salesforce1 Mobile Applications with Ionic and AngularJS</a></li>
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=R3ytoc2MB60" target="_blank" title="html (New Window)">Webinar: Visualforce in
               Salesforce1</a></li>
<li class="li Videos"><a class="xref" href="https://www.youtube.com/watch?v=W1TbyDH0RaY" target="_blank" title="html (New Window)">Twitter Bootstrap and
               Visualforce</a></li>
</ul>
<div class="box message info"><div class="inner"><div class="bd"><div class="media"><img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usc504a262d3ae7aa180918396b7c09a71.png"/><div class="mediaBd"><p>Remember, this module is meant for
            Salesforce Classic. When you launch your hands-on org, <a class="xref" href="https://help.salesforce.com/articleView?id=lex_switching_uis.htm&amp;language=en_US" target="_blank">switch to Salesforce Classic</a> to complete this
            challenge.</p></div></div></div></div></div>
</div>
</div>
</body></div>